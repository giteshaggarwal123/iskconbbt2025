var XR=Object.defineProperty;var m_=e=>{throw TypeError(e)};var QR=(e,t,r)=>t in e?XR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Up=(e,t,r)=>QR(e,typeof t!="symbol"?t+"":t,r),zp=(e,t,r)=>t.has(e)||m_("Cannot "+r);var _e=(e,t,r)=>(zp(e,t,"read from private field"),r?r.call(e):t.get(e)),ft=(e,t,r)=>t.has(e)?m_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Je=(e,t,r,n)=>(zp(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),ir=(e,t,r)=>(zp(e,t,"access private method"),r);var Kf=(e,t,r,n)=>({set _(s){Je(e,t,s,r)},get _(){return _e(e,t,n)}});function JR(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var nn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function d1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ZR(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var kE={exports:{}},y0={},CE={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sf=Symbol.for("react.element"),eM=Symbol.for("react.portal"),tM=Symbol.for("react.fragment"),rM=Symbol.for("react.strict_mode"),nM=Symbol.for("react.profiler"),sM=Symbol.for("react.provider"),aM=Symbol.for("react.context"),iM=Symbol.for("react.forward_ref"),oM=Symbol.for("react.suspense"),lM=Symbol.for("react.memo"),cM=Symbol.for("react.lazy"),p_=Symbol.iterator;function uM(e){return e===null||typeof e!="object"?null:(e=p_&&e[p_]||e["@@iterator"],typeof e=="function"?e:null)}var TE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AE=Object.assign,PE={};function Vc(e,t,r){this.props=e,this.context=t,this.refs=PE,this.updater=r||TE}Vc.prototype.isReactComponent={};Vc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Vc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function DE(){}DE.prototype=Vc.prototype;function f1(e,t,r){this.props=e,this.context=t,this.refs=PE,this.updater=r||TE}var h1=f1.prototype=new DE;h1.constructor=f1;AE(h1,Vc.prototype);h1.isPureReactComponent=!0;var g_=Array.isArray,RE=Object.prototype.hasOwnProperty,m1={current:null},ME={key:!0,ref:!0,__self:!0,__source:!0};function OE(e,t,r){var n,s={},a=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)RE.call(t,n)&&!ME.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:sf,type:e,key:a,ref:o,props:s,_owner:m1.current}}function dM(e,t){return{$$typeof:sf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function p1(e){return typeof e=="object"&&e!==null&&e.$$typeof===sf}function fM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var x_=/\/+/g;function Vp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?fM(""+e.key):t.toString(36)}function $h(e,t,r,n,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case sf:case eM:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Vp(o,0):n,g_(s)?(r="",e!=null&&(r=e.replace(x_,"$&/")+"/"),$h(s,t,r,"",function(u){return u})):s!=null&&(p1(s)&&(s=dM(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(x_,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",g_(e))for(var l=0;l<e.length;l++){a=e[l];var c=n+Vp(a,l);o+=$h(a,t,r,c,s)}else if(c=uM(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=n+Vp(a,l++),o+=$h(a,t,r,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Yf(e,t,r){if(e==null)return e;var n=[],s=0;return $h(e,n,"","",function(a){return t.call(r,a,s++)}),n}function hM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var yn={current:null},Bh={transition:null},mM={ReactCurrentDispatcher:yn,ReactCurrentBatchConfig:Bh,ReactCurrentOwner:m1};function FE(){throw Error("act(...) is not supported in production builds of React.")}ut.Children={map:Yf,forEach:function(e,t,r){Yf(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Yf(e,function(){t++}),t},toArray:function(e){return Yf(e,function(t){return t})||[]},only:function(e){if(!p1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ut.Component=Vc;ut.Fragment=tM;ut.Profiler=nM;ut.PureComponent=f1;ut.StrictMode=rM;ut.Suspense=oM;ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mM;ut.act=FE;ut.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=AE({},e.props),s=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=m1.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)RE.call(t,c)&&!ME.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:sf,type:e.type,key:s,ref:a,props:n,_owner:o}};ut.createContext=function(e){return e={$$typeof:aM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sM,_context:e},e.Consumer=e};ut.createElement=OE;ut.createFactory=function(e){var t=OE.bind(null,e);return t.type=e,t};ut.createRef=function(){return{current:null}};ut.forwardRef=function(e){return{$$typeof:iM,render:e}};ut.isValidElement=p1;ut.lazy=function(e){return{$$typeof:cM,_payload:{_status:-1,_result:e},_init:hM}};ut.memo=function(e,t){return{$$typeof:lM,type:e,compare:t===void 0?null:t}};ut.startTransition=function(e){var t=Bh.transition;Bh.transition={};try{e()}finally{Bh.transition=t}};ut.unstable_act=FE;ut.useCallback=function(e,t){return yn.current.useCallback(e,t)};ut.useContext=function(e){return yn.current.useContext(e)};ut.useDebugValue=function(){};ut.useDeferredValue=function(e){return yn.current.useDeferredValue(e)};ut.useEffect=function(e,t){return yn.current.useEffect(e,t)};ut.useId=function(){return yn.current.useId()};ut.useImperativeHandle=function(e,t,r){return yn.current.useImperativeHandle(e,t,r)};ut.useInsertionEffect=function(e,t){return yn.current.useInsertionEffect(e,t)};ut.useLayoutEffect=function(e,t){return yn.current.useLayoutEffect(e,t)};ut.useMemo=function(e,t){return yn.current.useMemo(e,t)};ut.useReducer=function(e,t,r){return yn.current.useReducer(e,t,r)};ut.useRef=function(e){return yn.current.useRef(e)};ut.useState=function(e){return yn.current.useState(e)};ut.useSyncExternalStore=function(e,t,r){return yn.current.useSyncExternalStore(e,t,r)};ut.useTransition=function(){return yn.current.useTransition()};ut.version="18.3.1";CE.exports=ut;var x=CE.exports;const ke=d1(x),g1=JR({__proto__:null,default:ke},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pM=x,gM=Symbol.for("react.element"),xM=Symbol.for("react.fragment"),vM=Object.prototype.hasOwnProperty,yM=pM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wM={key:!0,ref:!0,__self:!0,__source:!0};function IE(e,t,r){var n,s={},a=null,o=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)vM.call(t,n)&&!wM.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:gM,type:e,key:a,ref:o,props:s,_owner:yM.current}}y0.Fragment=xM;y0.jsx=IE;y0.jsxs=IE;kE.exports=y0;var i=kE.exports,LE={exports:{}},ts={},$E={exports:{}},BE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,H){var G=O.length;O.push(H);e:for(;0<G;){var K=G-1>>>1,k=O[K];if(0<s(k,H))O[K]=H,O[G]=k,G=K;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var H=O[0],G=O.pop();if(G!==H){O[0]=G;e:for(var K=0,k=O.length,W=k>>>1;K<W;){var R=2*(K+1)-1,M=O[R],re=R+1,oe=O[re];if(0>s(M,G))re<k&&0>s(oe,M)?(O[K]=oe,O[re]=G,K=re):(O[K]=M,O[R]=G,K=R);else if(re<k&&0>s(oe,G))O[K]=oe,O[re]=G,K=re;else break e}}return H}function s(O,H){var G=O.sortIndex-H.sortIndex;return G!==0?G:O.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,g=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(O){for(var H=r(u);H!==null;){if(H.callback===null)n(u);else if(H.startTime<=O)n(u),H.sortIndex=H.expirationTime,t(c,H);else break;H=r(u)}}function b(O){if(m=!1,w(O),!g)if(r(c)!==null)g=!0,Q(S);else{var H=r(u);H!==null&&q(b,H.startTime-O)}}function S(O,H){g=!1,m&&(m=!1,_(C),C=-1),p=!0;var G=h;try{for(w(H),f=r(c);f!==null&&(!(f.expirationTime>H)||O&&!F());){var K=f.callback;if(typeof K=="function"){f.callback=null,h=f.priorityLevel;var k=K(f.expirationTime<=H);H=e.unstable_now(),typeof k=="function"?f.callback=k:f===r(c)&&n(c),w(H)}else n(c);f=r(c)}if(f!==null)var W=!0;else{var R=r(u);R!==null&&q(b,R.startTime-H),W=!1}return W}finally{f=null,h=G,p=!1}}var N=!1,E=null,C=-1,T=5,D=-1;function F(){return!(e.unstable_now()-D<T)}function P(){if(E!==null){var O=e.unstable_now();D=O;var H=!0;try{H=E(!0,O)}finally{H?L():(N=!1,E=null)}}else N=!1}var L;if(typeof y=="function")L=function(){y(P)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,I=A.port2;A.port1.onmessage=P,L=function(){I.postMessage(null)}}else L=function(){v(P,0)};function Q(O){E=O,N||(N=!0,L())}function q(O,H){C=v(function(){O(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,Q(S))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(O){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var G=h;h=H;try{return O()}finally{h=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,H){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var G=h;h=O;try{return H()}finally{h=G}},e.unstable_scheduleCallback=function(O,H,G){var K=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?K+G:K):G=K,O){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=G+k,O={id:d++,callback:H,priorityLevel:O,startTime:G,expirationTime:k,sortIndex:-1},G>K?(O.sortIndex=G,t(u,O),r(c)===null&&O===r(u)&&(m?(_(C),C=-1):m=!0,q(b,G-K))):(O.sortIndex=k,t(c,O),g||p||(g=!0,Q(S))),O},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(O){var H=h;return function(){var G=h;h=H;try{return O.apply(this,arguments)}finally{h=G}}}})(BE);$E.exports=BE;var _M=$E.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bM=x,Jn=_M;function Pe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var UE=new Set,ud={};function rl(e,t){Sc(e,t),Sc(e+"Capture",t)}function Sc(e,t){for(ud[e]=t,e=0;e<t.length;e++)UE.add(t[e])}var Ua=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gx=Object.prototype.hasOwnProperty,SM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v_={},y_={};function EM(e){return gx.call(y_,e)?!0:gx.call(v_,e)?!1:SM.test(e)?y_[e]=!0:(v_[e]=!0,!1)}function NM(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function jM(e,t,r,n){if(t===null||typeof t>"u"||NM(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function wn(e,t,r,n,s,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Gr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Gr[e]=new wn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Gr[t]=new wn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Gr[e]=new wn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Gr[e]=new wn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Gr[e]=new wn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Gr[e]=new wn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Gr[e]=new wn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Gr[e]=new wn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Gr[e]=new wn(e,5,!1,e.toLowerCase(),null,!1,!1)});var x1=/[\-:]([a-z])/g;function v1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(x1,v1);Gr[t]=new wn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(x1,v1);Gr[t]=new wn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(x1,v1);Gr[t]=new wn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Gr[e]=new wn(e,1,!1,e.toLowerCase(),null,!1,!1)});Gr.xlinkHref=new wn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Gr[e]=new wn(e,1,!1,e.toLowerCase(),null,!0,!0)});function y1(e,t,r,n){var s=Gr.hasOwnProperty(t)?Gr[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(jM(t,r,s,n)&&(r=null),n||s===null?EM(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Xa=bM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qf=Symbol.for("react.element"),$l=Symbol.for("react.portal"),Bl=Symbol.for("react.fragment"),w1=Symbol.for("react.strict_mode"),xx=Symbol.for("react.profiler"),zE=Symbol.for("react.provider"),VE=Symbol.for("react.context"),_1=Symbol.for("react.forward_ref"),vx=Symbol.for("react.suspense"),yx=Symbol.for("react.suspense_list"),b1=Symbol.for("react.memo"),fi=Symbol.for("react.lazy"),WE=Symbol.for("react.offscreen"),w_=Symbol.iterator;function cu(e){return e===null||typeof e!="object"?null:(e=w_&&e[w_]||e["@@iterator"],typeof e=="function"?e:null)}var Zt=Object.assign,Wp;function Tu(e){if(Wp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Wp=t&&t[1]||""}return`
`+Wp+e}var Hp=!1;function Gp(e,t){if(!e||Hp)return"";Hp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=n.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Hp=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Tu(e):""}function kM(e){switch(e.tag){case 5:return Tu(e.type);case 16:return Tu("Lazy");case 13:return Tu("Suspense");case 19:return Tu("SuspenseList");case 0:case 2:case 15:return e=Gp(e.type,!1),e;case 11:return e=Gp(e.type.render,!1),e;case 1:return e=Gp(e.type,!0),e;default:return""}}function wx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bl:return"Fragment";case $l:return"Portal";case xx:return"Profiler";case w1:return"StrictMode";case vx:return"Suspense";case yx:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case VE:return(e.displayName||"Context")+".Consumer";case zE:return(e._context.displayName||"Context")+".Provider";case _1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case b1:return t=e.displayName||null,t!==null?t:wx(e.type)||"Memo";case fi:t=e._payload,e=e._init;try{return wx(e(t))}catch{}}return null}function CM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wx(t);case 8:return t===w1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Wi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function HE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function TM(e){var t=HE(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xf(e){e._valueTracker||(e._valueTracker=TM(e))}function GE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=HE(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function om(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _x(e,t){var r=t.checked;return Zt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function __(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Wi(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function KE(e,t){t=t.checked,t!=null&&y1(e,"checked",t,!1)}function bx(e,t){KE(e,t);var r=Wi(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Sx(e,t.type,r):t.hasOwnProperty("defaultValue")&&Sx(e,t.type,Wi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function b_(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Sx(e,t,r){(t!=="number"||om(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Au=Array.isArray;function Jl(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Wi(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ex(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Pe(91));return Zt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function S_(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Pe(92));if(Au(r)){if(1<r.length)throw Error(Pe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Wi(r)}}function YE(e,t){var r=Wi(t.value),n=Wi(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function E_(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function qE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nx(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?qE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Qf,XE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Qf=Qf||document.createElement("div"),Qf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Qf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function dd(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var $u={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AM=["Webkit","ms","Moz","O"];Object.keys($u).forEach(function(e){AM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$u[t]=$u[e]})});function QE(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||$u.hasOwnProperty(e)&&$u[e]?(""+t).trim():t+"px"}function JE(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=QE(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var PM=Zt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jx(e,t){if(t){if(PM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Pe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Pe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Pe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Pe(62))}}function kx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cx=null;function S1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Tx=null,Zl=null,ec=null;function N_(e){if(e=lf(e)){if(typeof Tx!="function")throw Error(Pe(280));var t=e.stateNode;t&&(t=E0(t),Tx(e.stateNode,e.type,t))}}function ZE(e){Zl?ec?ec.push(e):ec=[e]:Zl=e}function eN(){if(Zl){var e=Zl,t=ec;if(ec=Zl=null,N_(e),t)for(e=0;e<t.length;e++)N_(t[e])}}function tN(e,t){return e(t)}function rN(){}var Kp=!1;function nN(e,t,r){if(Kp)return e(t,r);Kp=!0;try{return tN(e,t,r)}finally{Kp=!1,(Zl!==null||ec!==null)&&(rN(),eN())}}function fd(e,t){var r=e.stateNode;if(r===null)return null;var n=E0(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Pe(231,t,typeof r));return r}var Ax=!1;if(Ua)try{var uu={};Object.defineProperty(uu,"passive",{get:function(){Ax=!0}}),window.addEventListener("test",uu,uu),window.removeEventListener("test",uu,uu)}catch{Ax=!1}function DM(e,t,r,n,s,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Bu=!1,lm=null,cm=!1,Px=null,RM={onError:function(e){Bu=!0,lm=e}};function MM(e,t,r,n,s,a,o,l,c){Bu=!1,lm=null,DM.apply(RM,arguments)}function OM(e,t,r,n,s,a,o,l,c){if(MM.apply(this,arguments),Bu){if(Bu){var u=lm;Bu=!1,lm=null}else throw Error(Pe(198));cm||(cm=!0,Px=u)}}function nl(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function sN(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function j_(e){if(nl(e)!==e)throw Error(Pe(188))}function FM(e){var t=e.alternate;if(!t){if(t=nl(e),t===null)throw Error(Pe(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return j_(s),e;if(a===n)return j_(s),t;a=a.sibling}throw Error(Pe(188))}if(r.return!==n.return)r=s,n=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o)throw Error(Pe(189))}}if(r.alternate!==n)throw Error(Pe(190))}if(r.tag!==3)throw Error(Pe(188));return r.stateNode.current===r?e:t}function aN(e){return e=FM(e),e!==null?iN(e):null}function iN(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=iN(e);if(t!==null)return t;e=e.sibling}return null}var oN=Jn.unstable_scheduleCallback,k_=Jn.unstable_cancelCallback,IM=Jn.unstable_shouldYield,LM=Jn.unstable_requestPaint,or=Jn.unstable_now,$M=Jn.unstable_getCurrentPriorityLevel,E1=Jn.unstable_ImmediatePriority,lN=Jn.unstable_UserBlockingPriority,um=Jn.unstable_NormalPriority,BM=Jn.unstable_LowPriority,cN=Jn.unstable_IdlePriority,w0=null,la=null;function UM(e){if(la&&typeof la.onCommitFiberRoot=="function")try{la.onCommitFiberRoot(w0,e,void 0,(e.current.flags&128)===128)}catch{}}var Ls=Math.clz32?Math.clz32:WM,zM=Math.log,VM=Math.LN2;function WM(e){return e>>>=0,e===0?32:31-(zM(e)/VM|0)|0}var Jf=64,Zf=4194304;function Pu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dm(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Pu(l):(a&=o,a!==0&&(n=Pu(a)))}else o=r&~s,o!==0?n=Pu(o):a!==0&&(n=Pu(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ls(t),s=1<<r,n|=e[r],t&=~s;return n}function HM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GM(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-Ls(a),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=HM(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function Dx(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function uN(){var e=Jf;return Jf<<=1,!(Jf&4194240)&&(Jf=64),e}function Yp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function af(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ls(t),e[t]=r}function KM(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Ls(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}function N1(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ls(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var At=0;function dN(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var fN,j1,hN,mN,pN,Rx=!1,eh=[],Ri=null,Mi=null,Oi=null,hd=new Map,md=new Map,pi=[],YM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function C_(e,t){switch(e){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":Mi=null;break;case"mouseover":case"mouseout":Oi=null;break;case"pointerover":case"pointerout":hd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":md.delete(t.pointerId)}}function du(e,t,r,n,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},t!==null&&(t=lf(t),t!==null&&j1(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function qM(e,t,r,n,s){switch(t){case"focusin":return Ri=du(Ri,e,t,r,n,s),!0;case"dragenter":return Mi=du(Mi,e,t,r,n,s),!0;case"mouseover":return Oi=du(Oi,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return hd.set(a,du(hd.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,md.set(a,du(md.get(a)||null,e,t,r,n,s)),!0}return!1}function gN(e){var t=No(e.target);if(t!==null){var r=nl(t);if(r!==null){if(t=r.tag,t===13){if(t=sN(r),t!==null){e.blockedOn=t,pN(e.priority,function(){hN(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Uh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Mx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Cx=n,r.target.dispatchEvent(n),Cx=null}else return t=lf(r),t!==null&&j1(t),e.blockedOn=r,!1;t.shift()}return!0}function T_(e,t,r){Uh(e)&&r.delete(t)}function XM(){Rx=!1,Ri!==null&&Uh(Ri)&&(Ri=null),Mi!==null&&Uh(Mi)&&(Mi=null),Oi!==null&&Uh(Oi)&&(Oi=null),hd.forEach(T_),md.forEach(T_)}function fu(e,t){e.blockedOn===t&&(e.blockedOn=null,Rx||(Rx=!0,Jn.unstable_scheduleCallback(Jn.unstable_NormalPriority,XM)))}function pd(e){function t(s){return fu(s,e)}if(0<eh.length){fu(eh[0],e);for(var r=1;r<eh.length;r++){var n=eh[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ri!==null&&fu(Ri,e),Mi!==null&&fu(Mi,e),Oi!==null&&fu(Oi,e),hd.forEach(t),md.forEach(t),r=0;r<pi.length;r++)n=pi[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<pi.length&&(r=pi[0],r.blockedOn===null);)gN(r),r.blockedOn===null&&pi.shift()}var tc=Xa.ReactCurrentBatchConfig,fm=!0;function QM(e,t,r,n){var s=At,a=tc.transition;tc.transition=null;try{At=1,k1(e,t,r,n)}finally{At=s,tc.transition=a}}function JM(e,t,r,n){var s=At,a=tc.transition;tc.transition=null;try{At=4,k1(e,t,r,n)}finally{At=s,tc.transition=a}}function k1(e,t,r,n){if(fm){var s=Mx(e,t,r,n);if(s===null)sg(e,t,n,hm,r),C_(e,n);else if(qM(s,e,t,r,n))n.stopPropagation();else if(C_(e,n),t&4&&-1<YM.indexOf(e)){for(;s!==null;){var a=lf(s);if(a!==null&&fN(a),a=Mx(e,t,r,n),a===null&&sg(e,t,n,hm,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else sg(e,t,n,null,r)}}var hm=null;function Mx(e,t,r,n){if(hm=null,e=S1(n),e=No(e),e!==null)if(t=nl(e),t===null)e=null;else if(r=t.tag,r===13){if(e=sN(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return hm=e,null}function xN(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($M()){case E1:return 1;case lN:return 4;case um:case BM:return 16;case cN:return 536870912;default:return 16}default:return 16}}var ji=null,C1=null,zh=null;function vN(){if(zh)return zh;var e,t=C1,r=t.length,n,s="value"in ji?ji.value:ji.textContent,a=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[a-n];n++);return zh=s.slice(e,1<n?1-n:void 0)}function Vh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function th(){return!0}function A_(){return!1}function rs(e){function t(r,n,s,a,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?th:A_,this.isPropagationStopped=A_,this}return Zt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=th)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=th)},persist:function(){},isPersistent:th}),t}var Wc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},T1=rs(Wc),of=Zt({},Wc,{view:0,detail:0}),ZM=rs(of),qp,Xp,hu,_0=Zt({},of,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:A1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hu&&(hu&&e.type==="mousemove"?(qp=e.screenX-hu.screenX,Xp=e.screenY-hu.screenY):Xp=qp=0,hu=e),qp)},movementY:function(e){return"movementY"in e?e.movementY:Xp}}),P_=rs(_0),eO=Zt({},_0,{dataTransfer:0}),tO=rs(eO),rO=Zt({},of,{relatedTarget:0}),Qp=rs(rO),nO=Zt({},Wc,{animationName:0,elapsedTime:0,pseudoElement:0}),sO=rs(nO),aO=Zt({},Wc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),iO=rs(aO),oO=Zt({},Wc,{data:0}),D_=rs(oO),lO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dO(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uO[e])?!!t[e]:!1}function A1(){return dO}var fO=Zt({},of,{key:function(e){if(e.key){var t=lO[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cO[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:A1,charCode:function(e){return e.type==="keypress"?Vh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hO=rs(fO),mO=Zt({},_0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R_=rs(mO),pO=Zt({},of,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:A1}),gO=rs(pO),xO=Zt({},Wc,{propertyName:0,elapsedTime:0,pseudoElement:0}),vO=rs(xO),yO=Zt({},_0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wO=rs(yO),_O=[9,13,27,32],P1=Ua&&"CompositionEvent"in window,Uu=null;Ua&&"documentMode"in document&&(Uu=document.documentMode);var bO=Ua&&"TextEvent"in window&&!Uu,yN=Ua&&(!P1||Uu&&8<Uu&&11>=Uu),M_=" ",O_=!1;function wN(e,t){switch(e){case"keyup":return _O.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _N(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ul=!1;function SO(e,t){switch(e){case"compositionend":return _N(t);case"keypress":return t.which!==32?null:(O_=!0,M_);case"textInput":return e=t.data,e===M_&&O_?null:e;default:return null}}function EO(e,t){if(Ul)return e==="compositionend"||!P1&&wN(e,t)?(e=vN(),zh=C1=ji=null,Ul=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yN&&t.locale!=="ko"?null:t.data;default:return null}}var NO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function F_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!NO[e.type]:t==="textarea"}function bN(e,t,r,n){ZE(n),t=mm(t,"onChange"),0<t.length&&(r=new T1("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var zu=null,gd=null;function jO(e){RN(e,0)}function b0(e){var t=Wl(e);if(GE(t))return e}function kO(e,t){if(e==="change")return t}var SN=!1;if(Ua){var Jp;if(Ua){var Zp="oninput"in document;if(!Zp){var I_=document.createElement("div");I_.setAttribute("oninput","return;"),Zp=typeof I_.oninput=="function"}Jp=Zp}else Jp=!1;SN=Jp&&(!document.documentMode||9<document.documentMode)}function L_(){zu&&(zu.detachEvent("onpropertychange",EN),gd=zu=null)}function EN(e){if(e.propertyName==="value"&&b0(gd)){var t=[];bN(t,gd,e,S1(e)),nN(jO,t)}}function CO(e,t,r){e==="focusin"?(L_(),zu=t,gd=r,zu.attachEvent("onpropertychange",EN)):e==="focusout"&&L_()}function TO(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return b0(gd)}function AO(e,t){if(e==="click")return b0(t)}function PO(e,t){if(e==="input"||e==="change")return b0(t)}function DO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vs=typeof Object.is=="function"?Object.is:DO;function xd(e,t){if(Vs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!gx.call(t,s)||!Vs(e[s],t[s]))return!1}return!0}function $_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function B_(e,t){var r=$_(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=$_(r)}}function NN(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?NN(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jN(){for(var e=window,t=om();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=om(e.document)}return t}function D1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function RO(e){var t=jN(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&NN(r.ownerDocument.documentElement,r)){if(n!==null&&D1(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=B_(r,a);var o=B_(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var MO=Ua&&"documentMode"in document&&11>=document.documentMode,zl=null,Ox=null,Vu=null,Fx=!1;function U_(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Fx||zl==null||zl!==om(n)||(n=zl,"selectionStart"in n&&D1(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Vu&&xd(Vu,n)||(Vu=n,n=mm(Ox,"onSelect"),0<n.length&&(t=new T1("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=zl)))}function rh(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Vl={animationend:rh("Animation","AnimationEnd"),animationiteration:rh("Animation","AnimationIteration"),animationstart:rh("Animation","AnimationStart"),transitionend:rh("Transition","TransitionEnd")},eg={},kN={};Ua&&(kN=document.createElement("div").style,"AnimationEvent"in window||(delete Vl.animationend.animation,delete Vl.animationiteration.animation,delete Vl.animationstart.animation),"TransitionEvent"in window||delete Vl.transitionend.transition);function S0(e){if(eg[e])return eg[e];if(!Vl[e])return e;var t=Vl[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in kN)return eg[e]=t[r];return e}var CN=S0("animationend"),TN=S0("animationiteration"),AN=S0("animationstart"),PN=S0("transitionend"),DN=new Map,z_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ro(e,t){DN.set(e,t),rl(t,[e])}for(var tg=0;tg<z_.length;tg++){var rg=z_[tg],OO=rg.toLowerCase(),FO=rg[0].toUpperCase()+rg.slice(1);ro(OO,"on"+FO)}ro(CN,"onAnimationEnd");ro(TN,"onAnimationIteration");ro(AN,"onAnimationStart");ro("dblclick","onDoubleClick");ro("focusin","onFocus");ro("focusout","onBlur");ro(PN,"onTransitionEnd");Sc("onMouseEnter",["mouseout","mouseover"]);Sc("onMouseLeave",["mouseout","mouseover"]);Sc("onPointerEnter",["pointerout","pointerover"]);Sc("onPointerLeave",["pointerout","pointerover"]);rl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rl("onBeforeInput",["compositionend","keypress","textInput","paste"]);rl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Du));function V_(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,OM(n,t,void 0,e),e.currentTarget=null}function RN(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;V_(s,l,u),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;V_(s,l,u),a=c}}}if(cm)throw e=Px,cm=!1,Px=null,e}function $t(e,t){var r=t[Ux];r===void 0&&(r=t[Ux]=new Set);var n=e+"__bubble";r.has(n)||(MN(t,e,2,!1),r.add(n))}function ng(e,t,r){var n=0;t&&(n|=4),MN(r,e,n,t)}var nh="_reactListening"+Math.random().toString(36).slice(2);function vd(e){if(!e[nh]){e[nh]=!0,UE.forEach(function(r){r!=="selectionchange"&&(IO.has(r)||ng(r,!1,e),ng(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[nh]||(t[nh]=!0,ng("selectionchange",!1,t))}}function MN(e,t,r,n){switch(xN(t)){case 1:var s=QM;break;case 4:s=JM;break;default:s=k1}r=s.bind(null,t,r,e),s=void 0,!Ax||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function sg(e,t,r,n,s){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=No(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}nN(function(){var u=a,d=S1(r),f=[];e:{var h=DN.get(e);if(h!==void 0){var p=T1,g=e;switch(e){case"keypress":if(Vh(r)===0)break e;case"keydown":case"keyup":p=hO;break;case"focusin":g="focus",p=Qp;break;case"focusout":g="blur",p=Qp;break;case"beforeblur":case"afterblur":p=Qp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=P_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=tO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=gO;break;case CN:case TN:case AN:p=sO;break;case PN:p=vO;break;case"scroll":p=ZM;break;case"wheel":p=wO;break;case"copy":case"cut":case"paste":p=iO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=R_}var m=(t&4)!==0,v=!m&&e==="scroll",_=m?h!==null?h+"Capture":null:h;m=[];for(var y=u,w;y!==null;){w=y;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,_!==null&&(b=fd(y,_),b!=null&&m.push(yd(y,b,w)))),v)break;y=y.return}0<m.length&&(h=new p(h,g,null,r,d),f.push({event:h,listeners:m}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==Cx&&(g=r.relatedTarget||r.fromElement)&&(No(g)||g[za]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=u,g=g?No(g):null,g!==null&&(v=nl(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(m=P_,b="onMouseLeave",_="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(m=R_,b="onPointerLeave",_="onPointerEnter",y="pointer"),v=p==null?h:Wl(p),w=g==null?h:Wl(g),h=new m(b,y+"leave",p,r,d),h.target=v,h.relatedTarget=w,b=null,No(d)===u&&(m=new m(_,y+"enter",g,r,d),m.target=w,m.relatedTarget=v,b=m),v=b,p&&g)t:{for(m=p,_=g,y=0,w=m;w;w=wl(w))y++;for(w=0,b=_;b;b=wl(b))w++;for(;0<y-w;)m=wl(m),y--;for(;0<w-y;)_=wl(_),w--;for(;y--;){if(m===_||_!==null&&m===_.alternate)break t;m=wl(m),_=wl(_)}m=null}else m=null;p!==null&&W_(f,h,p,m,!1),g!==null&&v!==null&&W_(f,v,g,m,!0)}}e:{if(h=u?Wl(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var S=kO;else if(F_(h))if(SN)S=PO;else{S=TO;var N=CO}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=AO);if(S&&(S=S(e,u))){bN(f,S,r,d);break e}N&&N(e,h,u),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&Sx(h,"number",h.value)}switch(N=u?Wl(u):window,e){case"focusin":(F_(N)||N.contentEditable==="true")&&(zl=N,Ox=u,Vu=null);break;case"focusout":Vu=Ox=zl=null;break;case"mousedown":Fx=!0;break;case"contextmenu":case"mouseup":case"dragend":Fx=!1,U_(f,r,d);break;case"selectionchange":if(MO)break;case"keydown":case"keyup":U_(f,r,d)}var E;if(P1)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Ul?wN(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(yN&&r.locale!=="ko"&&(Ul||C!=="onCompositionStart"?C==="onCompositionEnd"&&Ul&&(E=vN()):(ji=d,C1="value"in ji?ji.value:ji.textContent,Ul=!0)),N=mm(u,C),0<N.length&&(C=new D_(C,e,null,r,d),f.push({event:C,listeners:N}),E?C.data=E:(E=_N(r),E!==null&&(C.data=E)))),(E=bO?SO(e,r):EO(e,r))&&(u=mm(u,"onBeforeInput"),0<u.length&&(d=new D_("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=E))}RN(f,t)})}function yd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function mm(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=fd(e,r),a!=null&&n.unshift(yd(e,a,s)),a=fd(e,t),a!=null&&n.push(yd(e,a,s))),e=e.return}return n}function wl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function W_(e,t,r,n,s){for(var a=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=fd(r,a),c!=null&&o.unshift(yd(r,c,l))):s||(c=fd(r,a),c!=null&&o.push(yd(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var LO=/\r\n?/g,$O=/\u0000|\uFFFD/g;function H_(e){return(typeof e=="string"?e:""+e).replace(LO,`
`).replace($O,"")}function sh(e,t,r){if(t=H_(t),H_(e)!==t&&r)throw Error(Pe(425))}function pm(){}var Ix=null,Lx=null;function $x(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Bx=typeof setTimeout=="function"?setTimeout:void 0,BO=typeof clearTimeout=="function"?clearTimeout:void 0,G_=typeof Promise=="function"?Promise:void 0,UO=typeof queueMicrotask=="function"?queueMicrotask:typeof G_<"u"?function(e){return G_.resolve(null).then(e).catch(zO)}:Bx;function zO(e){setTimeout(function(){throw e})}function ag(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),pd(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);pd(t)}function Fi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function K_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Hc=Math.random().toString(36).slice(2),ia="__reactFiber$"+Hc,wd="__reactProps$"+Hc,za="__reactContainer$"+Hc,Ux="__reactEvents$"+Hc,VO="__reactListeners$"+Hc,WO="__reactHandles$"+Hc;function No(e){var t=e[ia];if(t)return t;for(var r=e.parentNode;r;){if(t=r[za]||r[ia]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=K_(e);e!==null;){if(r=e[ia])return r;e=K_(e)}return t}e=r,r=e.parentNode}return null}function lf(e){return e=e[ia]||e[za],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Pe(33))}function E0(e){return e[wd]||null}var zx=[],Hl=-1;function no(e){return{current:e}}function zt(e){0>Hl||(e.current=zx[Hl],zx[Hl]=null,Hl--)}function Ft(e,t){Hl++,zx[Hl]=e.current,e.current=t}var Hi={},ln=no(Hi),An=no(!1),Lo=Hi;function Ec(e,t){var r=e.type.contextTypes;if(!r)return Hi;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pn(e){return e=e.childContextTypes,e!=null}function gm(){zt(An),zt(ln)}function Y_(e,t,r){if(ln.current!==Hi)throw Error(Pe(168));Ft(ln,t),Ft(An,r)}function ON(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(Pe(108,CM(e)||"Unknown",s));return Zt({},r,n)}function xm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Hi,Lo=ln.current,Ft(ln,e),Ft(An,An.current),!0}function q_(e,t,r){var n=e.stateNode;if(!n)throw Error(Pe(169));r?(e=ON(e,t,Lo),n.__reactInternalMemoizedMergedChildContext=e,zt(An),zt(ln),Ft(ln,e)):zt(An),Ft(An,r)}var Ta=null,N0=!1,ig=!1;function FN(e){Ta===null?Ta=[e]:Ta.push(e)}function HO(e){N0=!0,FN(e)}function so(){if(!ig&&Ta!==null){ig=!0;var e=0,t=At;try{var r=Ta;for(At=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ta=null,N0=!1}catch(s){throw Ta!==null&&(Ta=Ta.slice(e+1)),oN(E1,so),s}finally{At=t,ig=!1}}return null}var Gl=[],Kl=0,vm=null,ym=0,cs=[],us=0,$o=null,Pa=1,Da="";function go(e,t){Gl[Kl++]=ym,Gl[Kl++]=vm,vm=e,ym=t}function IN(e,t,r){cs[us++]=Pa,cs[us++]=Da,cs[us++]=$o,$o=e;var n=Pa;e=Da;var s=32-Ls(n)-1;n&=~(1<<s),r+=1;var a=32-Ls(t)+s;if(30<a){var o=s-s%5;a=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Pa=1<<32-Ls(t)+s|r<<s|n,Da=a+e}else Pa=1<<a|r<<s|n,Da=e}function R1(e){e.return!==null&&(go(e,1),IN(e,1,0))}function M1(e){for(;e===vm;)vm=Gl[--Kl],Gl[Kl]=null,ym=Gl[--Kl],Gl[Kl]=null;for(;e===$o;)$o=cs[--us],cs[us]=null,Da=cs[--us],cs[us]=null,Pa=cs[--us],cs[us]=null}var Xn=null,Yn=null,Wt=!1,Ds=null;function LN(e,t){var r=ds(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function X_(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xn=e,Yn=Fi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xn=e,Yn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=$o!==null?{id:Pa,overflow:Da}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ds(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Xn=e,Yn=null,!0):!1;default:return!1}}function Vx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Wx(e){if(Wt){var t=Yn;if(t){var r=t;if(!X_(e,t)){if(Vx(e))throw Error(Pe(418));t=Fi(r.nextSibling);var n=Xn;t&&X_(e,t)?LN(n,r):(e.flags=e.flags&-4097|2,Wt=!1,Xn=e)}}else{if(Vx(e))throw Error(Pe(418));e.flags=e.flags&-4097|2,Wt=!1,Xn=e}}}function Q_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xn=e}function ah(e){if(e!==Xn)return!1;if(!Wt)return Q_(e),Wt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!$x(e.type,e.memoizedProps)),t&&(t=Yn)){if(Vx(e))throw $N(),Error(Pe(418));for(;t;)LN(e,t),t=Fi(t.nextSibling)}if(Q_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Pe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Yn=Fi(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Yn=null}}else Yn=Xn?Fi(e.stateNode.nextSibling):null;return!0}function $N(){for(var e=Yn;e;)e=Fi(e.nextSibling)}function Nc(){Yn=Xn=null,Wt=!1}function O1(e){Ds===null?Ds=[e]:Ds.push(e)}var GO=Xa.ReactCurrentBatchConfig;function mu(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Pe(309));var n=r.stateNode}if(!n)throw Error(Pe(147,e));var s=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(Pe(284));if(!r._owner)throw Error(Pe(290,e))}return e}function ih(e,t){throw e=Object.prototype.toString.call(t),Error(Pe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function J_(e){var t=e._init;return t(e._payload)}function BN(e){function t(_,y){if(e){var w=_.deletions;w===null?(_.deletions=[y],_.flags|=16):w.push(y)}}function r(_,y){if(!e)return null;for(;y!==null;)t(_,y),y=y.sibling;return null}function n(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function s(_,y){return _=Bi(_,y),_.index=0,_.sibling=null,_}function a(_,y,w){return _.index=w,e?(w=_.alternate,w!==null?(w=w.index,w<y?(_.flags|=2,y):w):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return e&&_.alternate===null&&(_.flags|=2),_}function l(_,y,w,b){return y===null||y.tag!==6?(y=hg(w,_.mode,b),y.return=_,y):(y=s(y,w),y.return=_,y)}function c(_,y,w,b){var S=w.type;return S===Bl?d(_,y,w.props.children,b,w.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===fi&&J_(S)===y.type)?(b=s(y,w.props),b.ref=mu(_,y,w),b.return=_,b):(b=Xh(w.type,w.key,w.props,null,_.mode,b),b.ref=mu(_,y,w),b.return=_,b)}function u(_,y,w,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=mg(w,_.mode,b),y.return=_,y):(y=s(y,w.children||[]),y.return=_,y)}function d(_,y,w,b,S){return y===null||y.tag!==7?(y=Mo(w,_.mode,b,S),y.return=_,y):(y=s(y,w),y.return=_,y)}function f(_,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=hg(""+y,_.mode,w),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case qf:return w=Xh(y.type,y.key,y.props,null,_.mode,w),w.ref=mu(_,null,y),w.return=_,w;case $l:return y=mg(y,_.mode,w),y.return=_,y;case fi:var b=y._init;return f(_,b(y._payload),w)}if(Au(y)||cu(y))return y=Mo(y,_.mode,w,null),y.return=_,y;ih(_,y)}return null}function h(_,y,w,b){var S=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:l(_,y,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case qf:return w.key===S?c(_,y,w,b):null;case $l:return w.key===S?u(_,y,w,b):null;case fi:return S=w._init,h(_,y,S(w._payload),b)}if(Au(w)||cu(w))return S!==null?null:d(_,y,w,b,null);ih(_,w)}return null}function p(_,y,w,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return _=_.get(w)||null,l(y,_,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case qf:return _=_.get(b.key===null?w:b.key)||null,c(y,_,b,S);case $l:return _=_.get(b.key===null?w:b.key)||null,u(y,_,b,S);case fi:var N=b._init;return p(_,y,w,N(b._payload),S)}if(Au(b)||cu(b))return _=_.get(w)||null,d(y,_,b,S,null);ih(y,b)}return null}function g(_,y,w,b){for(var S=null,N=null,E=y,C=y=0,T=null;E!==null&&C<w.length;C++){E.index>C?(T=E,E=null):T=E.sibling;var D=h(_,E,w[C],b);if(D===null){E===null&&(E=T);break}e&&E&&D.alternate===null&&t(_,E),y=a(D,y,C),N===null?S=D:N.sibling=D,N=D,E=T}if(C===w.length)return r(_,E),Wt&&go(_,C),S;if(E===null){for(;C<w.length;C++)E=f(_,w[C],b),E!==null&&(y=a(E,y,C),N===null?S=E:N.sibling=E,N=E);return Wt&&go(_,C),S}for(E=n(_,E);C<w.length;C++)T=p(E,_,C,w[C],b),T!==null&&(e&&T.alternate!==null&&E.delete(T.key===null?C:T.key),y=a(T,y,C),N===null?S=T:N.sibling=T,N=T);return e&&E.forEach(function(F){return t(_,F)}),Wt&&go(_,C),S}function m(_,y,w,b){var S=cu(w);if(typeof S!="function")throw Error(Pe(150));if(w=S.call(w),w==null)throw Error(Pe(151));for(var N=S=null,E=y,C=y=0,T=null,D=w.next();E!==null&&!D.done;C++,D=w.next()){E.index>C?(T=E,E=null):T=E.sibling;var F=h(_,E,D.value,b);if(F===null){E===null&&(E=T);break}e&&E&&F.alternate===null&&t(_,E),y=a(F,y,C),N===null?S=F:N.sibling=F,N=F,E=T}if(D.done)return r(_,E),Wt&&go(_,C),S;if(E===null){for(;!D.done;C++,D=w.next())D=f(_,D.value,b),D!==null&&(y=a(D,y,C),N===null?S=D:N.sibling=D,N=D);return Wt&&go(_,C),S}for(E=n(_,E);!D.done;C++,D=w.next())D=p(E,_,C,D.value,b),D!==null&&(e&&D.alternate!==null&&E.delete(D.key===null?C:D.key),y=a(D,y,C),N===null?S=D:N.sibling=D,N=D);return e&&E.forEach(function(P){return t(_,P)}),Wt&&go(_,C),S}function v(_,y,w,b){if(typeof w=="object"&&w!==null&&w.type===Bl&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case qf:e:{for(var S=w.key,N=y;N!==null;){if(N.key===S){if(S=w.type,S===Bl){if(N.tag===7){r(_,N.sibling),y=s(N,w.props.children),y.return=_,_=y;break e}}else if(N.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===fi&&J_(S)===N.type){r(_,N.sibling),y=s(N,w.props),y.ref=mu(_,N,w),y.return=_,_=y;break e}r(_,N);break}else t(_,N);N=N.sibling}w.type===Bl?(y=Mo(w.props.children,_.mode,b,w.key),y.return=_,_=y):(b=Xh(w.type,w.key,w.props,null,_.mode,b),b.ref=mu(_,y,w),b.return=_,_=b)}return o(_);case $l:e:{for(N=w.key;y!==null;){if(y.key===N)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){r(_,y.sibling),y=s(y,w.children||[]),y.return=_,_=y;break e}else{r(_,y);break}else t(_,y);y=y.sibling}y=mg(w,_.mode,b),y.return=_,_=y}return o(_);case fi:return N=w._init,v(_,y,N(w._payload),b)}if(Au(w))return g(_,y,w,b);if(cu(w))return m(_,y,w,b);ih(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(r(_,y.sibling),y=s(y,w),y.return=_,_=y):(r(_,y),y=hg(w,_.mode,b),y.return=_,_=y),o(_)):r(_,y)}return v}var jc=BN(!0),UN=BN(!1),wm=no(null),_m=null,Yl=null,F1=null;function I1(){F1=Yl=_m=null}function L1(e){var t=wm.current;zt(wm),e._currentValue=t}function Hx(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function rc(e,t){_m=e,F1=Yl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Cn=!0),e.firstContext=null)}function gs(e){var t=e._currentValue;if(F1!==e)if(e={context:e,memoizedValue:t,next:null},Yl===null){if(_m===null)throw Error(Pe(308));Yl=e,_m.dependencies={lanes:0,firstContext:e}}else Yl=Yl.next=e;return t}var jo=null;function $1(e){jo===null?jo=[e]:jo.push(e)}function zN(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,$1(t)):(r.next=s.next,s.next=r),t.interleaved=r,Va(e,n)}function Va(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var hi=!1;function B1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function VN(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ii(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,gt&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Va(e,r)}return s=n.interleaved,s===null?(t.next=t,$1(n)):(t.next=s.next,s.next=t),n.interleaved=t,Va(e,r)}function Wh(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,N1(e,r)}}function Z_(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=t:a=a.next=t}else s=a=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function bm(e,t,r,n){var s=e.updateQueue;hi=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var f=s.baseState;o=0,d=u=c=null,l=a;do{var h=l.lane,p=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,m=l;switch(h=t,p=r,m.tag){case 1:if(g=m.payload,typeof g=="function"){f=g.call(p,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,h=typeof g=="function"?g.call(p,f,h):g,h==null)break e;f=Zt({},f,h);break e;case 2:hi=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,o|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);Uo|=o,e.lanes=o,e.memoizedState=f}}function eb(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(Pe(191,s));s.call(n)}}}var cf={},ca=no(cf),_d=no(cf),bd=no(cf);function ko(e){if(e===cf)throw Error(Pe(174));return e}function U1(e,t){switch(Ft(bd,t),Ft(_d,e),Ft(ca,cf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Nx(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Nx(t,e)}zt(ca),Ft(ca,t)}function kc(){zt(ca),zt(_d),zt(bd)}function WN(e){ko(bd.current);var t=ko(ca.current),r=Nx(t,e.type);t!==r&&(Ft(_d,e),Ft(ca,r))}function z1(e){_d.current===e&&(zt(ca),zt(_d))}var Qt=no(0);function Sm(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var og=[];function V1(){for(var e=0;e<og.length;e++)og[e]._workInProgressVersionPrimary=null;og.length=0}var Hh=Xa.ReactCurrentDispatcher,lg=Xa.ReactCurrentBatchConfig,Bo=0,Jt=null,wr=null,kr=null,Em=!1,Wu=!1,Sd=0,KO=0;function qr(){throw Error(Pe(321))}function W1(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Vs(e[r],t[r]))return!1;return!0}function H1(e,t,r,n,s,a){if(Bo=a,Jt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Hh.current=e===null||e.memoizedState===null?QO:JO,e=r(n,s),Wu){a=0;do{if(Wu=!1,Sd=0,25<=a)throw Error(Pe(301));a+=1,kr=wr=null,t.updateQueue=null,Hh.current=ZO,e=r(n,s)}while(Wu)}if(Hh.current=Nm,t=wr!==null&&wr.next!==null,Bo=0,kr=wr=Jt=null,Em=!1,t)throw Error(Pe(300));return e}function G1(){var e=Sd!==0;return Sd=0,e}function ta(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kr===null?Jt.memoizedState=kr=e:kr=kr.next=e,kr}function xs(){if(wr===null){var e=Jt.alternate;e=e!==null?e.memoizedState:null}else e=wr.next;var t=kr===null?Jt.memoizedState:kr.next;if(t!==null)kr=t,wr=e;else{if(e===null)throw Error(Pe(310));wr=e,e={memoizedState:wr.memoizedState,baseState:wr.baseState,baseQueue:wr.baseQueue,queue:wr.queue,next:null},kr===null?Jt.memoizedState=kr=e:kr=kr.next=e}return kr}function Ed(e,t){return typeof t=="function"?t(e):t}function cg(e){var t=xs(),r=t.queue;if(r===null)throw Error(Pe(311));r.lastRenderedReducer=e;var n=wr,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((Bo&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,Jt.lanes|=d,Uo|=d}u=u.next}while(u!==null&&u!==a);c===null?o=n:c.next=l,Vs(n,t.memoizedState)||(Cn=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do a=s.lane,Jt.lanes|=a,Uo|=a,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ug(e){var t=xs(),r=t.queue;if(r===null)throw Error(Pe(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,a=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=e(a,o.action),o=o.next;while(o!==s);Vs(a,t.memoizedState)||(Cn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function HN(){}function GN(e,t){var r=Jt,n=xs(),s=t(),a=!Vs(n.memoizedState,s);if(a&&(n.memoizedState=s,Cn=!0),n=n.queue,K1(qN.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||kr!==null&&kr.memoizedState.tag&1){if(r.flags|=2048,Nd(9,YN.bind(null,r,n,s,t),void 0,null),Dr===null)throw Error(Pe(349));Bo&30||KN(r,t,s)}return s}function KN(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Jt.updateQueue,t===null?(t={lastEffect:null,stores:null},Jt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function YN(e,t,r,n){t.value=r,t.getSnapshot=n,XN(t)&&QN(e)}function qN(e,t,r){return r(function(){XN(t)&&QN(e)})}function XN(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Vs(e,r)}catch{return!0}}function QN(e){var t=Va(e,1);t!==null&&$s(t,e,1,-1)}function tb(e){var t=ta();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ed,lastRenderedState:e},t.queue=e,e=e.dispatch=XO.bind(null,Jt,e),[t.memoizedState,e]}function Nd(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Jt.updateQueue,t===null?(t={lastEffect:null,stores:null},Jt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function JN(){return xs().memoizedState}function Gh(e,t,r,n){var s=ta();Jt.flags|=e,s.memoizedState=Nd(1|t,r,void 0,n===void 0?null:n)}function j0(e,t,r,n){var s=xs();n=n===void 0?null:n;var a=void 0;if(wr!==null){var o=wr.memoizedState;if(a=o.destroy,n!==null&&W1(n,o.deps)){s.memoizedState=Nd(t,r,a,n);return}}Jt.flags|=e,s.memoizedState=Nd(1|t,r,a,n)}function rb(e,t){return Gh(8390656,8,e,t)}function K1(e,t){return j0(2048,8,e,t)}function ZN(e,t){return j0(4,2,e,t)}function ej(e,t){return j0(4,4,e,t)}function tj(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function rj(e,t,r){return r=r!=null?r.concat([e]):null,j0(4,4,tj.bind(null,t,e),r)}function Y1(){}function nj(e,t){var r=xs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&W1(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function sj(e,t){var r=xs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&W1(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function aj(e,t,r){return Bo&21?(Vs(r,t)||(r=uN(),Jt.lanes|=r,Uo|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Cn=!0),e.memoizedState=r)}function YO(e,t){var r=At;At=r!==0&&4>r?r:4,e(!0);var n=lg.transition;lg.transition={};try{e(!1),t()}finally{At=r,lg.transition=n}}function ij(){return xs().memoizedState}function qO(e,t,r){var n=$i(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},oj(e))lj(t,r);else if(r=zN(e,t,r,n),r!==null){var s=gn();$s(r,e,n,s),cj(r,t,n)}}function XO(e,t,r){var n=$i(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(oj(e))lj(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,Vs(l,o)){var c=t.interleaved;c===null?(s.next=s,$1(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=zN(e,t,s,n),r!==null&&(s=gn(),$s(r,e,n,s),cj(r,t,n))}}function oj(e){var t=e.alternate;return e===Jt||t!==null&&t===Jt}function lj(e,t){Wu=Em=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function cj(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,N1(e,r)}}var Nm={readContext:gs,useCallback:qr,useContext:qr,useEffect:qr,useImperativeHandle:qr,useInsertionEffect:qr,useLayoutEffect:qr,useMemo:qr,useReducer:qr,useRef:qr,useState:qr,useDebugValue:qr,useDeferredValue:qr,useTransition:qr,useMutableSource:qr,useSyncExternalStore:qr,useId:qr,unstable_isNewReconciler:!1},QO={readContext:gs,useCallback:function(e,t){return ta().memoizedState=[e,t===void 0?null:t],e},useContext:gs,useEffect:rb,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Gh(4194308,4,tj.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Gh(4194308,4,e,t)},useInsertionEffect:function(e,t){return Gh(4,2,e,t)},useMemo:function(e,t){var r=ta();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ta();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=qO.bind(null,Jt,e),[n.memoizedState,e]},useRef:function(e){var t=ta();return e={current:e},t.memoizedState=e},useState:tb,useDebugValue:Y1,useDeferredValue:function(e){return ta().memoizedState=e},useTransition:function(){var e=tb(!1),t=e[0];return e=YO.bind(null,e[1]),ta().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Jt,s=ta();if(Wt){if(r===void 0)throw Error(Pe(407));r=r()}else{if(r=t(),Dr===null)throw Error(Pe(349));Bo&30||KN(n,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,rb(qN.bind(null,n,a,e),[e]),n.flags|=2048,Nd(9,YN.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=ta(),t=Dr.identifierPrefix;if(Wt){var r=Da,n=Pa;r=(n&~(1<<32-Ls(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Sd++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=KO++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},JO={readContext:gs,useCallback:nj,useContext:gs,useEffect:K1,useImperativeHandle:rj,useInsertionEffect:ZN,useLayoutEffect:ej,useMemo:sj,useReducer:cg,useRef:JN,useState:function(){return cg(Ed)},useDebugValue:Y1,useDeferredValue:function(e){var t=xs();return aj(t,wr.memoizedState,e)},useTransition:function(){var e=cg(Ed)[0],t=xs().memoizedState;return[e,t]},useMutableSource:HN,useSyncExternalStore:GN,useId:ij,unstable_isNewReconciler:!1},ZO={readContext:gs,useCallback:nj,useContext:gs,useEffect:K1,useImperativeHandle:rj,useInsertionEffect:ZN,useLayoutEffect:ej,useMemo:sj,useReducer:ug,useRef:JN,useState:function(){return ug(Ed)},useDebugValue:Y1,useDeferredValue:function(e){var t=xs();return wr===null?t.memoizedState=e:aj(t,wr.memoizedState,e)},useTransition:function(){var e=ug(Ed)[0],t=xs().memoizedState;return[e,t]},useMutableSource:HN,useSyncExternalStore:GN,useId:ij,unstable_isNewReconciler:!1};function ks(e,t){if(e&&e.defaultProps){t=Zt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Gx(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Zt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var k0={isMounted:function(e){return(e=e._reactInternals)?nl(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=gn(),s=$i(e),a=Oa(n,s);a.payload=t,r!=null&&(a.callback=r),t=Ii(e,a,s),t!==null&&($s(t,e,s,n),Wh(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=gn(),s=$i(e),a=Oa(n,s);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Ii(e,a,s),t!==null&&($s(t,e,s,n),Wh(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=gn(),n=$i(e),s=Oa(r,n);s.tag=2,t!=null&&(s.callback=t),t=Ii(e,s,n),t!==null&&($s(t,e,n,r),Wh(t,e,n))}};function nb(e,t,r,n,s,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,o):t.prototype&&t.prototype.isPureReactComponent?!xd(r,n)||!xd(s,a):!0}function uj(e,t,r){var n=!1,s=Hi,a=t.contextType;return typeof a=="object"&&a!==null?a=gs(a):(s=Pn(t)?Lo:ln.current,n=t.contextTypes,a=(n=n!=null)?Ec(e,s):Hi),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=k0,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function sb(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&k0.enqueueReplaceState(t,t.state,null)}function Kx(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},B1(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=gs(a):(a=Pn(t)?Lo:ln.current,s.context=Ec(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Gx(e,t,a,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&k0.enqueueReplaceState(s,s.state,null),bm(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Cc(e,t){try{var r="",n=t;do r+=kM(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function dg(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Yx(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var e5=typeof WeakMap=="function"?WeakMap:Map;function dj(e,t,r){r=Oa(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){km||(km=!0,sv=n),Yx(e,t)},r}function fj(e,t,r){r=Oa(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Yx(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Yx(e,t),typeof n!="function"&&(Li===null?Li=new Set([this]):Li.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function ab(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new e5;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=m5.bind(null,e,t,r),t.then(e,e))}function ib(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ob(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Oa(-1,1),t.tag=2,Ii(r,t,1))),r.lanes|=1),e)}var t5=Xa.ReactCurrentOwner,Cn=!1;function fn(e,t,r,n){t.child=e===null?UN(t,null,r,n):jc(t,e.child,r,n)}function lb(e,t,r,n,s){r=r.render;var a=t.ref;return rc(t,s),n=H1(e,t,r,n,a,s),r=G1(),e!==null&&!Cn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wa(e,t,s)):(Wt&&r&&R1(t),t.flags|=1,fn(e,t,n,s),t.child)}function cb(e,t,r,n,s){if(e===null){var a=r.type;return typeof a=="function"&&!ry(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,hj(e,t,a,n,s)):(e=Xh(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:xd,r(o,n)&&e.ref===t.ref)return Wa(e,t,s)}return t.flags|=1,e=Bi(a,n),e.ref=t.ref,e.return=t,t.child=e}function hj(e,t,r,n,s){if(e!==null){var a=e.memoizedProps;if(xd(a,n)&&e.ref===t.ref)if(Cn=!1,t.pendingProps=n=a,(e.lanes&s)!==0)e.flags&131072&&(Cn=!0);else return t.lanes=e.lanes,Wa(e,t,s)}return qx(e,t,r,n,s)}function mj(e,t,r){var n=t.pendingProps,s=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ft(Xl,Vn),Vn|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ft(Xl,Vn),Vn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Ft(Xl,Vn),Vn|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Ft(Xl,Vn),Vn|=n;return fn(e,t,s,r),t.child}function pj(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function qx(e,t,r,n,s){var a=Pn(r)?Lo:ln.current;return a=Ec(t,a),rc(t,s),r=H1(e,t,r,n,a,s),n=G1(),e!==null&&!Cn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wa(e,t,s)):(Wt&&n&&R1(t),t.flags|=1,fn(e,t,r,s),t.child)}function ub(e,t,r,n,s){if(Pn(r)){var a=!0;xm(t)}else a=!1;if(rc(t,s),t.stateNode===null)Kh(e,t),uj(t,r,n),Kx(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=gs(u):(u=Pn(r)?Lo:ln.current,u=Ec(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&sb(t,o,n,u),hi=!1;var h=t.memoizedState;o.state=h,bm(t,n,o,s),c=t.memoizedState,l!==n||h!==c||An.current||hi?(typeof d=="function"&&(Gx(t,r,d,n),c=t.memoizedState),(l=hi||nb(t,r,l,n,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,VN(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:ks(t.type,l),o.props=u,f=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=gs(c):(c=Pn(r)?Lo:ln.current,c=Ec(t,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&sb(t,o,n,c),hi=!1,h=t.memoizedState,o.state=h,bm(t,n,o,s);var g=t.memoizedState;l!==f||h!==g||An.current||hi?(typeof p=="function"&&(Gx(t,r,p,n),g=t.memoizedState),(u=hi||nb(t,r,u,n,h,g,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),o.props=n,o.state=g,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Xx(e,t,r,n,a,s)}function Xx(e,t,r,n,s,a){pj(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&q_(t,r,!1),Wa(e,t,a);n=t.stateNode,t5.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=jc(t,e.child,null,a),t.child=jc(t,null,l,a)):fn(e,t,l,a),t.memoizedState=n.state,s&&q_(t,r,!0),t.child}function gj(e){var t=e.stateNode;t.pendingContext?Y_(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Y_(e,t.context,!1),U1(e,t.containerInfo)}function db(e,t,r,n,s){return Nc(),O1(s),t.flags|=256,fn(e,t,r,n),t.child}var Qx={dehydrated:null,treeContext:null,retryLane:0};function Jx(e){return{baseLanes:e,cachePool:null,transitions:null}}function xj(e,t,r){var n=t.pendingProps,s=Qt.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ft(Qt,s&1),e===null)return Wx(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,a?(n=t.mode,a=t.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=A0(o,n,0,null),e=Mo(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Jx(r),t.memoizedState=Qx,e):q1(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return r5(e,t,o,n,l,s,r);if(a){a=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Bi(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Bi(l,a):(a=Mo(a,o,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,o=e.child.memoizedState,o=o===null?Jx(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~r,t.memoizedState=Qx,n}return a=e.child,e=a.sibling,n=Bi(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function q1(e,t){return t=A0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function oh(e,t,r,n){return n!==null&&O1(n),jc(t,e.child,null,r),e=q1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function r5(e,t,r,n,s,a,o){if(r)return t.flags&256?(t.flags&=-257,n=dg(Error(Pe(422))),oh(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,s=t.mode,n=A0({mode:"visible",children:n.children},s,0,null),a=Mo(a,s,o,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&jc(t,e.child,null,o),t.child.memoizedState=Jx(o),t.memoizedState=Qx,a);if(!(t.mode&1))return oh(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(Pe(419)),n=dg(a,n,void 0),oh(e,t,o,n)}if(l=(o&e.childLanes)!==0,Cn||l){if(n=Dr,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Va(e,s),$s(n,e,s,-1))}return ty(),n=dg(Error(Pe(421))),oh(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=p5.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,Yn=Fi(s.nextSibling),Xn=t,Wt=!0,Ds=null,e!==null&&(cs[us++]=Pa,cs[us++]=Da,cs[us++]=$o,Pa=e.id,Da=e.overflow,$o=t),t=q1(t,n.children),t.flags|=4096,t)}function fb(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Hx(e.return,t,r)}function fg(e,t,r,n,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function vj(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(fn(e,t,n.children,r),n=Qt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fb(e,r,t);else if(e.tag===19)fb(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ft(Qt,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Sm(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),fg(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Sm(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}fg(t,!0,r,null,a);break;case"together":fg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Kh(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Uo|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Pe(153));if(t.child!==null){for(e=t.child,r=Bi(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Bi(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function n5(e,t,r){switch(t.tag){case 3:gj(t),Nc();break;case 5:WN(t);break;case 1:Pn(t.type)&&xm(t);break;case 4:U1(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Ft(wm,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ft(Qt,Qt.current&1),t.flags|=128,null):r&t.child.childLanes?xj(e,t,r):(Ft(Qt,Qt.current&1),e=Wa(e,t,r),e!==null?e.sibling:null);Ft(Qt,Qt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return vj(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ft(Qt,Qt.current),n)break;return null;case 22:case 23:return t.lanes=0,mj(e,t,r)}return Wa(e,t,r)}var yj,Zx,wj,_j;yj=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Zx=function(){};wj=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,ko(ca.current);var a=null;switch(r){case"input":s=_x(e,s),n=_x(e,n),a=[];break;case"select":s=Zt({},s,{value:void 0}),n=Zt({},n,{value:void 0}),a=[];break;case"textarea":s=Ex(e,s),n=Ex(e,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=pm)}jx(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ud.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ud.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&$t("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};_j=function(e,t,r,n){r!==n&&(t.flags|=4)};function pu(e,t){if(!Wt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Xr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function s5(e,t,r){var n=t.pendingProps;switch(M1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xr(t),null;case 1:return Pn(t.type)&&gm(),Xr(t),null;case 3:return n=t.stateNode,kc(),zt(An),zt(ln),V1(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ah(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ds!==null&&(ov(Ds),Ds=null))),Zx(e,t),Xr(t),null;case 5:z1(t);var s=ko(bd.current);if(r=t.type,e!==null&&t.stateNode!=null)wj(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Pe(166));return Xr(t),null}if(e=ko(ca.current),ah(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[ia]=t,n[wd]=a,e=(t.mode&1)!==0,r){case"dialog":$t("cancel",n),$t("close",n);break;case"iframe":case"object":case"embed":$t("load",n);break;case"video":case"audio":for(s=0;s<Du.length;s++)$t(Du[s],n);break;case"source":$t("error",n);break;case"img":case"image":case"link":$t("error",n),$t("load",n);break;case"details":$t("toggle",n);break;case"input":__(n,a),$t("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},$t("invalid",n);break;case"textarea":S_(n,a),$t("invalid",n)}jx(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&sh(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&sh(n.textContent,l,e),s=["children",""+l]):ud.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&$t("scroll",n)}switch(r){case"input":Xf(n),b_(n,a,!0);break;case"textarea":Xf(n),E_(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=pm)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=qE(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ia]=t,e[wd]=n,yj(e,t,!1,!1),t.stateNode=e;e:{switch(o=kx(r,n),r){case"dialog":$t("cancel",e),$t("close",e),s=n;break;case"iframe":case"object":case"embed":$t("load",e),s=n;break;case"video":case"audio":for(s=0;s<Du.length;s++)$t(Du[s],e);s=n;break;case"source":$t("error",e),s=n;break;case"img":case"image":case"link":$t("error",e),$t("load",e),s=n;break;case"details":$t("toggle",e),s=n;break;case"input":__(e,n),s=_x(e,n),$t("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Zt({},n,{value:void 0}),$t("invalid",e);break;case"textarea":S_(e,n),s=Ex(e,n),$t("invalid",e);break;default:s=n}jx(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?JE(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&XE(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&dd(e,c):typeof c=="number"&&dd(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ud.hasOwnProperty(a)?c!=null&&a==="onScroll"&&$t("scroll",e):c!=null&&y1(e,a,c,o))}switch(r){case"input":Xf(e),b_(e,n,!1);break;case"textarea":Xf(e),E_(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Wi(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Jl(e,!!n.multiple,a,!1):n.defaultValue!=null&&Jl(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=pm)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xr(t),null;case 6:if(e&&t.stateNode!=null)_j(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Pe(166));if(r=ko(bd.current),ko(ca.current),ah(t)){if(n=t.stateNode,r=t.memoizedProps,n[ia]=t,(a=n.nodeValue!==r)&&(e=Xn,e!==null))switch(e.tag){case 3:sh(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&sh(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ia]=t,t.stateNode=n}return Xr(t),null;case 13:if(zt(Qt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Wt&&Yn!==null&&t.mode&1&&!(t.flags&128))$N(),Nc(),t.flags|=98560,a=!1;else if(a=ah(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(Pe(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Pe(317));a[ia]=t}else Nc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xr(t),a=!1}else Ds!==null&&(ov(Ds),Ds=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Qt.current&1?_r===0&&(_r=3):ty())),t.updateQueue!==null&&(t.flags|=4),Xr(t),null);case 4:return kc(),Zx(e,t),e===null&&vd(t.stateNode.containerInfo),Xr(t),null;case 10:return L1(t.type._context),Xr(t),null;case 17:return Pn(t.type)&&gm(),Xr(t),null;case 19:if(zt(Qt),a=t.memoizedState,a===null)return Xr(t),null;if(n=(t.flags&128)!==0,o=a.rendering,o===null)if(n)pu(a,!1);else{if(_r!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Sm(e),o!==null){for(t.flags|=128,pu(a,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ft(Qt,Qt.current&1|2),t.child}e=e.sibling}a.tail!==null&&or()>Tc&&(t.flags|=128,n=!0,pu(a,!1),t.lanes=4194304)}else{if(!n)if(e=Sm(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),pu(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Wt)return Xr(t),null}else 2*or()-a.renderingStartTime>Tc&&r!==1073741824&&(t.flags|=128,n=!0,pu(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(r=a.last,r!==null?r.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=or(),t.sibling=null,r=Qt.current,Ft(Qt,n?r&1|2:r&1),t):(Xr(t),null);case 22:case 23:return ey(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Vn&1073741824&&(Xr(t),t.subtreeFlags&6&&(t.flags|=8192)):Xr(t),null;case 24:return null;case 25:return null}throw Error(Pe(156,t.tag))}function a5(e,t){switch(M1(t),t.tag){case 1:return Pn(t.type)&&gm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return kc(),zt(An),zt(ln),V1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return z1(t),null;case 13:if(zt(Qt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Pe(340));Nc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return zt(Qt),null;case 4:return kc(),null;case 10:return L1(t.type._context),null;case 22:case 23:return ey(),null;case 24:return null;default:return null}}var lh=!1,tn=!1,i5=typeof WeakSet=="function"?WeakSet:Set,We=null;function ql(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){tr(e,t,n)}else r.current=null}function ev(e,t,r){try{r()}catch(n){tr(e,t,n)}}var hb=!1;function o5(e,t){if(Ix=fm,e=jN(),D1(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==a||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===r&&++u===s&&(l=o),h===a&&++d===n&&(c=o),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Lx={focusedElem:e,selectionRange:r},fm=!1,We=t;We!==null;)if(t=We,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,We=e;else for(;We!==null;){t=We;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,v=g.memoizedState,_=t.stateNode,y=_.getSnapshotBeforeUpdate(t.elementType===t.type?m:ks(t.type,m),v);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Pe(163))}}catch(b){tr(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,We=e;break}We=t.return}return g=hb,hb=!1,g}function Hu(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&ev(t,r,a)}s=s.next}while(s!==n)}}function C0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function tv(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function bj(e){var t=e.alternate;t!==null&&(e.alternate=null,bj(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ia],delete t[wd],delete t[Ux],delete t[VO],delete t[WO])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Sj(e){return e.tag===5||e.tag===3||e.tag===4}function mb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rv(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=pm));else if(n!==4&&(e=e.child,e!==null))for(rv(e,t,r),e=e.sibling;e!==null;)rv(e,t,r),e=e.sibling}function nv(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(nv(e,t,r),e=e.sibling;e!==null;)nv(e,t,r),e=e.sibling}var Ir=null,As=!1;function ni(e,t,r){for(r=r.child;r!==null;)Ej(e,t,r),r=r.sibling}function Ej(e,t,r){if(la&&typeof la.onCommitFiberUnmount=="function")try{la.onCommitFiberUnmount(w0,r)}catch{}switch(r.tag){case 5:tn||ql(r,t);case 6:var n=Ir,s=As;Ir=null,ni(e,t,r),Ir=n,As=s,Ir!==null&&(As?(e=Ir,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ir.removeChild(r.stateNode));break;case 18:Ir!==null&&(As?(e=Ir,r=r.stateNode,e.nodeType===8?ag(e.parentNode,r):e.nodeType===1&&ag(e,r),pd(e)):ag(Ir,r.stateNode));break;case 4:n=Ir,s=As,Ir=r.stateNode.containerInfo,As=!0,ni(e,t,r),Ir=n,As=s;break;case 0:case 11:case 14:case 15:if(!tn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&ev(r,t,o),s=s.next}while(s!==n)}ni(e,t,r);break;case 1:if(!tn&&(ql(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){tr(r,t,l)}ni(e,t,r);break;case 21:ni(e,t,r);break;case 22:r.mode&1?(tn=(n=tn)||r.memoizedState!==null,ni(e,t,r),tn=n):ni(e,t,r);break;default:ni(e,t,r)}}function pb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new i5),t.forEach(function(n){var s=g5.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function bs(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ir=l.stateNode,As=!1;break e;case 3:Ir=l.stateNode.containerInfo,As=!0;break e;case 4:Ir=l.stateNode.containerInfo,As=!0;break e}l=l.return}if(Ir===null)throw Error(Pe(160));Ej(a,o,s),Ir=null,As=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){tr(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Nj(t,e),t=t.sibling}function Nj(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bs(t,e),Js(e),n&4){try{Hu(3,e,e.return),C0(3,e)}catch(m){tr(e,e.return,m)}try{Hu(5,e,e.return)}catch(m){tr(e,e.return,m)}}break;case 1:bs(t,e),Js(e),n&512&&r!==null&&ql(r,r.return);break;case 5:if(bs(t,e),Js(e),n&512&&r!==null&&ql(r,r.return),e.flags&32){var s=e.stateNode;try{dd(s,"")}catch(m){tr(e,e.return,m)}}if(n&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,o=r!==null?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&KE(s,a),kx(l,o);var u=kx(l,a);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?JE(s,f):d==="dangerouslySetInnerHTML"?XE(s,f):d==="children"?dd(s,f):y1(s,d,f,u)}switch(l){case"input":bx(s,a);break;case"textarea":YE(s,a);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?Jl(s,!!a.multiple,p,!1):h!==!!a.multiple&&(a.defaultValue!=null?Jl(s,!!a.multiple,a.defaultValue,!0):Jl(s,!!a.multiple,a.multiple?[]:"",!1))}s[wd]=a}catch(m){tr(e,e.return,m)}}break;case 6:if(bs(t,e),Js(e),n&4){if(e.stateNode===null)throw Error(Pe(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(m){tr(e,e.return,m)}}break;case 3:if(bs(t,e),Js(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{pd(t.containerInfo)}catch(m){tr(e,e.return,m)}break;case 4:bs(t,e),Js(e);break;case 13:bs(t,e),Js(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(J1=or())),n&4&&pb(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(tn=(u=tn)||d,bs(t,e),tn=u):bs(t,e),Js(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(We=e,d=e.child;d!==null;){for(f=We=d;We!==null;){switch(h=We,p=h.child,h.tag){case 0:case 11:case 14:case 15:Hu(4,h,h.return);break;case 1:ql(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){tr(n,r,m)}}break;case 5:ql(h,h.return);break;case 22:if(h.memoizedState!==null){xb(f);continue}}p!==null?(p.return=h,We=p):xb(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=QE("display",o))}catch(m){tr(e,e.return,m)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){tr(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:bs(t,e),Js(e),n&4&&pb(e);break;case 21:break;default:bs(t,e),Js(e)}}function Js(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Sj(r)){var n=r;break e}r=r.return}throw Error(Pe(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(dd(s,""),n.flags&=-33);var a=mb(e);nv(e,a,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=mb(e);rv(e,l,o);break;default:throw Error(Pe(161))}}catch(c){tr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function l5(e,t,r){We=e,jj(e)}function jj(e,t,r){for(var n=(e.mode&1)!==0;We!==null;){var s=We,a=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||lh;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||tn;l=lh;var u=tn;if(lh=o,(tn=c)&&!u)for(We=s;We!==null;)o=We,c=o.child,o.tag===22&&o.memoizedState!==null?vb(s):c!==null?(c.return=o,We=c):vb(s);for(;a!==null;)We=a,jj(a),a=a.sibling;We=s,lh=l,tn=u}gb(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,We=a):gb(e)}}function gb(e){for(;We!==null;){var t=We;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:tn||C0(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!tn)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:ks(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&eb(t,a,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}eb(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&pd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Pe(163))}tn||t.flags&512&&tv(t)}catch(h){tr(t,t.return,h)}}if(t===e){We=null;break}if(r=t.sibling,r!==null){r.return=t.return,We=r;break}We=t.return}}function xb(e){for(;We!==null;){var t=We;if(t===e){We=null;break}var r=t.sibling;if(r!==null){r.return=t.return,We=r;break}We=t.return}}function vb(e){for(;We!==null;){var t=We;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{C0(4,t)}catch(c){tr(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){tr(t,s,c)}}var a=t.return;try{tv(t)}catch(c){tr(t,a,c)}break;case 5:var o=t.return;try{tv(t)}catch(c){tr(t,o,c)}}}catch(c){tr(t,t.return,c)}if(t===e){We=null;break}var l=t.sibling;if(l!==null){l.return=t.return,We=l;break}We=t.return}}var c5=Math.ceil,jm=Xa.ReactCurrentDispatcher,X1=Xa.ReactCurrentOwner,fs=Xa.ReactCurrentBatchConfig,gt=0,Dr=null,hr=null,Wr=0,Vn=0,Xl=no(0),_r=0,jd=null,Uo=0,T0=0,Q1=0,Gu=null,jn=null,J1=0,Tc=1/0,ja=null,km=!1,sv=null,Li=null,ch=!1,ki=null,Cm=0,Ku=0,av=null,Yh=-1,qh=0;function gn(){return gt&6?or():Yh!==-1?Yh:Yh=or()}function $i(e){return e.mode&1?gt&2&&Wr!==0?Wr&-Wr:GO.transition!==null?(qh===0&&(qh=uN()),qh):(e=At,e!==0||(e=window.event,e=e===void 0?16:xN(e.type)),e):1}function $s(e,t,r,n){if(50<Ku)throw Ku=0,av=null,Error(Pe(185));af(e,r,n),(!(gt&2)||e!==Dr)&&(e===Dr&&(!(gt&2)&&(T0|=r),_r===4&&gi(e,Wr)),Dn(e,n),r===1&&gt===0&&!(t.mode&1)&&(Tc=or()+500,N0&&so()))}function Dn(e,t){var r=e.callbackNode;GM(e,t);var n=dm(e,e===Dr?Wr:0);if(n===0)r!==null&&k_(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&k_(r),t===1)e.tag===0?HO(yb.bind(null,e)):FN(yb.bind(null,e)),UO(function(){!(gt&6)&&so()}),r=null;else{switch(dN(n)){case 1:r=E1;break;case 4:r=lN;break;case 16:r=um;break;case 536870912:r=cN;break;default:r=um}r=Mj(r,kj.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function kj(e,t){if(Yh=-1,qh=0,gt&6)throw Error(Pe(327));var r=e.callbackNode;if(nc()&&e.callbackNode!==r)return null;var n=dm(e,e===Dr?Wr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Tm(e,n);else{t=n;var s=gt;gt|=2;var a=Tj();(Dr!==e||Wr!==t)&&(ja=null,Tc=or()+500,Ro(e,t));do try{f5();break}catch(l){Cj(e,l)}while(!0);I1(),jm.current=a,gt=s,hr!==null?t=0:(Dr=null,Wr=0,t=_r)}if(t!==0){if(t===2&&(s=Dx(e),s!==0&&(n=s,t=iv(e,s))),t===1)throw r=jd,Ro(e,0),gi(e,n),Dn(e,or()),r;if(t===6)gi(e,n);else{if(s=e.current.alternate,!(n&30)&&!u5(s)&&(t=Tm(e,n),t===2&&(a=Dx(e),a!==0&&(n=a,t=iv(e,a))),t===1))throw r=jd,Ro(e,0),gi(e,n),Dn(e,or()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(Pe(345));case 2:xo(e,jn,ja);break;case 3:if(gi(e,n),(n&130023424)===n&&(t=J1+500-or(),10<t)){if(dm(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){gn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Bx(xo.bind(null,e,jn,ja),t);break}xo(e,jn,ja);break;case 4:if(gi(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-Ls(n);a=1<<o,o=t[o],o>s&&(s=o),n&=~a}if(n=s,n=or()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*c5(n/1960))-n,10<n){e.timeoutHandle=Bx(xo.bind(null,e,jn,ja),n);break}xo(e,jn,ja);break;case 5:xo(e,jn,ja);break;default:throw Error(Pe(329))}}}return Dn(e,or()),e.callbackNode===r?kj.bind(null,e):null}function iv(e,t){var r=Gu;return e.current.memoizedState.isDehydrated&&(Ro(e,t).flags|=256),e=Tm(e,t),e!==2&&(t=jn,jn=r,t!==null&&ov(t)),e}function ov(e){jn===null?jn=e:jn.push.apply(jn,e)}function u5(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!Vs(a(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gi(e,t){for(t&=~Q1,t&=~T0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ls(t),n=1<<r;e[r]=-1,t&=~n}}function yb(e){if(gt&6)throw Error(Pe(327));nc();var t=dm(e,0);if(!(t&1))return Dn(e,or()),null;var r=Tm(e,t);if(e.tag!==0&&r===2){var n=Dx(e);n!==0&&(t=n,r=iv(e,n))}if(r===1)throw r=jd,Ro(e,0),gi(e,t),Dn(e,or()),r;if(r===6)throw Error(Pe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xo(e,jn,ja),Dn(e,or()),null}function Z1(e,t){var r=gt;gt|=1;try{return e(t)}finally{gt=r,gt===0&&(Tc=or()+500,N0&&so())}}function zo(e){ki!==null&&ki.tag===0&&!(gt&6)&&nc();var t=gt;gt|=1;var r=fs.transition,n=At;try{if(fs.transition=null,At=1,e)return e()}finally{At=n,fs.transition=r,gt=t,!(gt&6)&&so()}}function ey(){Vn=Xl.current,zt(Xl)}function Ro(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,BO(r)),hr!==null)for(r=hr.return;r!==null;){var n=r;switch(M1(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&gm();break;case 3:kc(),zt(An),zt(ln),V1();break;case 5:z1(n);break;case 4:kc();break;case 13:zt(Qt);break;case 19:zt(Qt);break;case 10:L1(n.type._context);break;case 22:case 23:ey()}r=r.return}if(Dr=e,hr=e=Bi(e.current,null),Wr=Vn=t,_r=0,jd=null,Q1=T0=Uo=0,jn=Gu=null,jo!==null){for(t=0;t<jo.length;t++)if(r=jo[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,n.next=o}r.pending=n}jo=null}return e}function Cj(e,t){do{var r=hr;try{if(I1(),Hh.current=Nm,Em){for(var n=Jt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Em=!1}if(Bo=0,kr=wr=Jt=null,Wu=!1,Sd=0,X1.current=null,r===null||r.return===null){_r=1,jd=t,hr=null;break}e:{var a=e,o=r.return,l=r,c=t;if(t=Wr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ib(o);if(p!==null){p.flags&=-257,ob(p,o,l,a,t),p.mode&1&&ab(a,u,t),t=p,c=u;var g=t.updateQueue;if(g===null){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}else{if(!(t&1)){ab(a,u,t),ty();break e}c=Error(Pe(426))}}else if(Wt&&l.mode&1){var v=ib(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),ob(v,o,l,a,t),O1(Cc(c,l));break e}}a=c=Cc(c,l),_r!==4&&(_r=2),Gu===null?Gu=[a]:Gu.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var _=dj(a,c,t);Z_(a,_);break e;case 1:l=c;var y=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Li===null||!Li.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t;var b=fj(a,l,t);Z_(a,b);break e}}a=a.return}while(a!==null)}Pj(r)}catch(S){t=S,hr===r&&r!==null&&(hr=r=r.return);continue}break}while(!0)}function Tj(){var e=jm.current;return jm.current=Nm,e===null?Nm:e}function ty(){(_r===0||_r===3||_r===2)&&(_r=4),Dr===null||!(Uo&268435455)&&!(T0&268435455)||gi(Dr,Wr)}function Tm(e,t){var r=gt;gt|=2;var n=Tj();(Dr!==e||Wr!==t)&&(ja=null,Ro(e,t));do try{d5();break}catch(s){Cj(e,s)}while(!0);if(I1(),gt=r,jm.current=n,hr!==null)throw Error(Pe(261));return Dr=null,Wr=0,_r}function d5(){for(;hr!==null;)Aj(hr)}function f5(){for(;hr!==null&&!IM();)Aj(hr)}function Aj(e){var t=Rj(e.alternate,e,Vn);e.memoizedProps=e.pendingProps,t===null?Pj(e):hr=t,X1.current=null}function Pj(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=a5(r,t),r!==null){r.flags&=32767,hr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_r=6,hr=null;return}}else if(r=s5(r,t,Vn),r!==null){hr=r;return}if(t=t.sibling,t!==null){hr=t;return}hr=t=e}while(t!==null);_r===0&&(_r=5)}function xo(e,t,r){var n=At,s=fs.transition;try{fs.transition=null,At=1,h5(e,t,r,n)}finally{fs.transition=s,At=n}return null}function h5(e,t,r,n){do nc();while(ki!==null);if(gt&6)throw Error(Pe(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Pe(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(KM(e,a),e===Dr&&(hr=Dr=null,Wr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ch||(ch=!0,Mj(um,function(){return nc(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=fs.transition,fs.transition=null;var o=At;At=1;var l=gt;gt|=4,X1.current=null,o5(e,r),Nj(r,e),RO(Lx),fm=!!Ix,Lx=Ix=null,e.current=r,l5(r),LM(),gt=l,At=o,fs.transition=a}else e.current=r;if(ch&&(ch=!1,ki=e,Cm=s),a=e.pendingLanes,a===0&&(Li=null),UM(r.stateNode),Dn(e,or()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(km)throw km=!1,e=sv,sv=null,e;return Cm&1&&e.tag!==0&&nc(),a=e.pendingLanes,a&1?e===av?Ku++:(Ku=0,av=e):Ku=0,so(),null}function nc(){if(ki!==null){var e=dN(Cm),t=fs.transition,r=At;try{if(fs.transition=null,At=16>e?16:e,ki===null)var n=!1;else{if(e=ki,ki=null,Cm=0,gt&6)throw Error(Pe(331));var s=gt;for(gt|=4,We=e.current;We!==null;){var a=We,o=a.child;if(We.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(We=u;We!==null;){var d=We;switch(d.tag){case 0:case 11:case 15:Hu(8,d,a)}var f=d.child;if(f!==null)f.return=d,We=f;else for(;We!==null;){d=We;var h=d.sibling,p=d.return;if(bj(d),d===u){We=null;break}if(h!==null){h.return=p,We=h;break}We=p}}}var g=a.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}We=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,We=o;else e:for(;We!==null;){if(a=We,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Hu(9,a,a.return)}var _=a.sibling;if(_!==null){_.return=a.return,We=_;break e}We=a.return}}var y=e.current;for(We=y;We!==null;){o=We;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,We=w;else e:for(o=y;We!==null;){if(l=We,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:C0(9,l)}}catch(S){tr(l,l.return,S)}if(l===o){We=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,We=b;break e}We=l.return}}if(gt=s,so(),la&&typeof la.onPostCommitFiberRoot=="function")try{la.onPostCommitFiberRoot(w0,e)}catch{}n=!0}return n}finally{At=r,fs.transition=t}}return!1}function wb(e,t,r){t=Cc(r,t),t=dj(e,t,1),e=Ii(e,t,1),t=gn(),e!==null&&(af(e,1,t),Dn(e,t))}function tr(e,t,r){if(e.tag===3)wb(e,e,r);else for(;t!==null;){if(t.tag===3){wb(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Li===null||!Li.has(n))){e=Cc(r,e),e=fj(t,e,1),t=Ii(t,e,1),e=gn(),t!==null&&(af(t,1,e),Dn(t,e));break}}t=t.return}}function m5(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=gn(),e.pingedLanes|=e.suspendedLanes&r,Dr===e&&(Wr&r)===r&&(_r===4||_r===3&&(Wr&130023424)===Wr&&500>or()-J1?Ro(e,0):Q1|=r),Dn(e,t)}function Dj(e,t){t===0&&(e.mode&1?(t=Zf,Zf<<=1,!(Zf&130023424)&&(Zf=4194304)):t=1);var r=gn();e=Va(e,t),e!==null&&(af(e,t,r),Dn(e,r))}function p5(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Dj(e,r)}function g5(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Pe(314))}n!==null&&n.delete(t),Dj(e,r)}var Rj;Rj=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||An.current)Cn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Cn=!1,n5(e,t,r);Cn=!!(e.flags&131072)}else Cn=!1,Wt&&t.flags&1048576&&IN(t,ym,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Kh(e,t),e=t.pendingProps;var s=Ec(t,ln.current);rc(t,r),s=H1(null,t,n,e,s,r);var a=G1();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pn(n)?(a=!0,xm(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,B1(t),s.updater=k0,t.stateNode=s,s._reactInternals=t,Kx(t,n,e,r),t=Xx(null,t,n,!0,a,r)):(t.tag=0,Wt&&a&&R1(t),fn(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Kh(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=v5(n),e=ks(n,e),s){case 0:t=qx(null,t,n,e,r);break e;case 1:t=ub(null,t,n,e,r);break e;case 11:t=lb(null,t,n,e,r);break e;case 14:t=cb(null,t,n,ks(n.type,e),r);break e}throw Error(Pe(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ks(n,s),qx(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ks(n,s),ub(e,t,n,s,r);case 3:e:{if(gj(t),e===null)throw Error(Pe(387));n=t.pendingProps,a=t.memoizedState,s=a.element,VN(e,t),bm(t,n,null,r);var o=t.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=Cc(Error(Pe(423)),t),t=db(e,t,n,r,s);break e}else if(n!==s){s=Cc(Error(Pe(424)),t),t=db(e,t,n,r,s);break e}else for(Yn=Fi(t.stateNode.containerInfo.firstChild),Xn=t,Wt=!0,Ds=null,r=UN(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Nc(),n===s){t=Wa(e,t,r);break e}fn(e,t,n,r)}t=t.child}return t;case 5:return WN(t),e===null&&Wx(t),n=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,o=s.children,$x(n,s)?o=null:a!==null&&$x(n,a)&&(t.flags|=32),pj(e,t),fn(e,t,o,r),t.child;case 6:return e===null&&Wx(t),null;case 13:return xj(e,t,r);case 4:return U1(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=jc(t,null,n,r):fn(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ks(n,s),lb(e,t,n,s,r);case 7:return fn(e,t,t.pendingProps,r),t.child;case 8:return fn(e,t,t.pendingProps.children,r),t.child;case 12:return fn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Ft(wm,n._currentValue),n._currentValue=o,a!==null)if(Vs(a.value,o)){if(a.children===s.children&&!An.current){t=Wa(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=Oa(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Hx(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Pe(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Hx(o,r,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}fn(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,rc(t,r),s=gs(s),n=n(s),t.flags|=1,fn(e,t,n,r),t.child;case 14:return n=t.type,s=ks(n,t.pendingProps),s=ks(n.type,s),cb(e,t,n,s,r);case 15:return hj(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ks(n,s),Kh(e,t),t.tag=1,Pn(n)?(e=!0,xm(t)):e=!1,rc(t,r),uj(t,n,s),Kx(t,n,s,r),Xx(null,t,n,!0,e,r);case 19:return vj(e,t,r);case 22:return mj(e,t,r)}throw Error(Pe(156,t.tag))};function Mj(e,t){return oN(e,t)}function x5(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ds(e,t,r,n){return new x5(e,t,r,n)}function ry(e){return e=e.prototype,!(!e||!e.isReactComponent)}function v5(e){if(typeof e=="function")return ry(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_1)return 11;if(e===b1)return 14}return 2}function Bi(e,t){var r=e.alternate;return r===null?(r=ds(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Xh(e,t,r,n,s,a){var o=2;if(n=e,typeof e=="function")ry(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Bl:return Mo(r.children,s,a,t);case w1:o=8,s|=8;break;case xx:return e=ds(12,r,t,s|2),e.elementType=xx,e.lanes=a,e;case vx:return e=ds(13,r,t,s),e.elementType=vx,e.lanes=a,e;case yx:return e=ds(19,r,t,s),e.elementType=yx,e.lanes=a,e;case WE:return A0(r,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case zE:o=10;break e;case VE:o=9;break e;case _1:o=11;break e;case b1:o=14;break e;case fi:o=16,n=null;break e}throw Error(Pe(130,e==null?e:typeof e,""))}return t=ds(o,r,t,s),t.elementType=e,t.type=n,t.lanes=a,t}function Mo(e,t,r,n){return e=ds(7,e,n,t),e.lanes=r,e}function A0(e,t,r,n){return e=ds(22,e,n,t),e.elementType=WE,e.lanes=r,e.stateNode={isHidden:!1},e}function hg(e,t,r){return e=ds(6,e,null,t),e.lanes=r,e}function mg(e,t,r){return t=ds(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function y5(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yp(0),this.expirationTimes=Yp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yp(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ny(e,t,r,n,s,a,o,l,c){return e=new y5(e,t,r,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=ds(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},B1(a),e}function w5(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$l,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Oj(e){if(!e)return Hi;e=e._reactInternals;e:{if(nl(e)!==e||e.tag!==1)throw Error(Pe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Pe(171))}if(e.tag===1){var r=e.type;if(Pn(r))return ON(e,r,t)}return t}function Fj(e,t,r,n,s,a,o,l,c){return e=ny(r,n,!0,e,s,a,o,l,c),e.context=Oj(null),r=e.current,n=gn(),s=$i(r),a=Oa(n,s),a.callback=t??null,Ii(r,a,s),e.current.lanes=s,af(e,s,n),Dn(e,n),e}function P0(e,t,r,n){var s=t.current,a=gn(),o=$i(s);return r=Oj(r),t.context===null?t.context=r:t.pendingContext=r,t=Oa(a,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ii(s,t,o),e!==null&&($s(e,s,o,a),Wh(e,s,o)),o}function Am(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function _b(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function sy(e,t){_b(e,t),(e=e.alternate)&&_b(e,t)}function _5(){return null}var Ij=typeof reportError=="function"?reportError:function(e){console.error(e)};function ay(e){this._internalRoot=e}D0.prototype.render=ay.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Pe(409));P0(e,t,null,null)};D0.prototype.unmount=ay.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zo(function(){P0(null,e,null,null)}),t[za]=null}};function D0(e){this._internalRoot=e}D0.prototype.unstable_scheduleHydration=function(e){if(e){var t=mN();e={blockedOn:null,target:e,priority:t};for(var r=0;r<pi.length&&t!==0&&t<pi[r].priority;r++);pi.splice(r,0,e),r===0&&gN(e)}};function iy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function R0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function bb(){}function b5(e,t,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var u=Am(o);a.call(u)}}var o=Fj(t,n,e,0,null,!1,!1,"",bb);return e._reactRootContainer=o,e[za]=o.current,vd(e.nodeType===8?e.parentNode:e),zo(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Am(c);l.call(u)}}var c=ny(e,0,!1,null,null,!1,!1,"",bb);return e._reactRootContainer=c,e[za]=c.current,vd(e.nodeType===8?e.parentNode:e),zo(function(){P0(t,c,r,n)}),c}function M0(e,t,r,n,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=Am(o);l.call(c)}}P0(t,o,e,s)}else o=b5(r,t,e,s,n);return Am(o)}fN=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Pu(t.pendingLanes);r!==0&&(N1(t,r|1),Dn(t,or()),!(gt&6)&&(Tc=or()+500,so()))}break;case 13:zo(function(){var n=Va(e,1);if(n!==null){var s=gn();$s(n,e,1,s)}}),sy(e,1)}};j1=function(e){if(e.tag===13){var t=Va(e,134217728);if(t!==null){var r=gn();$s(t,e,134217728,r)}sy(e,134217728)}};hN=function(e){if(e.tag===13){var t=$i(e),r=Va(e,t);if(r!==null){var n=gn();$s(r,e,t,n)}sy(e,t)}};mN=function(){return At};pN=function(e,t){var r=At;try{return At=e,t()}finally{At=r}};Tx=function(e,t,r){switch(t){case"input":if(bx(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=E0(n);if(!s)throw Error(Pe(90));GE(n),bx(n,s)}}}break;case"textarea":YE(e,r);break;case"select":t=r.value,t!=null&&Jl(e,!!r.multiple,t,!1)}};tN=Z1;rN=zo;var S5={usingClientEntryPoint:!1,Events:[lf,Wl,E0,ZE,eN,Z1]},gu={findFiberByHostInstance:No,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},E5={bundleType:gu.bundleType,version:gu.version,rendererPackageName:gu.rendererPackageName,rendererConfig:gu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xa.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=aN(e),e===null?null:e.stateNode},findFiberByHostInstance:gu.findFiberByHostInstance||_5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uh.isDisabled&&uh.supportsFiber)try{w0=uh.inject(E5),la=uh}catch{}}ts.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S5;ts.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iy(t))throw Error(Pe(200));return w5(e,t,null,r)};ts.createRoot=function(e,t){if(!iy(e))throw Error(Pe(299));var r=!1,n="",s=Ij;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=ny(e,1,!1,null,null,r,!1,n,s),e[za]=t.current,vd(e.nodeType===8?e.parentNode:e),new ay(t)};ts.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Pe(188)):(e=Object.keys(e).join(","),Error(Pe(268,e)));return e=aN(t),e=e===null?null:e.stateNode,e};ts.flushSync=function(e){return zo(e)};ts.hydrate=function(e,t,r){if(!R0(t))throw Error(Pe(200));return M0(null,e,t,!0,r)};ts.hydrateRoot=function(e,t,r){if(!iy(e))throw Error(Pe(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",o=Ij;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Fj(t,null,e,1,r??null,s,!1,a,o),e[za]=t.current,vd(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new D0(t)};ts.render=function(e,t,r){if(!R0(t))throw Error(Pe(200));return M0(null,e,t,!1,r)};ts.unmountComponentAtNode=function(e){if(!R0(e))throw Error(Pe(40));return e._reactRootContainer?(zo(function(){M0(null,null,e,!1,function(){e._reactRootContainer=null,e[za]=null})}),!0):!1};ts.unstable_batchedUpdates=Z1;ts.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!R0(r))throw Error(Pe(200));if(e==null||e._reactInternals===void 0)throw Error(Pe(38));return M0(e,t,r,!1,n)};ts.version="18.3.1-next-f1338f8080-20240426";function Lj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lj)}catch(e){console.error(e)}}Lj(),LE.exports=ts;var Qa=LE.exports;const oy=d1(Qa);var $j,Sb=Qa;$j=Sb.createRoot,Sb.hydrateRoot;const N5=1,j5=1e6;let pg=0;function k5(){return pg=(pg+1)%Number.MAX_SAFE_INTEGER,pg.toString()}const gg=new Map,Eb=e=>{if(gg.has(e))return;const t=setTimeout(()=>{gg.delete(e),Yu({type:"REMOVE_TOAST",toastId:e})},j5);gg.set(e,t)},C5=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,N5)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Eb(r):e.toasts.forEach(n=>{Eb(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Qh=[];let Jh={toasts:[]};function Yu(e){Jh=C5(Jh,e),Qh.forEach(t=>{t(Jh)})}function T5({...e}){const t=k5(),r=s=>Yu({type:"UPDATE_TOAST",toast:{...s,id:t}}),n=()=>Yu({type:"DISMISS_TOAST",toastId:t});return Yu({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||n()}}}),{id:t,dismiss:n,update:r}}function dt(){const[e,t]=x.useState(Jh);return x.useEffect(()=>(Qh.push(t),()=>{const r=Qh.indexOf(t);r>-1&&Qh.splice(r,1)}),[]),{...e,toast:T5,dismiss:r=>Yu({type:"DISMISS_TOAST",toastId:r})}}function De(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function A5(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function O0(...e){return t=>e.forEach(r=>A5(r,t))}function et(...e){return x.useCallback(O0(...e),e)}function P5(e,t=[]){let r=[];function n(a,o){const l=x.createContext(o),c=r.length;r=[...r,o];function u(f){const{scope:h,children:p,...g}=f,m=(h==null?void 0:h[e][c])||l,v=x.useMemo(()=>g,Object.values(g));return i.jsx(m.Provider,{value:v,children:p})}function d(f,h){const p=(h==null?void 0:h[e][c])||l,g=x.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const s=()=>{const a=r.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,D5(s,...t)]}function D5(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var da=x.forwardRef((e,t)=>{const{children:r,...n}=e,s=x.Children.toArray(r),a=s.find(R5);if(a){const o=a.props.children,l=s.map(c=>c===a?x.Children.count(o)>1?x.Children.only(null):x.isValidElement(o)?o.props.children:null:c);return i.jsx(lv,{...n,ref:t,children:x.isValidElement(o)?x.cloneElement(o,void 0,l):null})}return i.jsx(lv,{...n,ref:t,children:r})});da.displayName="Slot";var lv=x.forwardRef((e,t)=>{const{children:r,...n}=e;if(x.isValidElement(r)){const s=O5(r);return x.cloneElement(r,{...M5(n,r.props),ref:t?O0(t,s):s})}return x.Children.count(r)>1?x.Children.only(null):null});lv.displayName="SlotClone";var ly=({children:e})=>i.jsx(i.Fragment,{children:e});function R5(e){return x.isValidElement(e)&&e.type===ly}function M5(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...l)=>{a(...l),s(...l)}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}function O5(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function F0(e){const t=e+"CollectionProvider",[r,n]=P5(t),[s,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:g,children:m}=p,v=ke.useRef(null),_=ke.useRef(new Map).current;return i.jsx(s,{scope:g,itemMap:_,collectionRef:v,children:m})};o.displayName=t;const l=e+"CollectionSlot",c=ke.forwardRef((p,g)=>{const{scope:m,children:v}=p,_=a(l,m),y=et(g,_.collectionRef);return i.jsx(da,{ref:y,children:v})});c.displayName=l;const u=e+"CollectionItemSlot",d="data-radix-collection-item",f=ke.forwardRef((p,g)=>{const{scope:m,children:v,..._}=p,y=ke.useRef(null),w=et(g,y),b=a(u,m);return ke.useEffect(()=>(b.itemMap.set(y,{ref:y,..._}),()=>void b.itemMap.delete(y))),i.jsx(da,{[d]:"",ref:w,children:v})});f.displayName=u;function h(p){const g=a(e+"CollectionConsumer",p);return ke.useCallback(()=>{const v=g.collectionRef.current;if(!v)return[];const _=Array.from(v.querySelectorAll(`[${d}]`));return Array.from(g.itemMap.values()).sort((b,S)=>_.indexOf(b.ref.current)-_.indexOf(S.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},h,n]}function F5(e,t){const r=x.createContext(t),n=a=>{const{children:o,...l}=a,c=x.useMemo(()=>l,Object.values(l));return i.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function s(a){const o=x.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[n,s]}function ns(e,t=[]){let r=[];function n(a,o){const l=x.createContext(o),c=r.length;r=[...r,o];const u=f=>{var _;const{scope:h,children:p,...g}=f,m=((_=h==null?void 0:h[e])==null?void 0:_[c])||l,v=x.useMemo(()=>g,Object.values(g));return i.jsx(m.Provider,{value:v,children:p})};u.displayName=a+"Provider";function d(f,h){var m;const p=((m=h==null?void 0:h[e])==null?void 0:m[c])||l,g=x.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[u,d]}const s=()=>{const a=r.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,I5(s,...t)]}function I5(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var L5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ge=L5.reduce((e,t)=>{const r=x.forwardRef((n,s)=>{const{asChild:a,...o}=n,l=a?da:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(l,{...o,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function cy(e,t){e&&Qa.flushSync(()=>e.dispatchEvent(t))}function Ht(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function $5(e,t=globalThis==null?void 0:globalThis.document){const r=Ht(e);x.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var B5="DismissableLayer",cv="dismissableLayer.update",U5="dismissableLayer.pointerDownOutside",z5="dismissableLayer.focusOutside",Nb,Bj=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sl=x.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=e,u=x.useContext(Bj),[d,f]=x.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=x.useState({}),g=et(t,E=>f(E)),m=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=m.indexOf(v),y=d?m.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,b=y>=_,S=W5(E=>{const C=E.target,T=[...u.branches].some(D=>D.contains(C));!b||T||(s==null||s(E),o==null||o(E),E.defaultPrevented||l==null||l())},h),N=H5(E=>{const C=E.target;[...u.branches].some(D=>D.contains(C))||(a==null||a(E),o==null||o(E),E.defaultPrevented||l==null||l())},h);return $5(E=>{y===u.layers.size-1&&(n==null||n(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},h),x.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Nb=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),jb(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Nb)}},[d,h,r,u]),x.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),jb())},[d,u]),x.useEffect(()=>{const E=()=>p({});return document.addEventListener(cv,E),()=>document.removeEventListener(cv,E)},[]),i.jsx(Ge.div,{...c,ref:g,style:{pointerEvents:w?b?"auto":"none":void 0,...e.style},onFocusCapture:De(e.onFocusCapture,N.onFocusCapture),onBlurCapture:De(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:De(e.onPointerDownCapture,S.onPointerDownCapture)})});sl.displayName=B5;var V5="DismissableLayerBranch",Uj=x.forwardRef((e,t)=>{const r=x.useContext(Bj),n=x.useRef(null),s=et(t,n);return x.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),i.jsx(Ge.div,{...e,ref:s})});Uj.displayName=V5;function W5(e,t=globalThis==null?void 0:globalThis.document){const r=Ht(e),n=x.useRef(!1),s=x.useRef(()=>{});return x.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let c=function(){zj(U5,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function H5(e,t=globalThis==null?void 0:globalThis.document){const r=Ht(e),n=x.useRef(!1);return x.useEffect(()=>{const s=a=>{a.target&&!n.current&&zj(z5,r,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function jb(){const e=new CustomEvent(cv);document.dispatchEvent(e)}function zj(e,t,r,{discrete:n}){const s=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?cy(s,a):s.dispatchEvent(a)}var G5=sl,K5=Uj,Er=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},Y5="Portal",Gc=x.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[s,a]=x.useState(!1);Er(()=>a(!0),[]);const o=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?oy.createPortal(i.jsx(Ge.div,{...n,ref:t}),o):null});Gc.displayName=Y5;function q5(e,t){return x.useReducer((r,n)=>t[r][n]??r,e)}var Mr=e=>{const{present:t,children:r}=e,n=X5(t),s=typeof r=="function"?r({present:n.isPresent}):x.Children.only(r),a=et(n.ref,Q5(s));return typeof r=="function"||n.isPresent?x.cloneElement(s,{ref:a}):null};Mr.displayName="Presence";function X5(e){const[t,r]=x.useState(),n=x.useRef({}),s=x.useRef(e),a=x.useRef("none"),o=e?"mounted":"unmounted",[l,c]=q5(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const u=dh(n.current);a.current=l==="mounted"?u:"none"},[l]),Er(()=>{const u=n.current,d=s.current;if(d!==e){const h=a.current,p=dh(u);e?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Er(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=p=>{const m=dh(n.current).includes(p.animationName);if(p.target===t&&m&&(c("ANIMATION_END"),!s.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},h=p=>{p.target===t&&(a.current=dh(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function dh(e){return(e==null?void 0:e.animationName)||"none"}function Q5(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Ws({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=J5({defaultProp:t,onChange:r}),a=e!==void 0,o=a?e:n,l=Ht(r),c=x.useCallback(u=>{if(a){const f=typeof u=="function"?u(e):u;f!==e&&l(f)}else s(u)},[a,e,s,l]);return[o,c]}function J5({defaultProp:e,onChange:t}){const r=x.useState(e),[n]=r,s=x.useRef(n),a=Ht(t);return x.useEffect(()=>{s.current!==n&&(a(n),s.current=n)},[n,s,a]),r}var Z5="VisuallyHidden",uf=x.forwardRef((e,t)=>i.jsx(Ge.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));uf.displayName=Z5;var e6=uf,uy="ToastProvider",[dy,t6,r6]=F0("Toast"),[Vj,Qne]=ns("Toast",[r6]),[n6,I0]=Vj(uy),Wj=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:o}=e,[l,c]=x.useState(null),[u,d]=x.useState(0),f=x.useRef(!1),h=x.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${uy}\`. Expected non-empty \`string\`.`),i.jsx(dy.Provider,{scope:t,children:i.jsx(n6,{scope:t,label:r,duration:n,swipeDirection:s,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:x.useCallback(()=>d(p=>p+1),[]),onToastRemove:x.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:o})})};Wj.displayName=uy;var Hj="ToastViewport",s6=["F8"],uv="toast.viewportPause",dv="toast.viewportResume",Gj=x.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=s6,label:s="Notifications ({hotkey})",...a}=e,o=I0(Hj,r),l=t6(r),c=x.useRef(null),u=x.useRef(null),d=x.useRef(null),f=x.useRef(null),h=et(t,f,o.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;x.useEffect(()=>{const v=_=>{var w;n.length!==0&&n.every(b=>_[b]||_.code===b)&&((w=f.current)==null||w.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[n]),x.useEffect(()=>{const v=c.current,_=f.current;if(g&&v&&_){const y=()=>{if(!o.isClosePausedRef.current){const N=new CustomEvent(uv);_.dispatchEvent(N),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const N=new CustomEvent(dv);_.dispatchEvent(N),o.isClosePausedRef.current=!1}},b=N=>{!v.contains(N.relatedTarget)&&w()},S=()=>{v.contains(document.activeElement)||w()};return v.addEventListener("focusin",y),v.addEventListener("focusout",b),v.addEventListener("pointermove",y),v.addEventListener("pointerleave",S),window.addEventListener("blur",y),window.addEventListener("focus",w),()=>{v.removeEventListener("focusin",y),v.removeEventListener("focusout",b),v.removeEventListener("pointermove",y),v.removeEventListener("pointerleave",S),window.removeEventListener("blur",y),window.removeEventListener("focus",w)}}},[g,o.isClosePausedRef]);const m=x.useCallback(({tabbingDirection:v})=>{const y=l().map(w=>{const b=w.ref.current,S=[b,...x6(b)];return v==="forwards"?S:S.reverse()});return(v==="forwards"?y.reverse():y).flat()},[l]);return x.useEffect(()=>{const v=f.current;if(v){const _=y=>{var S,N,E;const w=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!w){const C=document.activeElement,T=y.shiftKey;if(y.target===v&&T){(S=u.current)==null||S.focus();return}const P=m({tabbingDirection:T?"backwards":"forwards"}),L=P.findIndex(A=>A===C);xg(P.slice(L+1))?y.preventDefault():T?(N=u.current)==null||N.focus():(E=d.current)==null||E.focus()}};return v.addEventListener("keydown",_),()=>v.removeEventListener("keydown",_)}},[l,m]),i.jsxs(K5,{ref:c,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&i.jsx(fv,{ref:u,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"forwards"});xg(v)}}),i.jsx(dy.Slot,{scope:r,children:i.jsx(Ge.ol,{tabIndex:-1,...a,ref:h})}),g&&i.jsx(fv,{ref:d,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"backwards"});xg(v)}})]})});Gj.displayName=Hj;var Kj="ToastFocusProxy",fv=x.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=e,a=I0(Kj,r);return i.jsx(uf,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=a.viewport)!=null&&u.contains(l))&&n()}})});fv.displayName=Kj;var L0="Toast",a6="toast.swipeStart",i6="toast.swipeMove",o6="toast.swipeCancel",l6="toast.swipeEnd",Yj=x.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:a,...o}=e,[l=!0,c]=Ws({prop:n,defaultProp:s,onChange:a});return i.jsx(Mr,{present:r||l,children:i.jsx(d6,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Ht(e.onPause),onResume:Ht(e.onResume),onSwipeStart:De(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:De(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:De(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:De(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});Yj.displayName=L0;var[c6,u6]=Vj(L0,{onClose(){}}),d6=x.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:p,...g}=e,m=I0(L0,r),[v,_]=x.useState(null),y=et(t,A=>_(A)),w=x.useRef(null),b=x.useRef(null),S=s||m.duration,N=x.useRef(0),E=x.useRef(S),C=x.useRef(0),{onToastAdd:T,onToastRemove:D}=m,F=Ht(()=>{var I;(v==null?void 0:v.contains(document.activeElement))&&((I=m.viewport)==null||I.focus()),o()}),P=x.useCallback(A=>{!A||A===1/0||(window.clearTimeout(C.current),N.current=new Date().getTime(),C.current=window.setTimeout(F,A))},[F]);x.useEffect(()=>{const A=m.viewport;if(A){const I=()=>{P(E.current),u==null||u()},Q=()=>{const q=new Date().getTime()-N.current;E.current=E.current-q,window.clearTimeout(C.current),c==null||c()};return A.addEventListener(uv,Q),A.addEventListener(dv,I),()=>{A.removeEventListener(uv,Q),A.removeEventListener(dv,I)}}},[m.viewport,S,c,u,P]),x.useEffect(()=>{a&&!m.isClosePausedRef.current&&P(S)},[a,S,m.isClosePausedRef,P]),x.useEffect(()=>(T(),()=>D()),[T,D]);const L=x.useMemo(()=>v?tk(v):null,[v]);return m.viewport?i.jsxs(i.Fragment,{children:[L&&i.jsx(f6,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:L}),i.jsx(c6,{scope:r,onClose:F,children:Qa.createPortal(i.jsx(dy.ItemSlot,{scope:r,children:i.jsx(G5,{asChild:!0,onEscapeKeyDown:De(l,()=>{m.isFocusedToastEscapeKeyDownRef.current||F(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(Ge.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":m.swipeDirection,...g,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:De(e.onKeyDown,A=>{A.key==="Escape"&&(l==null||l(A.nativeEvent),A.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:De(e.onPointerDown,A=>{A.button===0&&(w.current={x:A.clientX,y:A.clientY})}),onPointerMove:De(e.onPointerMove,A=>{if(!w.current)return;const I=A.clientX-w.current.x,Q=A.clientY-w.current.y,q=!!b.current,O=["left","right"].includes(m.swipeDirection),H=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,G=O?H(0,I):0,K=O?0:H(0,Q),k=A.pointerType==="touch"?10:2,W={x:G,y:K},R={originalEvent:A,delta:W};q?(b.current=W,fh(i6,f,R,{discrete:!1})):kb(W,m.swipeDirection,k)?(b.current=W,fh(a6,d,R,{discrete:!1}),A.target.setPointerCapture(A.pointerId)):(Math.abs(I)>k||Math.abs(Q)>k)&&(w.current=null)}),onPointerUp:De(e.onPointerUp,A=>{const I=b.current,Q=A.target;if(Q.hasPointerCapture(A.pointerId)&&Q.releasePointerCapture(A.pointerId),b.current=null,w.current=null,I){const q=A.currentTarget,O={originalEvent:A,delta:I};kb(I,m.swipeDirection,m.swipeThreshold)?fh(l6,p,O,{discrete:!0}):fh(o6,h,O,{discrete:!0}),q.addEventListener("click",H=>H.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),f6=e=>{const{__scopeToast:t,children:r,...n}=e,s=I0(L0,t),[a,o]=x.useState(!1),[l,c]=x.useState(!1);return p6(()=>o(!0)),x.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(Gc,{asChild:!0,children:i.jsx(uf,{...n,children:a&&i.jsxs(i.Fragment,{children:[s.label," ",r]})})})},h6="ToastTitle",qj=x.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return i.jsx(Ge.div,{...n,ref:t})});qj.displayName=h6;var m6="ToastDescription",Xj=x.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return i.jsx(Ge.div,{...n,ref:t})});Xj.displayName=m6;var Qj="ToastAction",Jj=x.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?i.jsx(ek,{altText:r,asChild:!0,children:i.jsx(fy,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Qj}\`. Expected non-empty \`string\`.`),null)});Jj.displayName=Qj;var Zj="ToastClose",fy=x.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,s=u6(Zj,r);return i.jsx(ek,{asChild:!0,children:i.jsx(Ge.button,{type:"button",...n,ref:t,onClick:De(e.onClick,s.onClose)})})});fy.displayName=Zj;var ek=x.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...s}=e;return i.jsx(Ge.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:t})});function tk(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),g6(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",a=n.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...tk(n))}}),t}function fh(e,t,r,{discrete:n}){const s=r.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?cy(s,a):s.dispatchEvent(a)}var kb=(e,t,r=0)=>{const n=Math.abs(e.x),s=Math.abs(e.y),a=n>s;return t==="left"||t==="right"?a&&n>r:!a&&s>r};function p6(e=()=>{}){const t=Ht(e);Er(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function g6(e){return e.nodeType===e.ELEMENT_NODE}function x6(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function xg(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var v6=Wj,rk=Gj,nk=Yj,sk=qj,ak=Xj,ik=Jj,ok=fy;function lk(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=lk(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ck(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=lk(e))&&(n&&(n+=" "),n+=t);return n}const Cb=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Tb=ck,df=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Tb(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:a}=t,o=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],f=a==null?void 0:a[u];if(d===null)return null;const h=Cb(d)||Cb(f);return s[u][h]}),l=r&&Object.entries(r).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:h,...p}=d;return Object.entries(p).every(g=>{let[m,v]=g;return Array.isArray(v)?v.includes({...a,...l}[m]):{...a,...l}[m]===v})?[...u,f,h]:u},[]);return Tb(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uk=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var w6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:o,...l},c)=>x.createElement("svg",{ref:c,...w6,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:uk("lucide",s),...l},[...o.map(([u,d])=>x.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=(e,t)=>{const r=x.forwardRef(({className:n,...s},a)=>x.createElement(_6,{ref:a,iconNode:t,className:uk(`lucide-${y6(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=Le("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=Le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=Le("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=Le("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=Le("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=Le("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=Le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=Le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=Le("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=Le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=Le("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=Le("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=Le("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=Le("CircleMinus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=Le("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=Le("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=Le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=Le("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=Le("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=Le("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=Le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=Le("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=Le("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=Le("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=Le("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=Le("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=Le("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=Le("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=Le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=Le("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=Le("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=Le("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=Le("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=Le("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=Le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=Le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=Le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=Le("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=Le("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=Le("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=Le("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=Le("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=Le("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=Le("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=Le("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=Le("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=Le("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=Le("Plug",[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=Le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=Le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=Le("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=Le("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=Le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=Le("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=Le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=Le("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=Le("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=Le("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=Le("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=Le("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=Le("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=Le("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=Le("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=Le("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=Le("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=Le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=Le("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=Le("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=Le("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=Le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=Le("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=Le("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=Le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=Le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=Le("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=Le("Vote",[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=Le("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=Le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=Le("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=Le("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),vy="-",W6=e=>{const t=G6(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(vy);return l[0]===""&&l.length!==1&&l.shift(),gk(l,t)||H6(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},gk=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?gk(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join(vy);return(o=t.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},Rb=/^\[(.+)\]$/,H6=e=>{if(Rb.test(e)){const t=Rb.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},G6=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return Y6(Object.entries(e.classGroups),r).forEach(([a,o])=>{yv(o,n,a,t)}),n},yv=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:Mb(t,s);a.classGroupId=r;return}if(typeof s=="function"){if(K6(s)){yv(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([a,o])=>{yv(o,Mb(t,a),r,n)})})},Mb=(e,t)=>{let r=e;return t.split(vy).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},K6=e=>e.isThemeGetter,Y6=(e,t)=>t?e.map(([r,n])=>{const s=n.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[t+o,l])):a);return[r,s]}):e,q6=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(a,o)=>{r.set(a,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(a){let o=r.get(a);if(o!==void 0)return o;if((o=n.get(a))!==void 0)return s(a,o),o},set(a,o){r.has(a)?r.set(a,o):s(a,o)}}},xk="!",X6=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],a=t.length,o=l=>{const c=[];let u=0,d=0,f;for(let v=0;v<l.length;v++){let _=l[v];if(u===0){if(_===s&&(n||l.slice(v,v+a)===t)){c.push(l.slice(d,v)),d=v+a;continue}if(_==="/"){f=v;continue}}_==="["?u++:_==="]"&&u--}const h=c.length===0?l:l.substring(d),p=h.startsWith(xk),g=p?h.substring(1):h,m=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:m}};return r?l=>r({className:l,parseClassName:o}):o},Q6=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},J6=e=>({cache:q6(e.cacheSize),parseClassName:X6(e),...W6(e)}),Z6=/\s+/,eF=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,a=[],o=e.trim().split(Z6);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:p}=r(u);let g=!!p,m=n(g?h.substring(0,p):h);if(!m){if(!g){l=u+(l.length>0?" "+l:l);continue}if(m=n(h),!m){l=u+(l.length>0?" "+l:l);continue}g=!1}const v=Q6(d).join(":"),_=f?v+xk:v,y=_+m;if(a.includes(y))continue;a.push(y);const w=s(m,g);for(let b=0;b<w.length;++b){const S=w[b];a.push(_+S)}l=u+(l.length>0?" "+l:l)}return l};function tF(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=vk(t))&&(n&&(n+=" "),n+=r);return n}const vk=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=vk(e[n]))&&(r&&(r+=" "),r+=t);return r};function rF(e,...t){let r,n,s,a=o;function o(c){const u=t.reduce((d,f)=>f(d),e());return r=J6(u),n=r.cache.get,s=r.cache.set,a=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=eF(c,r);return s(c,d),d}return function(){return a(tF.apply(null,arguments))}}const Lt=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},yk=/^\[(?:([a-z-]+):)?(.+)\]$/i,nF=/^\d+\/\d+$/,sF=new Set(["px","full","screen"]),aF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,iF=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,oF=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,lF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,cF=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wa=e=>ac(e)||sF.has(e)||nF.test(e),si=e=>Kc(e,"length",xF),ac=e=>!!e&&!Number.isNaN(Number(e)),yg=e=>Kc(e,"number",ac),xu=e=>!!e&&Number.isInteger(Number(e)),uF=e=>e.endsWith("%")&&ac(e.slice(0,-1)),nt=e=>yk.test(e),ai=e=>aF.test(e),dF=new Set(["length","size","percentage"]),fF=e=>Kc(e,dF,wk),hF=e=>Kc(e,"position",wk),mF=new Set(["image","url"]),pF=e=>Kc(e,mF,yF),gF=e=>Kc(e,"",vF),vu=()=>!0,Kc=(e,t,r)=>{const n=yk.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},xF=e=>iF.test(e)&&!oF.test(e),wk=()=>!1,vF=e=>lF.test(e),yF=e=>cF.test(e),wF=()=>{const e=Lt("colors"),t=Lt("spacing"),r=Lt("blur"),n=Lt("brightness"),s=Lt("borderColor"),a=Lt("borderRadius"),o=Lt("borderSpacing"),l=Lt("borderWidth"),c=Lt("contrast"),u=Lt("grayscale"),d=Lt("hueRotate"),f=Lt("invert"),h=Lt("gap"),p=Lt("gradientColorStops"),g=Lt("gradientColorStopPositions"),m=Lt("inset"),v=Lt("margin"),_=Lt("opacity"),y=Lt("padding"),w=Lt("saturate"),b=Lt("scale"),S=Lt("sepia"),N=Lt("skew"),E=Lt("space"),C=Lt("translate"),T=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",nt,t],P=()=>[nt,t],L=()=>["",wa,si],A=()=>["auto",ac,nt],I=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Q=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",nt],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>[ac,nt];return{cacheSize:500,separator:":",theme:{colors:[vu],spacing:[wa,si],blur:["none","",ai,nt],brightness:K(),borderColor:[e],borderRadius:["none","","full",ai,nt],borderSpacing:P(),borderWidth:L(),contrast:K(),grayscale:H(),hueRotate:K(),invert:H(),gap:P(),gradientColorStops:[e],gradientColorStopPositions:[uF,si],inset:F(),margin:F(),opacity:K(),padding:P(),saturate:K(),scale:K(),sepia:H(),skew:K(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",nt]}],container:["container"],columns:[{columns:[ai]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...I(),nt]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",xu,nt]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",nt]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",xu,nt]}],"grid-cols":[{"grid-cols":[vu]}],"col-start-end":[{col:["auto",{span:["full",xu,nt]},nt]}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":[vu]}],"row-start-end":[{row:["auto",{span:[xu,nt]},nt]}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",nt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",nt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",nt,t]}],"min-w":[{"min-w":[nt,t,"min","max","fit"]}],"max-w":[{"max-w":[nt,t,"none","full","min","max","fit","prose",{screen:[ai]},ai]}],h:[{h:[nt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[nt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[nt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[nt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ai,si]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",yg]}],"font-family":[{font:[vu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",nt]}],"line-clamp":[{"line-clamp":["none",ac,yg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",wa,nt]}],"list-image":[{"list-image":["none",nt]}],"list-style-type":[{list:["none","disc","decimal",nt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",wa,si]}],"underline-offset":[{"underline-offset":["auto",wa,nt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",nt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",nt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...I(),hF]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",fF]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},pF]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...Q(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:Q()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Q()]}],"outline-offset":[{"outline-offset":[wa,nt]}],"outline-w":[{outline:[wa,si]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[wa,si]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ai,gF]}],"shadow-color":[{shadow:[vu]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ai,nt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",nt]}],duration:[{duration:K()}],ease:[{ease:["linear","in","out","in-out",nt]}],delay:[{delay:K()}],animate:[{animate:["none","spin","ping","pulse","bounce",nt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[xu,nt]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",nt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",nt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",nt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[wa,si,yg]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},_F=rF(wF);function Te(...e){return _F(ck(e))}const qu={log:(...e)=>{},error:(...e)=>{},warn:(...e)=>{},info:(...e)=>{}},bF=v6,_k=x.forwardRef(({className:e,...t},r)=>i.jsx(rk,{ref:r,className:Te("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));_k.displayName=rk.displayName;const SF=df("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),bk=x.forwardRef(({className:e,variant:t,...r},n)=>i.jsx(nk,{ref:n,className:Te(SF({variant:t}),e),...r}));bk.displayName=nk.displayName;const EF=x.forwardRef(({className:e,...t},r)=>i.jsx(ik,{ref:r,className:Te("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));EF.displayName=ik.displayName;const Sk=x.forwardRef(({className:e,...t},r)=>i.jsx(ok,{ref:r,className:Te("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(Za,{className:"h-4 w-4"})}));Sk.displayName=ok.displayName;const Ek=x.forwardRef(({className:e,...t},r)=>i.jsx(sk,{ref:r,className:Te("text-sm font-semibold",e),...t}));Ek.displayName=sk.displayName;const Nk=x.forwardRef(({className:e,...t},r)=>i.jsx(ak,{ref:r,className:Te("text-sm opacity-90",e),...t}));Nk.displayName=ak.displayName;function NF(){const{toasts:e}=dt();return i.jsxs(bF,{children:[e.map(function({id:t,title:r,description:n,action:s,...a}){return i.jsxs(bk,{...a,children:[i.jsxs("div",{className:"grid gap-1",children:[r&&i.jsx(Ek,{children:r}),n&&i.jsx(Nk,{children:n})]}),s,i.jsx(Sk,{})]},t)}),i.jsx(_k,{})]})}var Ob=["light","dark"],jF="(prefers-color-scheme: dark)",kF=x.createContext(void 0),CF={setTheme:e=>{},themes:[]},TF=()=>{var e;return(e=x.useContext(kF))!=null?e:CF};x.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:a,value:o,attrs:l,nonce:c})=>{let u=a==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,f=s?Ob.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(g,m=!1,v=!0)=>{let _=o?o[g]:g,y=m?g+"|| ''":`'${_}'`,w="";return s&&v&&!m&&Ob.includes(g)&&(w+=`d.style.colorScheme = '${g}';`),r==="class"?m||_?w+=`c.add(${y})`:w+="null":_&&(w+=`d[s](n,${y})`),w},p=e?`!function(){${d}${h(e)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${jF}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${u?"":"else{"+h(a,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(a,!1,!1)};}${f}}catch(t){}}();`;return x.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var AF=e=>{switch(e){case"success":return RF;case"info":return OF;case"warning":return MF;case"error":return FF;default:return null}},PF=Array(12).fill(0),DF=({visible:e})=>ke.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},ke.createElement("div",{className:"sonner-spinner"},PF.map((t,r)=>ke.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),RF=ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ke.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),MF=ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ke.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),OF=ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ke.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),FF=ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ke.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),IF=()=>{let[e,t]=ke.useState(document.hidden);return ke.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},wv=1,LF=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:wv++,a=this.toasts.find(l=>l.id===s),o=e.dismissible===void 0?!0:e.dismissible;return a?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:r}),{...l,...e,id:s,dismissible:o,title:r}):l):this.addToast({title:r,...n,dismissible:o,id:s}),s},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),s=r!==void 0;return n.then(async a=>{if(BF(a)&&!a.ok){s=!1;let o=typeof t.error=="function"?await t.error(`HTTP error! status: ${a.status}`):t.error,l=typeof t.description=="function"?await t.description(`HTTP error! status: ${a.status}`):t.description;this.create({id:r,type:"error",message:o,description:l})}else if(t.success!==void 0){s=!1;let o=typeof t.success=="function"?await t.success(a):t.success,l=typeof t.description=="function"?await t.description(a):t.description;this.create({id:r,type:"success",message:o,description:l})}}).catch(async a=>{if(t.error!==void 0){s=!1;let o=typeof t.error=="function"?await t.error(a):t.error,l=typeof t.description=="function"?await t.description(a):t.description;this.create({id:r,type:"error",message:o,description:l})}}).finally(()=>{var a;s&&(this.dismiss(r),r=void 0),(a=t.finally)==null||a.call(t)}),r},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||wv++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},Un=new LF,$F=(e,t)=>{let r=(t==null?void 0:t.id)||wv++;return Un.addToast({title:e,...t,id:r}),r},BF=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",UF=$F,zF=()=>Un.toasts,ot=Object.assign(UF,{success:Un.success,info:Un.info,warning:Un.warning,error:Un.error,custom:Un.custom,message:Un.message,promise:Un.promise,dismiss:Un.dismiss,loading:Un.loading},{getHistory:zF});function VF(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}VF(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function mh(e){return e.label!==void 0}var WF=3,HF="32px",GF=4e3,KF=356,YF=14,qF=20,XF=200;function QF(...e){return e.filter(Boolean).join(" ")}var JF=e=>{var t,r,n,s,a,o,l,c,u,d;let{invert:f,toast:h,unstyled:p,interacting:g,setHeights:m,visibleToasts:v,heights:_,index:y,toasts:w,expanded:b,removeToast:S,defaultRichColors:N,closeButton:E,style:C,cancelButtonStyle:T,actionButtonStyle:D,className:F="",descriptionClassName:P="",duration:L,position:A,gap:I,loadingIcon:Q,expandByDefault:q,classNames:O,icons:H,closeButtonAriaLabel:G="Close toast",pauseWhenPageIsHidden:K,cn:k}=e,[W,R]=ke.useState(!1),[M,re]=ke.useState(!1),[oe,ce]=ke.useState(!1),[me,pe]=ke.useState(!1),[je,we]=ke.useState(0),[Ce,j]=ke.useState(0),se=ke.useRef(null),ae=ke.useRef(null),z=y===0,X=y+1<=v,ie=h.type,U=h.dismissible!==!1,B=h.className||"",Y=h.descriptionClassName||"",ue=ke.useMemo(()=>_.findIndex(Xe=>Xe.toastId===h.id)||0,[_,h.id]),he=ke.useMemo(()=>{var Xe;return(Xe=h.closeButton)!=null?Xe:E},[h.closeButton,E]),le=ke.useMemo(()=>h.duration||L||GF,[h.duration,L]),Se=ke.useRef(0),Fe=ke.useRef(0),Ie=ke.useRef(0),at=ke.useRef(null),[Kt,wt]=A.split("-"),Or=ke.useMemo(()=>_.reduce((Xe,Nt,St)=>St>=ue?Xe:Xe+Nt.height,0),[_,ue]),pt=IF(),$n=h.invert||f,ss=ie==="loading";Fe.current=ke.useMemo(()=>ue*I+Or,[ue,Or]),ke.useEffect(()=>{R(!0)},[]),ke.useLayoutEffect(()=>{if(!W)return;let Xe=ae.current,Nt=Xe.style.height;Xe.style.height="auto";let St=Xe.getBoundingClientRect().height;Xe.style.height=Nt,j(St),m(cn=>cn.find(Nr=>Nr.toastId===h.id)?cn.map(Nr=>Nr.toastId===h.id?{...Nr,height:St}:Nr):[{toastId:h.id,height:St,position:h.position},...cn])},[W,h.title,h.description,m,h.id]);let Yt=ke.useCallback(()=>{re(!0),we(Fe.current),m(Xe=>Xe.filter(Nt=>Nt.toastId!==h.id)),setTimeout(()=>{S(h)},XF)},[h,S,m,Fe]);ke.useEffect(()=>{if(h.promise&&ie==="loading"||h.duration===1/0||h.type==="loading")return;let Xe,Nt=le;return b||g||K&&pt?(()=>{if(Ie.current<Se.current){let St=new Date().getTime()-Se.current;Nt=Nt-St}Ie.current=new Date().getTime()})():Nt!==1/0&&(Se.current=new Date().getTime(),Xe=setTimeout(()=>{var St;(St=h.onAutoClose)==null||St.call(h,h),Yt()},Nt)),()=>clearTimeout(Xe)},[b,g,q,h,le,Yt,h.promise,ie,K,pt]),ke.useEffect(()=>{let Xe=ae.current;if(Xe){let Nt=Xe.getBoundingClientRect().height;return j(Nt),m(St=>[{toastId:h.id,height:Nt,position:h.position},...St]),()=>m(St=>St.filter(cn=>cn.toastId!==h.id))}},[m,h.id]),ke.useEffect(()=>{h.delete&&Yt()},[Yt,h.delete]);function ri(){return H!=null&&H.loading?ke.createElement("div",{className:"sonner-loader","data-visible":ie==="loading"},H.loading):Q?ke.createElement("div",{className:"sonner-loader","data-visible":ie==="loading"},Q):ke.createElement(DF,{visible:ie==="loading"})}return ke.createElement("li",{"aria-live":h.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:ae,className:k(F,B,O==null?void 0:O.toast,(t=h==null?void 0:h.classNames)==null?void 0:t.toast,O==null?void 0:O.default,O==null?void 0:O[ie],(r=h==null?void 0:h.classNames)==null?void 0:r[ie]),"data-sonner-toast":"","data-rich-colors":(n=h.richColors)!=null?n:N,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":W,"data-promise":!!h.promise,"data-removed":M,"data-visible":X,"data-y-position":Kt,"data-x-position":wt,"data-index":y,"data-front":z,"data-swiping":oe,"data-dismissible":U,"data-type":ie,"data-invert":$n,"data-swipe-out":me,"data-expanded":!!(b||q&&W),style:{"--index":y,"--toasts-before":y,"--z-index":w.length-y,"--offset":`${M?je:Fe.current}px`,"--initial-height":q?"auto":`${Ce}px`,...C,...h.style},onPointerDown:Xe=>{ss||!U||(se.current=new Date,we(Fe.current),Xe.target.setPointerCapture(Xe.pointerId),Xe.target.tagName!=="BUTTON"&&(ce(!0),at.current={x:Xe.clientX,y:Xe.clientY}))},onPointerUp:()=>{var Xe,Nt,St,cn;if(me||!U)return;at.current=null;let Nr=Number(((Xe=ae.current)==null?void 0:Xe.style.getPropertyValue("--swipe-amount").replace("px",""))||0),bn=new Date().getTime()-((Nt=se.current)==null?void 0:Nt.getTime()),Lp=Math.abs(Nr)/bn;if(Math.abs(Nr)>=qF||Lp>.11){we(Fe.current),(St=h.onDismiss)==null||St.call(h,h),Yt(),pe(!0);return}(cn=ae.current)==null||cn.style.setProperty("--swipe-amount","0px"),ce(!1)},onPointerMove:Xe=>{var Nt;if(!at.current||!U)return;let St=Xe.clientY-at.current.y,cn=Xe.clientX-at.current.x,Nr=(Kt==="top"?Math.min:Math.max)(0,St),bn=Xe.pointerType==="touch"?10:2;Math.abs(Nr)>bn?(Nt=ae.current)==null||Nt.style.setProperty("--swipe-amount",`${St}px`):Math.abs(cn)>bn&&(at.current=null)}},he&&!h.jsx?ke.createElement("button",{"aria-label":G,"data-disabled":ss,"data-close-button":!0,onClick:ss||!U?()=>{}:()=>{var Xe;Yt(),(Xe=h.onDismiss)==null||Xe.call(h,h)},className:k(O==null?void 0:O.closeButton,(s=h==null?void 0:h.classNames)==null?void 0:s.closeButton)},ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ke.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ke.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,h.jsx||ke.isValidElement(h.title)?h.jsx||h.title:ke.createElement(ke.Fragment,null,ie||h.icon||h.promise?ke.createElement("div",{"data-icon":"",className:k(O==null?void 0:O.icon,(a=h==null?void 0:h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||ri():null,h.type!=="loading"?h.icon||(H==null?void 0:H[ie])||AF(ie):null):null,ke.createElement("div",{"data-content":"",className:k(O==null?void 0:O.content,(o=h==null?void 0:h.classNames)==null?void 0:o.content)},ke.createElement("div",{"data-title":"",className:k(O==null?void 0:O.title,(l=h==null?void 0:h.classNames)==null?void 0:l.title)},h.title),h.description?ke.createElement("div",{"data-description":"",className:k(P,Y,O==null?void 0:O.description,(c=h==null?void 0:h.classNames)==null?void 0:c.description)},h.description):null),ke.isValidElement(h.cancel)?h.cancel:h.cancel&&mh(h.cancel)?ke.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||T,onClick:Xe=>{var Nt,St;mh(h.cancel)&&U&&((St=(Nt=h.cancel).onClick)==null||St.call(Nt,Xe),Yt())},className:k(O==null?void 0:O.cancelButton,(u=h==null?void 0:h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,ke.isValidElement(h.action)?h.action:h.action&&mh(h.action)?ke.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||D,onClick:Xe=>{var Nt,St;mh(h.action)&&(Xe.defaultPrevented||((St=(Nt=h.action).onClick)==null||St.call(Nt,Xe),Yt()))},className:k(O==null?void 0:O.actionButton,(d=h==null?void 0:h.classNames)==null?void 0:d.actionButton)},h.action.label):null))};function Fb(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var ZF=e=>{let{invert:t,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:s,closeButton:a,className:o,offset:l,theme:c="light",richColors:u,duration:d,style:f,visibleToasts:h=WF,toastOptions:p,dir:g=Fb(),gap:m=YF,loadingIcon:v,icons:_,containerAriaLabel:y="Notifications",pauseWhenPageIsHidden:w,cn:b=QF}=e,[S,N]=ke.useState([]),E=ke.useMemo(()=>Array.from(new Set([r].concat(S.filter(K=>K.position).map(K=>K.position)))),[S,r]),[C,T]=ke.useState([]),[D,F]=ke.useState(!1),[P,L]=ke.useState(!1),[A,I]=ke.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Q=ke.useRef(null),q=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=ke.useRef(null),H=ke.useRef(!1),G=ke.useCallback(K=>{var k;(k=S.find(W=>W.id===K.id))!=null&&k.delete||Un.dismiss(K.id),N(W=>W.filter(({id:R})=>R!==K.id))},[S]);return ke.useEffect(()=>Un.subscribe(K=>{if(K.dismiss){N(k=>k.map(W=>W.id===K.id?{...W,delete:!0}:W));return}setTimeout(()=>{oy.flushSync(()=>{N(k=>{let W=k.findIndex(R=>R.id===K.id);return W!==-1?[...k.slice(0,W),{...k[W],...K},...k.slice(W+1)]:[K,...k]})})})}),[]),ke.useEffect(()=>{if(c!=="system"){I(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?I("dark"):I("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:K})=>{I(K?"dark":"light")})},[c]),ke.useEffect(()=>{S.length<=1&&F(!1)},[S]),ke.useEffect(()=>{let K=k=>{var W,R;n.every(M=>k[M]||k.code===M)&&(F(!0),(W=Q.current)==null||W.focus()),k.code==="Escape"&&(document.activeElement===Q.current||(R=Q.current)!=null&&R.contains(document.activeElement))&&F(!1)};return document.addEventListener("keydown",K),()=>document.removeEventListener("keydown",K)},[n]),ke.useEffect(()=>{if(Q.current)return()=>{O.current&&(O.current.focus({preventScroll:!0}),O.current=null,H.current=!1)}},[Q.current]),S.length?ke.createElement("section",{"aria-label":`${y} ${q}`,tabIndex:-1},E.map((K,k)=>{var W;let[R,M]=K.split("-");return ke.createElement("ol",{key:K,dir:g==="auto"?Fb():g,tabIndex:-1,ref:Q,className:o,"data-sonner-toaster":!0,"data-theme":A,"data-y-position":R,"data-x-position":M,style:{"--front-toast-height":`${((W=C[0])==null?void 0:W.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||HF,"--width":`${KF}px`,"--gap":`${m}px`,...f},onBlur:re=>{H.current&&!re.currentTarget.contains(re.relatedTarget)&&(H.current=!1,O.current&&(O.current.focus({preventScroll:!0}),O.current=null))},onFocus:re=>{re.target instanceof HTMLElement&&re.target.dataset.dismissible==="false"||H.current||(H.current=!0,O.current=re.relatedTarget)},onMouseEnter:()=>F(!0),onMouseMove:()=>F(!0),onMouseLeave:()=>{P||F(!1)},onPointerDown:re=>{re.target instanceof HTMLElement&&re.target.dataset.dismissible==="false"||L(!0)},onPointerUp:()=>L(!1)},S.filter(re=>!re.position&&k===0||re.position===K).map((re,oe)=>{var ce,me;return ke.createElement(JF,{key:re.id,icons:_,index:oe,toast:re,defaultRichColors:u,duration:(ce=p==null?void 0:p.duration)!=null?ce:d,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:t,visibleToasts:h,closeButton:(me=p==null?void 0:p.closeButton)!=null?me:a,interacting:P,position:K,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:G,toasts:S.filter(pe=>pe.position==re.position),heights:C.filter(pe=>pe.position==re.position),setHeights:T,expandByDefault:s,gap:m,loadingIcon:v,expanded:D,pauseWhenPageIsHidden:w,cn:b})}))})):null};const eI=({...e})=>{const{theme:t="system"}=TF();return i.jsx(ZF,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var tI=g1.useId||(()=>{}),rI=0;function ms(e){const[t,r]=x.useState(tI());return Er(()=>{e||r(n=>n??String(rI++))},[e]),e||(t?`radix-${t}`:"")}const nI=["top","right","bottom","left"],qi=Math.min,Hn=Math.max,Dm=Math.round,ph=Math.floor,Xi=e=>({x:e,y:e}),sI={left:"right",right:"left",bottom:"top",top:"bottom"},aI={start:"end",end:"start"};function _v(e,t,r){return Hn(e,qi(t,r))}function Ha(e,t){return typeof e=="function"?e(t):e}function Ga(e){return e.split("-")[0]}function Yc(e){return e.split("-")[1]}function yy(e){return e==="x"?"y":"x"}function wy(e){return e==="y"?"height":"width"}function Qi(e){return["top","bottom"].includes(Ga(e))?"y":"x"}function _y(e){return yy(Qi(e))}function iI(e,t,r){r===void 0&&(r=!1);const n=Yc(e),s=_y(e),a=wy(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=Rm(o)),[o,Rm(o)]}function oI(e){const t=Rm(e);return[bv(e),t,bv(t)]}function bv(e){return e.replace(/start|end/g,t=>aI[t])}function lI(e,t,r){const n=["left","right"],s=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return r?t?s:n:t?n:s;case"left":case"right":return t?a:o;default:return[]}}function cI(e,t,r,n){const s=Yc(e);let a=lI(Ga(e),r==="start",n);return s&&(a=a.map(o=>o+"-"+s),t&&(a=a.concat(a.map(bv)))),a}function Rm(e){return e.replace(/left|right|bottom|top/g,t=>sI[t])}function uI(e){return{top:0,right:0,bottom:0,left:0,...e}}function jk(e){return typeof e!="number"?uI(e):{top:e,right:e,bottom:e,left:e}}function Mm(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function Ib(e,t,r){let{reference:n,floating:s}=e;const a=Qi(t),o=_y(t),l=wy(o),c=Ga(t),u=a==="y",d=n.x+n.width/2-s.width/2,f=n.y+n.height/2-s.height/2,h=n[l]/2-s[l]/2;let p;switch(c){case"top":p={x:d,y:n.y-s.height};break;case"bottom":p={x:d,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:f};break;case"left":p={x:n.x-s.width,y:f};break;default:p={x:n.x,y:n.y}}switch(Yc(t)){case"start":p[o]-=h*(r&&u?-1:1);break;case"end":p[o]+=h*(r&&u?-1:1);break}return p}const dI=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:o}=r,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:f}=Ib(u,n,c),h=n,p={},g=0;for(let m=0;m<l.length;m++){const{name:v,fn:_}=l[m],{x:y,y:w,data:b,reset:S}=await _({x:d,y:f,initialPlacement:n,placement:h,strategy:s,middlewareData:p,rects:u,platform:o,elements:{reference:e,floating:t}});d=y??d,f=w??f,p={...p,[v]:{...p[v],...b}},S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:d,y:f}=Ib(u,h,c)),m=-1)}return{x:d,y:f,placement:h,strategy:s,middlewareData:p}};async function Td(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:a,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=Ha(t,e),g=jk(p),v=l[h?f==="floating"?"reference":"floating":f],_=Mm(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(v)))==null||r?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),y=f==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),b=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},S=Mm(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:w,strategy:c}):y);return{top:(_.top-S.top+g.top)/b.y,bottom:(S.bottom-_.bottom+g.bottom)/b.y,left:(_.left-S.left+g.left)/b.x,right:(S.right-_.right+g.right)/b.x}}const fI=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:a,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=Ha(e,t)||{};if(u==null)return{};const f=jk(d),h={x:r,y:n},p=_y(s),g=wy(p),m=await o.getDimensions(u),v=p==="y",_=v?"top":"left",y=v?"bottom":"right",w=v?"clientHeight":"clientWidth",b=a.reference[g]+a.reference[p]-h[p]-a.floating[g],S=h[p]-a.reference[p],N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let E=N?N[w]:0;(!E||!await(o.isElement==null?void 0:o.isElement(N)))&&(E=l.floating[w]||a.floating[g]);const C=b/2-S/2,T=E/2-m[g]/2-1,D=qi(f[_],T),F=qi(f[y],T),P=D,L=E-m[g]-F,A=E/2-m[g]/2+C,I=_v(P,A,L),Q=!c.arrow&&Yc(s)!=null&&A!==I&&a.reference[g]/2-(A<P?D:F)-m[g]/2<0,q=Q?A<P?A-P:A-L:0;return{[p]:h[p]+q,data:{[p]:I,centerOffset:A-I-q,...Q&&{alignmentOffset:q}},reset:Q}}}),hI=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...v}=Ha(e,t);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const _=Ga(s),y=Qi(l),w=Ga(l)===l,b=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=h||(w||!m?[Rm(l)]:oI(l)),N=g!=="none";!h&&N&&S.push(...cI(l,m,g,b));const E=[l,...S],C=await Td(t,v),T=[];let D=((n=a.flip)==null?void 0:n.overflows)||[];if(d&&T.push(C[_]),f){const A=iI(s,o,b);T.push(C[A[0]],C[A[1]])}if(D=[...D,{placement:s,overflows:T}],!T.every(A=>A<=0)){var F,P;const A=(((F=a.flip)==null?void 0:F.index)||0)+1,I=E[A];if(I)return{data:{index:A,overflows:D},reset:{placement:I}};let Q=(P=D.filter(q=>q.overflows[0]<=0).sort((q,O)=>q.overflows[1]-O.overflows[1])[0])==null?void 0:P.placement;if(!Q)switch(p){case"bestFit":{var L;const q=(L=D.filter(O=>{if(N){const H=Qi(O.placement);return H===y||H==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(H=>H>0).reduce((H,G)=>H+G,0)]).sort((O,H)=>O[1]-H[1])[0])==null?void 0:L[0];q&&(Q=q);break}case"initialPlacement":Q=l;break}if(s!==Q)return{reset:{placement:Q}}}return{}}}};function Lb(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function $b(e){return nI.some(t=>e[t]>=0)}const mI=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=Ha(e,t);switch(n){case"referenceHidden":{const a=await Td(t,{...s,elementContext:"reference"}),o=Lb(a,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:$b(o)}}}case"escaped":{const a=await Td(t,{...s,altBoundary:!0}),o=Lb(a,r.floating);return{data:{escapedOffsets:o,escaped:$b(o)}}}default:return{}}}}};async function pI(e,t){const{placement:r,platform:n,elements:s}=e,a=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=Ga(r),l=Yc(r),c=Qi(r)==="y",u=["left","top"].includes(o)?-1:1,d=a&&c?-1:1,f=Ha(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof g=="number"&&(p=l==="end"?g*-1:g),c?{x:p*d,y:h*u}:{x:h*u,y:p*d}}const gI=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:a,placement:o,middlewareData:l}=t,c=await pI(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:o}}}}},xI=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x:_,y}=v;return{x:_,y}}},...c}=Ha(e,t),u={x:r,y:n},d=await Td(t,c),f=Qi(Ga(s)),h=yy(f);let p=u[h],g=u[f];if(a){const v=h==="y"?"top":"left",_=h==="y"?"bottom":"right",y=p+d[v],w=p-d[_];p=_v(y,p,w)}if(o){const v=f==="y"?"top":"left",_=f==="y"?"bottom":"right",y=g+d[v],w=g-d[_];g=_v(y,g,w)}const m=l.fn({...t,[h]:p,[f]:g});return{...m,data:{x:m.x-r,y:m.y-n,enabled:{[h]:a,[f]:o}}}}}},vI=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Ha(e,t),d={x:r,y:n},f=Qi(s),h=yy(f);let p=d[h],g=d[f];const m=Ha(l,t),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const w=h==="y"?"height":"width",b=a.reference[h]-a.floating[w]+v.mainAxis,S=a.reference[h]+a.reference[w]-v.mainAxis;p<b?p=b:p>S&&(p=S)}if(u){var _,y;const w=h==="y"?"width":"height",b=["top","left"].includes(Ga(s)),S=a.reference[f]-a.floating[w]+(b&&((_=o.offset)==null?void 0:_[f])||0)+(b?0:v.crossAxis),N=a.reference[f]+a.reference[w]+(b?0:((y=o.offset)==null?void 0:y[f])||0)-(b?v.crossAxis:0);g<S?g=S:g>N&&(g=N)}return{[h]:p,[f]:g}}}},yI=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:a,platform:o,elements:l}=t,{apply:c=()=>{},...u}=Ha(e,t),d=await Td(t,u),f=Ga(s),h=Yc(s),p=Qi(s)==="y",{width:g,height:m}=a.floating;let v,_;f==="top"||f==="bottom"?(v=f,_=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(_=f,v=h==="end"?"top":"bottom");const y=m-d.top-d.bottom,w=g-d.left-d.right,b=qi(m-d[v],y),S=qi(g-d[_],w),N=!t.middlewareData.shift;let E=b,C=S;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(C=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(E=y),N&&!h){const D=Hn(d.left,0),F=Hn(d.right,0),P=Hn(d.top,0),L=Hn(d.bottom,0);p?C=g-2*(D!==0||F!==0?D+F:Hn(d.left,d.right)):E=m-2*(P!==0||L!==0?P+L:Hn(d.top,d.bottom))}await c({...t,availableWidth:C,availableHeight:E});const T=await o.getDimensions(l.floating);return g!==T.width||m!==T.height?{reset:{rects:!0}}:{}}}};function U0(){return typeof window<"u"}function qc(e){return kk(e)?(e.nodeName||"").toLowerCase():"#document"}function Qn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function xa(e){var t;return(t=(kk(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function kk(e){return U0()?e instanceof Node||e instanceof Qn(e).Node:!1}function Hs(e){return U0()?e instanceof Element||e instanceof Qn(e).Element:!1}function ha(e){return U0()?e instanceof HTMLElement||e instanceof Qn(e).HTMLElement:!1}function Bb(e){return!U0()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Qn(e).ShadowRoot}function pf(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Gs(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(s)}function wI(e){return["table","td","th"].includes(qc(e))}function z0(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function by(e){const t=Sy(),r=Hs(e)?Gs(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function _I(e){let t=Ji(e);for(;ha(t)&&!Dc(t);){if(by(t))return t;if(z0(t))return null;t=Ji(t)}return null}function Sy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Dc(e){return["html","body","#document"].includes(qc(e))}function Gs(e){return Qn(e).getComputedStyle(e)}function V0(e){return Hs(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ji(e){if(qc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Bb(e)&&e.host||xa(e);return Bb(t)?t.host:t}function Ck(e){const t=Ji(e);return Dc(t)?e.ownerDocument?e.ownerDocument.body:e.body:ha(t)&&pf(t)?t:Ck(t)}function Ad(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=Ck(e),a=s===((n=e.ownerDocument)==null?void 0:n.body),o=Qn(s);if(a){const l=Sv(o);return t.concat(o,o.visualViewport||[],pf(s)?s:[],l&&r?Ad(l):[])}return t.concat(s,Ad(s,[],r))}function Sv(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Tk(e){const t=Gs(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=ha(e),a=s?e.offsetWidth:r,o=s?e.offsetHeight:n,l=Dm(r)!==a||Dm(n)!==o;return l&&(r=a,n=o),{width:r,height:n,$:l}}function Ey(e){return Hs(e)?e:e.contextElement}function ic(e){const t=Ey(e);if(!ha(t))return Xi(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:a}=Tk(t);let o=(a?Dm(r.width):r.width)/n,l=(a?Dm(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const bI=Xi(0);function Ak(e){const t=Qn(e);return!Sy()||!t.visualViewport?bI:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function SI(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Qn(e)?!1:t}function Ho(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),a=Ey(e);let o=Xi(1);t&&(n?Hs(n)&&(o=ic(n)):o=ic(e));const l=SI(a,r,n)?Ak(a):Xi(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,d=s.width/o.x,f=s.height/o.y;if(a){const h=Qn(a),p=n&&Hs(n)?Qn(n):n;let g=h,m=Sv(g);for(;m&&n&&p!==g;){const v=ic(m),_=m.getBoundingClientRect(),y=Gs(m),w=_.left+(m.clientLeft+parseFloat(y.paddingLeft))*v.x,b=_.top+(m.clientTop+parseFloat(y.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,f*=v.y,c+=w,u+=b,g=Qn(m),m=Sv(g)}}return Mm({width:d,height:f,x:c,y:u})}function EI(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const a=s==="fixed",o=xa(n),l=t?z0(t.floating):!1;if(n===o||l&&a)return r;let c={scrollLeft:0,scrollTop:0},u=Xi(1);const d=Xi(0),f=ha(n);if((f||!f&&!a)&&((qc(n)!=="body"||pf(o))&&(c=V0(n)),ha(n))){const h=Ho(n);u=ic(n),d.x=h.x+n.clientLeft,d.y=h.y+n.clientTop}return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x,y:r.y*u.y-c.scrollTop*u.y+d.y}}function NI(e){return Array.from(e.getClientRects())}function Ev(e,t){const r=V0(e).scrollLeft;return t?t.left+r:Ho(xa(e)).left+r}function jI(e){const t=xa(e),r=V0(e),n=e.ownerDocument.body,s=Hn(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=Hn(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Ev(e);const l=-r.scrollTop;return Gs(n).direction==="rtl"&&(o+=Hn(t.clientWidth,n.clientWidth)-s),{width:s,height:a,x:o,y:l}}function kI(e,t){const r=Qn(e),n=xa(e),s=r.visualViewport;let a=n.clientWidth,o=n.clientHeight,l=0,c=0;if(s){a=s.width,o=s.height;const u=Sy();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:o,x:l,y:c}}function CI(e,t){const r=Ho(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,a=ha(e)?ic(e):Xi(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,c=s*a.x,u=n*a.y;return{width:o,height:l,x:c,y:u}}function Ub(e,t,r){let n;if(t==="viewport")n=kI(e,r);else if(t==="document")n=jI(xa(e));else if(Hs(t))n=CI(t,r);else{const s=Ak(e);n={...t,x:t.x-s.x,y:t.y-s.y}}return Mm(n)}function Pk(e,t){const r=Ji(e);return r===t||!Hs(r)||Dc(r)?!1:Gs(r).position==="fixed"||Pk(r,t)}function TI(e,t){const r=t.get(e);if(r)return r;let n=Ad(e,[],!1).filter(l=>Hs(l)&&qc(l)!=="body"),s=null;const a=Gs(e).position==="fixed";let o=a?Ji(e):e;for(;Hs(o)&&!Dc(o);){const l=Gs(o),c=by(o);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||pf(o)&&!c&&Pk(e,o))?n=n.filter(d=>d!==o):s=l,o=Ji(o)}return t.set(e,n),n}function AI(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const o=[...r==="clippingAncestors"?z0(t)?[]:TI(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,d)=>{const f=Ub(t,d,s);return u.top=Hn(f.top,u.top),u.right=qi(f.right,u.right),u.bottom=qi(f.bottom,u.bottom),u.left=Hn(f.left,u.left),u},Ub(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function PI(e){const{width:t,height:r}=Tk(e);return{width:t,height:r}}function DI(e,t,r){const n=ha(t),s=xa(t),a=r==="fixed",o=Ho(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=Xi(0);if(n||!n&&!a)if((qc(t)!=="body"||pf(s))&&(l=V0(t)),n){const p=Ho(t,!0,a,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&(c.x=Ev(s));let u=0,d=0;if(s&&!n&&!a){const p=s.getBoundingClientRect();d=p.top+l.scrollTop,u=p.left+l.scrollLeft-Ev(s,p)}const f=o.left+l.scrollLeft-c.x-u,h=o.top+l.scrollTop-c.y-d;return{x:f,y:h,width:o.width,height:o.height}}function wg(e){return Gs(e).position==="static"}function zb(e,t){if(!ha(e)||Gs(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return xa(e)===r&&(r=r.ownerDocument.body),r}function Dk(e,t){const r=Qn(e);if(z0(e))return r;if(!ha(e)){let s=Ji(e);for(;s&&!Dc(s);){if(Hs(s)&&!wg(s))return s;s=Ji(s)}return r}let n=zb(e,t);for(;n&&wI(n)&&wg(n);)n=zb(n,t);return n&&Dc(n)&&wg(n)&&!by(n)?r:n||_I(e)||r}const RI=async function(e){const t=this.getOffsetParent||Dk,r=this.getDimensions,n=await r(e.floating);return{reference:DI(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function MI(e){return Gs(e).direction==="rtl"}const OI={convertOffsetParentRelativeRectToViewportRelativeRect:EI,getDocumentElement:xa,getClippingRect:AI,getOffsetParent:Dk,getElementRects:RI,getClientRects:NI,getDimensions:PI,getScale:ic,isElement:Hs,isRTL:MI};function FI(e,t){let r=null,n;const s=xa(e);function a(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const{left:u,top:d,width:f,height:h}=e.getBoundingClientRect();if(l||t(),!f||!h)return;const p=ph(d),g=ph(s.clientWidth-(u+f)),m=ph(s.clientHeight-(d+h)),v=ph(u),y={rootMargin:-p+"px "+-g+"px "+-m+"px "+-v+"px",threshold:Hn(0,qi(1,c))||1};let w=!0;function b(S){const N=S[0].intersectionRatio;if(N!==c){if(!w)return o();N?o(!1,N):n=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{r=new IntersectionObserver(b,{...y,root:s.ownerDocument})}catch{r=new IntersectionObserver(b,y)}r.observe(e)}return o(!0),a}function II(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=Ey(e),d=s||a?[...u?Ad(u):[],...Ad(t)]:[];d.forEach(_=>{s&&_.addEventListener("scroll",r,{passive:!0}),a&&_.addEventListener("resize",r)});const f=u&&l?FI(u,r):null;let h=-1,p=null;o&&(p=new ResizeObserver(_=>{let[y]=_;y&&y.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),r()}),u&&!c&&p.observe(u),p.observe(t));let g,m=c?Ho(e):null;c&&v();function v(){const _=Ho(e);m&&(_.x!==m.x||_.y!==m.y||_.width!==m.width||_.height!==m.height)&&r(),m=_,g=requestAnimationFrame(v)}return r(),()=>{var _;d.forEach(y=>{s&&y.removeEventListener("scroll",r),a&&y.removeEventListener("resize",r)}),f==null||f(),(_=p)==null||_.disconnect(),p=null,c&&cancelAnimationFrame(g)}}const LI=gI,$I=xI,BI=hI,UI=yI,zI=mI,Vb=fI,VI=vI,WI=(e,t,r)=>{const n=new Map,s={platform:OI,...r},a={...s.platform,_c:n};return dI(e,t,{...s,platform:a})};var em=typeof document<"u"?x.useLayoutEffect:x.useEffect;function Om(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Om(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const a=s[n];if(!(a==="_owner"&&e.$$typeof)&&!Om(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Rk(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Wb(e,t){const r=Rk(e);return Math.round(t*r)/r}function _g(e){const t=x.useRef(e);return em(()=>{t.current=e}),t}function HI(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=x.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=x.useState(n);Om(h,n)||p(n);const[g,m]=x.useState(null),[v,_]=x.useState(null),y=x.useCallback(O=>{O!==N.current&&(N.current=O,m(O))},[]),w=x.useCallback(O=>{O!==E.current&&(E.current=O,_(O))},[]),b=a||g,S=o||v,N=x.useRef(null),E=x.useRef(null),C=x.useRef(d),T=c!=null,D=_g(c),F=_g(s),P=_g(u),L=x.useCallback(()=>{if(!N.current||!E.current)return;const O={placement:t,strategy:r,middleware:h};F.current&&(O.platform=F.current),WI(N.current,E.current,O).then(H=>{const G={...H,isPositioned:P.current!==!1};A.current&&!Om(C.current,G)&&(C.current=G,Qa.flushSync(()=>{f(G)}))})},[h,t,r,F,P]);em(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(O=>({...O,isPositioned:!1})))},[u]);const A=x.useRef(!1);em(()=>(A.current=!0,()=>{A.current=!1}),[]),em(()=>{if(b&&(N.current=b),S&&(E.current=S),b&&S){if(D.current)return D.current(b,S,L);L()}},[b,S,L,D,T]);const I=x.useMemo(()=>({reference:N,floating:E,setReference:y,setFloating:w}),[y,w]),Q=x.useMemo(()=>({reference:b,floating:S}),[b,S]),q=x.useMemo(()=>{const O={position:r,left:0,top:0};if(!Q.floating)return O;const H=Wb(Q.floating,d.x),G=Wb(Q.floating,d.y);return l?{...O,transform:"translate("+H+"px, "+G+"px)",...Rk(Q.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:H,top:G}},[r,l,Q.floating,d.x,d.y]);return x.useMemo(()=>({...d,update:L,refs:I,elements:Q,floatingStyles:q}),[d,L,I,Q,q])}const GI=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Vb({element:n.current,padding:s}).fn(r):{}:n?Vb({element:n,padding:s}).fn(r):{}}}},KI=(e,t)=>({...LI(e),options:[e,t]}),YI=(e,t)=>({...$I(e),options:[e,t]}),qI=(e,t)=>({...VI(e),options:[e,t]}),XI=(e,t)=>({...BI(e),options:[e,t]}),QI=(e,t)=>({...UI(e),options:[e,t]}),JI=(e,t)=>({...zI(e),options:[e,t]}),ZI=(e,t)=>({...GI(e),options:[e,t]});var e8="Arrow",Mk=x.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...a}=e;return i.jsx(Ge.svg,{...a,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});Mk.displayName=e8;var t8=Mk;function r8(e,t=[]){let r=[];function n(a,o){const l=x.createContext(o),c=r.length;r=[...r,o];function u(f){const{scope:h,children:p,...g}=f,m=(h==null?void 0:h[e][c])||l,v=x.useMemo(()=>g,Object.values(g));return i.jsx(m.Provider,{value:v,children:p})}function d(f,h){const p=(h==null?void 0:h[e][c])||l,g=x.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const s=()=>{const a=r.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,n8(s,...t)]}function n8(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Ny(e){const[t,r]=x.useState(void 0);return Er(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var jy="Popper",[Ok,ao]=r8(jy),[s8,Fk]=Ok(jy),Ik=e=>{const{__scopePopper:t,children:r}=e,[n,s]=x.useState(null);return i.jsx(s8,{scope:t,anchor:n,onAnchorChange:s,children:r})};Ik.displayName=jy;var Lk="PopperAnchor",$k=x.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,a=Fk(Lk,r),o=x.useRef(null),l=et(t,o);return x.useEffect(()=>{a.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:i.jsx(Ge.div,{...s,ref:l})});$k.displayName=Lk;var ky="PopperContent",[a8,i8]=Ok(ky),Bk=x.forwardRef((e,t)=>{var oe,ce,me,pe,je,we;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:g,...m}=e,v=Fk(ky,r),[_,y]=x.useState(null),w=et(t,Ce=>y(Ce)),[b,S]=x.useState(null),N=Ny(b),E=(N==null?void 0:N.width)??0,C=(N==null?void 0:N.height)??0,T=n+(a!=="center"?"-"+a:""),D=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},F=Array.isArray(u)?u:[u],P=F.length>0,L={padding:D,boundary:F.filter(l8),altBoundary:P},{refs:A,floatingStyles:I,placement:Q,isPositioned:q,middlewareData:O}=HI({strategy:"fixed",placement:T,whileElementsMounted:(...Ce)=>II(...Ce,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[KI({mainAxis:s+C,alignmentAxis:o}),c&&YI({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?qI():void 0,...L}),c&&XI({...L}),QI({...L,apply:({elements:Ce,rects:j,availableWidth:se,availableHeight:ae})=>{const{width:z,height:X}=j.reference,ie=Ce.floating.style;ie.setProperty("--radix-popper-available-width",`${se}px`),ie.setProperty("--radix-popper-available-height",`${ae}px`),ie.setProperty("--radix-popper-anchor-width",`${z}px`),ie.setProperty("--radix-popper-anchor-height",`${X}px`)}}),b&&ZI({element:b,padding:l}),c8({arrowWidth:E,arrowHeight:C}),h&&JI({strategy:"referenceHidden",...L})]}),[H,G]=Vk(Q),K=Ht(g);Er(()=>{q&&(K==null||K())},[q,K]);const k=(oe=O.arrow)==null?void 0:oe.x,W=(ce=O.arrow)==null?void 0:ce.y,R=((me=O.arrow)==null?void 0:me.centerOffset)!==0,[M,re]=x.useState();return Er(()=>{_&&re(window.getComputedStyle(_).zIndex)},[_]),i.jsx("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{...I,transform:q?I.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:M,"--radix-popper-transform-origin":[(pe=O.transformOrigin)==null?void 0:pe.x,(je=O.transformOrigin)==null?void 0:je.y].join(" "),...((we=O.hide)==null?void 0:we.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(a8,{scope:r,placedSide:H,onArrowChange:S,arrowX:k,arrowY:W,shouldHideArrow:R,children:i.jsx(Ge.div,{"data-side":H,"data-align":G,...m,ref:w,style:{...m.style,animation:q?void 0:"none"}})})})});Bk.displayName=ky;var Uk="PopperArrow",o8={top:"bottom",right:"left",bottom:"top",left:"right"},zk=x.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,a=i8(Uk,n),o=o8[a.placedSide];return i.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:i.jsx(t8,{...s,ref:r,style:{...s.style,display:"block"}})})});zk.displayName=Uk;function l8(e){return e!==null}var c8=e=>({name:"transformOrigin",options:e,fn(t){var v,_,y;const{placement:r,rects:n,middlewareData:s}=t,o=((v=s.arrow)==null?void 0:v.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=Vk(r),f={start:"0%",center:"50%",end:"100%"}[d],h=(((_=s.arrow)==null?void 0:_.x)??0)+l/2,p=(((y=s.arrow)==null?void 0:y.y)??0)+c/2;let g="",m="";return u==="bottom"?(g=o?f:`${h}px`,m=`${-c}px`):u==="top"?(g=o?f:`${h}px`,m=`${n.floating.height+c}px`):u==="right"?(g=`${-c}px`,m=o?f:`${p}px`):u==="left"&&(g=`${n.floating.width+c}px`,m=o?f:`${p}px`),{data:{x:g,y:m}}}});function Vk(e){const[t,r="center"]=e.split("-");return[t,r]}var W0=Ik,gf=$k,H0=Bk,G0=zk,[K0,Jne]=ns("Tooltip",[ao]),Y0=ao(),Wk="TooltipProvider",u8=700,Nv="tooltip.open",[d8,Cy]=K0(Wk),Hk=e=>{const{__scopeTooltip:t,delayDuration:r=u8,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:a}=e,[o,l]=x.useState(!0),c=x.useRef(!1),u=x.useRef(0);return x.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),i.jsx(d8,{scope:t,isOpenDelayed:o,delayDuration:r,onOpen:x.useCallback(()=>{window.clearTimeout(u.current),l(!1)},[]),onClose:x.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:x.useCallback(d=>{c.current=d},[]),disableHoverableContent:s,children:a})};Hk.displayName=Wk;var q0="Tooltip",[f8,X0]=K0(q0),Gk=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:s=!1,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=e,c=Cy(q0,e.__scopeTooltip),u=Y0(t),[d,f]=x.useState(null),h=ms(),p=x.useRef(0),g=o??c.disableHoverableContent,m=l??c.delayDuration,v=x.useRef(!1),[_=!1,y]=Ws({prop:n,defaultProp:s,onChange:E=>{E?(c.onOpen(),document.dispatchEvent(new CustomEvent(Nv))):c.onClose(),a==null||a(E)}}),w=x.useMemo(()=>_?v.current?"delayed-open":"instant-open":"closed",[_]),b=x.useCallback(()=>{window.clearTimeout(p.current),p.current=0,v.current=!1,y(!0)},[y]),S=x.useCallback(()=>{window.clearTimeout(p.current),p.current=0,y(!1)},[y]),N=x.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{v.current=!0,y(!0),p.current=0},m)},[m,y]);return x.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),i.jsx(W0,{...u,children:i.jsx(f8,{scope:t,contentId:h,open:_,stateAttribute:w,trigger:d,onTriggerChange:f,onTriggerEnter:x.useCallback(()=>{c.isOpenDelayed?N():b()},[c.isOpenDelayed,N,b]),onTriggerLeave:x.useCallback(()=>{g?S():(window.clearTimeout(p.current),p.current=0)},[S,g]),onOpen:b,onClose:S,disableHoverableContent:g,children:r})})};Gk.displayName=q0;var jv="TooltipTrigger",Kk=x.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=X0(jv,r),a=Cy(jv,r),o=Y0(r),l=x.useRef(null),c=et(t,l,s.onTriggerChange),u=x.useRef(!1),d=x.useRef(!1),f=x.useCallback(()=>u.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),i.jsx(gf,{asChild:!0,...o,children:i.jsx(Ge.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:De(e.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:De(e.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:De(e.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:De(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:De(e.onBlur,s.onClose),onClick:De(e.onClick,s.onClose)})})});Kk.displayName=jv;var h8="TooltipPortal",[Zne,m8]=K0(h8,{forceMount:void 0}),Rc="TooltipContent",Yk=x.forwardRef((e,t)=>{const r=m8(Rc,e.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...a}=e,o=X0(Rc,e.__scopeTooltip);return i.jsx(Mr,{present:n||o.open,children:o.disableHoverableContent?i.jsx(qk,{side:s,...a,ref:t}):i.jsx(p8,{side:s,...a,ref:t})})}),p8=x.forwardRef((e,t)=>{const r=X0(Rc,e.__scopeTooltip),n=Cy(Rc,e.__scopeTooltip),s=x.useRef(null),a=et(t,s),[o,l]=x.useState(null),{trigger:c,onClose:u}=r,d=s.current,{onPointerInTransitChange:f}=n,h=x.useCallback(()=>{l(null),f(!1)},[f]),p=x.useCallback((g,m)=>{const v=g.currentTarget,_={x:g.clientX,y:g.clientY},y=y8(_,v.getBoundingClientRect()),w=w8(_,y),b=_8(m.getBoundingClientRect()),S=S8([...w,...b]);l(S),f(!0)},[f]);return x.useEffect(()=>()=>h(),[h]),x.useEffect(()=>{if(c&&d){const g=v=>p(v,d),m=v=>p(v,c);return c.addEventListener("pointerleave",g),d.addEventListener("pointerleave",m),()=>{c.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",m)}}},[c,d,p,h]),x.useEffect(()=>{if(o){const g=m=>{const v=m.target,_={x:m.clientX,y:m.clientY},y=(c==null?void 0:c.contains(v))||(d==null?void 0:d.contains(v)),w=!b8(_,o);y?h():w&&(h(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,d,o,u,h]),i.jsx(qk,{...e,ref:a})}),[g8,x8]=K0(q0,{isInside:!1}),qk=x.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,c=X0(Rc,r),u=Y0(r),{onClose:d}=c;return x.useEffect(()=>(document.addEventListener(Nv,d),()=>document.removeEventListener(Nv,d)),[d]),x.useEffect(()=>{if(c.trigger){const f=h=>{const p=h.target;p!=null&&p.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),i.jsx(sl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:i.jsxs(H0,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(ly,{children:n}),i.jsx(g8,{scope:r,isInside:!0,children:i.jsx(e6,{id:c.contentId,role:"tooltip",children:s||n})})]})})});Yk.displayName=Rc;var Xk="TooltipArrow",v8=x.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=Y0(r);return x8(Xk,r).isInside?null:i.jsx(G0,{...s,...n,ref:t})});v8.displayName=Xk;function y8(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(r,n,s,a)){case a:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function w8(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function _8(e){const{top:t,right:r,bottom:n,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:n},{x:s,y:n}]}function b8(e,t){const{x:r,y:n}=e;let s=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,u=t[o].x,d=t[o].y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(s=!s)}return s}function S8(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),E8(t)}function E8(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const s=e[n];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const s=e[n];for(;r.length>=2;){const a=r[r.length-1],o=r[r.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))r.pop();else break}r.push(s)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var N8=Hk,j8=Gk,k8=Kk,Qk=Yk;const Mc=N8,Pd=j8,Dd=k8,Oc=x.forwardRef(({className:e,sideOffset:t=4,...r},n)=>i.jsx(Qk,{ref:n,sideOffset:t,className:Te("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));Oc.displayName=Qk.displayName;var xf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Q0=typeof window>"u"||"Deno"in globalThis;function Cs(){}function C8(e,t){return typeof e=="function"?e(t):e}function T8(e){return typeof e=="number"&&e>=0&&e!==1/0}function A8(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Hb(e,t){return typeof e=="function"?e(t):e}function P8(e,t){return typeof e=="function"?e(t):e}function Gb(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:a,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==Ty(o,t.options))return!1}else if(!Rd(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||a&&!a(t))}function Kb(e,t){const{exact:r,status:n,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(r){if(Go(t.options.mutationKey)!==Go(a))return!1}else if(!Rd(t.options.mutationKey,a))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function Ty(e,t){return((t==null?void 0:t.queryKeyHashFn)||Go)(e)}function Go(e){return JSON.stringify(e,(t,r)=>kv(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Rd(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!Rd(e[r],t[r])):!1}function Jk(e,t){if(e===t)return e;const r=Yb(e)&&Yb(t);if(r||kv(e)&&kv(t)){const n=r?e:Object.keys(e),s=n.length,a=r?t:Object.keys(t),o=a.length,l=r?[]:{};let c=0;for(let u=0;u<o;u++){const d=r?u:a[u];(!r&&n.includes(d)||r)&&e[d]===void 0&&t[d]===void 0?(l[d]=void 0,c++):(l[d]=Jk(e[d],t[d]),l[d]===e[d]&&e[d]!==void 0&&c++)}return s===o&&c===s?e:l}return t}function D8(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Yb(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function kv(e){if(!qb(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!qb(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function qb(e){return Object.prototype.toString.call(e)==="[object Object]"}function R8(e){return new Promise(t=>{setTimeout(t,e)})}function M8(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Jk(e,t):t}function O8(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function F8(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Ay=Symbol();function Zk(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Ay?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var To,yi,mc,xE,I8=(xE=class extends xf{constructor(){super();ft(this,To);ft(this,yi);ft(this,mc);Je(this,mc,t=>{if(!Q0&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){_e(this,yi)||this.setEventListener(_e(this,mc))}onUnsubscribe(){var t;this.hasListeners()||((t=_e(this,yi))==null||t.call(this),Je(this,yi,void 0))}setEventListener(t){var r;Je(this,mc,t),(r=_e(this,yi))==null||r.call(this),Je(this,yi,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){_e(this,To)!==t&&(Je(this,To,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof _e(this,To)=="boolean"?_e(this,To):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},To=new WeakMap,yi=new WeakMap,mc=new WeakMap,xE),eC=new I8,pc,wi,gc,vE,L8=(vE=class extends xf{constructor(){super();ft(this,pc,!0);ft(this,wi);ft(this,gc);Je(this,gc,t=>{if(!Q0&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){_e(this,wi)||this.setEventListener(_e(this,gc))}onUnsubscribe(){var t;this.hasListeners()||((t=_e(this,wi))==null||t.call(this),Je(this,wi,void 0))}setEventListener(t){var r;Je(this,gc,t),(r=_e(this,wi))==null||r.call(this),Je(this,wi,t(this.setOnline.bind(this)))}setOnline(t){_e(this,pc)!==t&&(Je(this,pc,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return _e(this,pc)}},pc=new WeakMap,wi=new WeakMap,gc=new WeakMap,vE),Fm=new L8;function $8(){let e,t;const r=new Promise((s,a)=>{e=s,t=a});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}function B8(e){return Math.min(1e3*2**e,3e4)}function tC(e){return(e??"online")==="online"?Fm.isOnline():!0}var rC=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function bg(e){return e instanceof rC}function nC(e){let t=!1,r=0,n=!1,s;const a=$8(),o=m=>{var v;n||(h(new rC(m)),(v=e.abort)==null||v.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>eC.isFocused()&&(e.networkMode==="always"||Fm.isOnline())&&e.canRun(),d=()=>tC(e.networkMode)&&e.canRun(),f=m=>{var v;n||(n=!0,(v=e.onSuccess)==null||v.call(e,m),s==null||s(),a.resolve(m))},h=m=>{var v;n||(n=!0,(v=e.onError)==null||v.call(e,m),s==null||s(),a.reject(m))},p=()=>new Promise(m=>{var v;s=_=>{(n||u())&&m(_)},(v=e.onPause)==null||v.call(e)}).then(()=>{var m;s=void 0,n||(m=e.onContinue)==null||m.call(e)}),g=()=>{if(n)return;let m;const v=r===0?e.initialPromise:void 0;try{m=v??e.fn()}catch(_){m=Promise.reject(_)}Promise.resolve(m).then(f).catch(_=>{var N;if(n)return;const y=e.retry??(Q0?0:3),w=e.retryDelay??B8,b=typeof w=="function"?w(r,_):w,S=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,_);if(t||!S){h(_);return}r++,(N=e.onFail)==null||N.call(e,r,_),R8(b).then(()=>u()?void 0:p()).then(()=>{t?h(_):g()})})};return{promise:a,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?g():p().then(g),a)}}function U8(){let e=[],t=0,r=l=>{l()},n=l=>{l()},s=l=>setTimeout(l,0);const a=l=>{t?e.push(l):s(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var $r=U8(),Ao,yE,sC=(yE=class{constructor(){ft(this,Ao)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),T8(this.gcTime)&&Je(this,Ao,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Q0?1/0:5*60*1e3))}clearGcTimeout(){_e(this,Ao)&&(clearTimeout(_e(this,Ao)),Je(this,Ao,void 0))}},Ao=new WeakMap,yE),xc,vc,is,Zr,rf,Po,Ts,Ea,wE,z8=(wE=class extends sC{constructor(t){super();ft(this,Ts);ft(this,xc);ft(this,vc);ft(this,is);ft(this,Zr);ft(this,rf);ft(this,Po);Je(this,Po,!1),Je(this,rf,t.defaultOptions),this.setOptions(t.options),this.observers=[],Je(this,is,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Je(this,xc,W8(this.options)),this.state=t.state??_e(this,xc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=_e(this,Zr))==null?void 0:t.promise}setOptions(t){this.options={..._e(this,rf),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&_e(this,is).remove(this)}setData(t,r){const n=M8(this.state.data,t,this.options);return ir(this,Ts,Ea).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){ir(this,Ts,Ea).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=_e(this,Zr))==null?void 0:n.promise;return(s=_e(this,Zr))==null||s.cancel(t),r?r.then(Cs).catch(Cs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(_e(this,xc))}isActive(){return this.observers.some(t=>P8(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ay||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!A8(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=_e(this,Zr))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=_e(this,Zr))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),_e(this,is).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(_e(this,Zr)&&(_e(this,Po)?_e(this,Zr).cancel({revert:!0}):_e(this,Zr).cancelRetry()),this.scheduleGc()),_e(this,is).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ir(this,Ts,Ea).call(this,{type:"invalidate"})}fetch(t,r){var c,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(_e(this,Zr))return _e(this,Zr).continueRetry(),_e(this,Zr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(Je(this,Po,!0),n.signal)})},a=()=>{const f=Zk(this.options,r),h={queryKey:this.queryKey,meta:this.meta};return s(h),Je(this,Po,!1),this.options.persister?this.options.persister(f,h,this):f(h)},o={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};s(o),(c=this.options.behavior)==null||c.onFetch(o,this),Je(this,vc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&ir(this,Ts,Ea).call(this,{type:"fetch",meta:(d=o.fetchOptions)==null?void 0:d.meta});const l=f=>{var h,p,g,m;bg(f)&&f.silent||ir(this,Ts,Ea).call(this,{type:"error",error:f}),bg(f)||((p=(h=_e(this,is).config).onError)==null||p.call(h,f,this),(m=(g=_e(this,is).config).onSettled)==null||m.call(g,this.state.data,f,this)),this.scheduleGc()};return Je(this,Zr,nC({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var h,p,g,m;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(v){l(v);return}(p=(h=_e(this,is).config).onSuccess)==null||p.call(h,f,this),(m=(g=_e(this,is).config).onSettled)==null||m.call(g,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,h)=>{ir(this,Ts,Ea).call(this,{type:"failed",failureCount:f,error:h})},onPause:()=>{ir(this,Ts,Ea).call(this,{type:"pause"})},onContinue:()=>{ir(this,Ts,Ea).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),_e(this,Zr).start()}},xc=new WeakMap,vc=new WeakMap,is=new WeakMap,Zr=new WeakMap,rf=new WeakMap,Po=new WeakMap,Ts=new WeakSet,Ea=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...V8(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return bg(s)&&s.revert&&_e(this,vc)?{..._e(this,vc),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),$r.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),_e(this,is).notify({query:this,type:"updated",action:t})})},wE);function V8(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:tC(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function W8(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var na,_E,H8=(_E=class extends xf{constructor(t={}){super();ft(this,na);this.config=t,Je(this,na,new Map)}build(t,r,n){const s=r.queryKey,a=r.queryHash??Ty(s,r);let o=this.get(a);return o||(o=new z8({cache:this,queryKey:s,queryHash:a,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){_e(this,na).has(t.queryHash)||(_e(this,na).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=_e(this,na).get(t.queryHash);r&&(t.destroy(),r===t&&_e(this,na).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){$r.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return _e(this,na).get(t)}getAll(){return[..._e(this,na).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Gb(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>Gb(t,n)):r}notify(t){$r.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){$r.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){$r.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},na=new WeakMap,_E),sa,un,Do,aa,li,bE,G8=(bE=class extends sC{constructor(t){super();ft(this,aa);ft(this,sa);ft(this,un);ft(this,Do);this.mutationId=t.mutationId,Je(this,un,t.mutationCache),Je(this,sa,[]),this.state=t.state||aC(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){_e(this,sa).includes(t)||(_e(this,sa).push(t),this.clearGcTimeout(),_e(this,un).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Je(this,sa,_e(this,sa).filter(r=>r!==t)),this.scheduleGc(),_e(this,un).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){_e(this,sa).length||(this.state.status==="pending"?this.scheduleGc():_e(this,un).remove(this))}continue(){var t;return((t=_e(this,Do))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,a,o,l,c,u,d,f,h,p,g,m,v,_,y,w,b,S,N,E;Je(this,Do,nC({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(C,T)=>{ir(this,aa,li).call(this,{type:"failed",failureCount:C,error:T})},onPause:()=>{ir(this,aa,li).call(this,{type:"pause"})},onContinue:()=>{ir(this,aa,li).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>_e(this,un).canRun(this)}));const r=this.state.status==="pending",n=!_e(this,Do).canStart();try{if(!r){ir(this,aa,li).call(this,{type:"pending",variables:t,isPaused:n}),await((a=(s=_e(this,un).config).onMutate)==null?void 0:a.call(s,t,this));const T=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));T!==this.state.context&&ir(this,aa,li).call(this,{type:"pending",context:T,variables:t,isPaused:n})}const C=await _e(this,Do).start();return await((u=(c=_e(this,un).config).onSuccess)==null?void 0:u.call(c,C,t,this.state.context,this)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,C,t,this.state.context)),await((p=(h=_e(this,un).config).onSettled)==null?void 0:p.call(h,C,null,this.state.variables,this.state.context,this)),await((m=(g=this.options).onSettled)==null?void 0:m.call(g,C,null,t,this.state.context)),ir(this,aa,li).call(this,{type:"success",data:C}),C}catch(C){try{throw await((_=(v=_e(this,un).config).onError)==null?void 0:_.call(v,C,t,this.state.context,this)),await((w=(y=this.options).onError)==null?void 0:w.call(y,C,t,this.state.context)),await((S=(b=_e(this,un).config).onSettled)==null?void 0:S.call(b,void 0,C,this.state.variables,this.state.context,this)),await((E=(N=this.options).onSettled)==null?void 0:E.call(N,void 0,C,t,this.state.context)),C}finally{ir(this,aa,li).call(this,{type:"error",error:C})}}finally{_e(this,un).runNext(this)}}},sa=new WeakMap,un=new WeakMap,Do=new WeakMap,aa=new WeakSet,li=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),$r.batch(()=>{_e(this,sa).forEach(n=>{n.onMutationUpdate(t)}),_e(this,un).notify({mutation:this,type:"updated",action:t})})},bE);function aC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Bn,nf,SE,K8=(SE=class extends xf{constructor(t={}){super();ft(this,Bn);ft(this,nf);this.config=t,Je(this,Bn,new Map),Je(this,nf,Date.now())}build(t,r,n){const s=new G8({mutationCache:this,mutationId:++Kf(this,nf)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){const r=gh(t),n=_e(this,Bn).get(r)??[];n.push(t),_e(this,Bn).set(r,n),this.notify({type:"added",mutation:t})}remove(t){var n;const r=gh(t);if(_e(this,Bn).has(r)){const s=(n=_e(this,Bn).get(r))==null?void 0:n.filter(a=>a!==t);s&&(s.length===0?_e(this,Bn).delete(r):_e(this,Bn).set(r,s))}this.notify({type:"removed",mutation:t})}canRun(t){var n;const r=(n=_e(this,Bn).get(gh(t)))==null?void 0:n.find(s=>s.state.status==="pending");return!r||r===t}runNext(t){var n;const r=(n=_e(this,Bn).get(gh(t)))==null?void 0:n.find(s=>s!==t&&s.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){$r.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[..._e(this,Bn).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Kb(r,n))}findAll(t={}){return this.getAll().filter(r=>Kb(t,r))}notify(t){$r.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return $r.batch(()=>Promise.all(t.map(r=>r.continue().catch(Cs))))}},Bn=new WeakMap,nf=new WeakMap,SE);function gh(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function Xb(e){return{onFetch:(t,r)=>{var d,f,h,p,g;const n=t.options,s=(h=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,a=((p=t.state.data)==null?void 0:p.pages)||[],o=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let m=!1;const v=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},_=Zk(t.options,t.fetchOptions),y=async(w,b,S)=>{if(m)return Promise.reject();if(b==null&&w.pages.length)return Promise.resolve(w);const N={queryKey:t.queryKey,pageParam:b,direction:S?"backward":"forward",meta:t.options.meta};v(N);const E=await _(N),{maxPages:C}=t.options,T=S?F8:O8;return{pages:T(w.pages,E,C),pageParams:T(w.pageParams,b,C)}};if(s&&a.length){const w=s==="backward",b=w?Y8:Qb,S={pages:a,pageParams:o},N=b(n,S);l=await y(S,N,w)}else{const w=e??a.length;do{const b=c===0?o[0]??n.initialPageParam:Qb(n,l);if(c>0&&b==null)break;l=await y(l,b),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var m,v;return(v=(m=t.options).persister)==null?void 0:v.call(m,u,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function Qb(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Y8(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var er,_i,bi,yc,wc,Si,_c,bc,EE,q8=(EE=class{constructor(e={}){ft(this,er);ft(this,_i);ft(this,bi);ft(this,yc);ft(this,wc);ft(this,Si);ft(this,_c);ft(this,bc);Je(this,er,e.queryCache||new H8),Je(this,_i,e.mutationCache||new K8),Je(this,bi,e.defaultOptions||{}),Je(this,yc,new Map),Je(this,wc,new Map),Je(this,Si,0)}mount(){Kf(this,Si)._++,_e(this,Si)===1&&(Je(this,_c,eC.subscribe(async e=>{e&&(await this.resumePausedMutations(),_e(this,er).onFocus())})),Je(this,bc,Fm.subscribe(async e=>{e&&(await this.resumePausedMutations(),_e(this,er).onOnline())})))}unmount(){var e,t;Kf(this,Si)._--,_e(this,Si)===0&&((e=_e(this,_c))==null||e.call(this),Je(this,_c,void 0),(t=_e(this,bc))==null||t.call(this),Je(this,bc,void 0))}isFetching(e){return _e(this,er).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return _e(this,_i).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=_e(this,er).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),n=_e(this,er).build(this,r);return e.revalidateIfStale&&n.isStaleByTime(Hb(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return _e(this,er).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=_e(this,er).get(n.queryHash),a=s==null?void 0:s.state.data,o=C8(t,a);if(o!==void 0)return _e(this,er).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return $r.batch(()=>_e(this,er).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=_e(this,er).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=_e(this,er);$r.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=_e(this,er),n={type:"active",...e};return $r.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(n,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},n=$r.batch(()=>_e(this,er).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(Cs).catch(Cs)}invalidateQueries(e={},t={}){return $r.batch(()=>{if(_e(this,er).findAll(e).forEach(n=>{n.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},n=$r.batch(()=>_e(this,er).findAll(e).filter(s=>!s.isDisabled()).map(s=>{let a=s.fetch(void 0,r);return r.throwOnError||(a=a.catch(Cs)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(Cs)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=_e(this,er).build(this,t);return r.isStaleByTime(Hb(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Cs).catch(Cs)}fetchInfiniteQuery(e){return e.behavior=Xb(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Cs).catch(Cs)}ensureInfiniteQueryData(e){return e.behavior=Xb(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Fm.isOnline()?_e(this,_i).resumePausedMutations():Promise.resolve()}getQueryCache(){return _e(this,er)}getMutationCache(){return _e(this,_i)}getDefaultOptions(){return _e(this,bi)}setDefaultOptions(e){Je(this,bi,e)}setQueryDefaults(e,t){_e(this,yc).set(Go(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[..._e(this,yc).values()];let r={};return t.forEach(n=>{Rd(e,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(e,t){_e(this,wc).set(Go(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[..._e(this,wc).values()];let r={};return t.forEach(n=>{Rd(e,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={..._e(this,bi).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Ty(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===Ay&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{..._e(this,bi).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){_e(this,er).clear(),_e(this,_i).clear()}},er=new WeakMap,_i=new WeakMap,bi=new WeakMap,yc=new WeakMap,wc=new WeakMap,Si=new WeakMap,_c=new WeakMap,bc=new WeakMap,EE),Ei,Ni,Nn,Aa,Ba,tm,Cv,NE,X8=(NE=class extends xf{constructor(r,n){super();ft(this,Ba);ft(this,Ei);ft(this,Ni);ft(this,Nn);ft(this,Aa);Je(this,Ei,r),this.setOptions(n),this.bindMethods(),ir(this,Ba,tm).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var s;const n=this.options;this.options=_e(this,Ei).defaultMutationOptions(r),D8(this.options,n)||_e(this,Ei).getMutationCache().notify({type:"observerOptionsUpdated",mutation:_e(this,Nn),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Go(n.mutationKey)!==Go(this.options.mutationKey)?this.reset():((s=_e(this,Nn))==null?void 0:s.state.status)==="pending"&&_e(this,Nn).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=_e(this,Nn))==null||r.removeObserver(this)}onMutationUpdate(r){ir(this,Ba,tm).call(this),ir(this,Ba,Cv).call(this,r)}getCurrentResult(){return _e(this,Ni)}reset(){var r;(r=_e(this,Nn))==null||r.removeObserver(this),Je(this,Nn,void 0),ir(this,Ba,tm).call(this),ir(this,Ba,Cv).call(this)}mutate(r,n){var s;return Je(this,Aa,n),(s=_e(this,Nn))==null||s.removeObserver(this),Je(this,Nn,_e(this,Ei).getMutationCache().build(_e(this,Ei),this.options)),_e(this,Nn).addObserver(this),_e(this,Nn).execute(r)}},Ei=new WeakMap,Ni=new WeakMap,Nn=new WeakMap,Aa=new WeakMap,Ba=new WeakSet,tm=function(){var n;const r=((n=_e(this,Nn))==null?void 0:n.state)??aC();Je(this,Ni,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Cv=function(r){$r.batch(()=>{var n,s,a,o,l,c,u,d;if(_e(this,Aa)&&this.hasListeners()){const f=_e(this,Ni).variables,h=_e(this,Ni).context;(r==null?void 0:r.type)==="success"?((s=(n=_e(this,Aa)).onSuccess)==null||s.call(n,r.data,f,h),(o=(a=_e(this,Aa)).onSettled)==null||o.call(a,r.data,null,f,h)):(r==null?void 0:r.type)==="error"&&((c=(l=_e(this,Aa)).onError)==null||c.call(l,r.error,f,h),(d=(u=_e(this,Aa)).onSettled)==null||d.call(u,void 0,r.error,f,h))}this.listeners.forEach(f=>{f(_e(this,Ni))})})},NE),iC=x.createContext(void 0),oC=e=>{const t=x.useContext(iC);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Q8=({client:e,children:t})=>(x.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(iC.Provider,{value:e,children:t}));function J8(e,t){return typeof e=="function"?e(...t):!!e}function Z8(){}function _l(e,t){const r=oC(),[n]=x.useState(()=>new X8(r,e));x.useEffect(()=>{n.setOptions(e)},[n,e]);const s=x.useSyncExternalStore(x.useCallback(o=>n.subscribe($r.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=x.useCallback((o,l)=>{n.mutate(o,l).catch(Z8)},[n]);if(s.error&&J8(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Md(){return Md=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Md.apply(this,arguments)}var Ai;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ai||(Ai={}));const Jb="popstate";function eL(e){e===void 0&&(e={});function t(n,s){let{pathname:a,search:o,hash:l}=n.location;return Tv("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:cC(s)}return rL(t,r,null,e)}function pr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function lC(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function tL(){return Math.random().toString(36).substr(2,8)}function Zb(e,t){return{usr:e.state,key:e.key,idx:t}}function Tv(e,t,r,n){return r===void 0&&(r=null),Md({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Xc(t):t,{state:r,key:t&&t.key||n||tL()})}function cC(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Xc(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function rL(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,o=s.history,l=Ai.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Md({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=Ai.Pop;let v=d(),_=v==null?null:v-u;u=v,c&&c({action:l,location:m.location,delta:_})}function h(v,_){l=Ai.Push;let y=Tv(m.location,v,_);u=d()+1;let w=Zb(y,u),b=m.createHref(y);try{o.pushState(w,"",b)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(b)}a&&c&&c({action:l,location:m.location,delta:1})}function p(v,_){l=Ai.Replace;let y=Tv(m.location,v,_);u=d();let w=Zb(y,u),b=m.createHref(y);o.replaceState(w,"",b),a&&c&&c({action:l,location:m.location,delta:0})}function g(v){let _=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof v=="string"?v:cC(v);return y=y.replace(/ $/,"%20"),pr(_,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,_)}let m={get action(){return l},get location(){return e(s,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Jb,f),c=v,()=>{s.removeEventListener(Jb,f),c=null}},createHref(v){return t(s,v)},createURL:g,encodeLocation(v){let _=g(v);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:h,replace:p,go(v){return o.go(v)}};return m}var e2;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(e2||(e2={}));function nL(e,t,r){return r===void 0&&(r="/"),sL(e,t,r,!1)}function sL(e,t,r,n){let s=typeof t=="string"?Xc(t):t,a=fC(s.pathname||"/",r);if(a==null)return null;let o=uC(e);aL(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=gL(a);l=mL(o[c],u,n)}return l}function uC(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(pr(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Oo([n,c.relativePath]),d=r.concat(c);a.children&&a.children.length>0&&(pr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),uC(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:fL(u,a.index),routesMeta:d})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of dC(a.path))s(a,o,c)}),t}function dC(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let o=dC(n.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function aL(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:hL(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const iL=/^:[\w-]+$/,oL=3,lL=2,cL=1,uL=10,dL=-2,t2=e=>e==="*";function fL(e,t){let r=e.split("/"),n=r.length;return r.some(t2)&&(n+=dL),t&&(n+=lL),r.filter(s=>!t2(s)).reduce((s,a)=>s+(iL.test(a)?oL:a===""?cL:uL),n)}function hL(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function mL(e,t,r){let{routesMeta:n}=e,s={},a="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=a==="/"?t:t.slice(a.length)||"/",f=r2({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=r2({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Oo([a,f.pathname]),pathnameBase:wL(Oo([a,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(a=Oo([a,f.pathnameBase]))}return o}function r2(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=pL(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:p}=d;if(h==="*"){let m=l[f]||"";o=a.slice(0,a.length-m.length).replace(/(.)\/+$/,"$1")}const g=l[f];return p&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:e}}function pL(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),lC(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function gL(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return lC(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function fC(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function xL(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Xc(e):e;return{pathname:r?r.startsWith("/")?r:vL(r,t):t,search:_L(n),hash:bL(s)}}function vL(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Sg(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yL(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function hC(e,t){let r=yL(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function mC(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Xc(e):(s=Md({},e),pr(!s.pathname||!s.pathname.includes("?"),Sg("?","pathname","search",s)),pr(!s.pathname||!s.pathname.includes("#"),Sg("#","pathname","hash",s)),pr(!s.search||!s.search.includes("#"),Sg("#","search","hash",s)));let a=e===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=xL(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Oo=e=>e.join("/").replace(/\/\/+/g,"/"),wL=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_L=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,bL=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function SL(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const pC=["post","put","patch","delete"];new Set(pC);const EL=["get",...pC];new Set(EL);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Od(){return Od=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Od.apply(this,arguments)}const Py=x.createContext(null),NL=x.createContext(null),vf=x.createContext(null),J0=x.createContext(null),al=x.createContext({outlet:null,matches:[],isDataRoute:!1}),gC=x.createContext(null);function yf(){return x.useContext(J0)!=null}function wf(){return yf()||pr(!1),x.useContext(J0).location}function xC(e){x.useContext(vf).static||x.useLayoutEffect(e)}function il(){let{isDataRoute:e}=x.useContext(al);return e?LL():jL()}function jL(){yf()||pr(!1);let e=x.useContext(Py),{basename:t,future:r,navigator:n}=x.useContext(vf),{matches:s}=x.useContext(al),{pathname:a}=wf(),o=JSON.stringify(hC(s,r.v7_relativeSplatPath)),l=x.useRef(!1);return xC(()=>{l.current=!0}),x.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=mC(u,JSON.parse(o),a,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Oo([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,o,a,e])}function kL(e,t){return CL(e,t)}function CL(e,t,r,n){yf()||pr(!1);let{navigator:s}=x.useContext(vf),{matches:a}=x.useContext(al),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=wf(),d;if(t){var f;let v=typeof t=="string"?Xc(t):t;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||pr(!1),d=v}else d=u;let h=d.pathname||"/",p=h;if(c!=="/"){let v=c.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=nL(e,{pathname:p}),m=RL(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:Oo([c,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:Oo([c,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,r,n);return t&&m?x.createElement(J0.Provider,{value:{location:Od({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ai.Pop}},m):m}function TL(){let e=IL(),t=SL(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),r?x.createElement("pre",{style:s},r):null,null)}const AL=x.createElement(TL,null);class PL extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?x.createElement(al.Provider,{value:this.props.routeContext},x.createElement(gC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function DL(e){let{routeContext:t,match:r,children:n}=e,s=x.useContext(Py);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),x.createElement(al.Provider,{value:t},n)}function RL(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||pr(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:p}=r,g=f.route.loader&&h[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||g){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,h)=>{let p,g=!1,m=null,v=null;r&&(p=l&&f.route.id?l[f.route.id]:void 0,m=f.route.errorElement||AL,c&&(u<0&&h===0?(g=!0,v=null):u===h&&(g=!0,v=f.route.hydrateFallbackElement||null)));let _=t.concat(o.slice(0,h+1)),y=()=>{let w;return p?w=m:g?w=v:f.route.Component?w=x.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,x.createElement(DL,{match:f,routeContext:{outlet:d,matches:_,isDataRoute:r!=null},children:w})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?x.createElement(PL,{location:r.location,revalidation:r.revalidation,component:m,error:p,children:y(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):y()},null)}var vC=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(vC||{}),Im=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Im||{});function ML(e){let t=x.useContext(Py);return t||pr(!1),t}function OL(e){let t=x.useContext(NL);return t||pr(!1),t}function FL(e){let t=x.useContext(al);return t||pr(!1),t}function yC(e){let t=FL(),r=t.matches[t.matches.length-1];return r.route.id||pr(!1),r.route.id}function IL(){var e;let t=x.useContext(gC),r=OL(Im.UseRouteError),n=yC(Im.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function LL(){let{router:e}=ML(vC.UseNavigateStable),t=yC(Im.UseNavigateStable),r=x.useRef(!1);return xC(()=>{r.current=!0}),x.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Od({fromRouteId:t},a)))},[e,t])}function wC(e){let{to:t,replace:r,state:n,relative:s}=e;yf()||pr(!1);let{future:a,static:o}=x.useContext(vf),{matches:l}=x.useContext(al),{pathname:c}=wf(),u=il(),d=mC(t,hC(l,a.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return x.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function En(e){pr(!1)}function $L(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Ai.Pop,navigator:a,static:o=!1,future:l}=e;yf()&&pr(!1);let c=t.replace(/^\/*/,"/"),u=x.useMemo(()=>({basename:c,navigator:a,static:o,future:Od({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof n=="string"&&(n=Xc(n));let{pathname:d="/",search:f="",hash:h="",state:p=null,key:g="default"}=n,m=x.useMemo(()=>{let v=fC(d,c);return v==null?null:{location:{pathname:v,search:f,hash:h,state:p,key:g},navigationType:s}},[c,d,f,h,p,g,s]);return m==null?null:x.createElement(vf.Provider,{value:u},x.createElement(J0.Provider,{children:r,value:m}))}function BL(e){let{children:t,location:r}=e;return kL(Av(t),r)}new Promise(()=>{});function Av(e,t){t===void 0&&(t=[]);let r=[];return x.Children.forEach(e,(n,s)=>{if(!x.isValidElement(n))return;let a=[...t,s];if(n.type===x.Fragment){r.push.apply(r,Av(n.props.children,a));return}n.type!==En&&pr(!1),!n.props.index||!n.props.children||pr(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Av(n.props.children,a)),r.push(o)}),r}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pv(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function UL(e,t){let r=Pv(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(a=>{r.append(s,a)})}),r}const zL="6";try{window.__reactRouterVersion=zL}catch{}const VL="startTransition",n2=g1[VL];function WL(e){let{basename:t,children:r,future:n,window:s}=e,a=x.useRef();a.current==null&&(a.current=eL({window:s,v5Compat:!0}));let o=a.current,[l,c]=x.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=x.useCallback(f=>{u&&n2?n2(()=>c(f)):c(f)},[c,u]);return x.useLayoutEffect(()=>o.listen(d),[o,d]),x.createElement($L,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}var s2;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(s2||(s2={}));var a2;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(a2||(a2={}));function HL(e){let t=x.useRef(Pv(e)),r=x.useRef(!1),n=wf(),s=x.useMemo(()=>UL(n.search,r.current?null:t.current),[n.search]),a=il(),o=x.useCallback((l,c)=>{const u=Pv(typeof l=="function"?l(s):l);r.current=!0,a("?"+u,c)},[a,s]);return[s,o]}const Fd=df("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),de=x.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},a)=>{const o=n?da:"button";return i.jsx(o,{className:Te(Fd({variant:t,size:r,className:e})),ref:a,...s})});de.displayName="Button";class GL extends ke.Component{constructor(r){super(r);Up(this,"handleRefresh",()=>{window.location.reload()});Up(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){}render(){return this.state.hasError?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsx("div",{className:"text-center max-w-md mx-auto",children:i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx(gy,{className:"h-8 w-8 text-red-600"})}),i.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Something went wrong"}),i.jsx("p",{className:"text-red-600 mb-4",children:"We encountered an unexpected error. Please try refreshing the page or returning to the dashboard."}),!1,i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[i.jsxs(de,{onClick:this.handleRefresh,className:"flex items-center gap-2",variant:"default",children:[i.jsx(Rn,{className:"h-4 w-4"}),"Refresh Page"]}),i.jsxs(de,{onClick:this.handleGoHome,className:"flex items-center gap-2",variant:"outline",children:[i.jsx(hf,{className:"h-4 w-4"}),"Go to Dashboard"]})]})]})})}):this.props.children}}const _C=()=>i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",role:"status","aria-label":"Loading",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx(k6,{className:"h-8 w-8 animate-spin text-primary","aria-hidden":"true"})}),i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Loading ISKCON Bureau Portal"}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Please wait while we prepare your workspace..."}),i.jsx("div",{className:"mt-4 flex justify-center",children:i.jsxs("div",{className:"flex space-x-1",children:[i.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"0ms"}}),i.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"150ms"}}),i.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]})}),KL="modulepreload",YL=function(e){return"/"+e},i2={},zi=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=YL(c),c in i2)return;i2[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":KL,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},qL=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>zi(async()=>{const{default:n}=await Promise.resolve().then(()=>Qc);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Dy extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class XL extends Dy{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class o2 extends Dy{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class l2 extends Dy{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Dv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Dv||(Dv={}));var QL=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class JL{constructor(t,{headers:r={},customFetch:n,region:s=Dv.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=qL(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return QL(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const f=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(m=>{throw new XL(m)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new o2(f);if(!f.ok)throw new l2(f);let p=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return p==="application/json"?g=yield f.json():p==="application/octet-stream"?g=yield f.blob():p==="text/event-stream"?g=f:p==="multipart/form-data"?g=yield f.formData():g=yield f.text(),{data:g,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof l2||s instanceof o2?s.context:void 0}}})}}var kn={},Ry={},Z0={},_f={},ep={},tp={},ZL=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Fc=ZL();const e$=Fc.fetch,bC=Fc.fetch.bind(Fc),SC=Fc.Headers,t$=Fc.Request,r$=Fc.Response,Qc=Object.freeze(Object.defineProperty({__proto__:null,Headers:SC,Request:t$,Response:r$,default:bC,fetch:e$},Symbol.toStringTag,{value:"Module"})),n$=ZR(Qc);var rp={};Object.defineProperty(rp,"__esModule",{value:!0});let s$=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};rp.default=s$;var EC=nn&&nn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tp,"__esModule",{value:!0});const a$=EC(n$),i$=EC(rp);let o$=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=a$.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,c;let u=null,d=null,f=null,h=a.status,p=a.statusText;if(a.ok){if(this.method!=="HEAD"){const _=await a.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=_:d=JSON.parse(_))}const m=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");m&&v&&v.length>1&&(f=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const m=await a.text();try{u=JSON.parse(m),Array.isArray(u)&&a.status===404&&(d=[],u=null,h=200,p="OK")}catch{a.status===404&&m===""?(h=204,p="No Content"):u={message:m}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,h=200,p="OK"),u&&this.shouldThrowOnError)throw new i$.default(u)}return{error:u,data:d,count:f,status:h,statusText:p}});return this.shouldThrowOnError||(s=s.catch(a=>{var o,l,c;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};tp.default=o$;var l$=nn&&nn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ep,"__esModule",{value:!0});const c$=l$(tp);let u$=class extends c$.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:a=s}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:a=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ep.default=u$;var d$=nn&&nn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_f,"__esModule",{value:!0});const f$=d$(ep);let h$=class extends f$.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};_f.default=h$;var m$=nn&&nn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Z0,"__esModule",{value:!0});const yu=m$(_f);let p$=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let a=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new yu.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new yu.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new yu.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new yu.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new yu.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Z0.default=p$;var np={},sp={};Object.defineProperty(sp,"__esModule",{value:!0});sp.version=void 0;sp.version="0.0.0-automated";Object.defineProperty(np,"__esModule",{value:!0});np.DEFAULT_HEADERS=void 0;const g$=sp;np.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${g$.version}`};var NC=nn&&nn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ry,"__esModule",{value:!0});const x$=NC(Z0),v$=NC(_f),y$=np;let w$=class jC{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},y$.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new x$.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new jC(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:a}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(o="POST",c=r);const u=Object.assign({},this.headers);return a&&(u.Prefer=`count=${a}`),new v$.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Ry.default=w$;var Jc=nn&&nn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kn,"__esModule",{value:!0});kn.PostgrestError=kn.PostgrestBuilder=kn.PostgrestTransformBuilder=kn.PostgrestFilterBuilder=kn.PostgrestQueryBuilder=kn.PostgrestClient=void 0;const kC=Jc(Ry);kn.PostgrestClient=kC.default;const CC=Jc(Z0);kn.PostgrestQueryBuilder=CC.default;const TC=Jc(_f);kn.PostgrestFilterBuilder=TC.default;const AC=Jc(ep);kn.PostgrestTransformBuilder=AC.default;const PC=Jc(tp);kn.PostgrestBuilder=PC.default;const DC=Jc(rp);kn.PostgrestError=DC.default;var _$=kn.default={PostgrestClient:kC.default,PostgrestQueryBuilder:CC.default,PostgrestFilterBuilder:TC.default,PostgrestTransformBuilder:AC.default,PostgrestBuilder:PC.default,PostgrestError:DC.default};const{PostgrestClient:b$,PostgrestQueryBuilder:ise,PostgrestFilterBuilder:ose,PostgrestTransformBuilder:lse,PostgrestBuilder:cse,PostgrestError:use}=_$;function S$(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const E$=S$(),N$="2.11.15",j$=`realtime-js/${N$}`,k$="1.0.0",RC=1e4,C$=1e3;var Xu;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Xu||(Xu={}));var Jr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Jr||(Jr={}));var Ps;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ps||(Ps={}));var Rv;(function(e){e.websocket="websocket"})(Rv||(Rv={}));var _o;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(_o||(_o={}));class T${constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),a=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+s));o=o+s;const c=n.decode(t.slice(o,o+a));o=o+a;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class MC{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ot;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ot||(Ot={}));const c2=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((a,o)=>(a[o]=A$(o,e,t,s),a),{})},A$=(e,t,r,n)=>{const s=t.find(l=>l.name===e),a=s==null?void 0:s.type,o=r[e];return a&&!n.includes(a)?OC(a,o):Mv(o)},OC=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return M$(t,r)}switch(e){case Ot.bool:return P$(t);case Ot.float4:case Ot.float8:case Ot.int2:case Ot.int4:case Ot.int8:case Ot.numeric:case Ot.oid:return D$(t);case Ot.json:case Ot.jsonb:return R$(t);case Ot.timestamp:return O$(t);case Ot.abstime:case Ot.date:case Ot.daterange:case Ot.int4range:case Ot.int8range:case Ot.money:case Ot.reltime:case Ot.text:case Ot.time:case Ot.timestamptz:case Ot.timetz:case Ot.tsrange:case Ot.tstzrange:return Mv(t);default:return Mv(t)}},Mv=e=>e,P$=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},D$=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},R$=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},M$=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const o=e.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>OC(t,l))}return e},O$=e=>typeof e=="string"?e.replace(" ","T"):e,FC=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Eg{constructor(t,r,n={},s=RC){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var u2;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(u2||(u2={}));class Qu{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Qu.syncState(this.state,s,a,o),this.pendingDiffs.forEach(c=>{this.state=Qu.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Qu.syncDiff(this.state,s,a,o),l())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const a=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(a,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=a[u];if(f){const h=d.map(v=>v.presence_ref),p=f.map(v=>v.presence_ref),g=d.filter(v=>p.indexOf(v.presence_ref)<0),m=f.filter(v=>h.indexOf(v.presence_ref)<0);g.length>0&&(l[u]=g),m.length>0&&(c[u]=m)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(p=>p.presence_ref),h=d.filter(p=>f.indexOf(p.presence_ref)<0);t[l].unshift(...h)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var d2;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(d2||(d2={}));var f2;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(f2||(f2={}));var ka;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ka||(ka={}));class My{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Jr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Eg(this,Ps.join,this.params,this.timeout),this.rejoinTimer=new MC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Jr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Jr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Jr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Jr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ps.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Qu(this),this.broadcastEndpointURL=FC(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Jr.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params;this._onError(d=>t==null?void 0:t(ka.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(ka.CLOSED));const c={},u={broadcast:a,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){t==null||t(ka.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,g=[];for(let m=0;m<p;m++){const v=h[m],{filter:{event:_,schema:y,table:w,filter:b}}=v,S=d&&d[m];if(S&&S.event===_&&S.schema===y&&S.table===w&&S.filter===b)g.push(Object.assign(Object.assign({},v),{id:S.id}));else{this.unsubscribe(),this.state=Jr.errored,t==null||t(ka.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(ka.SUBSCRIBED);return}}).receive("error",d=>{this.state=Jr.errored,t==null||t(ka.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ka.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Jr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ps.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Eg(this,Ps.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Eg(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,a;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Ps;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var g,m,v;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((v=(m=p.filter)===null||m===void 0?void 0:m.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(p=>p.callback(h,n)):(a=this.bindings[o])===null||a===void 0||a.filter(p=>{var g,m,v,_,y,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const b=p.id,S=(g=p.filter)===null||g===void 0?void 0:g.event;return b&&((m=r.ids)===null||m===void 0?void 0:m.includes(b))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const b=(y=(_=p==null?void 0:p.filter)===null||_===void 0?void 0:_.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return b==="*"||b===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:m,table:v,commit_timestamp:_,type:y,errors:w}=g;h=Object.assign(Object.assign({},{schema:m,table:v,commit_timestamp:_,eventType:y,new:{},old:{},errors:w}),this._getPayloadRecords(g))}p.callback(h,n)})}_isClosed(){return this.state===Jr.closed}_isJoined(){return this.state===Jr.joined}_isJoining(){return this.state===Jr.joining}_isLeaving(){return this.state===Jr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&My.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ps.close,{},t)}_onError(t){this._on(Ps.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Jr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=c2(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=c2(t.columns,t.old_record)),r}}const h2=()=>{},F$=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class I${constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=RC,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=h2,this.ref=0,this.logger=h2,this.conn=null,this.sendBuffer=[],this.serializer=new T$,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...l)=>zi(async()=>{const{default:c}=await Promise.resolve().then(()=>Qc);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${Rv.websocket}`,this.httpEndpoint=FC(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(a,o)=>o(JSON.stringify(a)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new MC(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=E$),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:k$}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Xu.connecting:return _o.Connecting;case Xu.open:return _o.Open;case Xu.closing:return _o.Closing;default:return _o.Closed}}isConnected(){return this.connectionState()===_o.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new My(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:s,ref:a}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:j$};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Ps.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(C$,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:a,ref:o}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,a),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,a,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ps.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([F$],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class Oy extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function jr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class L$ extends Oy{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ov extends Oy{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var $$=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const IC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>zi(async()=>{const{default:n}=await Promise.resolve().then(()=>Qc);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},B$=()=>$$(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield zi(()=>Promise.resolve().then(()=>Qc),void 0)).Response:Response}),Fv=e=>{if(Array.isArray(e))return e.map(r=>Fv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=Fv(n)}),t};var ol=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Ng=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),U$=(e,t,r)=>ol(void 0,void 0,void 0,function*(){const n=yield B$();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{t(new L$(Ng(s),e.status||500))}).catch(s=>{t(new Ov(Ng(s),s))}):t(new Ov(Ng(e),e))}),z$=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function bf(e,t,r,n,s,a){return ol(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,z$(t,n,s,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>U$(c,l,n))})})}function Lm(e,t,r,n){return ol(this,void 0,void 0,function*(){return bf(e,"GET",t,r,n)})}function mi(e,t,r,n,s){return ol(this,void 0,void 0,function*(){return bf(e,"POST",t,n,s,r)})}function V$(e,t,r,n,s){return ol(this,void 0,void 0,function*(){return bf(e,"PUT",t,n,s,r)})}function W$(e,t,r,n){return ol(this,void 0,void 0,function*(){return bf(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function LC(e,t,r,n,s){return ol(this,void 0,void 0,function*(){return bf(e,"DELETE",t,n,s,r)})}var Sn=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const H$={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},m2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class G${constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=IC(s)}uploadOrUpdate(t,r,n,s){return Sn(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},m2),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:a,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield f.json();return f.ok?{data:{path:u,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(a){if(jr(a))return{data:null,error:a};throw a}})}upload(t,r,n){return Sn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Sn(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:m2.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),h=yield f.json();return f.ok?{data:{path:a,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(jr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Sn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield mi(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new Oy("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(jr(n))return{data:null,error:n};throw n}})}update(t,r,n){return Sn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Sn(this,void 0,void 0,function*(){try{return{data:yield mi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(jr(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Sn(this,void 0,void 0,function*(){try{return{data:{path:(yield mi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(jr(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Sn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),a=yield mi(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(s){if(jr(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Sn(this,void 0,void 0,function*(){try{const s=yield mi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(s){if(jr(s))return{data:null,error:s};throw s}})}download(t,r){return Sn(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Lm(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(jr(l))return{data:null,error:l};throw l}})}info(t){return Sn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Lm(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Fv(n),error:null}}catch(n){if(jr(n))return{data:null,error:n};throw n}})}exists(t){return Sn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield W$(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(jr(n)&&n instanceof Ov){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return Sn(this,void 0,void 0,function*(){try{return{data:yield LC(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(jr(r))return{data:null,error:r};throw r}})}list(t,r,n){return Sn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},H$),r),{prefix:t||""});return{data:yield mi(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(jr(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const K$="2.7.1",Y$={"X-Client-Info":`storage-js/${K$}`};var bl=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class q${constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},Y$),r),this.fetch=IC(n)}listBuckets(){return bl(this,void 0,void 0,function*(){try{return{data:yield Lm(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(jr(t))return{data:null,error:t};throw t}})}getBucket(t){return bl(this,void 0,void 0,function*(){try{return{data:yield Lm(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(jr(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return bl(this,void 0,void 0,function*(){try{return{data:yield mi(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(jr(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return bl(this,void 0,void 0,function*(){try{return{data:yield V$(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(jr(n))return{data:null,error:n};throw n}})}emptyBucket(t){return bl(this,void 0,void 0,function*(){try{return{data:yield mi(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(jr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return bl(this,void 0,void 0,function*(){try{return{data:yield LC(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(jr(r))return{data:null,error:r};throw r}})}}class X$ extends q${constructor(t,r={},n){super(t,r,n)}from(t){return new G$(this.url,this.headers,t,this.fetch)}}const Q$="2.50.3";let Mu="";typeof Deno<"u"?Mu="deno":typeof document<"u"?Mu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Mu="react-native":Mu="node";const J$={"X-Client-Info":`supabase-js-${Mu}/${Q$}`},Z$={headers:J$},e7={schema:"public"},t7={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},r7={};var n7=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const s7=e=>{let t;return e?t=e:typeof fetch>"u"?t=bC:t=fetch,(...r)=>t(...r)},a7=()=>typeof Headers>"u"?SC:Headers,i7=(e,t,r)=>{const n=s7(r),s=a7();return(a,o)=>n7(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},o),{headers:u}))})};var o7=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function l7(e){return e.endsWith("/")?e:e+"/"}function c7(e,t){var r,n;const{db:s,auth:a,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>o7(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const $C="2.70.0",Fl=30*1e3,Iv=3,jg=Iv*Fl,u7="http://localhost:9999",d7="supabase.auth.token",f7={"X-Client-Info":`gotrue-js/${$C}`},Lv="X-Supabase-Api-Version",BC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},h7=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,m7=6e5;class Fy extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function tt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class p7 extends Fy{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function g7(e){return tt(e)&&e.name==="AuthApiError"}class UC extends Fy{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class io extends Fy{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class ci extends io{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function x7(e){return tt(e)&&e.name==="AuthSessionMissingError"}class xh extends io{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class vh extends io{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class yh extends io{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function v7(e){return tt(e)&&e.name==="AuthImplicitGrantRedirectError"}class p2 extends io{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $v extends io{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function kg(e){return tt(e)&&e.name==="AuthRetryableFetchError"}class g2 extends io{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Ju extends io{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const $m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),x2=` 	
\r=`.split(""),y7=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<x2.length;t+=1)e[x2[t].charCodeAt(0)]=-2;for(let t=0;t<$m.length;t+=1)e[$m[t].charCodeAt(0)]=t;return e})();function v2(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r($m[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r($m[n]),t.queuedBits-=6}}function zC(e,t,r){const n=y7[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function y2(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=o=>{b7(o,n,r)};for(let o=0;o<e.length;o+=1)zC(e.charCodeAt(o),s,a);return t.join("")}function w7(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function _7(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}w7(n,t)}}function b7(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function S7(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)zC(e.charCodeAt(s),r,n);return new Uint8Array(t)}function E7(e){const t=[];return _7(e,r=>t.push(r)),new Uint8Array(t)}function N7(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>v2(s,r,n)),v2(null,r,n),t.join("")}function j7(e){return Math.round(Date.now()/1e3)+e}function k7(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ns=()=>typeof window<"u"&&typeof document<"u",po={tested:!1,writable:!1},Zu=()=>{if(!Ns())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(po.tested)return po.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),po.tested=!0,po.writable=!0}catch{po.tested=!0,po.writable=!1}return po.writable};function C7(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const VC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>zi(async()=>{const{default:n}=await Promise.resolve().then(()=>Qc);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},T7=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",WC=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},wh=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},_h=async(e,t)=>{await e.removeItem(t)};class ap{constructor(){this.promise=new ap.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}ap.promiseConstructor=Promise;function Cg(e){const t=e.split(".");if(t.length!==3)throw new Ju("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!h7.test(t[n]))throw new Ju("JWT not in base64url format");return{header:JSON.parse(y2(t[0])),payload:JSON.parse(y2(t[1])),signature:S7(t[2]),raw:{header:t[0],payload:t[1]}}}async function A7(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function P7(e,t){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){n(o);return}}catch(o){if(!t(a,o)){s(o);return}}})()})}function D7(e){return("0"+e.toString(16)).substr(-2)}function R7(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,D7).join("")}async function M7(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function O7(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await M7(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sl(e,t,r=!1){const n=R7();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await WC(e,`${t}-code-verifier`,s);const a=await O7(n);return[a,n===a?"plain":"s256"]}const F7=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function I7(e){const t=e.headers.get(Lv);if(!t||!t.match(F7))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function L7(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function $7(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const B7=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function El(e){if(!B7.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var U7=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const vo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),z7=[502,503,504];async function w2(e){var t;if(!T7(e))throw new $v(vo(e),0);if(z7.includes(e.status))throw new $v(vo(e),e.status);let r;try{r=await e.json()}catch(a){throw new UC(vo(a),a)}let n;const s=I7(e);if(s&&s.getTime()>=BC["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new g2(vo(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new ci}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new g2(vo(r),e.status,r.weak_password.reasons);throw new p7(vo(r),e.status||500,n)}const V7=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ct(e,t,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[Lv]||(a[Lv]=BC["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await W7(e,t,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function W7(e,t,r,n,s,a){const o=V7(t,n,s,a);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new $v(vo(c),0)}if(l.ok||await w2(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await w2(c)}}function Na(e){var t;let r=null;Y7(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=j7(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function _2(e){const t=Na(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function xi(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function H7(e){return{data:e,error:null}}function G7(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=e,o=U7(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function K7(e){return e}function Y7(e){return e.access_token&&e.refresh_token&&e.expires_in}const Tg=["global","local","others"];var q7=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class X7{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=VC(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Tg[0]){if(Tg.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Tg.join(", ")}`);try{return await ct(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(tt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await ct(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:xi})}catch(n){if(tt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=q7(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ct(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:G7,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(tt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ct(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:xi})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ct(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:K7});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=m}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(tt(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){El(t);try{return await ct(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:xi})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){El(t);try{return await ct(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:xi})}catch(n){if(tt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){El(t);try{return await ct(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:xi})}catch(n){if(tt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){El(t.userId);try{const{data:r,error:n}=await ct(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(tt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){El(t.userId),El(t.id);try{return{data:await ct(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(tt(r))return{data:null,error:r};throw r}}}const Q7={getItem:e=>Zu()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Zu()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Zu()&&globalThis.localStorage.removeItem(e)}};function b2(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function J7(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Nl={debug:!!(globalThis&&Zu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class HC extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Z7 extends HC{}async function e9(e,t,r){Nl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Nl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Nl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Nl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Nl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Z7(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Nl.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}J7();const t9={url:u7,storageKey:d7,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:f7,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function S2(e,t,r){return await r()}class Id{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Id.nextInstanceID,Id.nextInstanceID+=1,this.instanceID>0&&Ns()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},t9),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new X7({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=VC(s.fetch),this.lock=s.lock||S2,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ns()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=e9:this.lock=S2,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Zu()?this.storage=Q7:(this.memoryStorage={},this.storage=b2(this.memoryStorage)):(this.memoryStorage={},this.storage=b2(this.memoryStorage)),Ns()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${$C}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=C7(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ns()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),v7(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return tt(r)?{error:r}:{error:new UC("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const a=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Na}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(tt(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,n,s;try{let a;if("email"in t){const{email:d,password:f,options:h}=t;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Sl(this.storage,this.storageKey)),a=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:g},xform:Na})}else if("phone"in t){const{phone:d,password:f,options:h}=t;a=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Na})}else throw new vh("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(tt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:o,options:l}=t;r=await ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:_2})}else if("phone"in t){const{phone:a,password:o,options:l}=t;r=await ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:_2})}else throw new vh("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new xh}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(tt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,a,o,l,c,u,d,f,h,p;let g,m;if("message"in t)g=t.message,m=t.signature;else{const{chain:v,wallet:_,statement:y,options:w}=t;let b;if(Ns())if(typeof _=="object")b=_;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))b=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=_}const S=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const N=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),y?{statement:y}:null));let E;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")E=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)E=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)g=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),m=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${S.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const N=await b.signMessage(new TextEncoder().encode(g),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=N}}try{const{data:v,error:_}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:N7(m)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Na});if(_)throw _;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new xh}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:_})}catch(v){if(tt(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(t){const r=await wh(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:o}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Na});if(await _h(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new xh}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(tt(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:a,nonce:o}=t,l=await ct(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Na}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new xh}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(tt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,a,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Sl(this.storage,this.storageKey));const{error:f}=await ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new vh("You must provide either an email or phone number.")}catch(l){if(tt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,a;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await ct(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Na});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(tt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Sl(this.storage,this.storageKey)),await ct(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:H7})}catch(a){if(tt(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new ci;const{error:s}=await ct(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(tt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:a}=t,{error:o}=await ct(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:a}=t,{data:o,error:l}=await ct(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new vh("You must provide either an email or phone number and a type")}catch(r){if(tt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await wh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<jg:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:xi}):await this._useSession(async r=>{var n,s,a;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ci}:await ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:xi})})}catch(r){if(tt(r))return x7(r)&&(await this._removeSession(),await _h(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new ci;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Sl(this.storage,this.storageKey));const{data:u,error:d}=await ct(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:xi});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(tt(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ci;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:o}=Cg(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(tt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new ci;const{session:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(tt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Ns())throw new yh("No browser detected.");if(t.error||t.error_description||t.error_code)throw new yh(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new p2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new yh("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new p2("No code detected.");const{data:y,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!a||!l||!o||!u)throw new yh("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const p=h-d;p*1e3<=Fl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const g=h-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:m,error:v}=await this._getUser(a);if(v)throw v;const _={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:t.type},error:null}}catch(n){if(tt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await wh(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{error:a};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(g7(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await _h(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=k7(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Sl(this.storage,this.storageKey,!0));try{return await ct(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(tt(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(tt(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var o,l,c,u,d;const{data:f,error:h}=a;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ct(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Ns()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(tt(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)throw o;return await ct(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(tt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await P7(async s=>(s>0&&await A7(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ct(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Na})),(s,a)=>{const o=200*Math.pow(2,s);return a&&kg(a)&&Date.now()+o-n<Fl})}catch(n){if(this._debug(r,"error",n),tt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ns()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await wh(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<jg;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${jg}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),kg(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new ci;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ap;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new ci;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),tt(a)){const o={session:null,error:a};return kg(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await WC(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await _h(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ns()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Fl);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Fl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Fl}ms, refresh threshold is ${Iv} ticks`),s<=Iv&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof HC)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ns()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await Sl(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await ct(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(tt(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await ct(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(tt(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const{data:o,error:l}=await ct(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(tt(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await ct(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(tt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:a}=t;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Cg(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n||(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+m7>Date.now()))return n;const{data:s,error:a}=await ct(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!s.keys||s.keys.length===0)throw new Ju("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(o=>o.kid===t),!n)throw new Ju("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:p,error:g}=await this.getSession();if(g||!p.session)return{data:null,error:g};n=p.session.access_token}const{header:s,payload:a,signature:o,raw:{header:l,payload:c}}=Cg(n);if(L7(a.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:a,header:s,signature:o},error:null}}const u=$7(s.alg),d=await this.fetchJwk(s.kid,r),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,E7(`${l}.${c}`)))throw new Ju("Invalid JWT signature");return{data:{claims:a,header:s,signature:o},error:null}}catch(n){if(tt(n))return{data:null,error:n};throw n}}}Id.nextInstanceID=0;const r9=Id;class n9 extends r9{constructor(t){super(t)}}var s9=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class a9{constructor(t,r,n){var s,a,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=l7(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:e7,realtime:r7,auth:Object.assign(Object.assign({},t7),{storageKey:u}),global:Z$},f=c7(n??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=i7(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new b$(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new JL(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new X$(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return s9(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:a,flowType:o,lock:l,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new n9({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:a,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new I$(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const i9=(e,t,r)=>new a9(e,t,r),o9="https://daiimiznlkffbbadhodw.supabase.co",l9="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRhaWltaXpubGtmZmJiYWRob2R3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg3NzgxMTIsImV4cCI6MjA2NDM1NDExMn0.gPvDe0Pfx5avJGvA5uLOi59pjodaCoTI2c17MIST9dA",fe=i9(o9,l9),GC=x.createContext(void 0),mt=()=>{const e=x.useContext(GC);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},c9=({children:e})=>{const[t,r]=x.useState(null),[n,s]=x.useState(null),[a,o]=x.useState(!0),{toast:l}=dt(),c=x.useRef(!1);x.useEffect(()=>{if(c.current)return;c.current=!0,(async()=>{try{const S=localStorage.getItem("rememberMe")==="true",N=localStorage.getItem("rememberMeExpiry");(!S||N&&Date.now()>parseInt(N))&&(localStorage.removeItem("rememberMe"),localStorage.removeItem("rememberMeExpiry"),localStorage.removeItem("sb-daiimiznlkffbbadhodw-auth-token"),sessionStorage.removeItem("sb-daiimiznlkffbbadhodw-auth-token"));const{data:{session:E},error:C}=await fe.auth.getSession();C&&console.error("Error getting session:",C),E&&(S||u(E))?(s(E),r((E==null?void 0:E.user)??null)):(E&&!S&&await fe.auth.signOut(),s(null),r(null))}catch(S){console.error("Error in auth initialization:",S)}finally{o(!1)}})();const{data:{subscription:b}}=fe.auth.onAuthStateChange(async(S,N)=>{var E;console.log("Auth state changed:",S,(E=N==null?void 0:N.user)==null?void 0:E.email),S==="SIGNED_OUT"?(s(null),r(null)):N&&(localStorage.getItem("rememberMe")==="true"||u(N)?(s(N),r((N==null?void 0:N.user)??null)):await fe.auth.signOut()),o(!1)});return()=>{b.unsubscribe(),c.current=!1}},[]);const u=w=>w.expires_at?Date.now()-(w.expires_at*1e3-w.expires_in*1e3)<60*60*1e3:!1,y={user:t,session:n,signUp:async(w,b,S,N,E)=>{try{const C=`${window.location.origin}/`,{error:T}=await fe.auth.signUp({email:w,password:b,options:{emailRedirectTo:C,data:{first_name:S,last_name:N,phone:E}}});return T?(l({title:"Sign Up Error",description:T.message,variant:"destructive"}),{error:T}):(l({title:"Check your email",description:"We've sent you a confirmation link to complete your registration."}),{error:null})}catch(C){return l({title:"Sign Up Error",description:C.message,variant:"destructive"}),{error:C}}},signIn:async(w,b,S=!1)=>{try{localStorage.removeItem("rememberMe"),localStorage.removeItem("rememberMeExpiry");const{error:N}=await fe.auth.signInWithPassword({email:w,password:b});return N?(l({title:"Sign In Error",description:N.message,variant:"destructive"}),{error:N}):(S&&(localStorage.setItem("rememberMe","true"),localStorage.setItem("rememberMeExpiry",(Date.now()+30*24*60*60*1e3).toString())),l({title:"Welcome back!",description:"You have been signed in successfully."}),{error:null})}catch(N){return l({title:"Sign In Error",description:N.message,variant:"destructive"}),{error:N}}},signOut:async()=>{try{if(localStorage.removeItem("rememberMe"),localStorage.removeItem("rememberMeExpiry"),!n){console.log("No active session found, clearing local state"),s(null),r(null),l({title:"Signed out",description:"You have been signed out successfully."});return}const{error:w}=await fe.auth.signOut();s(null),r(null),w?(console.error("Logout error:",w),l({title:"Logout Notice",description:"You have been signed out locally."})):l({title:"Signed out",description:"You have been signed out successfully."})}catch(w){console.error("Logout error:",w),s(null),r(null),l({title:"Signed out",description:"You have been signed out locally."})}},sendOTP:async w=>{try{const{data:b,error:S}=await fe.functions.invoke("send-otp",{body:{phoneNumber:w}});return S?(l({title:"OTP Error",description:"Failed to send OTP. Please try again.",variant:"destructive"}),{error:S}):(l({title:"OTP Sent",description:"Please check your phone for the verification code."}),{error:null,otp:b.otp})}catch(b){return l({title:"OTP Error",description:b.message,variant:"destructive"}),{error:b}}},sendLoginOTP:async w=>{try{const{data:b,error:S}=await fe.functions.invoke("send-login-otp",{body:{email:w}});return S?(l({title:"OTP Error",description:"Failed to send verification code. Please try again.",variant:"destructive"}),{error:S}):(l({title:"Verification Code Sent",description:"Please check your phone for the verification code."}),{error:null,otp:b.otp})}catch(b){return l({title:"OTP Error",description:b.message,variant:"destructive"}),{error:b}}},verifyOTP:async(w,b,S)=>{try{const{error:N}=await fe.auth.updateUser({password:S});return N?(l({title:"Password Reset Error",description:N.message,variant:"destructive"}),{error:N}):(l({title:"Password Reset Successful",description:"Your password has been updated successfully."}),{error:null})}catch(N){return l({title:"Password Reset Error",description:N.message,variant:"destructive"}),{error:N}}},verifyLoginOTP:async(w,b)=>{try{return{error:null}}catch(S){return l({title:"Verification Error",description:S.message,variant:"destructive"}),{error:S}}},resetPasswordWithOTP:async(w,b,S)=>{try{const{data:N,error:E}=await fe.functions.invoke("send-otp",{body:{email:w,type:"reset_password",otp:b,newPassword:S}});if(E)throw console.error("Password reset error:",E),E;return l({title:"Password Reset Successful",description:"Your password has been updated successfully. Please login with your new password."}),{error:null}}catch(N){return console.error("Password reset error:",N),l({title:"Password Reset Error",description:N.message||"Failed to reset password. Please try again.",variant:"destructive"}),{error:N}}},loading:a};return i.jsx(GC.Provider,{value:y,children:e})},oo=()=>{const[e,t]=x.useState(null),[r,n]=x.useState(!0),{user:s}=mt();x.useEffect(()=>{const K=async()=>{if(!s){t(null),n(!1);return}try{console.log("Fetching role for user:",s.email);const{data:W,error:R}=await fe.rpc("get_current_user_role");R?(console.error("Error fetching user role:",R),t("member")):(console.log("User role from database function:",W),t(W))}catch(W){console.error("Error in fetchUserRole:",W),t("member")}finally{n(!1)}};K();const k=fe.channel("user-role-changes").on("postgres_changes",{event:"*",schema:"public",table:"user_roles",filter:`user_id=eq.${s==null?void 0:s.id}`},()=>{console.log("User role changed, refetching..."),K()}).subscribe();return()=>{k.unsubscribe()}},[s]);const a=e==="super_admin"&&((s==null?void 0:s.email)==="cs@iskconbureau.in"||(s==null?void 0:s.email)==="bgd@iskconbureau.in"),o=e==="admin"||a;return{userRole:e,isSuperAdmin:a,isAdmin:o,isMember:e==="member"||o||a,loading:r,canManageMembers:a||o,canManageMeetings:a||o,canManageDocuments:a||o,canViewReports:a||o,canManageSettings:!0,canCreateContent:a||o,canDeleteContent:a||o,canEditContent:a||o,canEditAllUserInfo:a,canEditUserRoles:a||o,canDeleteUsers:a||o,canEditPhoneNumbers:a||o,canViewMemberSettings:a||o,canViewMembers:a||o,canScheduleMeetings:a||o,canDeleteMeetings:a||o,canEditVoting:a||o,canCreateVoting:a||o,canVoteOnly:e==="member",canMarkAttendanceOnly:e==="member",canAccessDashboard:!0,canAccessMeetings:!0,canAccessDocuments:!0,canAccessVoting:!0,canAccessAttendance:!0,canAccessEmail:!0,canAccessMembersModule:a||o,canAccessReports:a||o,canAccessSettings:!0,user:s}},Iy=()=>{const{user:e}=mt(),{toast:t}=dt(),[r,n]=x.useState(null),[s,a]=x.useState(!0),[o,l]=x.useState(0),c=x.useRef(!1),u=x.useRef(0),d=x.useCallback(async()=>{if(!e||c.current){a(!1);return}const g=Date.now();if(!(g-u.current<2e3))try{c.current=!0,u.current=g,a(!0),console.log("Fetching profile for user:",e.id);const{data:m,error:v}=await fe.from("profiles").select("*").eq("id",e.id).single();if(v&&v.code!=="PGRST116"){if(console.error("Error fetching profile:",v),v.message.includes("row-level security")){console.log("User may not have access to their profile yet, creating..."),await f();return}throw v}m?(console.log("Profile fetched successfully:",m),n(m)):(console.log("No profile found, creating..."),await f())}catch(m){console.error("Error fetching profile:",m),t({title:"Profile Error",description:"Failed to load profile information",variant:"destructive"})}finally{a(!1),c.current=!1}},[e,t]),f=async()=>{var g,m;if(!(!e||c.current))try{const v={id:e.id,email:e.email||"",first_name:((g=e.user_metadata)==null?void 0:g.first_name)||"",last_name:((m=e.user_metadata)==null?void 0:m.last_name)||"",phone:e.phone||"",avatar_url:"",updated_at:new Date().toISOString()};console.log("Creating profile:",v);const{data:_,error:y}=await fe.from("profiles").insert(v).select().single();if(y){if(console.error("Error creating profile:",y),y.message.includes("row-level security")){console.log("RLS prevented profile creation, profile might already exist"),setTimeout(()=>d(),2e3);return}throw y}console.log("Profile created successfully:",_),n(_)}catch(v){console.error("Error creating profile:",v)}},h=async g=>{if(!e||!r)return{error:"No user or profile found"};try{console.log("Updating profile with:",g);const m={...g,updated_at:new Date().toISOString()},{data:v,error:_}=await fe.from("profiles").update(m).eq("id",e.id).select().single();if(_){if(console.error("Error updating profile:",_),_.message.includes("row-level security"))return t({title:"Permission Denied",description:"You don't have permission to make this update",variant:"destructive"}),{error:_};throw _}return console.log("Profile updated successfully:",v),n(v),setTimeout(()=>{const y={profile:v,userId:e.id};console.log("Dispatching profile update from useProfile:",y),window.dispatchEvent(new CustomEvent("profileUpdated",{detail:y}))},100),t({title:"Profile Updated",description:"Your information has been saved successfully"}),{error:null}}catch(m){return console.error("Error updating profile:",m),t({title:"Update Failed",description:m.message||"Failed to update profile",variant:"destructive"}),{error:m}}},p=x.useCallback(()=>{console.log("Forcing profile refresh"),l(g=>g+1)},[]);return x.useEffect(()=>{e!=null&&e.id&&d()},[e==null?void 0:e.id,o]),x.useEffect(()=>{let g;const m=v=>{console.log("useProfile received profile update event:",v.detail),v.detail.userId===(e==null?void 0:e.id)&&(clearTimeout(g),g=setTimeout(()=>{d()},1e3))};return window.addEventListener("profileUpdated",m),()=>{window.removeEventListener("profileUpdated",m),clearTimeout(g)}},[e==null?void 0:e.id]),{profile:r,loading:s,updateProfile:h,refreshProfile:p,fetchProfile:d}},Ag=768;function ll(){const[e,t]=x.useState(void 0);return x.useEffect(()=>{const r=window.matchMedia(`(max-width: ${Ag-1}px)`),n=()=>{t(window.innerWidth<Ag)};return r.addEventListener("change",n),t(window.innerWidth<Ag),()=>r.removeEventListener("change",n)},[]),!!e}var Ly="Avatar",[u9,dse]=ns(Ly),[d9,KC]=u9(Ly),YC=x.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[s,a]=x.useState("idle");return i.jsx(d9,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:i.jsx(Ge.span,{...n,ref:t})})});YC.displayName=Ly;var qC="AvatarImage",XC=x.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...a}=e,o=KC(qC,r),l=f9(n,a.referrerPolicy),c=Ht(u=>{s(u),o.onImageLoadingStatusChange(u)});return Er(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(Ge.img,{...a,ref:t,src:n}):null});XC.displayName=qC;var QC="AvatarFallback",JC=x.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...s}=e,a=KC(QC,r),[o,l]=x.useState(n===void 0);return x.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&a.imageLoadingStatus!=="loaded"?i.jsx(Ge.span,{...s,ref:t}):null});JC.displayName=QC;function f9(e,t){const[r,n]=x.useState("idle");return Er(()=>{if(!e){n("error");return}let s=!0;const a=new window.Image,o=l=>()=>{s&&n(l)};return n("loading"),a.onload=o("loaded"),a.onerror=o("error"),a.src=e,t&&(a.referrerPolicy=t),()=>{s=!1}},[e,t]),r}var ZC=YC,eT=XC,tT=JC;const Ld=x.forwardRef(({className:e,...t},r)=>i.jsx(ZC,{ref:r,className:Te("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Ld.displayName=ZC.displayName;const $d=x.forwardRef(({className:e,...t},r)=>i.jsx(eT,{ref:r,className:Te("aspect-square h-full w-full",e),...t}));$d.displayName=eT.displayName;const Bd=x.forwardRef(({className:e,...t},r)=>i.jsx(tT,{ref:r,className:Te("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Bd.displayName=tT.displayName;const Bv=({userName:e,className:t="h-10 w-10",refreshTrigger:r=0,userId:n})=>{const[s,a]=x.useState(""),[o,l]=x.useState(0),c=async()=>{if(n)try{console.log("Fetching avatar for user:",n);const{data:d,error:f}=await fe.from("profiles").select("avatar_url").eq("id",n).single();if(f){console.error("Error fetching avatar:",f);return}d!=null&&d.avatar_url&&(console.log("Avatar URL fetched:",d.avatar_url),a(d.avatar_url),l(h=>h+1))}catch(d){console.error("Error loading avatar:",d)}};x.useEffect(()=>{c()},[n,r]),x.useEffect(()=>{const d=h=>{console.log("Avatar update event received:",h.detail),h.detail.userId===n&&(a(h.detail.avatarUrl),l(p=>p+1))},f=h=>{var p;console.log("Profile update event received:",h.detail),h.detail.userId===n&&((p=h.detail.profile)!=null&&p.avatar_url)&&(a(h.detail.profile.avatar_url),l(g=>g+1))};return window.addEventListener("avatarUpdated",d),window.addEventListener("profileUpdated",f),()=>{window.removeEventListener("avatarUpdated",d),window.removeEventListener("profileUpdated",f)}},[n]);const u=d=>{if(!d)return"";const f=d.includes("?")?"&":"?";return`${d}${f}v=${o}&t=${Date.now()}`};return i.jsxs(Ld,{className:`${t} flex-shrink-0`,children:[i.jsx($d,{src:u(s),alt:e,className:"object-cover object-center"},`${o}-${Date.now()}`),i.jsx(Bd,{className:"bg-primary text-white flex items-center justify-center",children:e.charAt(0).toUpperCase()})]})};var Pg="focusScope.autoFocusOnMount",Dg="focusScope.autoFocusOnUnmount",E2={bubbles:!1,cancelable:!0},h9="FocusScope",Sf=x.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=e,[l,c]=x.useState(null),u=Ht(s),d=Ht(a),f=x.useRef(null),h=et(t,m=>c(m)),p=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(n){let m=function(w){if(p.paused||!l)return;const b=w.target;l.contains(b)?f.current=b:ui(f.current,{select:!0})},v=function(w){if(p.paused||!l)return;const b=w.relatedTarget;b!==null&&(l.contains(b)||ui(f.current,{select:!0}))},_=function(w){if(document.activeElement===document.body)for(const S of w)S.removedNodes.length>0&&ui(l)};document.addEventListener("focusin",m),document.addEventListener("focusout",v);const y=new MutationObserver(_);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",v),y.disconnect()}}},[n,l,p.paused]),x.useEffect(()=>{if(l){j2.add(p);const m=document.activeElement;if(!l.contains(m)){const _=new CustomEvent(Pg,E2);l.addEventListener(Pg,u),l.dispatchEvent(_),_.defaultPrevented||(m9(y9(rT(l)),{select:!0}),document.activeElement===m&&ui(l))}return()=>{l.removeEventListener(Pg,u),setTimeout(()=>{const _=new CustomEvent(Dg,E2);l.addEventListener(Dg,d),l.dispatchEvent(_),_.defaultPrevented||ui(m??document.body,{select:!0}),l.removeEventListener(Dg,d),j2.remove(p)},0)}}},[l,u,d,p]);const g=x.useCallback(m=>{if(!r&&!n||p.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,_=document.activeElement;if(v&&_){const y=m.currentTarget,[w,b]=p9(y);w&&b?!m.shiftKey&&_===b?(m.preventDefault(),r&&ui(w,{select:!0})):m.shiftKey&&_===w&&(m.preventDefault(),r&&ui(b,{select:!0})):_===y&&m.preventDefault()}},[r,n,p.paused]);return i.jsx(Ge.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});Sf.displayName=h9;function m9(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(ui(n,{select:t}),document.activeElement!==r)return}function p9(e){const t=rT(e),r=N2(t,e),n=N2(t.reverse(),e);return[r,n]}function rT(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function N2(e,t){for(const r of e)if(!g9(r,{upTo:t}))return r}function g9(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function x9(e){return e instanceof HTMLInputElement&&"select"in e}function ui(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&x9(e)&&t&&e.select()}}var j2=v9();function v9(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=k2(e,t),e.unshift(t)},remove(t){var r;e=k2(e,t),(r=e[0])==null||r.resume()}}}function k2(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function y9(e){return e.filter(t=>t.tagName!=="A")}var Rg=0;function ip(){x.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??C2()),document.body.insertAdjacentElement("beforeend",e[1]??C2()),Rg++,()=>{Rg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Rg--}},[])}function C2(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var rn=function(){return rn=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},rn.apply(this,arguments)};function $y(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function nT(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,a;n<s;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var ed="right-scroll-bar-position",td="width-before-scroll-bar",w9="with-scroll-bars-hidden",_9="--removed-body-scroll-bar-size";function Mg(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function b9(e,t){var r=x.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var S9=typeof window<"u"?x.useLayoutEffect:x.useEffect,T2=new WeakMap;function sT(e,t){var r=b9(null,function(n){return e.forEach(function(s){return Mg(s,n)})});return S9(function(){var n=T2.get(r);if(n){var s=new Set(n),a=new Set(e),o=r.current;s.forEach(function(l){a.has(l)||Mg(l,null)}),a.forEach(function(l){s.has(l)||Mg(l,o)})}T2.set(r,e)},[e]),r}function E9(e){return e}function N9(e,t){t===void 0&&(t=E9);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var o=t(a,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(n=!0;r.length;){var o=r;r=[],o.forEach(a)}r={push:function(l){return a(l)},filter:function(){return r}}},assignMedium:function(a){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(a),o=r}var c=function(){var d=o;o=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return s}function aT(e){e===void 0&&(e={});var t=N9(null);return t.options=rn({async:!0,ssr:!1},e),t}var iT=function(e){var t=e.sideCar,r=$y(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return x.createElement(n,rn({},r))};iT.isSideCarExport=!0;function oT(e,t){return e.useMedium(t),iT}var lT=aT(),Og=function(){},op=x.forwardRef(function(e,t){var r=x.useRef(null),n=x.useState({onScrollCapture:Og,onWheelCapture:Og,onTouchMoveCapture:Og}),s=n[0],a=n[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,p=e.noIsolation,g=e.inert,m=e.allowPinchZoom,v=e.as,_=v===void 0?"div":v,y=e.gapMode,w=$y(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=h,S=sT([r,t]),N=rn(rn({},w),s);return x.createElement(x.Fragment,null,d&&x.createElement(b,{sideCar:lT,removeScrollBar:u,shards:f,noIsolation:p,inert:g,setCallbacks:a,allowPinchZoom:!!m,lockRef:r,gapMode:y}),o?x.cloneElement(x.Children.only(l),rn(rn({},N),{ref:S})):x.createElement(_,rn({},N,{className:c,ref:S}),l))});op.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};op.classNames={fullWidth:td,zeroRight:ed};var j9=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function k9(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=j9();return t&&e.setAttribute("nonce",t),e}function C9(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function T9(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var A9=function(){var e=0,t=null;return{add:function(r){e==0&&(t=k9())&&(C9(t,r),T9(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},P9=function(){var e=A9();return function(t,r){x.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},By=function(){var e=P9(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},D9={left:0,top:0,right:0,gap:0},Fg=function(e){return parseInt(e||"",10)||0},R9=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Fg(r),Fg(n),Fg(s)]},M9=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return D9;var t=R9(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},O9=By(),oc="data-scroll-locked",F9=function(e,t,r,n){var s=e.left,a=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(w9,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(oc,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ed,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(td,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(ed," .").concat(ed,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(td," .").concat(td,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(oc,`] {
    `).concat(_9,": ").concat(l,`px;
  }
`)},A2=function(){var e=parseInt(document.body.getAttribute(oc)||"0",10);return isFinite(e)?e:0},I9=function(){x.useEffect(function(){return document.body.setAttribute(oc,(A2()+1).toString()),function(){var e=A2()-1;e<=0?document.body.removeAttribute(oc):document.body.setAttribute(oc,e.toString())}},[])},cT=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;I9();var a=x.useMemo(function(){return M9(s)},[s]);return x.createElement(O9,{styles:F9(a,!t,s,r?"":"!important")})},Uv=!1;if(typeof window<"u")try{var bh=Object.defineProperty({},"passive",{get:function(){return Uv=!0,!0}});window.addEventListener("test",bh,bh),window.removeEventListener("test",bh,bh)}catch{Uv=!1}var jl=Uv?{passive:!1}:!1,L9=function(e){return e.tagName==="TEXTAREA"},uT=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!L9(e)&&r[t]==="visible")},$9=function(e){return uT(e,"overflowY")},B9=function(e){return uT(e,"overflowX")},P2=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=dT(e,n);if(s){var a=fT(e,n),o=a[1],l=a[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},U9=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},z9=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},dT=function(e,t){return e==="v"?$9(t):B9(t)},fT=function(e,t){return e==="v"?U9(t):z9(t)},V9=function(e,t){return e==="h"&&t==="rtl"?-1:1},W9=function(e,t,r,n,s){var a=V9(e,window.getComputedStyle(t).direction),o=a*n,l=r.target,c=t.contains(l),u=!1,d=o>0,f=0,h=0;do{var p=fT(e,l),g=p[0],m=p[1],v=p[2],_=m-v-a*g;(g||_)&&dT(e,l)&&(f+=_,h+=g),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(f)<1||!s)||!d&&(Math.abs(h)<1||!s))&&(u=!0),u},Sh=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},D2=function(e){return[e.deltaX,e.deltaY]},R2=function(e){return e&&"current"in e?e.current:e},H9=function(e,t){return e[0]===t[0]&&e[1]===t[1]},G9=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},K9=0,kl=[];function Y9(e){var t=x.useRef([]),r=x.useRef([0,0]),n=x.useRef(),s=x.useState(K9++)[0],a=x.useState(By)[0],o=x.useRef(e);x.useEffect(function(){o.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var m=nT([e.lockRef.current],(e.shards||[]).map(R2),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=x.useCallback(function(m,v){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var _=Sh(m),y=r.current,w="deltaX"in m?m.deltaX:y[0]-_[0],b="deltaY"in m?m.deltaY:y[1]-_[1],S,N=m.target,E=Math.abs(w)>Math.abs(b)?"h":"v";if("touches"in m&&E==="h"&&N.type==="range")return!1;var C=P2(E,N);if(!C)return!0;if(C?S=E:(S=E==="v"?"h":"v",C=P2(E,N)),!C)return!1;if(!n.current&&"changedTouches"in m&&(w||b)&&(n.current=S),!S)return!0;var T=n.current||S;return W9(T,v,m,T==="h"?w:b,!0)},[]),c=x.useCallback(function(m){var v=m;if(!(!kl.length||kl[kl.length-1]!==a)){var _="deltaY"in v?D2(v):Sh(v),y=t.current.filter(function(S){return S.name===v.type&&(S.target===v.target||v.target===S.shadowParent)&&H9(S.delta,_)})[0];if(y&&y.should){v.cancelable&&v.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(R2).filter(Boolean).filter(function(S){return S.contains(v.target)}),b=w.length>0?l(v,w[0]):!o.current.noIsolation;b&&v.cancelable&&v.preventDefault()}}},[]),u=x.useCallback(function(m,v,_,y){var w={name:m,delta:v,target:_,should:y,shadowParent:q9(_)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(b){return b!==w})},1)},[]),d=x.useCallback(function(m){r.current=Sh(m),n.current=void 0},[]),f=x.useCallback(function(m){u(m.type,D2(m),m.target,l(m,e.lockRef.current))},[]),h=x.useCallback(function(m){u(m.type,Sh(m),m.target,l(m,e.lockRef.current))},[]);x.useEffect(function(){return kl.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,jl),document.addEventListener("touchmove",c,jl),document.addEventListener("touchstart",d,jl),function(){kl=kl.filter(function(m){return m!==a}),document.removeEventListener("wheel",c,jl),document.removeEventListener("touchmove",c,jl),document.removeEventListener("touchstart",d,jl)}},[]);var p=e.removeScrollBar,g=e.inert;return x.createElement(x.Fragment,null,g?x.createElement(a,{styles:G9(s)}):null,p?x.createElement(cT,{gapMode:e.gapMode}):null)}function q9(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const X9=oT(lT,Y9);var Ef=x.forwardRef(function(e,t){return x.createElement(op,rn({},e,{ref:t,sideCar:X9}))});Ef.classNames=op.classNames;var Q9=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Cl=new WeakMap,Eh=new WeakMap,Nh={},Ig=0,hT=function(e){return e&&(e.host||hT(e.parentNode))},J9=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=hT(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Z9=function(e,t,r,n){var s=J9(t,Array.isArray(e)?e:[e]);Nh[r]||(Nh[r]=new WeakMap);var a=Nh[r],o=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(l.has(h))d(h);else try{var p=h.getAttribute(n),g=p!==null&&p!=="false",m=(Cl.get(h)||0)+1,v=(a.get(h)||0)+1;Cl.set(h,m),a.set(h,v),o.push(h),m===1&&g&&Eh.set(h,!0),v===1&&h.setAttribute(r,"true"),g||h.setAttribute(n,"true")}catch(_){console.error("aria-hidden: cannot operate on ",h,_)}})};return d(t),l.clear(),Ig++,function(){o.forEach(function(f){var h=Cl.get(f)-1,p=a.get(f)-1;Cl.set(f,h),a.set(f,p),h||(Eh.has(f)||f.removeAttribute(n),Eh.delete(f)),p||f.removeAttribute(r)}),Ig--,Ig||(Cl=new WeakMap,Cl=new WeakMap,Eh=new WeakMap,Nh={})}},Nf=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=Q9(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),Z9(n,s,r,"aria-hidden")):function(){return null}},Uy="Dialog",[mT,pT]=ns(Uy),[eB,Qs]=mT(Uy),gT=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:o=!0}=e,l=x.useRef(null),c=x.useRef(null),[u=!1,d]=Ws({prop:n,defaultProp:s,onChange:a});return i.jsx(eB,{scope:t,triggerRef:l,contentRef:c,contentId:ms(),titleId:ms(),descriptionId:ms(),open:u,onOpenChange:d,onOpenToggle:x.useCallback(()=>d(f=>!f),[d]),modal:o,children:r})};gT.displayName=Uy;var xT="DialogTrigger",vT=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Qs(xT,r),a=et(t,s.triggerRef);return i.jsx(Ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Wy(s.open),...n,ref:a,onClick:De(e.onClick,s.onOpenToggle)})});vT.displayName=xT;var zy="DialogPortal",[tB,yT]=mT(zy,{forceMount:void 0}),wT=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,a=Qs(zy,t);return i.jsx(tB,{scope:t,forceMount:r,children:x.Children.map(n,o=>i.jsx(Mr,{present:r||a.open,children:i.jsx(Gc,{asChild:!0,container:s,children:o})}))})};wT.displayName=zy;var Bm="DialogOverlay",_T=x.forwardRef((e,t)=>{const r=yT(Bm,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,a=Qs(Bm,e.__scopeDialog);return a.modal?i.jsx(Mr,{present:n||a.open,children:i.jsx(rB,{...s,ref:t})}):null});_T.displayName=Bm;var rB=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Qs(Bm,r);return i.jsx(Ef,{as:da,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(Ge.div,{"data-state":Wy(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Ko="DialogContent",bT=x.forwardRef((e,t)=>{const r=yT(Ko,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,a=Qs(Ko,e.__scopeDialog);return i.jsx(Mr,{present:n||a.open,children:a.modal?i.jsx(nB,{...s,ref:t}):i.jsx(sB,{...s,ref:t})})});bT.displayName=Ko;var nB=x.forwardRef((e,t)=>{const r=Qs(Ko,e.__scopeDialog),n=x.useRef(null),s=et(t,r.contentRef,n);return x.useEffect(()=>{const a=n.current;if(a)return Nf(a)},[]),i.jsx(ST,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:De(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:De(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:De(e.onFocusOutside,a=>a.preventDefault())})}),sB=x.forwardRef((e,t)=>{const r=Qs(Ko,e.__scopeDialog),n=x.useRef(!1),s=x.useRef(!1);return i.jsx(ST,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),ST=x.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=e,l=Qs(Ko,r),c=x.useRef(null),u=et(t,c);return ip(),i.jsxs(i.Fragment,{children:[i.jsx(Sf,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(sl,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Wy(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(iB,{titleId:l.titleId}),i.jsx(lB,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Vy="DialogTitle",ET=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Qs(Vy,r);return i.jsx(Ge.h2,{id:s.titleId,...n,ref:t})});ET.displayName=Vy;var NT="DialogDescription",jT=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Qs(NT,r);return i.jsx(Ge.p,{id:s.descriptionId,...n,ref:t})});jT.displayName=NT;var kT="DialogClose",CT=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Qs(kT,r);return i.jsx(Ge.button,{type:"button",...n,ref:t,onClick:De(e.onClick,()=>s.onOpenChange(!1))})});CT.displayName=kT;function Wy(e){return e?"open":"closed"}var TT="DialogTitleWarning",[aB,AT]=F5(TT,{contentName:Ko,titleName:Vy,docsSlug:"dialog"}),iB=({titleId:e})=>{const t=AT(TT),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return x.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},oB="DialogDescriptionWarning",lB=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${AT(oB).contentName}}.`;return x.useEffect(()=>{var a;const s=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},PT=gT,DT=vT,RT=wT,Hy=_T,Gy=bT,Ky=ET,Yy=jT,qy=CT,MT="AlertDialog",[cB,fse]=ns(MT,[pT]),ei=pT(),OT=e=>{const{__scopeAlertDialog:t,...r}=e,n=ei(t);return i.jsx(PT,{...n,...r,modal:!0})};OT.displayName=MT;var uB="AlertDialogTrigger",FT=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=ei(r);return i.jsx(DT,{...s,...n,ref:t})});FT.displayName=uB;var dB="AlertDialogPortal",IT=e=>{const{__scopeAlertDialog:t,...r}=e,n=ei(t);return i.jsx(RT,{...n,...r})};IT.displayName=dB;var fB="AlertDialogOverlay",LT=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=ei(r);return i.jsx(Hy,{...s,...n,ref:t})});LT.displayName=fB;var lc="AlertDialogContent",[hB,mB]=cB(lc),$T=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...s}=e,a=ei(r),o=x.useRef(null),l=et(t,o),c=x.useRef(null);return i.jsx(aB,{contentName:lc,titleName:BT,docsSlug:"alert-dialog",children:i.jsx(hB,{scope:r,cancelRef:c,children:i.jsxs(Gy,{role:"alertdialog",...a,...s,ref:l,onOpenAutoFocus:De(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx(ly,{children:n}),i.jsx(gB,{contentRef:o})]})})})});$T.displayName=lc;var BT="AlertDialogTitle",UT=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=ei(r);return i.jsx(Ky,{...s,...n,ref:t})});UT.displayName=BT;var zT="AlertDialogDescription",VT=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=ei(r);return i.jsx(Yy,{...s,...n,ref:t})});VT.displayName=zT;var pB="AlertDialogAction",WT=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=ei(r);return i.jsx(qy,{...s,...n,ref:t})});WT.displayName=pB;var HT="AlertDialogCancel",GT=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:s}=mB(HT,r),a=ei(r),o=et(t,s);return i.jsx(qy,{...a,...n,ref:o})});GT.displayName=HT;var gB=({contentRef:e})=>{const t=`\`${lc}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${lc}\` by passing a \`${zT}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${lc}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},xB=OT,vB=FT,yB=IT,KT=LT,YT=$T,qT=WT,XT=GT,QT=UT,JT=VT;const Xy=xB,ZT=vB,wB=yB,e4=x.forwardRef(({className:e,...t},r)=>i.jsx(KT,{className:Te("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));e4.displayName=KT.displayName;const lp=x.forwardRef(({className:e,...t},r)=>i.jsxs(wB,{children:[i.jsx(e4,{}),i.jsx(YT,{ref:r,className:Te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));lp.displayName=YT.displayName;const cp=({className:e,...t})=>i.jsx("div",{className:Te("flex flex-col space-y-2 text-center sm:text-left",e),...t});cp.displayName="AlertDialogHeader";const up=({className:e,...t})=>i.jsx("div",{className:Te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});up.displayName="AlertDialogFooter";const dp=x.forwardRef(({className:e,...t},r)=>i.jsx(QT,{ref:r,className:Te("text-lg font-semibold",e),...t}));dp.displayName=QT.displayName;const fp=x.forwardRef(({className:e,...t},r)=>i.jsx(JT,{ref:r,className:Te("text-sm text-muted-foreground",e),...t}));fp.displayName=JT.displayName;const hp=x.forwardRef(({className:e,...t},r)=>i.jsx(qT,{ref:r,className:Te(Fd(),e),...t}));hp.displayName=qT.displayName;const mp=x.forwardRef(({className:e,...t},r)=>i.jsx(XT,{ref:r,className:Te(Fd({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));mp.displayName=XT.displayName;const _B=[{id:"dashboard",label:"Dashboard",icon:hf,requiredPermission:"canAccessDashboard"},{id:"meetings",label:"Meetings",icon:Tr,requiredPermission:"canAccessMeetings"},{id:"documents",label:"Documents",icon:Cd,requiredPermission:"canAccessDocuments"},{id:"voting",label:"Voting",icon:Vo,requiredPermission:"canAccessVoting"},{id:"attendance",label:"Attendance",icon:mr,requiredPermission:"canAccessAttendance"},{id:"email",label:"Email",icon:Ja,requiredPermission:"canAccessEmail"},{id:"members",label:"Members",icon:lr,requiredPermission:"canAccessMembersModule"},{id:"settings",label:"Settings",icon:mf,requiredPermission:"canAccessSettings"}],bB=({isOpen:e,currentModule:t,onModuleChange:r,onClose:n,avatarRefreshTrigger:s=0,isCollapsed:a=!1})=>{const{user:o,signOut:l}=mt(),c=oo(),{profile:u,refreshProfile:d}=Iy(),f=ll(),[h,p]=x.useState(!1),[g,m]=x.useState(0);x.useEffect(()=>{const N=T=>{console.log("Sidebar received profile update:",T.detail),T.detail.userId===(o==null?void 0:o.id)&&(m(D=>D+1),d())},E=T=>{console.log("Sidebar received avatar update:",T.detail),T.detail.userId===(o==null?void 0:o.id)&&(m(D=>D+1),d())},C=T=>{console.log("Sidebar received force avatar refresh:",T.detail),T.detail.userId===(o==null?void 0:o.id)&&(m(D=>D+1),d())};return window.addEventListener("profileUpdated",N),window.addEventListener("avatarUpdated",E),window.addEventListener("forceAvatarRefresh",C),()=>{window.removeEventListener("profileUpdated",N),window.removeEventListener("avatarUpdated",E),window.removeEventListener("forceAvatarRefresh",C)}},[o==null?void 0:o.id,d]),x.useEffect(()=>{o!=null&&o.id&&d()},[o==null?void 0:o.id,d]);const v=_B.filter(N=>N.requiredPermission?c[N.requiredPermission]:!0),_=ke.useMemo(()=>{var N,E;return u!=null&&u.first_name||u!=null&&u.last_name?`${u.first_name||""} ${u.last_name||""}`.trim():u!=null&&u.email?u.email.split("@")[0]:(N=o==null?void 0:o.user_metadata)!=null&&N.first_name||(E=o==null?void 0:o.user_metadata)!=null&&E.last_name?`${o.user_metadata.first_name||""} ${o.user_metadata.last_name||""}`.trim():o!=null&&o.email?o.email.split("@")[0]:"User"},[u,o]),y=(u==null?void 0:u.email)||(o==null?void 0:o.email)||"user@iskcon.org",w=N=>{r(N),f&&n()},b=async()=>{await l(),p(!1),f&&n()},S=()=>{r("settings"),f&&n()};return i.jsx("div",{className:`fixed transform transition-all duration-300 ${e?"translate-x-0":"-translate-x-full"} ${f?"w-64 top-12 bottom-0 z-50":"top-16 bottom-0 lg:translate-x-0 z-20"} ${!f&&a?"w-20":"w-64"} left-0 bg-white shadow-xl`,children:i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsxs("nav",{className:"flex-1 px-4 pt-6 pb-6 space-y-1 overflow-y-auto",children:[v.map(N=>i.jsxs("button",{onClick:()=>w(N.id),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${t===N.id?"bg-primary text-white shadow-sm":"text-gray-600 hover:bg-secondary hover:text-gray-900"} ${!f&&a?"justify-center px-2":""}`,title:!f&&a?N.label:void 0,children:[i.jsx(N.icon,{className:`h-5 w-5 flex-shrink-0 ${!a||f?"mr-3":""}`}),(!a||f)&&i.jsx("span",{className:"truncate",children:N.label})]},N.id)),i.jsxs(Xy,{open:h,onOpenChange:p,children:[i.jsx(ZT,{asChild:!0,children:i.jsxs(de,{variant:"ghost",className:`w-full flex items-center px-4 py-3 text-sm font-medium text-gray-600 hover:bg-red-50 hover:text-red-600 transition-colors mt-4 ${!f&&a?"justify-center px-2":"justify-start"}`,title:!f&&a?"Logout":void 0,children:[i.jsx(C6,{className:`h-5 w-5 flex-shrink-0 ${!a||f?"mr-3":""}`}),(!a||f)&&"Logout"]})}),i.jsxs(lp,{children:[i.jsxs(cp,{children:[i.jsx(dp,{children:"Are you sure you want to log out?"}),i.jsx(fp,{children:"You will be signed out of your account and redirected to the login page."})]}),i.jsxs(up,{children:[i.jsx(mp,{children:"Cancel"}),i.jsx(hp,{onClick:b,children:"Yes, Log Out"})]})]})]})]}),(!a||f)&&i.jsx("div",{className:"border-t border-gray-200 p-4",children:i.jsxs("button",{onClick:S,className:"w-full flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx(Bv,{userName:_,userId:o==null?void 0:o.id,refreshTrigger:s+g+Date.now()}),i.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:_}),i.jsx("p",{className:"text-xs text-gray-500 truncate",children:y})]})]})}),!f&&a&&i.jsx("div",{className:"border-t border-gray-200 p-4 flex justify-center",children:i.jsx("button",{onClick:S,className:"p-2 rounded-lg hover:bg-gray-50 transition-colors",title:_,children:i.jsx(Bv,{userName:_,userId:o==null?void 0:o.id,refreshTrigger:s+g+Date.now()})})})]})})},bt=PT,SB=DT,EB=RT,M2=qy,t4=x.forwardRef(({className:e,...t},r)=>i.jsx(Hy,{ref:r,className:Te("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));t4.displayName=Hy.displayName;const xt=x.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(EB,{children:[i.jsx(t4,{}),i.jsx(Gy,{ref:n,className:Te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] bg-white border border-neutral-200 shadow-2xl rounded-2xl p-8 sm:p-10 duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]",e),...r,children:t})]}));xt.displayName=Gy.displayName;const vt=({className:e,...t})=>i.jsx("div",{className:Te("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});vt.displayName="DialogHeader";const r4=({className:e,...t})=>i.jsx("div",{className:Te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});r4.displayName="DialogFooter";const yt=x.forwardRef(({className:e,...t},r)=>i.jsx(Ky,{ref:r,className:Te("text-lg font-semibold leading-none tracking-tight",e),...t}));yt.displayName=Ky.displayName;const Mt=x.forwardRef(({className:e,...t},r)=>i.jsx(Yy,{ref:r,className:Te("text-sm text-muted-foreground",e),...t}));Mt.displayName=Yy.displayName;const NB=df("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Be({className:e,variant:t,...r}){return i.jsx("div",{className:Te(NB({variant:t}),e),...r})}const Qy=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(!0),[s,a]=x.useState(new Set),{user:o}=mt(),{toast:l}=dt();x.useEffect(()=>{if(o){const v=localStorage.getItem(`notifications_read_${o.id}`);if(v)try{const _=new Set(JSON.parse(v));a(_)}catch{}}},[o]);const c=x.useCallback(v=>{if(o)try{localStorage.setItem(`notifications_read_${o.id}`,JSON.stringify([...v]))}catch{}},[o]),u=x.useCallback(async()=>{if(o)try{n(!0),qu.log("Fetching notifications for user:",o.id);const{data:v}=await fe.from("meetings").select("*").gte("created_at",new Date(Date.now()-7*24*60*60*1e3).toISOString()).order("created_at",{ascending:!1}).limit(3),{data:_}=await fe.from("documents").select("*").gte("created_at",new Date(Date.now()-7*24*60*60*1e3).toISOString()).order("created_at",{ascending:!1}).limit(3),{data:y}=await fe.from("polls").select("*").gte("created_at",new Date(Date.now()-7*24*60*60*1e3).toISOString()).order("created_at",{ascending:!1}).limit(3),w=[];v==null||v.forEach(N=>{const E=new Date(N.start_time),C=new Date,D=(E.getTime()-C.getTime())/(1e3*60*60),F=new Date(N.created_at);(C.getTime()-F.getTime())/(1e3*60*60*24)<=3&&w.push({id:`meeting-${N.id}`,title:"New Meeting Scheduled",message:`${N.title} scheduled for ${E.toLocaleDateString()}`,type:"meeting",read:!1,created_at:N.created_at,related_id:N.id,related_type:"meeting"}),D>0&&D<=24&&w.push({id:`meeting-reminder-${N.id}`,title:"Meeting Reminder",message:`${N.title} starts in ${Math.round(D)} hours`,type:"meeting",read:!1,created_at:new Date().toISOString(),related_id:N.id,related_type:"meeting"})}),_==null||_.forEach(N=>{const E=new Date(N.created_at);(new Date().getTime()-E.getTime())/(1e3*60*60*24)<=3&&w.push({id:`document-${N.id}`,title:"Document Shared",message:`New document "${N.name}" has been uploaded`,type:"document",read:!1,created_at:N.created_at,related_id:N.id,related_type:"document"})}),y==null||y.forEach(N=>{const E=new Date(N.created_at);(new Date().getTime()-E.getTime())/(1e3*60*60*24)<=3&&w.push({id:`poll-${N.id}`,title:"New Poll Available",message:`Vote on "${N.title}" - Deadline: ${new Date(N.deadline).toLocaleDateString()}`,type:"voting",read:!1,created_at:N.created_at,related_id:N.id,related_type:"voting"})});const b=w.sort((N,E)=>new Date(E.created_at).getTime()-new Date(N.created_at).getTime()).slice(0,6),S=b.filter(N=>!s.has(N.id));qu.log("Fetched notifications:",{total:b.length,unread:S.length,readCount:s.size}),t(S)}catch{}finally{n(!1)}},[o,s]),d=async(v,_,y,w)=>{try{const{error:b}=await fe.functions.invoke("send-push-notification",{body:{title:v,body:_,data:y,userIds:w||[o==null?void 0:o.id]}});if(b)throw b;qu.log("Push notification sent successfully")}catch{}},f=x.useCallback(()=>{const v=new Set(s);e.forEach(_=>v.add(_.id)),a(v),c(v),t([]),l({title:"Success",description:"All notifications marked as read"})},[e,s,c,l]),h=x.useCallback(v=>{const _=new Set([...s,v]);a(_),c(_),t(y=>y.filter(w=>w.id!==v))},[s,c]),p=x.useCallback(v=>(h(v.id),{type:v.related_type,id:v.related_id}),[h]),g=x.useCallback(()=>e.length,[e]),m=x.useCallback(v=>{const _=new Date(v),w=Math.floor((new Date().getTime()-_.getTime())/(1e3*60*60));if(w<1)return"Just now";if(w<24)return`${w} hours ago`;const b=Math.floor(w/24);return`${b} day${b>1?"s":""} ago`},[]);return x.useEffect(()=>{u()},[u]),{notifications:e,loading:r,markAllAsRead:f,markAsRead:h,handleNotificationClick:p,getUnreadCount:g,getTimeAgo:m,fetchNotifications:u,sendPushNotification:d}},jB=({open:e,onOpenChange:t,onNavigate:r})=>{const{notifications:n,loading:s,markAllAsRead:a,handleNotificationClick:o,getUnreadCount:l,getTimeAgo:c,markAsRead:u}=Qy(),d=x.useCallback(m=>{switch(m){case"meeting":return i.jsx(Tr,{className:"h-5 w-5 text-primary"});case"voting":return i.jsx(Yi,{className:"h-5 w-5 text-orange-500"});case"document":return i.jsx(Gt,{className:"h-5 w-5 text-green-500"});default:return i.jsx(Ci,{className:"h-5 w-5 text-gray-500"})}},[]),f=x.useCallback(m=>{const v=o(m);if(r&&v){let _="dashboard";switch(v.type){case"meeting":_="meetings";break;case"document":_="documents";break;case"voting":_="voting";break;default:_="dashboard"}r(_,v.id)}},[o,r]),h=x.useCallback(()=>{a()},[a]),p=x.useCallback(m=>{u(m)},[u]),g=l();return s?i.jsx(bt,{open:e,onOpenChange:t,children:i.jsxs(xt,{className:"sm:max-w-[500px]",children:[i.jsx(vt,{children:i.jsxs(yt,{className:"flex items-center space-x-2",children:[i.jsx(Ci,{className:"h-5 w-5"}),i.jsx("span",{children:"Notifications"})]})}),i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]})}):i.jsx(bt,{open:e,onOpenChange:t,children:i.jsxs(xt,{className:"sm:max-w-[500px] p-0 rounded-2xl shadow-xl bg-white",children:[i.jsxs(vt,{className:"sticky top-0 z-10 bg-white rounded-t-2xl border-b px-6 pt-5 pb-3",children:[i.jsxs(yt,{className:"flex items-center space-x-2 text-lg font-bold",children:[i.jsx(Ci,{className:"h-5 w-5 text-primary"}),i.jsx("span",{children:"Notifications"}),g>0&&i.jsxs(Be,{className:"bg-primary text-white px-2 py-0.5 rounded-full text-xs",children:[g," new"]})]}),i.jsx(Mt,{className:"text-xs text-gray-500 mt-1",children:"Stay updated with all platform activities"})]}),i.jsx("div",{className:"max-h-[28rem] overflow-y-auto px-2 sm:px-4 py-2 bg-white rounded-b-2xl",children:n.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400",children:[i.jsx(Ci,{className:"h-12 w-12 mb-4"}),i.jsx("p",{className:"font-medium text-base",children:"No notifications yet"}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"You'll see updates here when activities happen"})]}):i.jsx("div",{className:"space-y-3",children:n.map(m=>i.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-xl border transition-colors group ${m.read?"bg-gray-50 border-gray-200":"bg-blue-50 border-blue-200 shadow-sm"}`,children:[i.jsx("div",{className:"flex-shrink-0 mt-1",children:d(m.type)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("h4",{className:`text-sm font-semibold ${m.read?"text-gray-900":"text-primary"}`,children:m.title}),i.jsxs("div",{className:"flex items-center space-x-2",children:[!m.read&&i.jsx("span",{className:"w-2 h-2 bg-primary rounded-full"}),i.jsx(mr,{className:"h-3 w-3 text-gray-400"}),i.jsx("span",{className:"text-xs text-gray-500",children:c(m.created_at)})]})]}),i.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:m.message}),i.jsxs("div",{className:"flex gap-2 mt-2",children:[i.jsx(de,{variant:"outline",size:"sm",className:"text-xs px-2 py-1 rounded-md border-gray-300 hover:bg-primary/10",onClick:()=>f(m),children:"View"}),!m.read&&i.jsx(de,{variant:"ghost",size:"sm",className:"text-xs px-2 py-1 rounded-md text-primary hover:bg-primary/10",onClick:()=>p(m.id),children:"Mark as Read"})]})]})]},m.id))})}),n.length>0&&g>0&&i.jsx("div",{className:"flex justify-end px-6 py-3 border-t bg-white rounded-b-2xl",children:i.jsxs(de,{variant:"outline",size:"sm",onClick:h,className:"text-xs px-3 py-1 rounded-md border-gray-300 hover:bg-primary/10",children:[i.jsx(Vo,{className:"h-4 w-4 mr-1"}),"Mark All Read"]})})]})})},kB=({onMenuClick:e,onProfileClick:t,onSettingsClick:r,onNavigate:n,showMenuButton:s=!0})=>{var g,m;const[a,o]=x.useState(!1),{user:l}=mt(),c=ll(),{getUnreadCount:u}=Qy(),d=u();(g=l==null?void 0:l.user_metadata)!=null&&g.first_name?`${l.user_metadata.first_name} ${l.user_metadata.last_name||""}`.trim():(m=l==null?void 0:l.email)!=null&&m.split("@")[0];const f=x.useCallback((v,_)=>{o(!1),n&&n(v,_)},[n]);x.useCallback(()=>{t&&t()},[t]);const h=x.useCallback(()=>{n&&n("dashboard")},[n]),p=x.useCallback(()=>{o(!0)},[d]);return i.jsxs(i.Fragment,{children:[c&&i.jsx("div",{className:"fixed top-0 left-0 right-0 h-12 bg-[#8E1616] z-60","aria-hidden":"true"}),i.jsx("header",{className:`bg-white border-b border-gray-200 px-4 py-3 fixed left-0 right-0 h-16 ${c?"top-12 z-60":"top-0 z-50"}`,role:"banner",children:i.jsxs("div",{className:"flex items-center justify-between h-full",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[e&&s&&i.jsx(de,{variant:"ghost",size:"icon",onClick:e,className:"hover:bg-gray-100 transition-colors",title:c?"Open navigation menu":"Toggle sidebar","aria-label":c?"Open navigation menu":"Toggle sidebar","aria-expanded":"false",children:i.jsx(T6,{className:"h-4 w-4 text-foreground","aria-hidden":"true"})}),i.jsxs("button",{onClick:h,className:"flex items-center space-x-3 hover:opacity-80 transition-opacity",title:"Go to Dashboard","aria-label":"Go to Dashboard",children:[i.jsx("div",{className:"flex items-center justify-center w-10 h-10 flex-shrink-0",children:i.jsx("img",{src:"/icons/icon-512.png",alt:"ISKCON Logo",className:"w-full h-full object-contain"})}),i.jsxs("div",{className:"text-left",children:[!c&&i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"text-xl font-bold text-[#8E1616]",children:"ISKCON BUREAU"}),i.jsx("p",{className:"text-sm text-muted-foreground -mt-1",children:"Management Portal"})]}),c&&i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"text-lg font-bold text-[#8E1616]",children:"ISKCON BUREAU"}),i.jsx("p",{className:"text-xs text-muted-foreground -mt-1",children:"Management Portal"})]})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(de,{variant:"ghost",size:"icon",onClick:p,className:"relative","aria-label":`Notifications${d>0?` (${d} unread)`:""}`,"aria-haspopup":"dialog",children:[i.jsx(Ci,{className:"h-4 w-4 text-foreground","aria-hidden":"true"}),d>0&&i.jsx("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-[#8E1616] rounded-full animate-pulse","aria-label":`${d} unread notifications`})]}),i.jsx(de,{variant:"ghost",size:"icon",onClick:r,"aria-label":"Settings",children:i.jsx(mf,{className:"h-4 w-4 text-foreground","aria-hidden":"true"})})]})]})}),i.jsx(jB,{open:a,onOpenChange:o,onNavigate:f})]})},CB=({children:e})=>{const[t,r]=x.useState(!0),[n,s]=x.useState(!1),[a,o]=x.useState("dashboard"),l=ll(),c=wf(),u=il();qu.log("Layout - Current location:",c.pathname),x.useEffect(()=>{const h=c.pathname;let p="dashboard";h==="/"?p="dashboard":h.startsWith("/")&&(p=h.substring(1)),o(p)},[c]),x.useEffect(()=>{r(!l)},[l]);const d=h=>{o(h),l&&r(!1);const p=h==="dashboard"?"/":`/${h}`;try{u(p)}catch{window.location.href=p}},f=[{id:"dashboard",icon:hf,label:"Home"},{id:"meetings",icon:Tr,label:"Meeting"},{id:"documents",icon:Cd,label:"Docs"},{id:"attendance",icon:Wo,label:"Attendance"},{id:"voting",icon:Yi,label:"Voting"}];return i.jsxs("div",{className:"min-h-screen flex w-full overflow-hidden",style:{backgroundColor:"#FCFAF5"},role:"application",children:[l&&t&&i.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm z-40",onClick:()=>r(!1),"aria-hidden":"true"}),i.jsx(kB,{onMenuClick:()=>{l?r(!t):s(!n)},onProfileClick:()=>d("settings"),onSettingsClick:()=>d("settings"),onNavigate:d,showMenuButton:!0}),i.jsx(bB,{isOpen:t,onClose:()=>r(!1),currentModule:a,onModuleChange:d,isCollapsed:!l&&n}),i.jsxs("div",{className:`flex-1 flex flex-col min-w-0 w-full transition-all duration-300 ${l?"ml-0":!l&&t&&!n?"ml-64":!l&&t&&n?"ml-16":"ml-0"} ${l?"pt-28":"pt-16"}`,children:[i.jsx("main",{className:`flex-1 w-full min-w-0 overflow-x-hidden transition-all duration-300 ${l?"p-4 pb-32":"p-6"}`,style:{backgroundImage:"radial-gradient(circle at 1px 1px, rgba(0, 0, 0, 0.2) 1px, transparent 0)",backgroundSize:"20px 20px"},role:"main","aria-label":`${a.charAt(0).toUpperCase()+a.slice(1)} module content`,children:i.jsx("div",{className:"w-full max-w-none mx-auto",children:e})}),l&&i.jsx("nav",{className:"bg-white border-t border-gray-200 px-2 py-2 fixed bottom-2 left-0 right-0 z-30 h-20 mx-2 rounded-lg shadow-lg",role:"navigation","aria-label":"Mobile navigation",children:i.jsx("div",{className:"flex items-center justify-around h-full max-w-full",children:f.map(h=>i.jsxs("button",{onClick:()=>d(h.id),className:`flex flex-col items-center justify-center flex-1 py-2 px-1 transition-colors duration-200 h-full ${a===h.id?"text-primary":"text-black hover:text-gray-700"}`,style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},"aria-label":`Navigate to ${h.label}`,"aria-current":a===h.id?"page":void 0,children:[i.jsx(h.icon,{className:`h-8 w-8 mb-1 ${a===h.id?"text-primary":"text-black"}`,"aria-hidden":"true"}),i.jsx("span",{className:`text-xs font-medium leading-tight ${a===h.id?"text-primary":"text-black"}`,children:h.label})]},h.id))})})]})]})},He=x.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Te("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));He.displayName="Card";const rt=x.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Te("flex flex-col space-y-1.5 p-6",e),...t}));rt.displayName="CardHeader";const st=x.forwardRef(({className:e,...t},r)=>i.jsx("h3",{ref:r,className:Te("text-2xl font-semibold leading-none tracking-tight",e),...t}));st.displayName="CardTitle";const sn=x.forwardRef(({className:e,...t},r)=>i.jsx("p",{ref:r,className:Te("text-sm text-muted-foreground",e),...t}));sn.displayName="CardDescription";const Ye=x.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Te("p-6 pt-0",e),...t}));Ye.displayName="CardContent";const TB=x.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Te("flex items-center p-6 pt-0",e),...t}));TB.displayName="CardFooter";function AB(e){switch(e){case"30min":return 30;case"1hour":return 60;case"1.5hours":return 90;case"2hours":return 120;case"3hours":return 180;default:const t=parseFloat(e);return isNaN(t)?60:t}}const cl=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(!0),[s,a]=x.useState(new Map),{user:o}=mt(),{toast:l}=dt(),c=async()=>{try{const{data:b,error:S}=await fe.from("meetings").select("*, meeting_attendees(user_id)").order("start_time",{ascending:!0});if(S)throw S;const N=Array.from(new Set((b||[]).map(T=>T.created_by).filter(Boolean)));let E={};if(N.length>0){const{data:T}=await fe.from("profiles").select("id, first_name, last_name, email").in("id",N);if(T)for(const D of T)E[D.id]=D}const C=(b||[]).map(T=>{let D=T.created_by;const F=E[T.created_by];F&&(D=F.first_name?`${F.first_name} ${F.last_name||""}`.trim():F.email||T.created_by);let P=[];Array.isArray(T.manual_attendees)&&(P=T.manual_attendees.map(I=>typeof I=="string"?{email:I,rsvp:null}:I&&typeof I.email=="string"?{email:I.email,rsvp:I.rsvp||null}:null).filter(Boolean));const L=Array.isArray(T.meeting_attendees)?T.meeting_attendees:[],A=L.length+(Array.isArray(P)?P.length:0);return{...T,created_by_name:D,manual_attendees:P,meeting_attendees:L,attendee_count:A}});t(C)}catch(b){console.error("Error fetching meetings:",b),l({title:"Error",description:"Failed to load meetings",variant:"destructive"})}finally{n(!1)}};x.useEffect(()=>{c();const b=fe.channel("meetings-changes").on("postgres_changes",{event:"*",schema:"public",table:"meetings"},N=>{var E;if(console.log("Meetings table changed:",N),N.eventType==="DELETE"){console.log("Meeting deleted from database:",(E=N.old)==null?void 0:E.id),t(C=>C.filter(T=>{var D;return T.id!==((D=N.old)==null?void 0:D.id)}));return}setTimeout(()=>{c()},500)}).subscribe(),S=fe.channel("meeting-attendees-changes").on("postgres_changes",{event:"*",schema:"public",table:"meeting_attendees"},N=>{console.log("Meeting attendees changed:",N),setTimeout(()=>{c()},500)}).subscribe();return()=>{fe.removeChannel(b),fe.removeChannel(S)}},[]);const u=async b=>{if(!o){l({title:"Authentication Required",description:"Please sign in to create meetings",variant:"destructive"});return}try{const S=new Date(`${b.date.toISOString().split("T")[0]}T${b.time}`),N=AB(b.duration),E=new Date(S.getTime()+N*6e4);console.log("Creating meeting with data:",{title:b.title,description:b.description,start_time:S.toISOString(),end_time:E.toISOString(),location:b.location,meeting_type:b.type,created_by:o.id});let C,T=null,D=null,F=!1;if(b.type==="online"||b.type==="hybrid"){const{data:q}=await fe.from("profiles").select("microsoft_access_token").eq("id",o.id).single();if(q!=null&&q.microsoft_access_token){const{data:O,error:H}=await fe.functions.invoke("create-teams-meeting",{body:{title:b.title,description:b.description,startTime:S.toISOString(),endTime:E.toISOString(),attendees:b.attendees?b.attendees.split(",").map(G=>G.trim()):[]}});H?(console.error("Teams meeting creation failed:",H),l({title:"Teams Meeting Creation Failed",description:"Creating regular meeting instead. Connect Microsoft account for Teams integration.",variant:"destructive"})):O!=null&&O.meeting&&(T=O.meeting.teams_join_url||null,D=O.meeting.teams_meeting_id||null,F=!0,l({title:"Teams Meeting Created!",description:`"${b.title}" created with Teams link and calendar event`}))}else l({title:"Microsoft Account Not Connected",description:"Connect your Microsoft account in Settings to create Teams meetings automatically",variant:"destructive"})}let P=[],L=[];if(b.attendees){const q=b.attendees.split(",").map(O=>O.trim());for(const O of q){const{data:H}=await fe.from("profiles").select("id").eq("email",O).single();H!=null&&H.id?P.push(O):L.push(O)}}const A=L.map(q=>({email:q,rsvp:null})),{data:I,error:Q}=await fe.from("meetings").insert({title:b.title,description:b.description,start_time:S.toISOString(),end_time:E.toISOString(),location:b.location,meeting_type:b.type,status:"scheduled",created_by:o.id,manual_attendees:A,teams_join_url:T,teams_meeting_id:D}).select().single();if(Q)throw Q;return C=I,F&&C&&D&&await h(C.id,D),P.length>0&&await f(C.id,P.join(", ")),b.attendees&&C&&await d(C,b.attendees,b.attachments),l({title:"Meeting Created",description:`"${b.title}" has been scheduled successfully`}),c(),C}catch(S){console.error("Error creating meeting:",S),l({title:"Creation Failed",description:S.message||"Failed to create meeting",variant:"destructive"})}},d=async(b,S,N)=>{try{const E=S.split(",").map(Q=>Q.trim());let C=[];if(N&&N.length>0){const{data:Q}=await fe.from("meeting_attachments").select("*").eq("meeting_id",b.id);C=Q||[]}const T=new Date(b.start_time),D=new Date(b.end_time),F=T.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),P=`${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})} - ${D.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`,L=`
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #ffffff;">
          <div style="text-align: center; margin-bottom: 30px;">
            <h1 style="color: #2563eb; font-size: 28px; margin: 0; font-weight: 600;">Meeting Invitation</h1>
          </div>
          
          <div style="background-color: #f8fafc; padding: 25px; border-radius: 8px; border-left: 4px solid #2563eb; margin-bottom: 25px;">
            <h2 style="margin: 0 0 20px 0; color: #1e293b; font-size: 22px; font-weight: 600;">${b.title}</h2>
            
            <table style="width: 100%; border-collapse: collapse;">
              <tr>
                <td style="padding: 8px 0; vertical-align: top; width: 80px;">
                  <strong style="color: #374151;">Date:</strong>
                </td>
                <td style="padding: 8px 0; color: #1f2937;">
                  ${F}
                </td>
              </tr>
              <tr>
                <td style="padding: 8px 0; vertical-align: top;">
                  <strong style="color: #374151;">Time:</strong>
                </td>
                <td style="padding: 8px 0; color: #1f2937;">
                  ${P}
                </td>
              </tr>
              <tr>
                <td style="padding: 8px 0; vertical-align: top;">
                  <strong style="color: #374151;">Location:</strong>
                </td>
                <td style="padding: 8px 0; color: #1f2937;">
                  ${b.location||"To be determined"}
                </td>
              </tr>
              ${b.teams_join_url?`
                <tr>
                  <td style="padding: 8px 0; vertical-align: top;">
                    <strong style="color: #374151;">Join Online:</strong>
                  </td>
                  <td style="padding: 8px 0;">
                    <a href="${b.teams_join_url}" style="color: #2563eb; text-decoration: none; background-color: #dbeafe; padding: 8px 12px; border-radius: 4px; display: inline-block;">Click to join Teams meeting</a>
                  </td>
                </tr>
              `:""}
            </table>
            
            ${b.description?`
              <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #e5e7eb;">
                <strong style="color: #374151; display: block; margin-bottom: 8px;">Description:</strong>
                <p style="margin: 0; color: #4b5563; line-height: 1.5;">${b.description}</p>
              </div>
            `:""}
          </div>
          
          ${C.length>0?`
            <div style="margin-bottom: 25px; padding: 20px; background-color: #f9fafb; border-radius: 6px;">
              <strong style="color: #374151; display: block; margin-bottom: 12px;">Attachments:</strong>
              <ul style="margin: 0; padding-left: 20px; color: #4b5563;">
                ${C.map(Q=>`<li style="margin-bottom: 4px;">${Q.name}</li>`).join("")}
              </ul>
            </div>
          `:""}
          
          <div style="background-color: #fef3c7; padding: 15px; border-radius: 6px; border-left: 4px solid #f59e0b; margin-bottom: 25px;">
            <p style="margin: 0; color: #92400e; font-weight: 500;">
              Please mark your calendar and let us know if you cannot attend.
            </p>
          </div>
          
          <div style="text-align: center; padding-top: 20px; border-top: 1px solid #e5e7eb;">
            <p style="color: #6b7280; font-size: 14px; margin: 0;">
              This invitation was sent automatically by the meeting management system.
            </p>
          </div>
        </div>
      `,{data:A,error:I}=await fe.functions.invoke("send-outlook-email",{body:{subject:`Meeting Invitation: ${b.title}`,body:L,recipients:E,attachments:C,meetingId:b.id}});I?(console.error("Error sending invitations:",I),l({title:"Invitation Email Failed",description:"Meeting created but email invitations could not be sent",variant:"destructive"})):l({title:"Invitations Sent",description:`Meeting invitations sent to ${E.length} attendee(s)${C.length>0?` with ${C.length} attachment(s)`:""}`})}catch(E){console.error("Error sending meeting invitations:",E)}},f=async(b,S)=>{try{const N=S.split(",").map(E=>E.trim());for(const E of N){const{data:C}=await fe.from("profiles").select("id").eq("email",E).maybeSingle();C&&await fe.from("meeting_attendees").insert({meeting_id:b,user_id:C.id,status:"pending"})}}catch(N){console.error("Error adding attendees:",N)}},h=async(b,S)=>{try{await fe.from("meeting_transcripts").insert({meeting_id:b,teams_transcript_id:S,created_at:new Date().toISOString()})}catch(N){console.error("Error saving transcript reference:",N)}},p=async b=>{if(!o){l({title:"Authentication Required",description:"Please sign in to delete meetings",variant:"destructive"});return}const S=e.find(E=>E.id===b);if(!S){l({title:"Meeting Not Found",description:"The meeting you're trying to delete was not found",variant:"destructive"});return}if(S.created_by!==o.id){l({title:"Permission Denied",description:"You can only delete meetings you created",variant:"destructive"});return}const N=[{step:"Preparing deletion",completed:!1},{step:"Removing from Microsoft Teams",completed:!1},{step:"Deleting Outlook calendar event",completed:!1},{step:"Cleaning up attachments",completed:!1},{step:"Removing attendee records",completed:!1},{step:"Deleting attendance data",completed:!1},{step:"Removing transcripts",completed:!1},{step:"Finalizing deletion",completed:!1}];a(E=>new Map(E.set(b,[...N]))),t(E=>E.filter(C=>C.id!==b));try{if(console.log(`Starting comprehensive deletion for meeting: ${b}`),await g(b,0,!0),S.teams_meeting_id||S.outlook_event_id)try{const{data:P}=await fe.from("profiles").select("microsoft_access_token").eq("id",o.id).maybeSingle();if(P!=null&&P.microsoft_access_token){if(S.teams_meeting_id){console.log(`Deleting Teams meeting: ${S.teams_meeting_id}`);const L=await fetch(`https://graph.microsoft.com/v1.0/me/onlineMeetings/${S.teams_meeting_id}`,{method:"DELETE",headers:{Authorization:`Bearer ${P.microsoft_access_token}`}});if(!L.ok&&L.status!==404)throw new Error(`Teams deletion failed: ${L.statusText}`)}if(await g(b,1,!0),S.outlook_event_id){console.log(`Deleting Outlook event: ${S.outlook_event_id}`);const L=await fetch(`https://graph.microsoft.com/v1.0/me/events/${S.outlook_event_id}`,{method:"DELETE",headers:{Authorization:`Bearer ${P.microsoft_access_token}`}});if(!L.ok&&L.status!==404)throw new Error(`Outlook deletion failed: ${L.statusText}`)}await g(b,2,!0)}else await g(b,1,!0),await g(b,2,!0)}catch(P){console.warn("Microsoft services deletion warning:",P),await g(b,1,!0,`Warning: ${P}`),await g(b,2,!0,`Warning: ${P}`)}else await g(b,1,!0),await g(b,2,!0);console.log("Deleting meeting attachments...");const{error:E}=await fe.from("meeting_attachments").delete().eq("meeting_id",b);E?(console.warn("Attachments deletion warning:",E),await g(b,3,!0,`Warning: ${E.message}`)):await g(b,3,!0),console.log("Deleting meeting attendees...");const{error:C}=await fe.from("meeting_attendees").delete().eq("meeting_id",b);C?(console.warn("Attendees deletion warning:",C),await g(b,4,!0,`Warning: ${C.message}`)):await g(b,4,!0),console.log("Deleting attendance records...");const{error:T}=await fe.from("attendance_records").delete().eq("meeting_id",b);T?(console.warn("Attendance deletion warning:",T),await g(b,5,!0,`Warning: ${T.message}`)):await g(b,5,!0),console.log("Deleting meeting transcripts...");const{error:D}=await fe.from("meeting_transcripts").delete().eq("meeting_id",b);D?(console.warn("Transcripts deletion warning:",D),await g(b,6,!0,`Warning: ${D.message}`)):await g(b,6,!0),console.log("Deleting main meeting record...");const{error:F}=await fe.from("meetings").delete().eq("id",b);if(F)throw console.error("Failed to delete meeting from database:",F),t(P=>[...P,S].sort((L,A)=>new Date(L.start_time).getTime()-new Date(A.start_time).getTime())),new Error(`Database deletion failed: ${F.message}`);await g(b,7,!0),console.log("Meeting successfully deleted from all platforms"),l({title:"Meeting Deleted Successfully",description:`"${S.title}" has been permanently removed from all platforms`}),setTimeout(()=>{a(P=>{const L=new Map(P);return L.delete(b),L})},2e3)}catch(E){console.error("Error in comprehensive meeting deletion:",E),t(C=>[...C,S].sort((T,D)=>new Date(T.start_time).getTime()-new Date(D.start_time).getTime())),l({title:"Delete Failed",description:E.message||"Failed to delete meeting completely. Please try again.",variant:"destructive"}),a(C=>{const T=new Map(C);return T.delete(b),T})}},g=async(b,S,N,E)=>{a(C=>{const T=new Map(C),F=[...T.get(b)||[]];return F[S]&&(F[S]={...F[S],completed:N,error:E}),T.set(b,F),T}),await new Promise(C=>setTimeout(C,300))};return{meetings:e,loading:r,deletingMeetings:s,createMeeting:u,updateMeeting:async(b,S)=>{try{const{data:N,error:E}=await fe.from("meetings").update(S).eq("id",b).select().single();if(E)throw E;return await c(),N}catch(N){return console.error("Error updating meeting:",N),l({title:"Error",description:"Failed to update meeting",variant:"destructive"}),null}},deleteMeeting:p,deletePastMeeting:async b=>{const S=e.find(C=>C.id===b);if(!S)return;const N=new Date;if(new Date(S.end_time)>N){l({title:"Cannot Delete",description:"Can only delete past meetings using this function",variant:"destructive"});return}await p(b)},fetchMeetings:c,autoSaveTranscript:async b=>{try{const{data:S}=await fe.from("profiles").select("microsoft_access_token").eq("id",o==null?void 0:o.id).single();if(!(S!=null&&S.microsoft_access_token))return;const N=e.find(T=>T.id===b);if(!(N!=null&&N.teams_meeting_id))return;const{data:E,error:C}=await fe.functions.invoke("fetch-teams-transcript",{body:{meetingId:N.teams_meeting_id,accessToken:S.microsoft_access_token}});if(C)throw C;if(E!=null&&E.transcript){await fe.from("meeting_transcripts").upsert({meeting_id:b,transcript_content:JSON.stringify(E.transcript),participants:E.attendees,teams_transcript_id:N.teams_meeting_id});const T=`${N.title}_transcript_${new Date().toISOString().split("T")[0]}.txt`;await fe.from("documents").insert({name:T,file_path:`transcripts/${b}/${T}`,folder:"Meeting Transcripts",uploaded_by:o==null?void 0:o.id,mime_type:"text/plain",file_size:JSON.stringify(E.transcript).length}),l({title:"Transcript Saved",description:"Meeting transcript has been automatically saved to documents"})}}catch(S){console.error("Error auto-saving transcript:",S)}},getDeletionProgress:b=>s.get(b)||[],isDeletingMeeting:b=>s.has(b)}},Jy=e=>{const[t,r]=x.useState([]),[n,s]=x.useState([]),[a,o]=x.useState({}),[l,c]=x.useState(!0),{user:u}=mt(),{toast:d}=dt();oC();const f=x.useCallback(async()=>{try{const{data:E,error:C}=await fe.from("profiles").select("id, first_name, last_name");if(C)throw C;const T=(E||[]).reduce((D,F)=>(D[F.id]={first_name:F.first_name||"",last_name:F.last_name||""},D),{});o(T)}catch(E){console.error("Error fetching user profiles:",E)}},[]),h=x.useCallback(async()=>{try{console.log("Fetching documents for folder:",e);let E=fe.from("documents").select("*");e?E=E.eq("folder_id",e):E=E.is("folder_id",null);const{data:C,error:T}=await E.order("created_at",{ascending:!1});if(T)throw console.error("Database error:",T),T;const D=(C||[]).map(F=>({...F,id:typeof F.id=="string"?F.id:"",name:typeof F.name=="string"?F.name:"Untitled",file_path:typeof F.file_path=="string"?F.file_path:"",created_at:typeof F.created_at=="string"?F.created_at:"",updated_at:typeof F.updated_at=="string"?F.updated_at:"",uploaded_by:typeof F.uploaded_by=="string"?F.uploaded_by:""}));console.log("Fetched documents:",D.length),r(D)}catch(E){console.error("Error fetching documents:",E),d({title:"Error",description:"Failed to load documents",variant:"destructive"}),r([])}},[e,d]),p=x.useCallback(async()=>{try{console.log("Fetching folders...");const{data:E,error:C}=await fe.from("folders").select("*").order("name",{ascending:!0});if(C)throw console.error("Database error:",C),C;const T=(E||[]).map(D=>({...D,name:typeof D.name=="string"?D.name:"Folder"}));console.log("Fetched folders:",T.length),s(T)}catch(E){console.error("Error fetching folders:",E),d({title:"Error",description:"Failed to load folders",variant:"destructive"}),s([])}},[d]),g=x.useCallback(async()=>{try{await Promise.all([h(),p(),f()])}catch(E){console.error("Error refreshing documents:",E)}},[h,p,f]),m=_l({mutationFn:async({documentId:E,newName:C})=>{if(!E||!(C!=null&&C.trim()))throw new Error("Document ID and name are required");const{error:T}=await fe.from("documents").update({name:C.trim(),updated_at:new Date().toISOString()}).eq("id",E);if(T)throw T},onSuccess:()=>{g()},onError:E=>{console.error("Rename mutation error:",E)}}),v=_l({mutationFn:async E=>{if(!E)throw new Error("Document ID is required");const{data:C,error:T}=await fe.from("documents").select("*").eq("id",E).single();if(T)throw T;if(!C)throw new Error("Document not found");const{error:D}=await fe.from("documents").insert({...C,id:void 0,name:`${C.name} (Copy)`,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(D)throw D},onSuccess:()=>{g()},onError:E=>{console.error("Copy mutation error:",E)}}),_=_l({mutationFn:async({documentId:E,isImportant:C})=>{if(!E)throw new Error("Document ID is required");const{error:T}=await fe.from("documents").update({is_important:C,updated_at:new Date().toISOString()}).eq("id",E);if(T)throw T},onSuccess:()=>{g()},onError:E=>{console.error("Toggle important mutation error:",E)}}),y=_l({mutationFn:async({documentId:E,targetFolderId:C})=>{if(!E)throw new Error("Document ID is required");const{error:T}=await fe.from("documents").update({folder_id:C,folder:C?null:"general",updated_at:new Date().toISOString()}).eq("id",E);if(T)throw T},onSuccess:()=>{g()},onError:E=>{console.error("Move document mutation error:",E)}}),w=async(E,C)=>{if(!u){d({title:"Authentication Required",description:"Please sign in to upload documents",variant:"destructive"});return}if(!E){d({title:"No File Selected",description:"Please select a file to upload",variant:"destructive"});return}try{console.log("Starting upload for:",E.name,"Size:",E.size,"Type:",E.type);const T=50*1024*1024;if(E.size>T)throw new Error("File size exceeds 50MB limit");const D=E.name.split(".").pop()||"bin",F=`${Date.now()}-${Math.random().toString(36).substring(2)}.${D}`,P=C?`folders/${C}/${F}`:`root/${F}`;console.log("Uploading to storage path:",P);const{data:L,error:A}=await fe.storage.from("documents").upload(P,E,{cacheControl:"3600",upsert:!1});if(A)throw console.error("Storage upload error:",A),new Error(`Upload failed: ${A.message}`);console.log("File uploaded successfully:",L);const{data:I}=fe.storage.from("documents").getPublicUrl(P);if(!(I!=null&&I.publicUrl))throw new Error("Failed to get public URL");console.log("Public URL:",I.publicUrl);const{data:Q,error:q}=await fe.from("documents").insert({name:E.name,file_path:I.publicUrl,file_size:E.size,mime_type:E.type||"application/octet-stream",folder_id:C||null,folder:C?null:"general",uploaded_by:u.id}).select().single();if(q)throw console.error("Database insert error:",q),new Error(`Database error: ${q.message}`);return console.log("Document record created:",Q),d({title:"Upload Complete",description:`Document "${E.name}" uploaded successfully`}),await g(),Q}catch(T){throw console.error("Error uploading document:",T),d({title:"Upload Failed",description:T.message||"Failed to upload document",variant:"destructive"}),T}},b=async(E,C)=>{if(!u)return d({title:"Authentication Required",description:"Please sign in to create folders",variant:"destructive"}),null;if(!(E!=null&&E.trim()))return d({title:"Invalid Name",description:"Folder name cannot be empty",variant:"destructive"}),null;try{const{data:T,error:D}=await fe.from("folders").insert({name:E.trim(),parent_folder_id:C||null,created_by:u.id,is_locked:!1}).select().single();if(D)throw D.code==="23505"?new Error("A folder with this name already exists in this location"):D;return await g(),T}catch(T){return console.error("Error creating folder:",T),d({title:"Create Failed",description:T.message||"Failed to create folder",variant:"destructive"}),null}},S=_l({mutationFn:async E=>{if(!E)throw new Error("Folder ID is required");const{data:C}=await fe.from("documents").select("id").eq("folder_id",E);if(C&&C.length>0)throw new Error("Please move or delete all documents in this folder first");const{data:T}=await fe.from("folders").select("id").eq("parent_folder_id",E);if(T&&T.length>0)throw new Error("Please delete all subfolders first");const{error:D}=await fe.from("folders").delete().eq("id",E);if(D)throw D;return!0},onSuccess:()=>{g()},onError:E=>{console.error("Delete folder mutation error:",E)}}),N=_l({mutationFn:async E=>{if(!u)throw new Error("Authentication required");if(!E)throw new Error("Document ID is required");console.log("Deleting document:",E);const{error:C}=await fe.rpc("move_to_recycle_bin",{_document_id:E,_deleted_by:u.id});if(C)throw console.error("RPC error:",C),C;console.log("Document moved to recycle bin successfully")},onSuccess:()=>{g()},onError:E=>{console.error("Delete document mutation error:",E)}});return x.useEffect(()=>{(async()=>{console.log("useDocuments - Initial data fetch for folder:",e),c(!0);try{await Promise.all([h(),p(),f()])}catch(C){console.error("Error in initial data fetch:",C)}finally{c(!1)}})()},[e]),{documents:t,folders:n,userProfiles:a,loading:l,uploadDocument:w,deleteDocument:N,moveDocument:y,createFolder:b,deleteFolder:S,renameDocumentMutation:m,copyDocument:v,toggleImportant:_,refreshDocuments:g,fetchDocuments:h,fetchFolders:p}},ul=()=>{const[e,t]=x.useState({isConnected:!1,isExpired:!1,accessToken:null,expiresAt:null,lastError:null}),[r,n]=x.useState(!0),[s,a]=x.useState([]),{user:o}=mt(),{toast:l}=dt(),c=x.useCallback(()=>{const m=Date.now()-5*60*1e3;return s.filter(_=>_.timestamp>m).length<3},[s]),u=x.useCallback((g,m)=>{a(v=>[...v.slice(-9),{timestamp:Date.now(),success:g,error:m}])},[]),d=x.useCallback(async()=>{if(o)try{console.log("Clearing invalid Microsoft tokens for user:",o.id);const{error:g}=await fe.from("profiles").update({microsoft_user_id:null,microsoft_access_token:null,microsoft_refresh_token:null,token_expires_at:null}).eq("id",o.id);g?console.error("Error clearing invalid tokens:",g):console.log("Invalid tokens cleared successfully")}catch(g){console.error("Exception clearing invalid tokens:",g)}},[o]),f=x.useCallback(async(g=0)=>{if(!o)return t(m=>({...m,isConnected:!1,isExpired:!1,accessToken:null,expiresAt:null,lastError:null})),n(!1),!1;try{console.log(`Microsoft auth check attempt ${g+1}`);const{data:m,error:v}=await fe.from("profiles").select("microsoft_access_token, microsoft_refresh_token, token_expires_at").eq("id",o.id).single();if(v){if(console.error("Profile fetch error:",v),g<2)return await new Promise(b=>setTimeout(b,1e3*(g+1))),f(g+1);throw new Error(`Profile fetch failed: ${v.message}`)}if(!(m!=null&&m.microsoft_access_token))return console.log("No Microsoft token found"),t(b=>({...b,isConnected:!1,isExpired:!1,accessToken:null,expiresAt:null,lastError:null})),n(!1),!1;const _=new Date(m.token_expires_at),y=new Date,w=new Date(y.getTime()+10*60*1e3);if(_<=w){console.log("Token expires soon, attempting refresh...");try{const{data:b,error:S}=await fe.functions.invoke("refresh-microsoft-token",{body:{user_id:o.id}});if(S){console.error("Token refresh error:",S);const N=S.message||"";if(N.includes("invalid_grant")||N.includes("AADSTS50173")||N.includes("expired")||N.includes("revoked"))return console.log("Authentication error detected, clearing tokens and marking as expired"),await d(),t(C=>({...C,isConnected:!1,isExpired:!0,accessToken:null,expiresAt:null,lastError:"Microsoft account authentication has expired and needs to be reconnected. This usually happens after a password change or security policy update."})),l({title:"Microsoft Account Needs Reconnection",description:"Your Microsoft account authentication has expired. Please disconnect and reconnect your account in Settings.",variant:"destructive"}),n(!1),!1;throw new Error(`Token refresh failed: ${S.message}`)}return b!=null&&b.error?(console.error("Token refresh API error:",b.error),b.error.includes("invalid_grant")||b.error.includes("AADSTS50173")||b.error.includes("expired")||b.error.includes("revoked")?(console.log("Authentication error in response, clearing tokens"),await d(),t(E=>({...E,isConnected:!1,isExpired:!0,accessToken:null,expiresAt:null,lastError:"Microsoft account authentication has expired. Please reconnect your account."})),l({title:"Microsoft Account Disconnected",description:"Authentication expired. Please reconnect your Microsoft account in Settings.",variant:"destructive"}),n(!1),!1):(t(E=>({...E,isConnected:!0,isExpired:!0,accessToken:m.microsoft_access_token,expiresAt:m.token_expires_at,lastError:`Token refresh failed: ${b.error}`})),n(!1),!1)):(console.log("Token refreshed successfully"),t(N=>({...N,isConnected:!0,isExpired:!1,accessToken:b.access_token,expiresAt:b.expires_at,lastError:null})),n(!1),!0)}catch(b){console.error("Token refresh exception:",b);const S=b.message||"";return S.includes("invalid_grant")||S.includes("AADSTS50173")||S.includes("expired")||S.includes("revoked")?(console.log("Authentication error in exception, clearing tokens"),await d(),t(E=>({...E,isConnected:!1,isExpired:!0,accessToken:null,expiresAt:null,lastError:"Microsoft account authentication has expired and must be reconnected"}))):t(E=>({...E,isConnected:!0,isExpired:!0,accessToken:m.microsoft_access_token,expiresAt:m.token_expires_at,lastError:b.message})),n(!1),!1}}else return console.log("Token is valid"),t(b=>({...b,isConnected:!0,isExpired:!1,accessToken:m.microsoft_access_token,expiresAt:m.token_expires_at,lastError:null})),n(!1),!0}catch(m){return console.error("Error checking Microsoft auth:",m),t(v=>({...v,isConnected:!1,isExpired:!1,accessToken:null,expiresAt:null,lastError:m.message})),n(!1),!1}},[o,l,d]);x.useEffect(()=>{if(o){f();const g=setInterval(()=>{f()},15*60*1e3);return()=>clearInterval(g)}},[o,f]);const h=x.useCallback(async()=>{if(o)try{const{error:g}=await fe.from("profiles").update({microsoft_user_id:null,microsoft_access_token:null,microsoft_refresh_token:null,token_expires_at:null}).eq("id",o.id);if(g)throw g;t({isConnected:!1,isExpired:!1,accessToken:null,expiresAt:null,lastError:null}),a([]),console.log("Microsoft account disconnected successfully"),l({title:"Microsoft Account Disconnected",description:"You can now reconnect with a fresh authentication."})}catch(g){console.error("Error disconnecting Microsoft:",g),l({title:"Disconnection Failed",description:g.message||"Failed to disconnect Microsoft account",variant:"destructive"})}},[o,l]),p=x.useCallback(async()=>{if(!c()){l({title:"Rate Limited",description:"Too many connection attempts. Please wait 5 minutes before trying again.",variant:"destructive"});return}n(!0);const g=await f();u(g,e.lastError||void 0)},[c,f,l,e.lastError,u]);return{...e,loading:r,disconnectMicrosoft:h,forceRefresh:p,checkAndRefreshToken:f,canAttemptConnection:c(),connectionAttempts:s.length}},n4=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(!1),[s,a]=x.useState(!1),{user:o}=mt(),{toast:l}=dt(),{isConnected:c,isExpired:u,accessToken:d,checkAndRefreshToken:f}=ul(),h=async()=>{if(o){n(!0);try{if(!c){l({title:"Microsoft Account Required",description:"Please connect your Microsoft account in Settings to view emails",variant:"destructive"});return}if(u){await f();return}if(!d){l({title:"Authentication Error",description:"Microsoft access token not available. Please reconnect your account.",variant:"destructive"});return}const m=await fetch("https://graph.microsoft.com/v1.0/me/messages?$top=50&$orderby=receivedDateTime desc",{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(!m.ok){if(m.status===401){await f();return}throw new Error("Failed to fetch emails from Microsoft Graph")}const _=(await m.json()).value.map(y=>{var w,b,S,N,E;return{id:y.id,subject:y.subject||"No Subject",from:{name:((b=(w=y.from)==null?void 0:w.emailAddress)==null?void 0:b.name)||"Unknown Sender",address:((N=(S=y.from)==null?void 0:S.emailAddress)==null?void 0:N.address)||""},body:((E=y.body)==null?void 0:E.content)||"",receivedDateTime:y.receivedDateTime,isRead:y.isRead,hasAttachments:y.hasAttachments,importance:y.importance}});t(_)}catch(m){console.error("Error fetching emails:",m),l({title:"Error Fetching Emails",description:m.message||"Failed to load emails from Outlook",variant:"destructive"})}finally{n(!1)}}},p=async m=>{if(o){a(!0);try{const{error:v}=await fe.functions.invoke("send-outlook-email",{body:m});if(v)throw v;l({title:"Email Sent",description:"Your email has been sent successfully"}),h()}catch(v){console.error("Error sending email:",v),l({title:"Failed to Send Email",description:v.message||"Failed to send email",variant:"destructive"})}finally{a(!1)}}},g=async m=>{if(!(!o||!d))try{const v=await fetch(`https://graph.microsoft.com/v1.0/me/messages/${m}`,{method:"PATCH",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"},body:JSON.stringify({isRead:!0})});v.ok?t(_=>_.map(y=>y.id===m?{...y,isRead:!0}:y)):v.status===401&&await f()}catch(v){console.error("Error marking email as read:",v)}};return x.useEffect(()=>{o&&c&&!u&&h()},[o,c,u,d]),{emails:e,loading:r,sending:s,fetchEmails:h,sendEmail:p,markAsRead:g}},rm=e=>{if(!e)return"Unknown";const t=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,r)*100)/100+" "+t[r]},nm=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),O2=({document:e,zoom:t,onZoomIn:r,onZoomOut:n,onDownload:s,onExternalView:a,onClose:o})=>{var c,u;const l=(c=e.mime_type)==null?void 0:c.includes("image");return i.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx(yt,{className:"text-lg font-semibold truncate",children:e.name}),i.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[i.jsx(Be,{variant:"secondary",children:((u=e.mime_type)==null?void 0:u.split("/")[1])||"file"}),i.jsx("span",{children:rm(e.file_size)}),i.jsxs("span",{children:["Created ",nm(e.created_at)]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[l&&i.jsxs("div",{className:"flex items-center bg-muted rounded-md",children:[i.jsx(de,{size:"sm",variant:"ghost",onClick:n,disabled:t<=25,className:"h-9 w-9 p-0 rounded-r-none",children:i.jsx(V6,{className:"h-4 w-4"})}),i.jsxs("div",{className:"px-3 py-2 text-sm font-medium bg-muted border-x min-w-[60px] text-center",children:[t,"%"]}),i.jsx(de,{size:"sm",variant:"ghost",onClick:r,disabled:t>=200,className:"h-9 w-9 p-0 rounded-l-none",children:i.jsx(z6,{className:"h-4 w-4"})})]}),i.jsx(de,{size:"sm",variant:"outline",onClick:a,className:"h-9",title:"Open in new tab (use this to download)",children:i.jsx(ua,{className:"h-4 w-4"})}),i.jsx(de,{size:"sm",variant:"ghost",onClick:o,className:"h-9",children:i.jsx(Za,{className:"h-4 w-4"})})]})]})},F2=({document:e,zoom:t=100,onDownload:r,onExternalView:n,hideActions:s=!1,headerHeight:a=0})=>{console.log("DocumentViewerContent - Document:",e),console.log("DocumentViewerContent - File path:",e.file_path),console.log("DocumentViewerContent - MIME type:",e.mime_type);const o=e.mime_type||"",l=()=>{var u,d,f;console.log("Rendering file preview for:",e.name,"Type:",o);const c=e.file_path.includes("supabase.co/storage")||e.file_path.includes("/storage/v1/object/public/");return console.log("Is Supabase storage URL?",c),c?o.includes("image")?i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 p-4",children:i.jsx("div",{className:"max-w-full max-h-full flex items-center justify-center",children:i.jsx("img",{src:e.file_path,alt:e.name,className:"max-w-full max-h-full object-contain",style:{transform:`scale(${t/100})`,transformOrigin:"center",width:"auto",height:"auto"},onError:h=>{console.error("Image failed to load:",e.file_path),h.currentTarget.style.display="none"},onLoad:()=>{console.log("Image loaded successfully:",e.file_path)}})})}):o.includes("pdf")?i.jsx("iframe",{src:`${e.file_path}#toolbar=1&navpanes=1&scrollbar=1`,className:"w-full border-0",style:{height:`calc(100% - ${a}px)`},title:e.name,onError:()=>{console.error("PDF failed to load:",e.file_path)}}):o.includes("text")?i.jsx("div",{className:"w-full h-full p-4 bg-white overflow-auto",children:i.jsx("iframe",{src:e.file_path,className:"w-full h-full border-0",title:e.name,style:{fontSize:`${t}%`}})}):o.includes("word")||o.includes("document")||o.includes("spreadsheet")||o.includes("excel")||o.includes("presentation")||o.includes("powerpoint")?i.jsx("div",{className:"w-full h-full bg-white rounded-lg border flex items-center justify-center p-8",children:i.jsxs("div",{className:"text-center max-w-md",children:[i.jsx(Gt,{className:"h-24 w-24 text-blue-500 mx-auto mb-6"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Office Document"}),i.jsxs("p",{className:"text-gray-500 mb-4",children:["Click download to access this ",o.includes("word")?"Word":o.includes("excel")?"Excel":o.includes("powerpoint")?"PowerPoint":"Office"," document."]}),i.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Type:"})," ",o.includes("word")?"Word":o.includes("excel")?"Excel":o.includes("powerpoint")?"PowerPoint":"Office"]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Size:"})," ",rm(e.file_size)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Created:"})," ",nm(e.created_at)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Format:"})," ",(d=e.name.split(".").pop())==null?void 0:d.toUpperCase()]})]})}),!s&&i.jsxs("div",{className:"flex space-x-2 justify-center",children:[i.jsxs(de,{onClick:r,size:"sm",children:[i.jsx(hs,{className:"h-4 w-4 mr-2"}),"Download"]}),i.jsxs(de,{onClick:n,variant:"outline",size:"sm",children:[i.jsx(ua,{className:"h-4 w-4 mr-2"}),"Open External"]})]})]})}):i.jsx("div",{className:"w-full h-full bg-white rounded-lg border flex items-center justify-center p-8",children:i.jsxs("div",{className:"text-center max-w-md",children:[i.jsx(Gt,{className:"h-24 w-24 text-blue-500 mx-auto mb-6"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"File Ready"}),i.jsxs("p",{className:"text-gray-500 mb-4",children:["Click download to access this ",o.split("/")[1]||"file"," file."]}),i.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Type:"})," ",o.split("/")[1]||"file"]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Size:"})," ",rm(e.file_size)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Created:"})," ",nm(e.created_at)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Format:"})," ",(f=e.name.split(".").pop())==null?void 0:f.toUpperCase()]})]})}),!s&&i.jsxs("div",{className:"flex space-x-2 justify-center",children:[i.jsxs(de,{onClick:r,size:"sm",children:[i.jsx(hs,{className:"h-4 w-4 mr-2"}),"Download"]}),i.jsxs(de,{onClick:n,variant:"outline",size:"sm",children:[i.jsx(ua,{className:"h-4 w-4 mr-2"}),"Open External"]})]})]})}):i.jsx("div",{className:"w-full h-full bg-white rounded-lg border flex items-center justify-center p-8",children:i.jsxs("div",{className:"text-center max-w-md",children:[i.jsx(Cd,{className:"h-24 w-24 text-gray-400 mx-auto mb-6"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Demo Environment"}),i.jsx("p",{className:"text-gray-500 mb-4",children:"This document was created before storage was configured."}),i.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Type:"})," ",o.split("/")[1]||"file"]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Size:"})," ",rm(e.file_size)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Created:"})," ",nm(e.created_at)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Format:"})," ",(u=e.name.split(".").pop())==null?void 0:u.toUpperCase()]})]})}),i.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:["File path: ",e.file_path]}),!s&&i.jsxs("div",{className:"flex space-x-2 justify-center",children:[i.jsxs(de,{onClick:r,variant:"outline",size:"sm",children:[i.jsx(hs,{className:"h-4 w-4 mr-2"}),"Download (Demo)"]}),i.jsxs(de,{onClick:n,size:"sm",children:[i.jsx(ua,{className:"h-4 w-4 mr-2"}),"View (Demo)"]})]})]})})};return i.jsx("div",{className:"w-full h-full",children:l()})},PB=({documentId:e,userId:t,isViewing:r,documentType:n="document"})=>{const s=x.useRef(null),a=x.useRef(null),o=x.useRef(null);x.useEffect(()=>(r&&e&&t?l():u(),()=>{u()}),[r,e,t]);const l=async()=>{if(!(!e||!t))try{if(s.current=new Date,console.log("Starting document view tracking at:",s.current),n==="poll_attachment"){console.log("Tracking poll attachment view:",e);return}const{data:d,error:f}=await fe.from("document_views").insert({document_id:e,user_id:t,view_started_at:s.current.toISOString(),time_spent_seconds:0,completion_percentage:0,last_page_viewed:1}).select("id").single();if(f){console.error("Error creating view record:",f);return}a.current=d.id,console.log("Created view record:",d.id),o.current=setInterval(()=>{c()},3e4)}catch(d){console.error("Error starting tracking:",d)}},c=async()=>{if(!(!s.current||!a.current))try{const f=Math.floor((new Date().getTime()-s.current.getTime())/1e3);console.log("Updating time spent:",f,"seconds"),await fe.from("document_views").update({time_spent_seconds:f}).eq("id",a.current)}catch(d){console.error("Error updating time spent:",d)}},u=async()=>{if(o.current&&(clearInterval(o.current),o.current=null),!(!s.current||!a.current))try{const d=new Date,f=Math.floor((d.getTime()-s.current.getTime())/1e3);console.log("Stopping tracking. Total time:",f,"seconds"),await fe.from("document_views").update({view_ended_at:d.toISOString(),time_spent_seconds:f}).eq("id",a.current),s.current=null,a.current=null}catch(d){console.error("Error stopping tracking:",d)}};return{updateTimeSpent:c}},Zy=({isOpen:e,onClose:t,document:r,documentType:n="document"})=>{var g,m;const[s,a]=x.useState(100),{toast:o}=dt(),{user:l}=mt();PB({documentId:(r==null?void 0:r.id)||null,userId:(l==null?void 0:l.id)||null,isViewing:e,documentType:n}),x.useEffect(()=>{r&&a(100)},[r==null?void 0:r.id]);const c=async()=>{if(r){o({title:"Downloading...",description:`Preparing "${r.name}" for download...`});try{const v="documents",_=r.file_path;if(typeof _!="string"||!_.trim()){o({title:"Download Error",description:"File path is missing or invalid.",variant:"destructive"});return}const{data:y,error:w}=await fe.storage.from(v).createSignedUrl(_,60);if(w||!(y!=null&&y.signedUrl)){o({title:"Download Error",description:"Unable to generate download link.",variant:"destructive"});return}const b=document.createElement("a");b.href=y.signedUrl,b.download=r.name,document.body.appendChild(b),b.click(),document.body.removeChild(b),o({title:"Download Started",description:`"${r.name}" download initiated successfully`})}catch(v){console.error("Download error:",v),o({title:"Download Error",description:"Unable to download the file. Please try again.",variant:"destructive"})}}},u=()=>{if(r)try{const v=window.open(r.file_path,"_blank","noopener,noreferrer");o(v?{title:"External View",description:`Opening "${r.name}" in new tab`}:{title:"Popup Blocked",description:"Please allow popups to open files in external tabs",variant:"destructive"})}catch(v){console.error("External view error:",v),o({title:"Error",description:"Unable to open file in external tab",variant:"destructive"})}},d=()=>{a(Math.min(200,s+25))},f=()=>{a(Math.max(25,s-25))},h=(g=r==null?void 0:r.mime_type)==null?void 0:g.includes("image"),p=(m=r==null?void 0:r.mime_type)==null?void 0:m.includes("pdf");return r?i.jsx(bt,{open:e,onOpenChange:t,children:i.jsx(xt,{className:"max-w-3xl max-h-[90vh] w-[95vw] h-[85vh] overflow-hidden p-0",children:p?i.jsxs("div",{className:"w-full h-full flex flex-col",children:[i.jsx("div",{className:"w-full flex-shrink-0",style:{height:56},children:i.jsx("div",{className:"w-full h-full flex items-center px-4 border-b bg-white",children:i.jsx(O2,{document:r,zoom:s,onZoomIn:d,onZoomOut:f,onDownload:c,onExternalView:u,onClose:t})})}),i.jsx("div",{className:"flex-1 min-h-0",children:i.jsx(F2,{document:r,zoom:s,onDownload:c,onExternalView:u,hideActions:!0,headerHeight:56})})]}):i.jsxs(i.Fragment,{children:[i.jsx(vt,{className:"px-6 py-4 border-b bg-white",children:i.jsx(O2,{document:r,zoom:s,onZoomIn:d,onZoomOut:f,onDownload:c,onExternalView:u,onClose:t})}),i.jsx("div",{className:h?"flex-1 overflow-auto bg-gray-50 flex items-center justify-center p-4":"flex-1 overflow-auto bg-gray-50",children:i.jsx(F2,{document:r,zoom:s,onDownload:c,onExternalView:u,hideActions:!0})})]})})}):null};function DB(e,t=[]){let r=[];function n(a,o){const l=x.createContext(o),c=r.length;r=[...r,o];function u(f){const{scope:h,children:p,...g}=f,m=(h==null?void 0:h[e][c])||l,v=x.useMemo(()=>g,Object.values(g));return i.jsx(m.Provider,{value:v,children:p})}function d(f,h){const p=(h==null?void 0:h[e][c])||l,g=x.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const s=()=>{const a=r.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,RB(s,...t)]}function RB(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var MB=x.createContext(void 0);function jf(e){const t=x.useContext(MB);return e||t||"ltr"}var Lg="rovingFocusGroup.onEntryFocus",OB={bubbles:!1,cancelable:!0},pp="RovingFocusGroup",[zv,s4,FB]=F0(pp),[IB,gp]=DB(pp,[FB]),[LB,$B]=IB(pp),a4=x.forwardRef((e,t)=>i.jsx(zv.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(zv.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(BB,{...e,ref:t})})}));a4.displayName=pp;var BB=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,h=x.useRef(null),p=et(t,h),g=jf(a),[m=null,v]=Ws({prop:o,defaultProp:l,onChange:c}),[_,y]=x.useState(!1),w=Ht(u),b=s4(r),S=x.useRef(!1),[N,E]=x.useState(0);return x.useEffect(()=>{const C=h.current;if(C)return C.addEventListener(Lg,w),()=>C.removeEventListener(Lg,w)},[w]),i.jsx(LB,{scope:r,orientation:n,dir:g,loop:s,currentTabStopId:m,onItemFocus:x.useCallback(C=>v(C),[v]),onItemShiftTab:x.useCallback(()=>y(!0),[]),onFocusableItemAdd:x.useCallback(()=>E(C=>C+1),[]),onFocusableItemRemove:x.useCallback(()=>E(C=>C-1),[]),children:i.jsx(Ge.div,{tabIndex:_||N===0?-1:0,"data-orientation":n,...f,ref:p,style:{outline:"none",...e.style},onMouseDown:De(e.onMouseDown,()=>{S.current=!0}),onFocus:De(e.onFocus,C=>{const T=!S.current;if(C.target===C.currentTarget&&T&&!_){const D=new CustomEvent(Lg,OB);if(C.currentTarget.dispatchEvent(D),!D.defaultPrevented){const F=b().filter(Q=>Q.focusable),P=F.find(Q=>Q.active),L=F.find(Q=>Q.id===m),I=[P,L,...F].filter(Boolean).map(Q=>Q.ref.current);l4(I,d)}}S.current=!1}),onBlur:De(e.onBlur,()=>y(!1))})})}),i4="RovingFocusGroupItem",o4=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:a,...o}=e,l=ms(),c=a||l,u=$B(i4,r),d=u.currentTabStopId===c,f=s4(r),{onFocusableItemAdd:h,onFocusableItemRemove:p}=u;return x.useEffect(()=>{if(n)return h(),()=>p()},[n,h,p]),i.jsx(zv.ItemSlot,{scope:r,id:c,focusable:n,active:s,children:i.jsx(Ge.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:De(e.onMouseDown,g=>{n?u.onItemFocus(c):g.preventDefault()}),onFocus:De(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:De(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const m=VB(g,u.orientation,u.dir);if(m!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let _=f().filter(y=>y.focusable).map(y=>y.ref.current);if(m==="last")_.reverse();else if(m==="prev"||m==="next"){m==="prev"&&_.reverse();const y=_.indexOf(g.currentTarget);_=u.loop?WB(_,y+1):_.slice(y+1)}setTimeout(()=>l4(_))}})})})});o4.displayName=i4;var UB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function zB(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function VB(e,t,r){const n=zB(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return UB[n]}function l4(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function WB(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var c4=a4,u4=o4,ew="Tabs",[HB,hse]=ns(ew,[gp]),d4=gp(),[GB,tw]=HB(ew),f4=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=jf(l),[f,h]=Ws({prop:n,onChange:s,defaultProp:a});return i.jsx(GB,{scope:r,baseId:ms(),value:f,onValueChange:h,orientation:o,dir:d,activationMode:c,children:i.jsx(Ge.div,{dir:d,"data-orientation":o,...u,ref:t})})});f4.displayName=ew;var h4="TabsList",m4=x.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,a=tw(h4,r),o=d4(r);return i.jsx(c4,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:n,children:i.jsx(Ge.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:t})})});m4.displayName=h4;var p4="TabsTrigger",g4=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...a}=e,o=tw(p4,r),l=d4(r),c=y4(o.baseId,n),u=w4(o.baseId,n),d=n===o.value;return i.jsx(u4,{asChild:!0,...l,focusable:!s,active:d,children:i.jsx(Ge.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...a,ref:t,onMouseDown:De(e.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:De(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:De(e.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!s&&f&&o.onValueChange(n)})})})});g4.displayName=p4;var x4="TabsContent",v4=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:a,...o}=e,l=tw(x4,r),c=y4(l.baseId,n),u=w4(l.baseId,n),d=n===l.value,f=x.useRef(d);return x.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),i.jsx(Mr,{present:s||d,children:({present:h})=>i.jsx(Ge.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:h&&a})})});v4.displayName=x4;function y4(e,t){return`${e}-trigger-${t}`}function w4(e,t){return`${e}-content-${t}`}var KB=f4,_4=m4,b4=g4,S4=v4;const dl=KB,lo=x.forwardRef(({className:e,...t},r)=>i.jsx(_4,{ref:r,className:Te("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));lo.displayName=_4.displayName;const Br=x.forwardRef(({className:e,...t},r)=>i.jsx(b4,{ref:r,className:Te("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Br.displayName=b4.displayName;const Ur=x.forwardRef(({className:e,...t},r)=>i.jsx(S4,{ref:r,className:Te("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Ur.displayName=S4.displayName;function qe(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function On(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function en(e,t){const r=qe(e);return isNaN(t)?On(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function Zn(e,t){const r=qe(e);if(isNaN(t))return On(e,NaN);if(!t)return r;const n=r.getDate(),s=On(e,r.getTime());s.setMonth(r.getMonth()+t+1,0);const a=s.getDate();return n>=a?s:(r.setFullYear(s.getFullYear(),s.getMonth(),n),r)}function wu(e,t){const{years:r=0,months:n=0,weeks:s=0,days:a=0,hours:o=0,minutes:l=0,seconds:c=0}=t,u=qe(e),d=n||r?Zn(u,n+r*12):u,f=a||s?en(d,a+s*7):d,h=l+o*60,g=(c+h*60)*1e3;return On(e,f.getTime()+g)}const rw=6048e5,YB=864e5,nw=6e4,sw=36e5;let qB={};function Zc(){return qB}function vs(e,t){var l,c,u,d;const r=Zc(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=qe(e),a=s.getDay(),o=(a<n?7:0)+a-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Yo(e){return vs(e,{weekStartsOn:1})}function E4(e){const t=qe(e),r=t.getFullYear(),n=On(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=Yo(n),a=On(e,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=Yo(a);return t.getTime()>=s.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Ic(e){const t=qe(e);return t.setHours(0,0,0,0),t}function Um(e){const t=qe(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Fs(e,t){const r=Ic(e),n=Ic(t),s=+r-Um(r),a=+n-Um(n);return Math.round((s-a)/YB)}function XB(e){const t=E4(e),r=On(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Yo(r)}function zm(e,t){const r=t*7;return en(e,r)}function QB(e,t){return Zn(e,t*12)}function JB(e){let t;return e.forEach(function(r){const n=qe(r);(t===void 0||t<n||isNaN(Number(n)))&&(t=n)}),t||new Date(NaN)}function ZB(e){let t;return e.forEach(r=>{const n=qe(r);(!t||t>n||isNaN(+n))&&(t=n)}),t||new Date(NaN)}function Fo(e,t){const r=qe(e),n=qe(t),s=r.getTime()-n.getTime();return s<0?-1:s>0?1:s}function $g(e,t){const r=qe(e),n=qe(t),s=r.getTime()-n.getTime();return s>0?-1:s<0?1:s}function Tn(e,t){const r=Ic(e),n=Ic(t);return+r==+n}function aw(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function eU(e){if(!aw(e)&&typeof e!="number")return!1;const t=qe(e);return!isNaN(Number(t))}function Lc(e,t){const r=qe(e),n=qe(t),s=r.getFullYear()-n.getFullYear(),a=r.getMonth()-n.getMonth();return s*12+a}function tU(e,t,r){const n=vs(e,r),s=vs(t,r),a=+n-Um(n),o=+s-Um(s);return Math.round((a-o)/rw)}function rU(e,t){const r=qe(e),n=qe(t);return r.getFullYear()-n.getFullYear()}function nU(e,t){const r=qe(e),n=qe(t),s=I2(r,n),a=Math.abs(Fs(r,n));r.setDate(r.getDate()-s*a);const o=+(I2(r,n)===-s),l=s*(a-o);return l===0?0:l}function I2(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function iw(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function ow(e,t){return+qe(e)-+qe(t)}function sU(e,t,r){const n=ow(e,t)/sw;return iw(r==null?void 0:r.roundingMethod)(n)}function aU(e,t,r){const n=ow(e,t)/nw;return iw(r==null?void 0:r.roundingMethod)(n)}function iU(e){const t=qe(e);return t.setHours(23,59,59,999),t}function Ra(e){const t=qe(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function oU(e){const t=qe(e);return+iU(t)==+Ra(t)}function lU(e,t){const r=qe(e),n=qe(t),s=Fo(r,n),a=Math.abs(Lc(r,n));let o;if(a<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*a);let l=Fo(r,n)===-s;oU(qe(e))&&a===1&&Fo(e,n)===1&&(l=!1),o=s*(a-Number(l))}return o===0?0:o}function cU(e,t,r){const n=ow(e,t)/1e3;return iw(r==null?void 0:r.roundingMethod)(n)}function uU(e,t){const r=qe(e),n=qe(t),s=Fo(r,n),a=Math.abs(rU(r,n));r.setFullYear(1584),n.setFullYear(1584);const o=Fo(r,n)===-s,l=s*(a-+o);return l===0?0:l}function Sr(e){const t=qe(e);return t.setDate(1),t.setHours(0,0,0,0),t}function N4(e){const t=qe(e),r=On(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Ud(e,t){var l,c,u,d;const r=Zc(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=qe(e),a=s.getDay(),o=(a<n?-7:0)+6-(a-n);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}function j4(e){return Ud(e,{weekStartsOn:1})}const dU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},fU=(e,t,r)=>{let n;const s=dU[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Bg(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const hU={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},mU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},pU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},gU={date:Bg({formats:hU,defaultWidth:"full"}),time:Bg({formats:mU,defaultWidth:"full"}),dateTime:Bg({formats:pU,defaultWidth:"full"})},xU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},vU=(e,t,r,n)=>xU[e];function _u(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return s[a]}}const yU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},_U={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},bU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},SU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},EU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},NU=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},jU={ordinalNumber:NU,era:_u({values:yU,defaultWidth:"wide"}),quarter:_u({values:wU,defaultWidth:"wide",argumentCallback:e=>e-1}),month:_u({values:_U,defaultWidth:"wide"}),day:_u({values:bU,defaultWidth:"wide"}),dayPeriod:_u({values:SU,defaultWidth:"wide",formattingValues:EU,defaultFormattingWidth:"wide"})};function bu(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const o=a[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?CU(l,f=>f.test(o)):kU(l,f=>f.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function kU(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function CU(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function TU(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const AU=/^(\d+)(th|st|nd|rd)?/i,PU=/\d+/i,DU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},RU={any:[/^b/i,/^(a|c)/i]},MU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},OU={any:[/1/i,/2/i,/3/i,/4/i]},FU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},IU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},LU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},$U={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},BU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},UU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},zU={ordinalNumber:TU({matchPattern:AU,parsePattern:PU,valueCallback:e=>parseInt(e,10)}),era:bu({matchPatterns:DU,defaultMatchWidth:"wide",parsePatterns:RU,defaultParseWidth:"any"}),quarter:bu({matchPatterns:MU,defaultMatchWidth:"wide",parsePatterns:OU,defaultParseWidth:"any",valueCallback:e=>e+1}),month:bu({matchPatterns:FU,defaultMatchWidth:"wide",parsePatterns:IU,defaultParseWidth:"any"}),day:bu({matchPatterns:LU,defaultMatchWidth:"wide",parsePatterns:$U,defaultParseWidth:"any"}),dayPeriod:bu({matchPatterns:BU,defaultMatchWidth:"any",parsePatterns:UU,defaultParseWidth:"any"})},lw={code:"en-US",formatDistance:fU,formatLong:gU,formatRelative:vU,localize:jU,match:zU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function VU(e){const t=qe(e);return Fs(t,N4(t))+1}function k4(e){const t=qe(e),r=+Yo(t)-+XB(t);return Math.round(r/rw)+1}function C4(e,t){var d,f,h,p;const r=qe(e),n=r.getFullYear(),s=Zc(),a=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(h=s.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,o=On(e,0);o.setFullYear(n+1,0,a),o.setHours(0,0,0,0);const l=vs(o,t),c=On(e,0);c.setFullYear(n,0,a),c.setHours(0,0,0,0);const u=vs(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function WU(e,t){var l,c,u,d;const r=Zc(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=C4(e,t),a=On(e,0);return a.setFullYear(s,0,n),a.setHours(0,0,0,0),vs(a,t)}function T4(e,t){const r=qe(e),n=+vs(r,t)-+WU(r,t);return Math.round(n/rw)+1}function kt(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const ii={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return kt(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):kt(r+1,2)},d(e,t){return kt(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return kt(e.getHours()%12||12,t.length)},H(e,t){return kt(e.getHours(),t.length)},m(e,t){return kt(e.getMinutes(),t.length)},s(e,t){return kt(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return kt(s,t.length)}},Tl={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},L2={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return ii.y(e,t)},Y:function(e,t,r,n){const s=C4(e,n),a=s>0?s:1-s;if(t==="YY"){const o=a%100;return kt(o,2)}return t==="Yo"?r.ordinalNumber(a,{unit:"year"}):kt(a,t.length)},R:function(e,t){const r=E4(e);return kt(r,t.length)},u:function(e,t){const r=e.getFullYear();return kt(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return kt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return kt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return ii.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return kt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=T4(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):kt(s,t.length)},I:function(e,t,r){const n=k4(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):kt(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):ii.d(e,t)},D:function(e,t,r){const n=VU(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):kt(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return kt(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return kt(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return kt(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=Tl.noon:n===0?s=Tl.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=Tl.evening:n>=12?s=Tl.afternoon:n>=4?s=Tl.morning:s=Tl.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return ii.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):ii.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):kt(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):kt(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):ii.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):ii.s(e,t)},S:function(e,t){return ii.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return B2(n);case"XXXX":case"XX":return yo(n);case"XXXXX":case"XXX":default:return yo(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return B2(n);case"xxxx":case"xx":return yo(n);case"xxxxx":case"xxx":default:return yo(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+$2(n,":");case"OOOO":default:return"GMT"+yo(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+$2(n,":");case"zzzz":default:return"GMT"+yo(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return kt(n,t.length)},T:function(e,t,r){const n=e.getTime();return kt(n,t.length)}};function $2(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),a=n%60;return a===0?r+String(s):r+String(s)+t+kt(a,2)}function B2(e,t){return e%60===0?(e>0?"-":"+")+kt(Math.abs(e)/60,2):yo(e,t)}function yo(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=kt(Math.trunc(n/60),2),a=kt(n%60,2);return r+s+t+a}const U2=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},A4=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},HU=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return U2(e,t);let a;switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",U2(n,t)).replace("{{time}}",A4(s,t))},GU={p:A4,P:HU},KU=/^D+$/,YU=/^Y+$/,qU=["D","DD","YY","YYYY"];function XU(e){return KU.test(e)}function QU(e){return YU.test(e)}function JU(e,t,r){const n=ZU(e,t,r);if(console.warn(n),qU.includes(e))throw new RangeError(n)}function ZU(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ez=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,tz=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,rz=/^'([^]*?)'?$/,nz=/''/g,sz=/[a-zA-Z]/;function ht(e,t,r){var d,f,h,p,g,m,v,_;const n=Zc(),s=(r==null?void 0:r.locale)??n.locale??lw,a=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(h=n.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((m=(g=r==null?void 0:r.locale)==null?void 0:g.options)==null?void 0:m.weekStartsOn)??n.weekStartsOn??((_=(v=n.locale)==null?void 0:v.options)==null?void 0:_.weekStartsOn)??0,l=qe(e);if(!eU(l))throw new RangeError("Invalid time value");let c=t.match(tz).map(y=>{const w=y[0];if(w==="p"||w==="P"){const b=GU[w];return b(y,s.formatLong)}return y}).join("").match(ez).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const w=y[0];if(w==="'")return{isToken:!1,value:az(y)};if(L2[w])return{isToken:!0,value:y};if(w.match(sz))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:y}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return c.map(y=>{if(!y.isToken)return y.value;const w=y.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&QU(w)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&XU(w))&&JU(w,t,String(e));const b=L2[w[0]];return b(l,w,s.localize,u)}).join("")}function az(e){const t=e.match(rz);return t?t[1].replace(nz,"'"):e}const iz=["years","months","weeks","days","hours","minutes","seconds"];function oz(e,t){const r=Zc(),n=(t==null?void 0:t.locale)??r.locale??lw,s=(t==null?void 0:t.format)??iz,a=(t==null?void 0:t.zero)??!1,o=(t==null?void 0:t.delimiter)??" ";return n.formatDistance?s.reduce((c,u)=>{const d=`x${u.replace(/(^.)/,h=>h.toUpperCase())}`,f=e[u];return f!==void 0&&(a||e[u])?c.concat(n.formatDistance(d,f)):c},[]).join(o):""}function lz(e){const t=qe(e),r=t.getFullYear(),n=t.getMonth(),s=On(e,0);return s.setFullYear(r,n+1,0),s.setHours(0,0,0,0),s.getDate()}function cz(e){return Math.trunc(+qe(e)/1e3)}function uz(e){const t=qe(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function dz(e,t){return tU(uz(e),Sr(e),t)+1}function fz(e){const t=qe(e.start),r=qe(e.end),n={},s=uU(r,t);s&&(n.years=s);const a=wu(t,{years:n.years}),o=lU(r,a);o&&(n.months=o);const l=wu(a,{months:n.months}),c=nU(r,l);c&&(n.days=c);const u=wu(l,{days:n.days}),d=sU(r,u);d&&(n.hours=d);const f=wu(u,{hours:n.hours}),h=aU(r,f);h&&(n.minutes=h);const p=wu(f,{minutes:n.minutes}),g=cU(r,p);return g&&(n.seconds=g),n}function Vm(e,t){const r=qe(e),n=qe(t);return r.getTime()>n.getTime()}function cw(e,t){const r=qe(e),n=qe(t);return+r<+n}function uw(e,t){const r=qe(e),n=qe(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function hz(e,t){const r=qe(e),n=qe(t);return r.getFullYear()===n.getFullYear()}function Ug(e,t){return en(e,-t)}function Ut(e,t){const n=xz(e);let s;if(n.date){const c=vz(n.date,2);s=yz(c.restDateString,c.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);const a=s.getTime();let o=0,l;if(n.time&&(o=wz(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(l=_z(n.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(a+o),u=new Date(0);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return new Date(a+o+l)}const jh={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},mz=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,pz=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,gz=/^([+-])(\d{2})(?::?(\d{2}))?$/;function xz(e){const t={},r=e.split(jh.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],jh.timeZoneDelimiter.test(t.date)&&(t.date=e.split(jh.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const s=jh.timezone.exec(n);s?(t.time=n.replace(s[1],""),t.timezone=s[1]):t.time=n}return t}function vz(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,a=n[2]?parseInt(n[2]):null;return{year:a===null?s:a*100,restDateString:e.slice((n[1]||n[2]).length)}}function yz(e,t){if(t===null)return new Date(NaN);const r=e.match(mz);if(!r)return new Date(NaN);const n=!!r[4],s=Su(r[1]),a=Su(r[2])-1,o=Su(r[3]),l=Su(r[4]),c=Su(r[5])-1;if(n)return jz(t,l,c)?bz(t,l,c):new Date(NaN);{const u=new Date(0);return!Ez(t,a,o)||!Nz(t,s)?new Date(NaN):(u.setUTCFullYear(t,a,Math.max(s,o)),u)}}function Su(e){return e?parseInt(e):1}function wz(e){const t=e.match(pz);if(!t)return NaN;const r=zg(t[1]),n=zg(t[2]),s=zg(t[3]);return kz(r,n,s)?r*sw+n*nw+s*1e3:NaN}function zg(e){return e&&parseFloat(e.replace(",","."))||0}function _z(e){if(e==="Z")return 0;const t=e.match(gz);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return Cz(n,s)?r*(n*sw+s*nw):NaN}function bz(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const s=n.getUTCDay()||7,a=(t-1)*7+r+1-s;return n.setUTCDate(n.getUTCDate()+a),n}const Sz=[31,null,31,30,31,30,31,31,30,31,30,31];function P4(e){return e%400===0||e%4===0&&e%100!==0}function Ez(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(Sz[t]||(P4(e)?29:28))}function Nz(e,t){return t>=1&&t<=(P4(e)?366:365)}function jz(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function kz(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function Cz(e,t){return t>=0&&t<=59}function Vg(e,t){const r=qe(e),n=r.getFullYear(),s=r.getDate(),a=On(e,0);a.setFullYear(n,t,15),a.setHours(0,0,0,0);const o=lz(a);return r.setMonth(t,Math.min(s,o)),r}function z2(e,t){const r=qe(e);return isNaN(+r)?On(e,NaN):(r.setFullYear(t),r)}function Wg(e,t){return Zn(e,-t)}function V2(e,t){return zm(e,-t)}const kf=x.forwardRef(({className:e,...t},r)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:r,className:Te("w-full caption-bottom text-sm",e),...t})}));kf.displayName="Table";const Cf=x.forwardRef(({className:e,...t},r)=>i.jsx("thead",{ref:r,className:Te("[&_tr]:border-b",e),...t}));Cf.displayName="TableHeader";const Tf=x.forwardRef(({className:e,...t},r)=>i.jsx("tbody",{ref:r,className:Te("[&_tr:last-child]:border-0",e),...t}));Tf.displayName="TableBody";const Tz=x.forwardRef(({className:e,...t},r)=>i.jsx("tfoot",{ref:r,className:Te("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Tz.displayName="TableFooter";const Ka=x.forwardRef(({className:e,...t},r)=>i.jsx("tr",{ref:r,className:Te("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Ka.displayName="TableRow";const nr=x.forwardRef(({className:e,...t},r)=>i.jsx("th",{ref:r,className:Te("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));nr.displayName="TableHead";const sr=x.forwardRef(({className:e,...t},r)=>i.jsx("td",{ref:r,className:Te("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));sr.displayName="TableCell";const Az=x.forwardRef(({className:e,...t},r)=>i.jsx("caption",{ref:r,className:Te("mt-4 text-sm text-muted-foreground",e),...t}));Az.displayName="TableCaption";const D4=({documentId:e,documentName:t,documentType:r="document"})=>{const[n,s]=x.useState(null),[a,o]=x.useState(!1),[l,c]=x.useState(!1),u=async()=>{o(!0);try{console.log("Fetching analytics for:",r,e);let h={view_count:0,download_count:0};if(r==="meeting_attachment"){const{data:S}=await fe.from("meeting_attachments").select("view_count, download_count").eq("id",e).single();S&&(h=S)}else if(r==="poll_attachment"){const{data:S}=await fe.from("poll_attachments").select("view_count, download_count").eq("id",e).single();S&&(h=S)}const{data:p,error:g}=await fe.from("document_analytics").select(`
          user_id,
          action_type,
          created_at,
          profiles(
            first_name,
            last_name,
            email
          )
        `).eq("document_id",e).eq("document_type",r).order("created_at",{ascending:!1});if(g)throw console.error("Error fetching analytics with profiles:",g),new Error(`Analytics fetch failed: ${g.message}`);console.log("Analytics data with profiles:",p);let m=[];if(r==="document"){const{data:S,error:N}=await fe.from("document_views").select(`
            user_id,
            time_spent_seconds,
            profiles(
              first_name,
              last_name,
              email
            )
          `).eq("document_id",e);N?console.error("Error fetching time data:",N):S&&(m=S,console.log("Time spent data:",m))}const v={};p&&p.length>0&&p.forEach(S=>{const N=S.user_id,E=S.profiles;let C="Unknown User";E&&typeof E=="object"?E.first_name&&E.last_name?C=`${E.first_name} ${E.last_name}`.trim():E.first_name?C=E.first_name:E.last_name?C=E.last_name:E.email&&(C=E.email.split("@")[0]):(console.warn(`No profile found for user ${N} in analytics record`),C=`User ${N.substring(0,8)}...`),v[N]||(v[N]={name:C,views:0,downloads:0,timeSpent:0,lastViewed:S.created_at}),S.action_type==="view"?v[N].views++:S.action_type==="download"&&v[N].downloads++,new Date(S.created_at)>new Date(v[N].lastViewed)&&(v[N].lastViewed=S.created_at)}),m.length>0&&m.forEach(S=>{const N=S.user_id,E=S.profiles;let C="Unknown User";E&&typeof E=="object"?E.first_name&&E.last_name?C=`${E.first_name} ${E.last_name}`.trim():E.first_name?C=E.first_name:E.last_name?C=E.last_name:E.email&&(C=E.email.split("@")[0]):(console.warn(`No profile found for user ${N} in time spent record`),C=`User ${N.substring(0,8)}...`),v[N]?v[N].timeSpent+=S.time_spent_seconds||0:v[N]={name:C,views:0,downloads:0,timeSpent:S.time_spent_seconds||0,lastViewed:new Date().toISOString()}});const _=Object.values(v).sort((S,N)=>N.views-S.views),y=h.view_count||0,w=h.download_count||0,b=_.reduce((S,N)=>S+N.timeSpent,0);s({totalViews:y,totalTimeSpent:b,memberAnalytics:_.map(S=>({name:S.name,views:S.views,timeSpent:S.timeSpent,lastViewed:S.lastViewed}))}),console.log("Analytics processed successfully:",{totalViews:y,totalDownloads:w,totalTimeSpent:b,memberCount:_.length,memberData:_})}catch(h){console.error("Error fetching analytics:",h),s({totalViews:0,totalTimeSpent:0,memberAnalytics:[]})}finally{o(!1)}},d=h=>{if(h===0)return"0s";const p=Math.floor(h/60),g=h%60;return p>0?g>0?`${p}m ${g}s`:`${p}m`:`${g}s`},f=()=>{switch(r){case"meeting_attachment":return"Meeting Attachment";case"poll_attachment":return"Poll Attachment";default:return"Document"}};return i.jsxs(bt,{open:l,onOpenChange:c,children:[i.jsx(SB,{asChild:!0,children:i.jsxs(de,{size:"sm",variant:"outline",onClick:()=>{c(!0),u()},className:"h-8 px-2",children:[i.jsx(Ti,{className:"h-3 w-3 mr-1"}),"Analytics"]})}),i.jsxs(xt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[i.jsxs(vt,{children:[i.jsxs(yt,{className:"flex items-center gap-2",children:[i.jsx(Ti,{className:"h-5 w-5"}),f()," Analytics"]}),i.jsxs(Mt,{children:['Analytics for "',t,'"']})]}),a?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):n?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs(He,{children:[i.jsx(rt,{className:"pb-2",children:i.jsxs(st,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Rr,{className:"h-4 w-4"}),"Total Views"]})}),i.jsxs(Ye,{children:[i.jsx("div",{className:"text-2xl font-bold",children:n.totalViews}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Times this file has been viewed"})]})]}),i.jsxs(He,{children:[i.jsx(rt,{className:"pb-2",children:i.jsxs(st,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(mr,{className:"h-4 w-4"}),"Total Time Spent"]})}),i.jsxs(Ye,{children:[i.jsx("div",{className:"text-2xl font-bold",children:d(n.totalTimeSpent)}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Cumulative viewing time"})]})]})]}),n.memberAnalytics.length>0?i.jsxs(He,{children:[i.jsxs(rt,{children:[i.jsxs(st,{className:"flex items-center gap-2",children:[i.jsx(lr,{className:"h-4 w-4"}),"Member Analytics"]}),i.jsx(sn,{children:"Individual member viewing activity"})]}),i.jsx(Ye,{children:i.jsxs(kf,{children:[i.jsx(Cf,{children:i.jsxs(Ka,{children:[i.jsx(nr,{children:"Member"}),i.jsx(nr,{children:"Views"}),i.jsx(nr,{children:"Time Spent"}),i.jsx(nr,{children:"Last Viewed"})]})}),i.jsx(Tf,{children:n.memberAnalytics.map((h,p)=>i.jsxs(Ka,{children:[i.jsx(sr,{className:"font-medium",children:h.name}),i.jsx(sr,{children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Rr,{className:"h-3 w-3 text-gray-400"}),h.views]})}),i.jsx(sr,{children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(mr,{className:"h-3 w-3 text-gray-400"}),d(h.timeSpent)]})}),i.jsx(sr,{children:ht(new Date(h.lastViewed),"MMM d, hh:mm a")})]},p))})]})})]}):i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx(Ti,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),i.jsx("p",{className:"text-lg font-medium",children:"No member activity yet"}),i.jsxs("p",{className:"text-sm mt-2",children:["Member views and activity will appear here once users interact with this ",r.replace("_"," ").toLowerCase()]})]})]}):i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx(Ti,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),i.jsx("p",{children:"Failed to load analytics data"})]})]})]})},R4=({open:e,onOpenChange:t,meeting:r})=>{var A;const[n,s]=x.useState([]),[a,o]=x.useState(!1),[l,c]=x.useState(!1),[u,d]=x.useState([]),{user:f}=mt(),{toast:h}=dt(),p=new Date,g=r!=null&&r.end_time?Vm(p,new Date(r.end_time)):!1;x.useEffect(()=>{e&&r&&(m(),v())},[e,r]);const m=async()=>{if(r){c(!0);try{const{data:I,error:Q}=await fe.from("meeting_attachments").select("*").eq("meeting_id",r.id).order("created_at",{ascending:!1});if(Q)throw Q;s(I||[])}catch(I){console.error("Error fetching meeting files:",I),h({title:"Error",description:"Failed to load meeting files",variant:"destructive"})}finally{c(!1)}}},v=async()=>{if(r)try{const{data:I,error:Q}=await fe.from("meeting_attendees").select("id, user_id, status").eq("meeting_id",r.id);if(Q)throw Q;if(!I||I.length===0){d([]);return}const q=I.map(K=>K.user_id),{data:O,error:H}=await fe.from("profiles").select("id, first_name, last_name, email").in("id",q);if(H)throw H;const G=I.map(K=>{const k=O==null?void 0:O.find(W=>W.id===K.user_id);return{...K,full_name:k?`${k.first_name||""} ${k.last_name||""}`.trim():"-",email:(k==null?void 0:k.email)||"-"}});d(G)}catch(I){console.error("Error fetching attendee details:",I),h({title:"Error",description:"Failed to load attendee names",variant:"destructive"}),d([])}},_=async I=>{try{if(console.log("Tracking view for file:",I),!f){console.error("No authenticated user found");return}const{error:Q}=await fe.from("document_analytics").insert({document_id:I,document_type:"meeting_attachment",user_id:f.id,action_type:"view",device_type:navigator.platform||"Unknown",user_agent:navigator.userAgent});Q&&console.error("Error recording analytics:",Q);const{error:q}=await fe.rpc("increment_view_count",{table_name:"meeting_attachments",attachment_id:I});q?console.error("Error incrementing view count:",q):console.log("View count incremented successfully")}catch(Q){console.error("Error in trackFileView:",Q)}},y=async I=>{try{if(console.log("Tracking download for file:",I),!f){console.error("No authenticated user found");return}const{error:Q}=await fe.from("document_analytics").insert({document_id:I,document_type:"meeting_attachment",user_id:f.id,action_type:"download",device_type:navigator.platform||"Unknown",user_agent:navigator.userAgent});Q&&console.error("Error recording analytics:",Q);const{error:q}=await fe.rpc("increment_download_count",{table_name:"meeting_attachments",attachment_id:I});q?console.error("Error incrementing download count:",q):console.log("Download count incremented successfully")}catch(Q){console.error("Error in trackFileDownload:",Q)}},w=async I=>{const Q=I.target.files;if(!(!Q||Q.length===0||!r||!f)){o(!0);try{for(const q of Q){const O=q.name.split(".").pop(),H=`${r.id}/${Date.now()}_${q.name}`,{data:G}=await fe.storage.listBuckets();if(!(G==null?void 0:G.some(M=>M.name==="meeting-attachments"))){const{error:M}=await fe.storage.createBucket("meeting-attachments",{public:!0,allowedMimeTypes:["*/*"],fileSizeLimit:52428800});M&&console.error("Error creating bucket:",M)}const{data:k,error:W}=await fe.storage.from("meeting-attachments").upload(H,q);if(W)throw W;const{error:R}=await fe.from("meeting_attachments").insert({meeting_id:r.id,name:q.name,file_path:k.path,file_size:q.size,mime_type:q.type,uploaded_by:f.id});if(R)throw R}h({title:"Files Uploaded",description:`${Q.length} file(s) uploaded successfully`}),m()}catch(q){console.error("Error uploading files:",q),h({title:"Upload Failed",description:q.message||"Failed to upload files",variant:"destructive"})}finally{o(!1),I.target.value=""}}},b=async I=>{try{console.log("Attempting to view file:",I.file_path),await _(I.id);const{data:Q}=fe.storage.from("meeting-attachments").getPublicUrl(I.file_path);if(console.log("Public URL generated:",Q.publicUrl),Q.publicUrl)try{if((await fetch(Q.publicUrl,{method:"HEAD"})).ok){const O=window.open(Q.publicUrl,"_blank");h(O?{title:"File Opened",description:"File opened in new tab"}:{title:"Popup Blocked",description:"Please allow popups to view the file",variant:"destructive"})}else throw new Error("File not accessible via public URL")}catch{console.log("Public URL not accessible, trying signed URL...");const{data:O,error:H}=await fe.storage.from("meeting-attachments").createSignedUrl(I.file_path,3600);if(!H&&O.signedUrl){const G=window.open(O.signedUrl,"_blank");h(G?{title:"File Opened",description:"File opened in new tab"}:{title:"Popup Blocked",description:"Please allow popups to view the file",variant:"destructive"})}else throw new Error("Could not generate file access URL")}else throw new Error("Could not generate public URL");setTimeout(()=>{m()},1e3)}catch(Q){console.error("Error viewing file:",Q),h({title:"View Failed",description:"Unable to open file. The file may not exist or the storage is not properly configured.",variant:"destructive"})}},S=async I=>{try{await y(I.id);const{data:Q,error:q}=await fe.storage.from("meeting-attachments").download(I.file_path);if(q)throw q;const O=URL.createObjectURL(Q),H=document.createElement("a");H.href=O,H.download=I.name,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(O),h({title:"Download Started",description:`Downloading ${I.name}`}),setTimeout(()=>{m()},1e3)}catch(Q){console.error("Error downloading file:",Q),h({title:"Download Failed",description:Q.message||"Failed to download file",variant:"destructive"})}},N=async I=>{if(confirm("Are you sure you want to delete this file?"))try{const Q=n.find(H=>H.id===I);if(!Q)return;const{error:q}=await fe.storage.from("meeting-attachments").remove([Q.file_path]);if(q)throw q;const{error:O}=await fe.from("meeting_attachments").delete().eq("id",I);if(O)throw O;h({title:"File Deleted",description:"File deleted successfully"}),m()}catch(Q){console.error("Error deleting file:",Q),h({title:"Delete Failed",description:Q.message||"Failed to delete file",variant:"destructive"})}},E=I=>{if(I===0)return"0 Bytes";const Q=1024,q=["Bytes","KB","MB","GB"],O=Math.floor(Math.log(I)/Math.log(Q));return parseFloat((I/Math.pow(Q,O)).toFixed(2))+" "+q[O]};if(!r)return null;const C=new Date(r.start_time),T=new Date(r.end_time),D=Math.round((T.getTime()-C.getTime())/(1e3*60)),F=Math.floor(D/60),P=D%60;let L="";return F>0&&(L+=`${F}h `),P>0&&(L+=`${P}m`),i.jsx(bt,{open:e,onOpenChange:t,children:i.jsxs(xt,{className:"sm:max-w-[800px] max-h-[80vh] overflow-y-auto",children:[i.jsxs(vt,{children:[i.jsx(yt,{children:r.title}),i.jsxs(Mt,{children:["Meeting scheduled for ",ht(C,"MMMM dd, yyyy")," at ",ht(C,"h:mm a")]})]}),i.jsxs(dl,{defaultValue:"details",className:"w-full",children:[i.jsxs(lo,{className:"grid w-full grid-cols-2",children:[i.jsx(Br,{value:"details",children:"Meeting Details"}),i.jsxs(Br,{value:"attachments",className:"relative",children:["Attachments",n.length>0&&i.jsx(Be,{variant:"secondary",className:"ml-2 h-5 w-5 rounded-full p-0 text-xs",children:n.length})]})]}),i.jsxs(Ur,{value:"details",className:"space-y-4 mt-4",children:[i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(mr,{className:"h-4 w-4"}),i.jsx("span",{children:L.trim()||"0m"})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(lr,{className:"h-4 w-4"}),i.jsxs("span",{children:[((A=r.attendees)==null?void 0:A.length)||0," attendees"]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Fa,{className:"h-4 w-4"}),i.jsx("span",{children:r.location||"No location specified"})]}),r.meeting_type&&i.jsx(Be,{variant:"outline",children:r.meeting_type})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Attendees"}),u.length>0?i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm border rounded-lg",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-100",children:[i.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),i.jsx("th",{className:"px-3 py-2 text-left",children:"Email"})]})}),i.jsx("tbody",{children:u.map(I=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"px-3 py-2",children:I.full_name}),i.jsx("td",{className:"px-3 py-2",children:I.email})]},I.user_id))})]})}):i.jsx("div",{className:"text-gray-500 italic",children:"No attendees for this meeting."})]}),r.description&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Description"}),i.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:r.description})]}),r.teams_join_url&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Meeting Link"}),i.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-blue-50 rounded-lg",children:[i.jsx(Us,{className:"h-4 w-4 text-blue-600"}),i.jsx("a",{href:r.teams_join_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"Join Microsoft Teams Meeting"})]})]}),r.teams_meeting_id&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Transcript"}),i.jsx("div",{className:"flex items-center space-x-2 p-3 bg-blue-50 rounded-lg",children:i.jsx(de,{asChild:!0,size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:i.jsx("a",{href:`https://teams.microsoft.com/l/meetingTranscript/${r.teams_meeting_id}`,target:"_blank",rel:"noopener noreferrer",children:"View Transcript in Teams"})})})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Meeting Details"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Start Time:"}),i.jsx("div",{className:"font-medium",children:ht(C,"MMMM dd, yyyy h:mm a")})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"End Time:"}),i.jsx("div",{className:"font-medium",children:ht(T,"MMMM dd, yyyy h:mm a")})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Status:"}),i.jsx("div",{className:"font-medium",children:r.status||"Scheduled"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Type:"}),i.jsx("div",{className:"font-medium",children:r.meeting_type||"Not specified"})]})]})]}),r.outlook_event_id&&i.jsx("div",{className:"p-3 bg-green-50 rounded-lg",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Tr,{className:"h-4 w-4 text-green-600"}),i.jsx("span",{className:"text-green-700 text-sm",children:"This meeting has been added to your Outlook calendar"})]})})]}),i.jsxs(Ur,{value:"attachments",className:"space-y-4 mt-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Meeting Attachments"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"file",multiple:!0,onChange:w,className:"hidden",id:"file-upload",disabled:a||g}),i.jsxs(de,{size:"sm",onClick:()=>{var I;return(I=document.getElementById("file-upload"))==null?void 0:I.click()},disabled:a||g,className:"bg-purple-600 hover:bg-purple-700",style:g?{opacity:.5,pointerEvents:"none"}:{},children:[i.jsx(Ac,{className:"h-4 w-4 mr-2"}),a?"Uploading...":"Attach Files"]})]})]}),l?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):n.length>0?i.jsx("div",{className:"space-y-3",children:n.map(I=>i.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[i.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[i.jsx(Gt,{className:"h-5 w-5 text-gray-500 shrink-0"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:I.name}),i.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[i.jsx("span",{children:E(I.file_size??0)}),i.jsx("span",{children:ht(new Date(I.created_at),"MMM dd, yyyy")}),i.jsxs("span",{className:"flex items-center space-x-1",children:[i.jsx(Rr,{className:"h-3 w-3"}),i.jsx("span",{children:I.view_count||0})]}),i.jsxs("span",{className:"flex items-center space-x-1",children:[i.jsx(hs,{className:"h-3 w-3"}),i.jsx("span",{children:I.download_count||0})]})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 shrink-0",children:[i.jsxs(de,{size:"sm",variant:"outline",onClick:()=>b(I),className:"h-8 px-2",children:[i.jsx(Rr,{className:"h-3 w-3 mr-1"}),"View"]}),i.jsx(D4,{documentId:I.id,documentName:I.name,documentType:"meeting_attachment"}),i.jsxs(de,{size:"sm",variant:"outline",onClick:()=>S(I),className:"h-8 px-2",children:[i.jsx(hs,{className:"h-3 w-3 mr-1"}),"Download"]}),i.jsx(de,{size:"sm",variant:"outline",onClick:()=>N(I.id),className:"h-8 px-2 text-red-600 hover:text-red-700 hover:bg-red-50",children:i.jsx(br,{className:"h-3 w-3"})})]})]},I.id))}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Ac,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),i.jsx("p",{className:"text-gray-600 mb-2",children:"No files attached to this meeting"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Upload files to share with meeting participants"})]})]})]})]})})},Pz=()=>{var K;const[e,t]=x.useState([]),[r,n]=x.useState(null),[s,a]=x.useState(!1),{meetings:o,loading:l}=cl(),{documents:c,loading:u}=Jy(),{emails:d,loading:f}=n4(),{user:h}=mt(),{profile:p}=Iy(),{toast:g}=dt(),m=il(),[v,_]=x.useState(!1),[y,w]=x.useState(null);x.useEffect(()=>{h&&(async()=>{try{const{data:W,error:R}=await fe.from("polls").select("*").eq("status","active").order("created_at",{ascending:!1}).limit(2);if(R)throw R;t((W||[]).map(M=>({...M,description:M.description??""})))}catch{g({title:"Error",description:"Failed to load polls",variant:"destructive"})}})()},[h,g]);const b=o.filter(k=>new Date(k.start_time)>new Date).sort((k,W)=>new Date(k.start_time).getTime()-new Date(W.start_time).getTime()).slice(0,2),S=c.sort((k,W)=>new Date(W.created_at).getTime()-new Date(k.created_at).getTime()).slice(0,2),N=d.sort((k,W)=>new Date(W.receivedDateTime).getTime()-new Date(k.receivedDateTime).getTime()).slice(0,2),E=e.sort((k,W)=>new Date(k.deadline).getTime()-new Date(W.deadline).getTime()).slice(0,2),C=p!=null&&p.first_name?`${p.first_name} ${p.last_name||""}`.trim():((K=h==null?void 0:h.email)==null?void 0:K.split("@")[0])||"User",T=k=>{k.teams_join_url?window.open(k.teams_join_url,"_blank"):g({title:"No Teams Link",description:"No Teams link available",variant:"destructive"})},D=k=>{k&&(n(k),a(!0))},F=()=>{a(!1),n(null)},P=k=>{k!=null&&k.id&&window.open(`https://outlook.office.com/mail/inbox/id/${k.id}`,"_blank")},L=k=>{k&&new Date(k.deadline)>new Date&&m("/voting")},A=k=>m(`/${k}`),I=k=>new Date(k)<new Date,Q=(k,W=80)=>{if(!k)return"No preview available";const R=k.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/\s+/g," ").trim();return R.length>W?R.substring(0,W)+"...":R},q=k=>{w(k),_(!0)},O=(k,W="")=>k??W;if(l||u||f)return i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});const H=k=>k.meeting_type==="online"?i.jsx(Us,{className:"h-4 w-4 text-blue-600 mr-1"}):k.meeting_type==="physical"?i.jsx(Fa,{className:"h-4 w-4 text-green-600 mr-1"}):k.meeting_type==="hybrid"?i.jsx(lr,{className:"h-4 w-4 text-purple-600 mr-1"}):null,G=k=>k.meeting_type==="online"&&k.teams_join_url?i.jsx(de,{size:"sm",className:"bg-blue-600 text-white h-6 w-6 p-0 ml-2",onClick:W=>{W.stopPropagation(),T(k)},title:"Join Online",children:i.jsx(Us,{className:"h-3 w-3"})}):k.meeting_type==="physical"&&k.location?i.jsx(de,{size:"sm",className:"bg-green-600 text-white h-6 w-6 p-0 ml-2",onClick:W=>{W.stopPropagation(),window.open(`https://maps.google.com/?q=${encodeURIComponent(k.location)}`,"_blank")},title:"View Location",children:i.jsx(Fa,{className:"h-3 w-3"})}):k.meeting_type==="hybrid"?i.jsxs("div",{className:"flex gap-1 ml-2",children:[k.teams_join_url&&i.jsx(de,{size:"sm",className:"bg-blue-600 text-white h-6 w-6 p-0",onClick:W=>{W.stopPropagation(),T(k)},title:"Join Online",children:i.jsx(Us,{className:"h-3 w-3"})}),k.location&&i.jsx(de,{size:"sm",className:"bg-green-600 text-white h-6 w-6 p-0",onClick:W=>{W.stopPropagation(),window.open(`https://maps.google.com/?q=${encodeURIComponent(k.location)}`,"_blank")},title:"View Location",children:i.jsx(Fa,{className:"h-3 w-3"})})]}):null;return i.jsxs("div",{className:"w-full max-w-4xl mx-auto px-2 py-6 space-y-6",children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome, ",C]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Here's a quick overview of your activity."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs(He,{className:"h-full min-h-[220px] flex flex-col justify-between",children:[i.jsxs(rt,{className:"pb-2 flex flex-row items-center gap-2",children:[i.jsx(Ja,{className:"h-5 w-5 text-red-600"}),i.jsx(st,{className:"text-base",children:"Recent Emails"})]}),i.jsxs(Ye,{className:"pt-0 flex-1 flex flex-col justify-between",children:[N.length>0?N.map(k=>i.jsxs("div",{className:"mb-2 p-2 rounded hover:bg-muted/50 flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-medium text-sm truncate",children:O(k.subject,"No Subject")}),i.jsx(de,{size:"sm",variant:"outline",onClick:()=>P(k),disabled:!k.id,className:"h-6 w-6 p-0",children:i.jsx(ua,{className:"h-3 w-3"})})]}),i.jsx("span",{className:"text-xs text-muted-foreground",children:Q(O(k.body))})]},k.id)):i.jsx("div",{className:"text-center text-muted-foreground py-4",children:"No emails found"}),i.jsx(de,{variant:"ghost",className:"w-full mt-2",onClick:()=>A("email"),children:"View More"})]})]}),i.jsxs(He,{className:"h-full min-h-[220px] flex flex-col justify-between",children:[i.jsxs(rt,{className:"pb-2 flex flex-row items-center gap-2",children:[i.jsx(b6,{className:"h-5 w-5 text-blue-600"}),i.jsx(st,{className:"text-base",children:"Upcoming Meetings"})]}),i.jsxs(Ye,{className:"pt-0 flex-1 flex flex-col justify-between",children:[b.length>0?b.map(k=>i.jsxs("div",{className:"mb-2 p-2 rounded hover:bg-muted/50 flex flex-col cursor-pointer group",onClick:()=>q(k),children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("span",{className:"font-medium text-sm truncate flex items-center",children:[H(k),O(k.title,"Untitled")]}),G(k)]}),i.jsx("span",{className:"text-xs text-muted-foreground",children:k.start_time?new Date(k.start_time).toLocaleString():""})]},k.id)):i.jsx("div",{className:"text-center text-muted-foreground py-4",children:"No upcoming meetings"}),i.jsx(de,{variant:"ghost",className:"w-full mt-2",onClick:()=>A("meetings"),children:"View More"})]})]}),i.jsxs(He,{className:"h-full min-h-[220px] flex flex-col justify-between",children:[i.jsxs(rt,{className:"pb-2 flex flex-row items-center gap-2",children:[i.jsx(Gt,{className:"h-5 w-5 text-green-600"}),i.jsx(st,{className:"text-base",children:"Recent Documents"})]}),i.jsxs(Ye,{className:"pt-0 flex-1 flex flex-col justify-between",children:[S.length>0?S.map(k=>i.jsxs("div",{className:"mb-2 p-2 rounded hover:bg-muted/50 flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-medium text-sm truncate",children:O(k.name,"Untitled")}),i.jsx(de,{size:"sm",variant:"outline",onClick:()=>D(k),disabled:!k.id,className:"h-6 w-6 p-0",children:i.jsx(ua,{className:"h-3 w-3"})})]}),i.jsx("span",{className:"text-xs text-muted-foreground",children:k.created_at?new Date(k.created_at).toLocaleDateString():""})]},k.id)):i.jsx("div",{className:"text-center text-muted-foreground py-4",children:"No documents uploaded"}),i.jsx(de,{variant:"ghost",className:"w-full mt-2",onClick:()=>A("documents"),children:"View More"})]})]}),i.jsxs(He,{className:"h-full min-h-[220px] flex flex-col justify-between",children:[i.jsxs(rt,{className:"pb-2 flex flex-row items-center gap-2",children:[i.jsx(Yi,{className:"h-5 w-5 text-purple-600"}),i.jsx(st,{className:"text-base",children:"Active Polls"})]}),i.jsxs(Ye,{className:"pt-0 flex-1 flex flex-col justify-between",children:[E.length>0?E.map(k=>i.jsxs("div",{className:"mb-2 p-2 rounded hover:bg-muted/50 flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-medium text-sm truncate",children:O(k.title,"Untitled")}),!I(k.deadline)&&i.jsx(de,{size:"sm",className:"bg-purple-600 text-white h-6 w-6 p-0",onClick:()=>L(k),children:i.jsx(Yi,{className:"h-3 w-3"})})]}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:["Deadline: ",k.deadline?new Date(k.deadline).toLocaleDateString():""]})]},k.id)):i.jsx("div",{className:"text-center text-muted-foreground py-4",children:"No active polls"}),i.jsx(de,{variant:"ghost",className:"w-full mt-2",onClick:()=>A("voting"),children:"View More"})]})]})]}),i.jsx(R4,{open:v,onOpenChange:_,meeting:y}),i.jsx(Zy,{isOpen:s,onClose:F,document:r,documentType:"document"})]})};var Af=e=>e.type==="checkbox",Co=e=>e instanceof Date,hn=e=>e==null;const M4=e=>typeof e=="object";var cr=e=>!hn(e)&&!Array.isArray(e)&&M4(e)&&!Co(e),Dz=e=>cr(e)&&e.target?Af(e.target)?e.target.checked:e.target.value:e,Rz=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Mz=(e,t)=>e.has(Rz(t)),Oz=e=>{const t=e.constructor&&e.constructor.prototype;return cr(t)&&t.hasOwnProperty("isPrototypeOf")},dw=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Qr(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(dw&&(e instanceof Blob||n))&&(r||cr(e)))if(t=r?[]:{},!r&&!Oz(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=Qr(e[s]));else return e;return t}var xp=e=>Array.isArray(e)?e.filter(Boolean):[],fr=e=>e===void 0,Ke=(e,t,r)=>{if(!t||!cr(e))return r;const n=xp(t.split(/[,[\].]+?/)).reduce((s,a)=>hn(s)?s:s[a],e);return fr(n)||n===e?fr(e[t])?r:e[t]:n},ra=e=>typeof e=="boolean",fw=e=>/^\w*$/.test(e),O4=e=>xp(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Bt=(e,t,r)=>{let n=-1;const s=fw(t)?[t]:O4(t),a=s.length,o=a-1;for(;++n<a;){const l=s[n];let c=r;if(n!==o){const u=e[l];c=cr(u)||Array.isArray(u)?u:isNaN(+s[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const W2={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Rs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},_a={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};ke.createContext(null);var Fz=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(s,a,{get:()=>{const o=a;return t._proxyFormState[o]!==Rs.all&&(t._proxyFormState[o]=!n||Rs.all),e[o]}});return s};const Iz=typeof window<"u"?x.useLayoutEffect:x.useEffect;var oa=e=>typeof e=="string",Lz=(e,t,r,n,s)=>oa(e)?(n&&t.watch.add(e),Ke(r,e,s)):Array.isArray(e)?e.map(a=>(n&&t.watch.add(a),Ke(r,a))):(n&&(t.watchAll=!0),r),$z=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},rd=e=>Array.isArray(e)?e:[e],H2=()=>{let e=[];return{get observers(){return e},next:s=>{for(const a of e)a.next&&a.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(a=>a!==s)}}),unsubscribe:()=>{e=[]}}},Vv=e=>hn(e)||!M4(e);function vi(e,t){if(Vv(e)||Vv(t))return e===t;if(Co(e)&&Co(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const s of r){const a=e[s];if(!n.includes(s))return!1;if(s!=="ref"){const o=t[s];if(Co(a)&&Co(o)||cr(a)&&cr(o)||Array.isArray(a)&&Array.isArray(o)?!vi(a,o):a!==o)return!1}}return!0}var dn=e=>cr(e)&&!Object.keys(e).length,hw=e=>e.type==="file",Ms=e=>typeof e=="function",Wm=e=>{if(!dw)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},F4=e=>e.type==="select-multiple",mw=e=>e.type==="radio",Bz=e=>mw(e)||Af(e),Hg=e=>Wm(e)&&e.isConnected;function Uz(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=fr(e)?n++:e[t[n++]];return e}function zz(e){for(const t in e)if(e.hasOwnProperty(t)&&!fr(e[t]))return!1;return!0}function vr(e,t){const r=Array.isArray(t)?t:fw(t)?[t]:O4(t),n=r.length===1?e:Uz(e,r),s=r.length-1,a=r[s];return n&&delete n[a],s!==0&&(cr(n)&&dn(n)||Array.isArray(n)&&zz(n))&&vr(e,r.slice(0,-1)),e}var I4=e=>{for(const t in e)if(Ms(e[t]))return!0;return!1};function Hm(e,t={}){const r=Array.isArray(e);if(cr(e)||r)for(const n in e)Array.isArray(e[n])||cr(e[n])&&!I4(e[n])?(t[n]=Array.isArray(e[n])?[]:{},Hm(e[n],t[n])):hn(e[n])||(t[n]=!0);return t}function L4(e,t,r){const n=Array.isArray(e);if(cr(e)||n)for(const s in e)Array.isArray(e[s])||cr(e[s])&&!I4(e[s])?fr(t)||Vv(r[s])?r[s]=Array.isArray(e[s])?Hm(e[s],[]):{...Hm(e[s])}:L4(e[s],hn(t)?{}:t[s],r[s]):r[s]=!vi(e[s],t[s]);return r}var Eu=(e,t)=>L4(e,t,Hm(t));const G2={value:!1,isValid:!1},K2={value:!0,isValid:!0};var $4=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!fr(e[0].attributes.value)?fr(e[0].value)||e[0].value===""?K2:{value:e[0].value,isValid:!0}:K2:G2}return G2},B4=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>fr(e)?e:t?e===""?NaN:e&&+e:r&&oa(e)?new Date(e):n?n(e):e;const Y2={isValid:!1,value:null};var U4=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Y2):Y2;function q2(e){const t=e.ref;return hw(t)?t.files:mw(t)?U4(e.refs).value:F4(t)?[...t.selectedOptions].map(({value:r})=>r):Af(t)?$4(e.refs).value:B4(fr(t.value)?e.ref.value:t.value,e)}var Vz=(e,t,r,n)=>{const s={};for(const a of e){const o=Ke(t,a);o&&Bt(s,a,o._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},Gm=e=>e instanceof RegExp,Nu=e=>fr(e)?e:Gm(e)?e.source:cr(e)?Gm(e.value)?e.value.source:e.value:e,X2=e=>({isOnSubmit:!e||e===Rs.onSubmit,isOnBlur:e===Rs.onBlur,isOnChange:e===Rs.onChange,isOnAll:e===Rs.all,isOnTouch:e===Rs.onTouched});const Q2="AsyncFunction";var Wz=e=>!!e&&!!e.validate&&!!(Ms(e.validate)&&e.validate.constructor.name===Q2||cr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Q2)),Hz=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),J2=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const nd=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const a=Ke(e,s);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],s)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(nd(l,t))break}else if(cr(l)&&nd(l,t))break}}};function Z2(e,t,r){const n=Ke(e,r);if(n||fw(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const a=s.join("."),o=Ke(t,a),l=Ke(e,a);if(o&&!Array.isArray(o)&&r!==a)return{name:r};if(l&&l.type)return{name:a,error:l};s.pop()}return{name:r}}var Gz=(e,t,r,n)=>{r(e);const{name:s,...a}=e;return dn(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(o=>t[o]===(!n||Rs.all))},Kz=(e,t,r)=>!e||!t||e===t||rd(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),Yz=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,qz=(e,t)=>!xp(Ke(e,t)).length&&vr(e,t),Xz=(e,t,r)=>{const n=rd(Ke(e,r));return Bt(n,"root",t[r]),Bt(e,r,n),e},sm=e=>oa(e);function eS(e,t,r="validate"){if(sm(e)||Array.isArray(e)&&e.every(sm)||ra(e)&&!e)return{type:r,message:sm(e)?e:"",ref:t}}var Al=e=>cr(e)&&!Gm(e)?e:{value:e,message:""},tS=async(e,t,r,n,s,a)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:p,validate:g,name:m,valueAsNumber:v,mount:_}=e._f,y=Ke(r,m);if(!_||t.has(m))return{};const w=l?l[0]:o,b=P=>{s&&w.reportValidity&&(w.setCustomValidity(ra(P)?"":P||""),w.reportValidity())},S={},N=mw(o),E=Af(o),C=N||E,T=(v||hw(o))&&fr(o.value)&&fr(y)||Wm(o)&&o.value===""||y===""||Array.isArray(y)&&!y.length,D=$z.bind(null,m,n,S),F=(P,L,A,I=_a.maxLength,Q=_a.minLength)=>{const q=P?L:A;S[m]={type:P?I:Q,message:q,ref:o,...D(P?I:Q,q)}};if(a?!Array.isArray(y)||!y.length:c&&(!C&&(T||hn(y))||ra(y)&&!y||E&&!$4(l).isValid||N&&!U4(l).isValid)){const{value:P,message:L}=sm(c)?{value:!!c,message:c}:Al(c);if(P&&(S[m]={type:_a.required,message:L,ref:w,...D(_a.required,L)},!n))return b(L),S}if(!T&&(!hn(f)||!hn(h))){let P,L;const A=Al(h),I=Al(f);if(!hn(y)&&!isNaN(y)){const Q=o.valueAsNumber||y&&+y;hn(A.value)||(P=Q>A.value),hn(I.value)||(L=Q<I.value)}else{const Q=o.valueAsDate||new Date(y),q=G=>new Date(new Date().toDateString()+" "+G),O=o.type=="time",H=o.type=="week";oa(A.value)&&y&&(P=O?q(y)>q(A.value):H?y>A.value:Q>new Date(A.value)),oa(I.value)&&y&&(L=O?q(y)<q(I.value):H?y<I.value:Q<new Date(I.value))}if((P||L)&&(F(!!P,A.message,I.message,_a.max,_a.min),!n))return b(S[m].message),S}if((u||d)&&!T&&(oa(y)||a&&Array.isArray(y))){const P=Al(u),L=Al(d),A=!hn(P.value)&&y.length>+P.value,I=!hn(L.value)&&y.length<+L.value;if((A||I)&&(F(A,P.message,L.message),!n))return b(S[m].message),S}if(p&&!T&&oa(y)){const{value:P,message:L}=Al(p);if(Gm(P)&&!y.match(P)&&(S[m]={type:_a.pattern,message:L,ref:o,...D(_a.pattern,L)},!n))return b(L),S}if(g){if(Ms(g)){const P=await g(y,r),L=eS(P,w);if(L&&(S[m]={...L,...D(_a.validate,L.message)},!n))return b(L.message),S}else if(cr(g)){let P={};for(const L in g){if(!dn(P)&&!n)break;const A=eS(await g[L](y,r),w,L);A&&(P={...A,...D(L,A.message)},b(A.message),n&&(S[m]=P))}if(!dn(P)&&(S[m]={ref:w,...P},!n))return S}}return b(!0),S};const Qz={mode:Rs.onSubmit,reValidateMode:Rs.onChange,shouldFocusError:!0};function Jz(e={}){let t={...Qz,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ms(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const n={};let s=cr(t.defaultValues)||cr(t.values)?Qr(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:Qr(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:H2(),state:H2()},p=t.criteriaMode===Rs.all,g=U=>B=>{clearTimeout(u),u=setTimeout(U,B)},m=async U=>{if(!t.disabled&&(d.isValid||f.isValid||U)){const B=t.resolver?dn((await E()).errors):await T(n,!0);B!==r.isValid&&h.state.next({isValid:B})}},v=(U,B)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((U||Array.from(l.mount)).forEach(Y=>{Y&&(B?Bt(r.validatingFields,Y,B):vr(r.validatingFields,Y))}),h.state.next({validatingFields:r.validatingFields,isValidating:!dn(r.validatingFields)}))},_=(U,B=[],Y,ue,he=!0,le=!0)=>{if(ue&&Y&&!t.disabled){if(o.action=!0,le&&Array.isArray(Ke(n,U))){const Se=Y(Ke(n,U),ue.argA,ue.argB);he&&Bt(n,U,Se)}if(le&&Array.isArray(Ke(r.errors,U))){const Se=Y(Ke(r.errors,U),ue.argA,ue.argB);he&&Bt(r.errors,U,Se),qz(r.errors,U)}if((d.touchedFields||f.touchedFields)&&le&&Array.isArray(Ke(r.touchedFields,U))){const Se=Y(Ke(r.touchedFields,U),ue.argA,ue.argB);he&&Bt(r.touchedFields,U,Se)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Eu(s,a)),h.state.next({name:U,isDirty:F(U,B),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Bt(a,U,B)},y=(U,B)=>{Bt(r.errors,U,B),h.state.next({errors:r.errors})},w=U=>{r.errors=U,h.state.next({errors:r.errors,isValid:!1})},b=(U,B,Y,ue)=>{const he=Ke(n,U);if(he){const le=Ke(a,U,fr(Y)?Ke(s,U):Y);fr(le)||ue&&ue.defaultChecked||B?Bt(a,U,B?le:q2(he._f)):A(U,le),o.mount&&m()}},S=(U,B,Y,ue,he)=>{let le=!1,Se=!1;const Fe={name:U};if(!t.disabled){if(!Y||ue){(d.isDirty||f.isDirty)&&(Se=r.isDirty,r.isDirty=Fe.isDirty=F(),le=Se!==Fe.isDirty);const Ie=vi(Ke(s,U),B);Se=!!Ke(r.dirtyFields,U),Ie?vr(r.dirtyFields,U):Bt(r.dirtyFields,U,!0),Fe.dirtyFields=r.dirtyFields,le=le||(d.dirtyFields||f.dirtyFields)&&Se!==!Ie}if(Y){const Ie=Ke(r.touchedFields,U);Ie||(Bt(r.touchedFields,U,Y),Fe.touchedFields=r.touchedFields,le=le||(d.touchedFields||f.touchedFields)&&Ie!==Y)}le&&he&&h.state.next(Fe)}return le?Fe:{}},N=(U,B,Y,ue)=>{const he=Ke(r.errors,U),le=(d.isValid||f.isValid)&&ra(B)&&r.isValid!==B;if(t.delayError&&Y?(c=g(()=>y(U,Y)),c(t.delayError)):(clearTimeout(u),c=null,Y?Bt(r.errors,U,Y):vr(r.errors,U)),(Y?!vi(he,Y):he)||!dn(ue)||le){const Se={...ue,...le&&ra(B)?{isValid:B}:{},errors:r.errors,name:U};r={...r,...Se},h.state.next(Se)}},E=async U=>{v(U,!0);const B=await t.resolver(a,t.context,Vz(U||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return v(U),B},C=async U=>{const{errors:B}=await E(U);if(U)for(const Y of U){const ue=Ke(B,Y);ue?Bt(r.errors,Y,ue):vr(r.errors,Y)}else r.errors=B;return B},T=async(U,B,Y={valid:!0})=>{for(const ue in U){const he=U[ue];if(he){const{_f:le,...Se}=he;if(le){const Fe=l.array.has(le.name),Ie=he._f&&Wz(he._f);Ie&&d.validatingFields&&v([ue],!0);const at=await tS(he,l.disabled,a,p,t.shouldUseNativeValidation&&!B,Fe);if(Ie&&d.validatingFields&&v([ue]),at[le.name]&&(Y.valid=!1,B))break;!B&&(Ke(at,le.name)?Fe?Xz(r.errors,at,le.name):Bt(r.errors,le.name,at[le.name]):vr(r.errors,le.name))}!dn(Se)&&await T(Se,B,Y)}}return Y.valid},D=()=>{for(const U of l.unMount){const B=Ke(n,U);B&&(B._f.refs?B._f.refs.every(Y=>!Hg(Y)):!Hg(B._f.ref))&&oe(U)}l.unMount=new Set},F=(U,B)=>!t.disabled&&(U&&B&&Bt(a,U,B),!vi(G(),s)),P=(U,B,Y)=>Lz(U,l,{...o.mount?a:fr(B)?s:oa(U)?{[U]:B}:B},Y,B),L=U=>xp(Ke(o.mount?a:s,U,t.shouldUnregister?Ke(s,U,[]):[])),A=(U,B,Y={})=>{const ue=Ke(n,U);let he=B;if(ue){const le=ue._f;le&&(!le.disabled&&Bt(a,U,B4(B,le)),he=Wm(le.ref)&&hn(B)?"":B,F4(le.ref)?[...le.ref.options].forEach(Se=>Se.selected=he.includes(Se.value)):le.refs?Af(le.ref)?le.refs.forEach(Se=>{(!Se.defaultChecked||!Se.disabled)&&(Array.isArray(he)?Se.checked=!!he.find(Fe=>Fe===Se.value):Se.checked=he===Se.value||!!he)}):le.refs.forEach(Se=>Se.checked=Se.value===he):hw(le.ref)?le.ref.value="":(le.ref.value=he,le.ref.type||h.state.next({name:U,values:Qr(a)})))}(Y.shouldDirty||Y.shouldTouch)&&S(U,he,Y.shouldTouch,Y.shouldDirty,!0),Y.shouldValidate&&H(U)},I=(U,B,Y)=>{for(const ue in B){if(!B.hasOwnProperty(ue))return;const he=B[ue],le=`${U}.${ue}`,Se=Ke(n,le);(l.array.has(U)||cr(he)||Se&&!Se._f)&&!Co(he)?I(le,he,Y):A(le,he,Y)}},Q=(U,B,Y={})=>{const ue=Ke(n,U),he=l.array.has(U),le=Qr(B);Bt(a,U,le),he?(h.array.next({name:U,values:Qr(a)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&Y.shouldDirty&&h.state.next({name:U,dirtyFields:Eu(s,a),isDirty:F(U,le)})):ue&&!ue._f&&!hn(le)?I(U,le,Y):A(U,le,Y),J2(U,l)&&h.state.next({...r}),h.state.next({name:o.mount?U:void 0,values:Qr(a)})},q=async U=>{o.mount=!0;const B=U.target;let Y=B.name,ue=!0;const he=Ke(n,Y),le=Ie=>{ue=Number.isNaN(Ie)||Co(Ie)&&isNaN(Ie.getTime())||vi(Ie,Ke(a,Y,Ie))},Se=X2(t.mode),Fe=X2(t.reValidateMode);if(he){let Ie,at;const Kt=B.type?q2(he._f):Dz(U),wt=U.type===W2.BLUR||U.type===W2.FOCUS_OUT,Or=!Hz(he._f)&&!t.resolver&&!Ke(r.errors,Y)&&!he._f.deps||Yz(wt,Ke(r.touchedFields,Y),r.isSubmitted,Fe,Se),pt=J2(Y,l,wt);Bt(a,Y,Kt),wt?(he._f.onBlur&&he._f.onBlur(U),c&&c(0)):he._f.onChange&&he._f.onChange(U);const $n=S(Y,Kt,wt),ss=!dn($n)||pt;if(!wt&&h.state.next({name:Y,type:U.type,values:Qr(a)}),Or)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?wt&&m():wt||m()),ss&&h.state.next({name:Y,...pt?{}:$n});if(!wt&&pt&&h.state.next({...r}),t.resolver){const{errors:Yt}=await E([Y]);if(le(Kt),ue){const ri=Z2(r.errors,n,Y),Xe=Z2(Yt,n,ri.name||Y);Ie=Xe.error,Y=Xe.name,at=dn(Yt)}}else v([Y],!0),Ie=(await tS(he,l.disabled,a,p,t.shouldUseNativeValidation))[Y],v([Y]),le(Kt),ue&&(Ie?at=!1:(d.isValid||f.isValid)&&(at=await T(n,!0)));ue&&(he._f.deps&&H(he._f.deps),N(Y,at,Ie,$n))}},O=(U,B)=>{if(Ke(r.errors,B)&&U.focus)return U.focus(),1},H=async(U,B={})=>{let Y,ue;const he=rd(U);if(t.resolver){const le=await C(fr(U)?U:he);Y=dn(le),ue=U?!he.some(Se=>Ke(le,Se)):Y}else U?(ue=(await Promise.all(he.map(async le=>{const Se=Ke(n,le);return await T(Se&&Se._f?{[le]:Se}:Se)}))).every(Boolean),!(!ue&&!r.isValid)&&m()):ue=Y=await T(n);return h.state.next({...!oa(U)||(d.isValid||f.isValid)&&Y!==r.isValid?{}:{name:U},...t.resolver||!U?{isValid:Y}:{},errors:r.errors}),B.shouldFocus&&!ue&&nd(n,O,U?he:l.mount),ue},G=U=>{const B={...o.mount?a:s};return fr(U)?B:oa(U)?Ke(B,U):U.map(Y=>Ke(B,Y))},K=(U,B)=>({invalid:!!Ke((B||r).errors,U),isDirty:!!Ke((B||r).dirtyFields,U),error:Ke((B||r).errors,U),isValidating:!!Ke(r.validatingFields,U),isTouched:!!Ke((B||r).touchedFields,U)}),k=U=>{U&&rd(U).forEach(B=>vr(r.errors,B)),h.state.next({errors:U?r.errors:{}})},W=(U,B,Y)=>{const ue=(Ke(n,U,{_f:{}})._f||{}).ref,he=Ke(r.errors,U)||{},{ref:le,message:Se,type:Fe,...Ie}=he;Bt(r.errors,U,{...Ie,...B,ref:ue}),h.state.next({name:U,errors:r.errors,isValid:!1}),Y&&Y.shouldFocus&&ue&&ue.focus&&ue.focus()},R=(U,B)=>Ms(U)?h.state.subscribe({next:Y=>U(P(void 0,B),Y)}):P(U,B,!0),M=U=>h.state.subscribe({next:B=>{Kz(U.name,B.name,U.exact)&&Gz(B,U.formState||d,z,U.reRenderRoot)&&U.callback({values:{...a},...r,...B})}}).unsubscribe,re=U=>(o.mount=!0,f={...f,...U.formState},M({...U,formState:f})),oe=(U,B={})=>{for(const Y of U?rd(U):l.mount)l.mount.delete(Y),l.array.delete(Y),B.keepValue||(vr(n,Y),vr(a,Y)),!B.keepError&&vr(r.errors,Y),!B.keepDirty&&vr(r.dirtyFields,Y),!B.keepTouched&&vr(r.touchedFields,Y),!B.keepIsValidating&&vr(r.validatingFields,Y),!t.shouldUnregister&&!B.keepDefaultValue&&vr(s,Y);h.state.next({values:Qr(a)}),h.state.next({...r,...B.keepDirty?{isDirty:F()}:{}}),!B.keepIsValid&&m()},ce=({disabled:U,name:B})=>{(ra(U)&&o.mount||U||l.disabled.has(B))&&(U?l.disabled.add(B):l.disabled.delete(B))},me=(U,B={})=>{let Y=Ke(n,U);const ue=ra(B.disabled)||ra(t.disabled);return Bt(n,U,{...Y||{},_f:{...Y&&Y._f?Y._f:{ref:{name:U}},name:U,mount:!0,...B}}),l.mount.add(U),Y?ce({disabled:ra(B.disabled)?B.disabled:t.disabled,name:U}):b(U,!0,B.value),{...ue?{disabled:B.disabled||t.disabled}:{},...t.progressive?{required:!!B.required,min:Nu(B.min),max:Nu(B.max),minLength:Nu(B.minLength),maxLength:Nu(B.maxLength),pattern:Nu(B.pattern)}:{},name:U,onChange:q,onBlur:q,ref:he=>{if(he){me(U,B),Y=Ke(n,U);const le=fr(he.value)&&he.querySelectorAll&&he.querySelectorAll("input,select,textarea")[0]||he,Se=Bz(le),Fe=Y._f.refs||[];if(Se?Fe.find(Ie=>Ie===le):le===Y._f.ref)return;Bt(n,U,{_f:{...Y._f,...Se?{refs:[...Fe.filter(Hg),le,...Array.isArray(Ke(s,U))?[{}]:[]],ref:{type:le.type,name:U}}:{ref:le}}}),b(U,!1,void 0,le)}else Y=Ke(n,U,{}),Y._f&&(Y._f.mount=!1),(t.shouldUnregister||B.shouldUnregister)&&!(Mz(l.array,U)&&o.action)&&l.unMount.add(U)}}},pe=()=>t.shouldFocusError&&nd(n,O,l.mount),je=U=>{ra(U)&&(h.state.next({disabled:U}),nd(n,(B,Y)=>{const ue=Ke(n,Y);ue&&(B.disabled=ue._f.disabled||U,Array.isArray(ue._f.refs)&&ue._f.refs.forEach(he=>{he.disabled=ue._f.disabled||U}))},0,!1))},we=(U,B)=>async Y=>{let ue;Y&&(Y.preventDefault&&Y.preventDefault(),Y.persist&&Y.persist());let he=Qr(a);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:le,values:Se}=await E();r.errors=le,he=Se}else await T(n);if(l.disabled.size)for(const le of l.disabled)Bt(he,le,void 0);if(vr(r.errors,"root"),dn(r.errors)){h.state.next({errors:{}});try{await U(he,Y)}catch(le){ue=le}}else B&&await B({...r.errors},Y),pe(),setTimeout(pe);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:dn(r.errors)&&!ue,submitCount:r.submitCount+1,errors:r.errors}),ue)throw ue},Ce=(U,B={})=>{Ke(n,U)&&(fr(B.defaultValue)?Q(U,Qr(Ke(s,U))):(Q(U,B.defaultValue),Bt(s,U,Qr(B.defaultValue))),B.keepTouched||vr(r.touchedFields,U),B.keepDirty||(vr(r.dirtyFields,U),r.isDirty=B.defaultValue?F(U,Qr(Ke(s,U))):F()),B.keepError||(vr(r.errors,U),d.isValid&&m()),h.state.next({...r}))},j=(U,B={})=>{const Y=U?Qr(U):s,ue=Qr(Y),he=dn(U),le=he?s:ue;if(B.keepDefaultValues||(s=Y),!B.keepValues){if(B.keepDirtyValues){const Se=new Set([...l.mount,...Object.keys(Eu(s,a))]);for(const Fe of Array.from(Se))Ke(r.dirtyFields,Fe)?Bt(le,Fe,Ke(a,Fe)):Q(Fe,Ke(le,Fe))}else{if(dw&&fr(U))for(const Se of l.mount){const Fe=Ke(n,Se);if(Fe&&Fe._f){const Ie=Array.isArray(Fe._f.refs)?Fe._f.refs[0]:Fe._f.ref;if(Wm(Ie)){const at=Ie.closest("form");if(at){at.reset();break}}}}for(const Se of l.mount)Q(Se,Ke(le,Se))}a=Qr(le),h.array.next({values:{...le}}),h.state.next({values:{...le}})}l={mount:B.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!B.keepIsValid||!!B.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:B.keepSubmitCount?r.submitCount:0,isDirty:he?!1:B.keepDirty?r.isDirty:!!(B.keepDefaultValues&&!vi(U,s)),isSubmitted:B.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:he?{}:B.keepDirtyValues?B.keepDefaultValues&&a?Eu(s,a):r.dirtyFields:B.keepDefaultValues&&U?Eu(s,U):B.keepDirty?r.dirtyFields:{},touchedFields:B.keepTouched?r.touchedFields:{},errors:B.keepErrors?r.errors:{},isSubmitSuccessful:B.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},se=(U,B)=>j(Ms(U)?U(a):U,B),ae=(U,B={})=>{const Y=Ke(n,U),ue=Y&&Y._f;if(ue){const he=ue.refs?ue.refs[0]:ue.ref;he.focus&&(he.focus(),B.shouldSelect&&Ms(he.select)&&he.select())}},z=U=>{r={...r,...U}},ie={control:{register:me,unregister:oe,getFieldState:K,handleSubmit:we,setError:W,_subscribe:M,_runSchema:E,_getWatch:P,_getDirty:F,_setValid:m,_setFieldArray:_,_setDisabledField:ce,_setErrors:w,_getFieldArray:L,_reset:j,_resetDefaultValues:()=>Ms(t.defaultValues)&&t.defaultValues().then(U=>{se(U,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:D,_disableForm:je,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return a},get _state(){return o},set _state(U){o=U},get _defaultValues(){return s},get _names(){return l},set _names(U){l=U},get _formState(){return r},get _options(){return t},set _options(U){t={...t,...U}}},subscribe:re,trigger:H,register:me,handleSubmit:we,watch:R,setValue:Q,getValues:G,reset:se,resetField:Ce,clearErrors:k,unregister:oe,setError:W,setFocus:ae,getFieldState:K};return{...ie,formControl:ie}}function Zz(e={}){const t=ke.useRef(void 0),r=ke.useRef(void 0),[n,s]=ke.useState({isDirty:!1,isValidating:!1,isLoading:Ms(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Ms(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:Jz(e),formState:n},e.formControl&&e.defaultValues&&!Ms(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const a=t.current.control;return a._options=e,Iz(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>s({...a._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),a._formState.isReady=!0,o},[a]),ke.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),ke.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode),e.errors&&!dn(e.errors)&&a._setErrors(e.errors)},[a,e.errors,e.mode,e.reValidateMode]),ke.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),ke.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==n.isDirty&&a._subjects.state.next({isDirty:o})}},[a,n.isDirty]),ke.useEffect(()=>{e.values&&!vi(e.values,r.current)?(a._reset(e.values,a._options.resetOptions),r.current=e.values,s(o=>({...o}))):a._resetDefaultValues()},[a,e.values]),ke.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=Fz(n,a),t.current}const lt=x.forwardRef(({className:e,type:t,...r},n)=>i.jsx("input",{type:t,className:Te("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));lt.displayName="Input";const vp=x.forwardRef(({className:e,value:t,onChange:r,...n},s)=>i.jsxs("div",{className:"relative w-full",children:[i.jsx("input",{ref:s,value:t,onChange:r,className:Te("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm pr-8",e),...n}),!!t&&i.jsx("button",{type:"button",onClick:a=>{if(r){const o={...a,target:{value:""}};r(o)}},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-700 focus:outline-none","aria-label":"Clear search",tabIndex:-1,children:i.jsx(Za,{className:"h-5 w-5"})})]}));vp.displayName="SearchInput";var eV="Label",z4=x.forwardRef((e,t)=>i.jsx(Ge.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));z4.displayName=eV;var V4=z4;const tV=df("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ze=x.forwardRef(({className:e,...t},r)=>i.jsx(V4,{ref:r,className:Te(tV(),e),...t}));ze.displayName=V4.displayName;const Ks=x.forwardRef(({className:e,...t},r)=>i.jsx("textarea",{className:Te("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));Ks.displayName="Textarea";function Wv(e,[t,r]){return Math.min(r,Math.max(t,e))}function pw(e){const t=x.useRef({value:e,previous:e});return x.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var rV=[" ","Enter","ArrowUp","ArrowDown"],nV=[" ","Enter"],Pf="Select",[yp,wp,sV]=F0(Pf),[eu,mse]=ns(Pf,[sV,ao]),_p=ao(),[aV,co]=eu(Pf),[iV,oV]=eu(Pf),W4=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:h,required:p,form:g}=e,m=_p(t),[v,_]=x.useState(null),[y,w]=x.useState(null),[b,S]=x.useState(!1),N=jf(u),[E=!1,C]=Ws({prop:n,defaultProp:s,onChange:a}),[T,D]=Ws({prop:o,defaultProp:l,onChange:c}),F=x.useRef(null),P=v?g||!!v.closest("form"):!0,[L,A]=x.useState(new Set),I=Array.from(L).map(Q=>Q.props.value).join(";");return i.jsx(W0,{...m,children:i.jsxs(aV,{required:p,scope:t,trigger:v,onTriggerChange:_,valueNode:y,onValueNodeChange:w,valueNodeHasChildren:b,onValueNodeHasChildrenChange:S,contentId:ms(),value:T,onValueChange:D,open:E,onOpenChange:C,dir:N,triggerPointerDownPosRef:F,disabled:h,children:[i.jsx(yp.Provider,{scope:t,children:i.jsx(iV,{scope:e.__scopeSelect,onNativeOptionAdd:x.useCallback(Q=>{A(q=>new Set(q).add(Q))},[]),onNativeOptionRemove:x.useCallback(Q=>{A(q=>{const O=new Set(q);return O.delete(Q),O})},[]),children:r})}),P?i.jsxs(pA,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:f,value:T,onChange:Q=>D(Q.target.value),disabled:h,form:g,children:[T===void 0?i.jsx("option",{value:""}):null,Array.from(L)]},I):null]})})};W4.displayName=Pf;var H4="SelectTrigger",G4=x.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,a=_p(r),o=co(H4,r),l=o.disabled||n,c=et(t,o.onTriggerChange),u=wp(r),d=x.useRef("touch"),[f,h,p]=gA(m=>{const v=u().filter(w=>!w.disabled),_=v.find(w=>w.value===o.value),y=xA(v,m,_);y!==void 0&&o.onValueChange(y.value)}),g=m=>{l||(o.onOpenChange(!0),p()),m&&(o.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return i.jsx(gf,{asChild:!0,...a,children:i.jsx(Ge.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":mA(o.value)?"":void 0,...s,ref:c,onClick:De(s.onClick,m=>{m.currentTarget.focus(),d.current!=="mouse"&&g(m)}),onPointerDown:De(s.onPointerDown,m=>{d.current=m.pointerType;const v=m.target;v.hasPointerCapture(m.pointerId)&&v.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(g(m),m.preventDefault())}),onKeyDown:De(s.onKeyDown,m=>{const v=f.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&h(m.key),!(v&&m.key===" ")&&rV.includes(m.key)&&(g(),m.preventDefault())})})})});G4.displayName=H4;var K4="SelectValue",Y4=x.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:a,placeholder:o="",...l}=e,c=co(K4,r),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,f=et(t,c.onValueNodeChange);return Er(()=>{u(d)},[u,d]),i.jsx(Ge.span,{...l,ref:f,style:{pointerEvents:"none"},children:mA(c.value)?i.jsx(i.Fragment,{children:o}):a})});Y4.displayName=K4;var lV="SelectIcon",q4=x.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return i.jsx(Ge.span,{"aria-hidden":!0,...s,ref:t,children:n||""})});q4.displayName=lV;var cV="SelectPortal",X4=e=>i.jsx(Gc,{asChild:!0,...e});X4.displayName=cV;var qo="SelectContent",Q4=x.forwardRef((e,t)=>{const r=co(qo,e.__scopeSelect),[n,s]=x.useState();if(Er(()=>{s(new DocumentFragment)},[]),!r.open){const a=n;return a?Qa.createPortal(i.jsx(J4,{scope:e.__scopeSelect,children:i.jsx(yp.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),a):null}return i.jsx(Z4,{...e,ref:t})});Q4.displayName=qo;var js=10,[J4,uo]=eu(qo),uV="SelectContentImpl",Z4=x.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v,..._}=e,y=co(qo,r),[w,b]=x.useState(null),[S,N]=x.useState(null),E=et(t,oe=>b(oe)),[C,T]=x.useState(null),[D,F]=x.useState(null),P=wp(r),[L,A]=x.useState(!1),I=x.useRef(!1);x.useEffect(()=>{if(w)return Nf(w)},[w]),ip();const Q=x.useCallback(oe=>{const[ce,...me]=P().map(we=>we.ref.current),[pe]=me.slice(-1),je=document.activeElement;for(const we of oe)if(we===je||(we==null||we.scrollIntoView({block:"nearest"}),we===ce&&S&&(S.scrollTop=0),we===pe&&S&&(S.scrollTop=S.scrollHeight),we==null||we.focus(),document.activeElement!==je))return},[P,S]),q=x.useCallback(()=>Q([C,w]),[Q,C,w]);x.useEffect(()=>{L&&q()},[L,q]);const{onOpenChange:O,triggerPointerDownPosRef:H}=y;x.useEffect(()=>{if(w){let oe={x:0,y:0};const ce=pe=>{var je,we;oe={x:Math.abs(Math.round(pe.pageX)-(((je=H.current)==null?void 0:je.x)??0)),y:Math.abs(Math.round(pe.pageY)-(((we=H.current)==null?void 0:we.y)??0))}},me=pe=>{oe.x<=10&&oe.y<=10?pe.preventDefault():w.contains(pe.target)||O(!1),document.removeEventListener("pointermove",ce),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",ce),document.addEventListener("pointerup",me,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ce),document.removeEventListener("pointerup",me,{capture:!0})}}},[w,O,H]),x.useEffect(()=>{const oe=()=>O(!1);return window.addEventListener("blur",oe),window.addEventListener("resize",oe),()=>{window.removeEventListener("blur",oe),window.removeEventListener("resize",oe)}},[O]);const[G,K]=gA(oe=>{const ce=P().filter(je=>!je.disabled),me=ce.find(je=>je.ref.current===document.activeElement),pe=xA(ce,oe,me);pe&&setTimeout(()=>pe.ref.current.focus())}),k=x.useCallback((oe,ce,me)=>{const pe=!I.current&&!me;(y.value!==void 0&&y.value===ce||pe)&&(T(oe),pe&&(I.current=!0))},[y.value]),W=x.useCallback(()=>w==null?void 0:w.focus(),[w]),R=x.useCallback((oe,ce,me)=>{const pe=!I.current&&!me;(y.value!==void 0&&y.value===ce||pe)&&F(oe)},[y.value]),M=n==="popper"?Hv:eA,re=M===Hv?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v}:{};return i.jsx(J4,{scope:r,content:w,viewport:S,onViewportChange:N,itemRefCallback:k,selectedItem:C,onItemLeave:W,itemTextRefCallback:R,focusSelectedItem:q,selectedItemText:D,position:n,isPositioned:L,searchRef:G,children:i.jsx(Ef,{as:da,allowPinchZoom:!0,children:i.jsx(Sf,{asChild:!0,trapped:y.open,onMountAutoFocus:oe=>{oe.preventDefault()},onUnmountAutoFocus:De(s,oe=>{var ce;(ce=y.trigger)==null||ce.focus({preventScroll:!0}),oe.preventDefault()}),children:i.jsx(sl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:oe=>oe.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:i.jsx(M,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:oe=>oe.preventDefault(),..._,...re,onPlaced:()=>A(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:De(_.onKeyDown,oe=>{const ce=oe.ctrlKey||oe.altKey||oe.metaKey;if(oe.key==="Tab"&&oe.preventDefault(),!ce&&oe.key.length===1&&K(oe.key),["ArrowUp","ArrowDown","Home","End"].includes(oe.key)){let pe=P().filter(je=>!je.disabled).map(je=>je.ref.current);if(["ArrowUp","End"].includes(oe.key)&&(pe=pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(oe.key)){const je=oe.target,we=pe.indexOf(je);pe=pe.slice(we+1)}setTimeout(()=>Q(pe)),oe.preventDefault()}})})})})})})});Z4.displayName=uV;var dV="SelectItemAlignedPosition",eA=x.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,a=co(qo,r),o=uo(qo,r),[l,c]=x.useState(null),[u,d]=x.useState(null),f=et(t,E=>d(E)),h=wp(r),p=x.useRef(!1),g=x.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:_,focusSelectedItem:y}=o,w=x.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&m&&v&&_){const E=a.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),T=a.valueNode.getBoundingClientRect(),D=_.getBoundingClientRect();if(a.dir!=="rtl"){const je=D.left-C.left,we=T.left-je,Ce=E.left-we,j=E.width+Ce,se=Math.max(j,C.width),ae=window.innerWidth-js,z=Wv(we,[js,Math.max(js,ae-se)]);l.style.minWidth=j+"px",l.style.left=z+"px"}else{const je=C.right-D.right,we=window.innerWidth-T.right-je,Ce=window.innerWidth-E.right-we,j=E.width+Ce,se=Math.max(j,C.width),ae=window.innerWidth-js,z=Wv(we,[js,Math.max(js,ae-se)]);l.style.minWidth=j+"px",l.style.right=z+"px"}const F=h(),P=window.innerHeight-js*2,L=m.scrollHeight,A=window.getComputedStyle(u),I=parseInt(A.borderTopWidth,10),Q=parseInt(A.paddingTop,10),q=parseInt(A.borderBottomWidth,10),O=parseInt(A.paddingBottom,10),H=I+Q+L+O+q,G=Math.min(v.offsetHeight*5,H),K=window.getComputedStyle(m),k=parseInt(K.paddingTop,10),W=parseInt(K.paddingBottom,10),R=E.top+E.height/2-js,M=P-R,re=v.offsetHeight/2,oe=v.offsetTop+re,ce=I+Q+oe,me=H-ce;if(ce<=R){const je=F.length>0&&v===F[F.length-1].ref.current;l.style.bottom="0px";const we=u.clientHeight-m.offsetTop-m.offsetHeight,Ce=Math.max(M,re+(je?W:0)+we+q),j=ce+Ce;l.style.height=j+"px"}else{const je=F.length>0&&v===F[0].ref.current;l.style.top="0px";const Ce=Math.max(R,I+m.offsetTop+(je?k:0)+re)+me;l.style.height=Ce+"px",m.scrollTop=ce-R+m.offsetTop}l.style.margin=`${js}px 0`,l.style.minHeight=G+"px",l.style.maxHeight=P+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[h,a.trigger,a.valueNode,l,u,m,v,_,a.dir,n]);Er(()=>w(),[w]);const[b,S]=x.useState();Er(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const N=x.useCallback(E=>{E&&g.current===!0&&(w(),y==null||y(),g.current=!1)},[w,y]);return i.jsx(hV,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:N,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:i.jsx(Ge.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});eA.displayName=dV;var fV="SelectPopperPosition",Hv=x.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=js,...a}=e,o=_p(r);return i.jsx(H0,{...o,...a,ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Hv.displayName=fV;var[hV,gw]=eu(qo,{}),Gv="SelectViewport",tA=x.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...s}=e,a=uo(Gv,r),o=gw(Gv,r),l=et(t,a.onViewportChange),c=x.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),i.jsx(yp.Slot,{scope:r,children:i.jsx(Ge.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:De(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&f){const p=Math.abs(c.current-d.scrollTop);if(p>0){const g=window.innerHeight-js*2,m=parseFloat(f.style.minHeight),v=parseFloat(f.style.height),_=Math.max(m,v);if(_<g){const y=_+p,w=Math.min(g,y),b=y-w;f.style.height=w+"px",f.style.bottom==="0px"&&(d.scrollTop=b>0?b:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});tA.displayName=Gv;var rA="SelectGroup",[mV,pV]=eu(rA),gV=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=ms();return i.jsx(mV,{scope:r,id:s,children:i.jsx(Ge.div,{role:"group","aria-labelledby":s,...n,ref:t})})});gV.displayName=rA;var nA="SelectLabel",sA=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=pV(nA,r);return i.jsx(Ge.div,{id:s.id,...n,ref:t})});sA.displayName=nA;var Km="SelectItem",[xV,aA]=eu(Km),iA=x.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:a,...o}=e,l=co(Km,r),c=uo(Km,r),u=l.value===n,[d,f]=x.useState(a??""),[h,p]=x.useState(!1),g=et(t,y=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,y,n,s)}),m=ms(),v=x.useRef("touch"),_=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(xV,{scope:r,value:n,disabled:s,textId:m,isSelected:u,onItemTextChange:x.useCallback(y=>{f(w=>w||((y==null?void 0:y.textContent)??"").trim())},[]),children:i.jsx(yp.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:i.jsx(Ge.div,{role:"option","aria-labelledby":m,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:g,onFocus:De(o.onFocus,()=>p(!0)),onBlur:De(o.onBlur,()=>p(!1)),onClick:De(o.onClick,()=>{v.current!=="mouse"&&_()}),onPointerUp:De(o.onPointerUp,()=>{v.current==="mouse"&&_()}),onPointerDown:De(o.onPointerDown,y=>{v.current=y.pointerType}),onPointerMove:De(o.onPointerMove,y=>{var w;v.current=y.pointerType,s?(w=c.onItemLeave)==null||w.call(c):v.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:De(o.onPointerLeave,y=>{var w;y.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:De(o.onKeyDown,y=>{var b;((b=c.searchRef)==null?void 0:b.current)!==""&&y.key===" "||(nV.includes(y.key)&&_(),y.key===" "&&y.preventDefault())})})})})});iA.displayName=Km;var Ou="SelectItemText",oA=x.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...a}=e,o=co(Ou,r),l=uo(Ou,r),c=aA(Ou,r),u=oV(Ou,r),[d,f]=x.useState(null),h=et(t,_=>f(_),c.onItemTextChange,_=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,_,c.value,c.disabled)}),p=d==null?void 0:d.textContent,g=x.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=u;return Er(()=>(m(g),()=>v(g)),[m,v,g]),i.jsxs(i.Fragment,{children:[i.jsx(Ge.span,{id:c.textId,...a,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Qa.createPortal(a.children,o.valueNode):null]})});oA.displayName=Ou;var lA="SelectItemIndicator",cA=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return aA(lA,r).isSelected?i.jsx(Ge.span,{"aria-hidden":!0,...n,ref:t}):null});cA.displayName=lA;var Kv="SelectScrollUpButton",uA=x.forwardRef((e,t)=>{const r=uo(Kv,e.__scopeSelect),n=gw(Kv,e.__scopeSelect),[s,a]=x.useState(!1),o=et(t,n.onScrollButtonChange);return Er(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?i.jsx(fA,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});uA.displayName=Kv;var Yv="SelectScrollDownButton",dA=x.forwardRef((e,t)=>{const r=uo(Yv,e.__scopeSelect),n=gw(Yv,e.__scopeSelect),[s,a]=x.useState(!1),o=et(t,n.onScrollButtonChange);return Er(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?i.jsx(fA,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});dA.displayName=Yv;var fA=x.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,a=uo("SelectScrollButton",r),o=x.useRef(null),l=wp(r),c=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>c(),[c]),Er(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),i.jsx(Ge.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:De(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:De(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:De(s.onPointerLeave,()=>{c()})})}),vV="SelectSeparator",hA=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return i.jsx(Ge.div,{"aria-hidden":!0,...n,ref:t})});hA.displayName=vV;var qv="SelectArrow",yV=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=_p(r),a=co(qv,r),o=uo(qv,r);return a.open&&o.position==="popper"?i.jsx(G0,{...s,...n,ref:t}):null});yV.displayName=qv;function mA(e){return e===""||e===void 0}var pA=x.forwardRef((e,t)=>{const{value:r,...n}=e,s=x.useRef(null),a=et(t,s),o=pw(r);return x.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==r&&d){const f=new Event("change",{bubbles:!0});d.call(l,r),l.dispatchEvent(f)}},[o,r]),i.jsx(uf,{asChild:!0,children:i.jsx("select",{...n,ref:a,defaultValue:r})})});pA.displayName="BubbleSelect";function gA(e){const t=Ht(e),r=x.useRef(""),n=x.useRef(0),s=x.useCallback(o=>{const l=r.current+o;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=x.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,a]}function xA(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let o=wV(e,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function wV(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var _V=W4,vA=G4,bV=Y4,SV=q4,EV=X4,yA=Q4,NV=tA,wA=sA,_A=iA,jV=oA,kV=cA,bA=uA,SA=dA,EA=hA;const ma=_V,pa=bV,Ys=x.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(vA,{ref:n,className:Te("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,i.jsx(SV,{asChild:!0,children:i.jsx(ff,{className:"h-4 w-4 opacity-50"})})]}));Ys.displayName=vA.displayName;const NA=x.forwardRef(({className:e,...t},r)=>i.jsx(bA,{ref:r,className:Te("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(my,{className:"h-4 w-4"})}));NA.displayName=bA.displayName;const jA=x.forwardRef(({className:e,...t},r)=>i.jsx(SA,{ref:r,className:Te("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(ff,{className:"h-4 w-4"})}));jA.displayName=SA.displayName;const qs=x.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>i.jsx(EV,{children:i.jsxs(yA,{ref:s,className:Te("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[i.jsx(NA,{}),i.jsx(NV,{className:Te("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(jA,{})]})}));qs.displayName=yA.displayName;const CV=x.forwardRef(({className:e,...t},r)=>i.jsx(wA,{ref:r,className:Te("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));CV.displayName=wA.displayName;const Rt=x.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(_A,{ref:n,className:Te("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(kV,{children:i.jsx(Vo,{className:"h-4 w-4"})})}),i.jsx(jV,{children:t})]}));Rt.displayName=_A.displayName;const TV=x.forwardRef(({className:e,...t},r)=>i.jsx(EA,{ref:r,className:Te("-mx-1 my-1 h-px bg-muted",e),...t}));TV.displayName=EA.displayName;var Qe=function(){return Qe=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Qe.apply(this,arguments)};function AV(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function kA(e,t,r){for(var n=0,s=t.length,a;n<s;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}function Df(e){return e.mode==="multiple"}function Rf(e){return e.mode==="range"}function bp(e){return e.mode==="single"}var PV={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function DV(e,t){return ht(e,"LLLL y",t)}function RV(e,t){return ht(e,"d",t)}function MV(e,t){return ht(e,"LLLL",t)}function OV(e){return"".concat(e)}function FV(e,t){return ht(e,"cccccc",t)}function IV(e,t){return ht(e,"yyyy",t)}var LV=Object.freeze({__proto__:null,formatCaption:DV,formatDay:RV,formatMonthCaption:MV,formatWeekNumber:OV,formatWeekdayName:FV,formatYearCaption:IV}),$V=function(e,t,r){return ht(e,"do MMMM (EEEE)",r)},BV=function(){return"Month: "},UV=function(){return"Go to next month"},zV=function(){return"Go to previous month"},VV=function(e,t){return ht(e,"cccc",t)},WV=function(e){return"Week n. ".concat(e)},HV=function(){return"Year: "},GV=Object.freeze({__proto__:null,labelDay:$V,labelMonthDropdown:BV,labelNext:UV,labelPrevious:zV,labelWeekNumber:WV,labelWeekday:VV,labelYearDropdown:HV});function KV(){var e="buttons",t=PV,r=lw,n={},s={},a=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:LV,labels:GV,locale:r,modifiersClassNames:n,modifiers:s,numberOfMonths:a,styles:o,today:l,mode:"default"}}function YV(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,s=e.toMonth,a=e.fromDate,o=e.toDate;return n?a=Sr(n):t&&(a=new Date(t,0,1)),s?o=Ra(s):r&&(o=new Date(r,11,31)),{fromDate:a?Ic(a):void 0,toDate:o?Ic(o):void 0}}var CA=x.createContext(void 0);function qV(e){var t,r=e.initialProps,n=KV(),s=YV(r),a=s.fromDate,o=s.toDate,l=(t=r.captionLayout)!==null&&t!==void 0?t:n.captionLayout;l!=="buttons"&&(!a||!o)&&(l="buttons");var c;(bp(r)||Df(r)||Rf(r))&&(c=r.onSelect);var u=Qe(Qe(Qe({},n),r),{captionLayout:l,classNames:Qe(Qe({},n.classNames),r.classNames),components:Qe({},r.components),formatters:Qe(Qe({},n.formatters),r.formatters),fromDate:a,labels:Qe(Qe({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:Qe(Qe({},n.modifiers),r.modifiers),modifiersClassNames:Qe(Qe({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:Qe(Qe({},n.styles),r.styles),toDate:o});return i.jsx(CA.Provider,{value:u,children:e.children})}function It(){var e=x.useContext(CA);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function TA(e){var t=It(),r=t.locale,n=t.classNames,s=t.styles,a=t.formatters.formatCaption;return i.jsx("div",{className:n.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:a(e.displayMonth,{locale:r})})}function XV(e){return i.jsx("svg",Qe({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:i.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function AA(e){var t,r,n=e.onChange,s=e.value,a=e.children,o=e.caption,l=e.className,c=e.style,u=It(),d=(r=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:XV;return i.jsxs("div",{className:l,style:c,children:[i.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),i.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:n,children:a}),i.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,i.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function QV(e){var t,r=It(),n=r.fromDate,s=r.toDate,a=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return i.jsx(i.Fragment,{});if(!s)return i.jsx(i.Fragment,{});var f=[];if(hz(n,s))for(var h=Sr(n),p=n.getMonth();p<=s.getMonth();p++)f.push(Vg(h,p));else for(var h=Sr(new Date),p=0;p<=11;p++)f.push(Vg(h,p));var g=function(v){var _=Number(v.target.value),y=Vg(Sr(e.displayMonth),_);e.onChange(y)},m=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:AA;return i.jsx(m,{name:"months","aria-label":d(),className:c.dropdown_month,style:a.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:f.map(function(v){return i.jsx("option",{value:v.getMonth(),children:l(v,{locale:o})},v.getMonth())})})}function JV(e){var t,r=e.displayMonth,n=It(),s=n.fromDate,a=n.toDate,o=n.locale,l=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,f=n.labels.labelYearDropdown,h=[];if(!s)return i.jsx(i.Fragment,{});if(!a)return i.jsx(i.Fragment,{});for(var p=s.getFullYear(),g=a.getFullYear(),m=p;m<=g;m++)h.push(z2(N4(new Date),m));var v=function(y){var w=z2(Sr(r),Number(y.target.value));e.onChange(w)},_=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:AA;return i.jsx(_,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:v,value:r.getFullYear(),caption:d(r,{locale:o}),children:h.map(function(y){return i.jsx("option",{value:y.getFullYear(),children:d(y,{locale:o})},y.getFullYear())})})}function ZV(e,t){var r=x.useState(e),n=r[0],s=r[1],a=t===void 0?n:t;return[a,s]}function eW(e){var t=e.month,r=e.defaultMonth,n=e.today,s=t||r||n||new Date,a=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(a&&Lc(a,s)<0){var u=-1*(c-1);s=Zn(a,u)}return o&&Lc(s,o)<0&&(s=o),Sr(s)}function tW(){var e=It(),t=eW(e),r=ZV(t,e.month),n=r[0],s=r[1],a=function(o){var l;if(!e.disableNavigation){var c=Sr(o);s(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[n,a]}function rW(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,s=Sr(e),a=Sr(Zn(s,n)),o=Lc(a,s),l=[],c=0;c<o;c++){var u=Zn(s,c);l.push(u)}return r&&(l=l.reverse()),l}function nW(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,s=t.numberOfMonths,a=s===void 0?1:s,o=n?a:1,l=Sr(e);if(!r)return Zn(l,o);var c=Lc(r,e);if(!(c<a))return Zn(l,o)}}function sW(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,s=t.numberOfMonths,a=s===void 0?1:s,o=n?a:1,l=Sr(e);if(!r)return Zn(l,-o);var c=Lc(l,r);if(!(c<=0))return Zn(l,-o)}}var PA=x.createContext(void 0);function aW(e){var t=It(),r=tW(),n=r[0],s=r[1],a=rW(n,t),o=nW(n,t),l=sW(n,t),c=function(f){return a.some(function(h){return uw(f,h)})},u=function(f,h){c(f)||(h&&cw(f,h)?s(Zn(f,1+t.numberOfMonths*-1)):s(f))},d={currentMonth:n,displayMonths:a,goToMonth:s,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return i.jsx(PA.Provider,{value:d,children:e.children})}function Mf(){var e=x.useContext(PA);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function rS(e){var t,r=It(),n=r.classNames,s=r.styles,a=r.components,o=Mf().goToMonth,l=function(d){o(Zn(d,e.displayIndex?-e.displayIndex:0))},c=(t=a==null?void 0:a.CaptionLabel)!==null&&t!==void 0?t:TA,u=i.jsx(c,{id:e.id,displayMonth:e.displayMonth});return i.jsxs("div",{className:n.caption_dropdowns,style:s.caption_dropdowns,children:[i.jsx("div",{className:n.vhidden,children:u}),i.jsx(QV,{onChange:l,displayMonth:e.displayMonth}),i.jsx(JV,{onChange:l,displayMonth:e.displayMonth})]})}function iW(e){return i.jsx("svg",Qe({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:i.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function oW(e){return i.jsx("svg",Qe({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:i.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Ym=x.forwardRef(function(e,t){var r=It(),n=r.classNames,s=r.styles,a=[n.button_reset,n.button];e.className&&a.push(e.className);var o=a.join(" "),l=Qe(Qe({},s.button_reset),s.button);return e.style&&Object.assign(l,e.style),i.jsx("button",Qe({},e,{ref:t,type:"button",className:o,style:l}))});function lW(e){var t,r,n=It(),s=n.dir,a=n.locale,o=n.classNames,l=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,f=n.components;if(!e.nextMonth&&!e.previousMonth)return i.jsx(i.Fragment,{});var h=u(e.previousMonth,{locale:a}),p=[o.nav_button,o.nav_button_previous].join(" "),g=d(e.nextMonth,{locale:a}),m=[o.nav_button,o.nav_button_next].join(" "),v=(t=f==null?void 0:f.IconRight)!==null&&t!==void 0?t:oW,_=(r=f==null?void 0:f.IconLeft)!==null&&r!==void 0?r:iW;return i.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&i.jsx(Ym,{name:"previous-month","aria-label":h,className:p,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:s==="rtl"?i.jsx(v,{className:o.nav_icon,style:l.nav_icon}):i.jsx(_,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&i.jsx(Ym,{name:"next-month","aria-label":g,className:m,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:s==="rtl"?i.jsx(_,{className:o.nav_icon,style:l.nav_icon}):i.jsx(v,{className:o.nav_icon,style:l.nav_icon})})]})}function nS(e){var t=It().numberOfMonths,r=Mf(),n=r.previousMonth,s=r.nextMonth,a=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(g){return uw(e.displayMonth,g)}),c=l===0,u=l===o.length-1,d=t>1&&(c||!u),f=t>1&&(u||!c),h=function(){n&&a(n)},p=function(){s&&a(s)};return i.jsx(lW,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:f,nextMonth:s,previousMonth:n,onPreviousClick:h,onNextClick:p})}function cW(e){var t,r=It(),n=r.classNames,s=r.disableNavigation,a=r.styles,o=r.captionLayout,l=r.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:TA,u;return s?u=i.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=i.jsx(rS,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=i.jsxs(i.Fragment,{children:[i.jsx(rS,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),i.jsx(nS,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=i.jsxs(i.Fragment,{children:[i.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),i.jsx(nS,{displayMonth:e.displayMonth,id:e.id})]}),i.jsx("div",{className:n.caption,style:a.caption,children:u})}function uW(e){var t=It(),r=t.footer,n=t.styles,s=t.classNames.tfoot;return r?i.jsx("tfoot",{className:s,style:n.tfoot,children:i.jsx("tr",{children:i.jsx("td",{colSpan:8,children:r})})}):i.jsx(i.Fragment,{})}function dW(e,t,r){for(var n=r?Yo(new Date):vs(new Date,{locale:e,weekStartsOn:t}),s=[],a=0;a<7;a++){var o=en(n,a);s.push(o)}return s}function fW(){var e=It(),t=e.classNames,r=e.styles,n=e.showWeekNumber,s=e.locale,a=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=dW(s,a,o);return i.jsxs("tr",{style:r.head_row,className:t.head_row,children:[n&&i.jsx("td",{style:r.head_cell,className:t.head_cell}),u.map(function(d,f){return i.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":c(d,{locale:s}),children:l(d,{locale:s})},f)})]})}function hW(){var e,t=It(),r=t.classNames,n=t.styles,s=t.components,a=(e=s==null?void 0:s.HeadRow)!==null&&e!==void 0?e:fW;return i.jsx("thead",{style:n.head,className:r.head,children:i.jsx(a,{})})}function mW(e){var t=It(),r=t.locale,n=t.formatters.formatDay;return i.jsx(i.Fragment,{children:n(e.date,{locale:r})})}var xw=x.createContext(void 0);function pW(e){if(!Df(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return i.jsx(xw.Provider,{value:t,children:e.children})}return i.jsx(gW,{initialProps:e.initialProps,children:e.children})}function gW(e){var t=e.initialProps,r=e.children,n=t.selected,s=t.min,a=t.max,o=function(u,d,f){var h,p;(h=t.onDayClick)===null||h===void 0||h.call(t,u,d,f);var g=!!(d.selected&&s&&(n==null?void 0:n.length)===s);if(!g){var m=!!(!d.selected&&a&&(n==null?void 0:n.length)===a);if(!m){var v=n?kA([],n):[];if(d.selected){var _=v.findIndex(function(y){return Tn(u,y)});v.splice(_,1)}else v.push(u);(p=t.onSelect)===null||p===void 0||p.call(t,v,u,d,f)}}},l={disabled:[]};n&&l.disabled.push(function(u){var d=a&&n.length>a-1,f=n.some(function(h){return Tn(h,u)});return!!(d&&!f)});var c={selected:n,onDayClick:o,modifiers:l};return i.jsx(xw.Provider,{value:c,children:r})}function vw(){var e=x.useContext(xw);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function xW(e,t){var r=t||{},n=r.from,s=r.to;return n&&s?Tn(s,e)&&Tn(n,e)?void 0:Tn(s,e)?{from:s,to:void 0}:Tn(n,e)?void 0:Vm(n,e)?{from:e,to:s}:{from:n,to:e}:s?Vm(e,s)?{from:s,to:e}:{from:e,to:s}:n?cw(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var yw=x.createContext(void 0);function vW(e){if(!Rf(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return i.jsx(yw.Provider,{value:t,children:e.children})}return i.jsx(yW,{initialProps:e.initialProps,children:e.children})}function yW(e){var t=e.initialProps,r=e.children,n=t.selected,s=n||{},a=s.from,o=s.to,l=t.min,c=t.max,u=function(p,g,m){var v,_;(v=t.onDayClick)===null||v===void 0||v.call(t,p,g,m);var y=xW(p,n);(_=t.onSelect)===null||_===void 0||_.call(t,y,p,g,m)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(d.range_start=[a],o?(d.range_end=[o],Tn(a,o)||(d.range_middle=[{after:a,before:o}])):d.range_end=[a]):o&&(d.range_start=[o],d.range_end=[o]),l&&(a&&!o&&d.disabled.push({after:Ug(a,l-1),before:en(a,l-1)}),a&&o&&d.disabled.push({after:a,before:en(a,l-1)}),!a&&o&&d.disabled.push({after:Ug(o,l-1),before:en(o,l-1)})),c){if(a&&!o&&(d.disabled.push({before:en(a,-c+1)}),d.disabled.push({after:en(a,c-1)})),a&&o){var f=Fs(o,a)+1,h=c-f;d.disabled.push({before:Ug(a,h)}),d.disabled.push({after:en(o,h)})}!a&&o&&(d.disabled.push({before:en(o,-c+1)}),d.disabled.push({after:en(o,c-1)}))}return i.jsx(yw.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function ww(){var e=x.useContext(yw);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function am(e){return Array.isArray(e)?kA([],e):e!==void 0?[e]:[]}function wW(e){var t={};return Object.entries(e).forEach(function(r){var n=r[0],s=r[1];t[n]=am(s)}),t}var Xs;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Xs||(Xs={}));var _W=Xs.Selected,ba=Xs.Disabled,bW=Xs.Hidden,SW=Xs.Today,Gg=Xs.RangeEnd,Kg=Xs.RangeMiddle,Yg=Xs.RangeStart,EW=Xs.Outside;function NW(e,t,r){var n,s=(n={},n[_W]=am(e.selected),n[ba]=am(e.disabled),n[bW]=am(e.hidden),n[SW]=[e.today],n[Gg]=[],n[Kg]=[],n[Yg]=[],n[EW]=[],n);return e.fromDate&&s[ba].push({before:e.fromDate}),e.toDate&&s[ba].push({after:e.toDate}),Df(e)?s[ba]=s[ba].concat(t.modifiers[ba]):Rf(e)&&(s[ba]=s[ba].concat(r.modifiers[ba]),s[Yg]=r.modifiers[Yg],s[Kg]=r.modifiers[Kg],s[Gg]=r.modifiers[Gg]),s}var DA=x.createContext(void 0);function jW(e){var t=It(),r=vw(),n=ww(),s=NW(t,r,n),a=wW(t.modifiers),o=Qe(Qe({},s),a);return i.jsx(DA.Provider,{value:o,children:e.children})}function RA(){var e=x.useContext(DA);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function kW(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function CW(e){return!!(e&&typeof e=="object"&&"from"in e)}function TW(e){return!!(e&&typeof e=="object"&&"after"in e)}function AW(e){return!!(e&&typeof e=="object"&&"before"in e)}function PW(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function DW(e,t){var r,n=t.from,s=t.to;if(n&&s){var a=Fs(s,n)<0;a&&(r=[s,n],n=r[0],s=r[1]);var o=Fs(e,n)>=0&&Fs(s,e)>=0;return o}return s?Tn(s,e):n?Tn(n,e):!1}function RW(e){return aw(e)}function MW(e){return Array.isArray(e)&&e.every(aw)}function OW(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(RW(r))return Tn(e,r);if(MW(r))return r.includes(e);if(CW(r))return DW(e,r);if(PW(r))return r.dayOfWeek.includes(e.getDay());if(kW(r)){var n=Fs(r.before,e),s=Fs(r.after,e),a=n>0,o=s<0,l=Vm(r.before,r.after);return l?o&&a:a||o}return TW(r)?Fs(e,r.after)>0:AW(r)?Fs(r.before,e)>0:typeof r=="function"?r(e):!1})}function _w(e,t,r){var n=Object.keys(t).reduce(function(a,o){var l=t[o];return OW(e,l)&&a.push(o),a},[]),s={};return n.forEach(function(a){return s[a]=!0}),r&&!uw(e,r)&&(s.outside=!0),s}function FW(e,t){for(var r=Sr(e[0]),n=Ra(e[e.length-1]),s,a,o=r;o<=n;){var l=_w(o,t),c=!l.disabled&&!l.hidden;if(!c){o=en(o,1);continue}if(l.selected)return o;l.today&&!a&&(a=o),s||(s=o),o=en(o,1)}return a||s}var IW=365;function MA(e,t){var r=t.moveBy,n=t.direction,s=t.context,a=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=s.weekStartsOn,u=s.fromDate,d=s.toDate,f=s.locale,h={day:en,week:zm,month:Zn,year:QB,startOfWeek:function(v){return s.ISOWeek?Yo(v):vs(v,{locale:f,weekStartsOn:c})},endOfWeek:function(v){return s.ISOWeek?j4(v):Ud(v,{locale:f,weekStartsOn:c})}},p=h[r](e,n==="after"?1:-1);n==="before"&&u?p=JB([u,p]):n==="after"&&d&&(p=ZB([d,p]));var g=!0;if(a){var m=_w(p,a);g=!m.disabled&&!m.hidden}return g?p:l.count>IW?l.lastFocused:MA(p,{moveBy:r,direction:n,context:s,modifiers:a,retry:Qe(Qe({},l),{count:l.count+1})})}var OA=x.createContext(void 0);function LW(e){var t=Mf(),r=RA(),n=x.useState(),s=n[0],a=n[1],o=x.useState(),l=o[0],c=o[1],u=FW(t.displayMonths,r),d=s??(l&&t.isDateDisplayed(l))?l:u,f=function(){c(s),a(void 0)},h=function(v){a(v)},p=It(),g=function(v,_){if(s){var y=MA(s,{moveBy:v,direction:_,context:p,modifiers:r});Tn(s,y)||(t.goToDate(y,s),h(y))}},m={focusedDay:s,focusTarget:d,blur:f,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return i.jsx(OA.Provider,{value:m,children:e.children})}function bw(){var e=x.useContext(OA);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function $W(e,t){var r=RA(),n=_w(e,r,t);return n}var Sw=x.createContext(void 0);function BW(e){if(!bp(e.initialProps)){var t={selected:void 0};return i.jsx(Sw.Provider,{value:t,children:e.children})}return i.jsx(UW,{initialProps:e.initialProps,children:e.children})}function UW(e){var t=e.initialProps,r=e.children,n=function(a,o,l){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,a,o,l),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,a,o,l);return}(d=t.onSelect)===null||d===void 0||d.call(t,a,a,o,l)},s={selected:t.selected,onDayClick:n};return i.jsx(Sw.Provider,{value:s,children:r})}function FA(){var e=x.useContext(Sw);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function zW(e,t){var r=It(),n=FA(),s=vw(),a=ww(),o=bw(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,f=o.blur,h=o.focus,p=o.focusMonthBefore,g=o.focusMonthAfter,m=o.focusYearBefore,v=o.focusYearAfter,_=o.focusStartOfWeek,y=o.focusEndOfWeek,w=function(q){var O,H,G,K;bp(r)?(O=n.onDayClick)===null||O===void 0||O.call(n,e,t,q):Df(r)?(H=s.onDayClick)===null||H===void 0||H.call(s,e,t,q):Rf(r)?(G=a.onDayClick)===null||G===void 0||G.call(a,e,t,q):(K=r.onDayClick)===null||K===void 0||K.call(r,e,t,q)},b=function(q){var O;h(e),(O=r.onDayFocus)===null||O===void 0||O.call(r,e,t,q)},S=function(q){var O;f(),(O=r.onDayBlur)===null||O===void 0||O.call(r,e,t,q)},N=function(q){var O;(O=r.onDayMouseEnter)===null||O===void 0||O.call(r,e,t,q)},E=function(q){var O;(O=r.onDayMouseLeave)===null||O===void 0||O.call(r,e,t,q)},C=function(q){var O;(O=r.onDayPointerEnter)===null||O===void 0||O.call(r,e,t,q)},T=function(q){var O;(O=r.onDayPointerLeave)===null||O===void 0||O.call(r,e,t,q)},D=function(q){var O;(O=r.onDayTouchCancel)===null||O===void 0||O.call(r,e,t,q)},F=function(q){var O;(O=r.onDayTouchEnd)===null||O===void 0||O.call(r,e,t,q)},P=function(q){var O;(O=r.onDayTouchMove)===null||O===void 0||O.call(r,e,t,q)},L=function(q){var O;(O=r.onDayTouchStart)===null||O===void 0||O.call(r,e,t,q)},A=function(q){var O;(O=r.onDayKeyUp)===null||O===void 0||O.call(r,e,t,q)},I=function(q){var O;switch(q.key){case"ArrowLeft":q.preventDefault(),q.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":q.preventDefault(),q.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":q.preventDefault(),q.stopPropagation(),u();break;case"ArrowUp":q.preventDefault(),q.stopPropagation(),d();break;case"PageUp":q.preventDefault(),q.stopPropagation(),q.shiftKey?m():p();break;case"PageDown":q.preventDefault(),q.stopPropagation(),q.shiftKey?v():g();break;case"Home":q.preventDefault(),q.stopPropagation(),_();break;case"End":q.preventDefault(),q.stopPropagation(),y();break}(O=r.onDayKeyDown)===null||O===void 0||O.call(r,e,t,q)},Q={onClick:w,onFocus:b,onBlur:S,onKeyDown:I,onKeyUp:A,onMouseEnter:N,onMouseLeave:E,onPointerEnter:C,onPointerLeave:T,onTouchCancel:D,onTouchEnd:F,onTouchMove:P,onTouchStart:L};return Q}function VW(){var e=It(),t=FA(),r=vw(),n=ww(),s=bp(e)?t.selected:Df(e)?r.selected:Rf(e)?n.selected:void 0;return s}function WW(e){return Object.values(Xs).includes(e)}function HW(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(n){var s=e.modifiersClassNames[n];if(s)r.push(s);else if(WW(n)){var a=e.classNames["day_".concat(n)];a&&r.push(a)}}),r}function GW(e,t){var r=Qe({},e.styles.day);return Object.keys(t).forEach(function(n){var s;r=Qe(Qe({},r),(s=e.modifiersStyles)===null||s===void 0?void 0:s[n])}),r}function KW(e,t,r){var n,s,a,o=It(),l=bw(),c=$W(e,t),u=zW(e,c),d=VW(),f=!!(o.onDayClick||o.mode!=="default");x.useEffect(function(){var N;c.outside||l.focusedDay&&f&&Tn(l.focusedDay,e)&&((N=r.current)===null||N===void 0||N.focus())},[l.focusedDay,e,r,f,c.outside]);var h=HW(o,c).join(" "),p=GW(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),m=(a=(s=o.components)===null||s===void 0?void 0:s.DayContent)!==null&&a!==void 0?a:mW,v=i.jsx(m,{date:e,displayMonth:t,activeModifiers:c}),_={style:p,className:h,children:v,role:"gridcell"},y=l.focusTarget&&Tn(l.focusTarget,e)&&!c.outside,w=l.focusedDay&&Tn(l.focusedDay,e),b=Qe(Qe(Qe({},_),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=w||y?0:-1,n)),u),S={isButton:f,isHidden:g,activeModifiers:c,selectedDays:d,buttonProps:b,divProps:_};return S}function YW(e){var t=x.useRef(null),r=KW(e.date,e.displayMonth,t);return r.isHidden?i.jsx("div",{role:"gridcell"}):r.isButton?i.jsx(Ym,Qe({name:"day",ref:t},r.buttonProps)):i.jsx("div",Qe({},r.divProps))}function qW(e){var t=e.number,r=e.dates,n=It(),s=n.onWeekNumberClick,a=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(t),{locale:l});if(!s)return i.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:d});var f=c(Number(t),{locale:l}),h=function(p){s(t,r,p)};return i.jsx(Ym,{name:"week-number","aria-label":f,className:o.weeknumber,style:a.weeknumber,onClick:h,children:d})}function XW(e){var t,r,n=It(),s=n.styles,a=n.classNames,o=n.showWeekNumber,l=n.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:YW,u=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:qW,d;return o&&(d=i.jsx("td",{className:a.cell,style:s.cell,children:i.jsx(u,{number:e.weekNumber,dates:e.dates})})),i.jsxs("tr",{className:a.row,style:s.row,children:[d,e.dates.map(function(f){return i.jsx("td",{className:a.cell,style:s.cell,role:"presentation",children:i.jsx(c,{displayMonth:e.displayMonth,date:f})},cz(f))})]})}function sS(e,t,r){for(var n=r!=null&&r.ISOWeek?j4(t):Ud(t,r),s=r!=null&&r.ISOWeek?Yo(e):vs(e,r),a=Fs(n,s),o=[],l=0;l<=a;l++)o.push(en(s,l));var c=o.reduce(function(u,d){var f=r!=null&&r.ISOWeek?k4(d):T4(d,r),h=u.find(function(p){return p.weekNumber===f});return h?(h.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function QW(e,t){var r=sS(Sr(e),Ra(e),t);if(t!=null&&t.useFixedWeeks){var n=dz(e,t);if(n<6){var s=r[r.length-1],a=s.dates[s.dates.length-1],o=zm(a,6-n),l=sS(zm(a,1),o,t);r.push.apply(r,l)}}return r}function JW(e){var t,r,n,s=It(),a=s.locale,o=s.classNames,l=s.styles,c=s.hideHead,u=s.fixedWeeks,d=s.components,f=s.weekStartsOn,h=s.firstWeekContainsDate,p=s.ISOWeek,g=QW(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:p,locale:a,weekStartsOn:f,firstWeekContainsDate:h}),m=(t=d==null?void 0:d.Head)!==null&&t!==void 0?t:hW,v=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:XW,_=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:uW;return i.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&i.jsx(m,{}),i.jsx("tbody",{className:o.tbody,style:l.tbody,children:g.map(function(y){return i.jsx(v,{displayMonth:e.displayMonth,dates:y.dates,weekNumber:y.weekNumber},y.weekNumber)})}),i.jsx(_,{displayMonth:e.displayMonth})]})}function ZW(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var eH=ZW()?x.useLayoutEffect:x.useEffect,qg=!1,tH=0;function aS(){return"react-day-picker-".concat(++tH)}function rH(e){var t,r=e??(qg?aS():null),n=x.useState(r),s=n[0],a=n[1];return eH(function(){s===null&&a(aS())},[]),x.useEffect(function(){qg===!1&&(qg=!0)},[]),(t=e??s)!==null&&t!==void 0?t:void 0}function nH(e){var t,r,n=It(),s=n.dir,a=n.classNames,o=n.styles,l=n.components,c=Mf().displayMonths,u=rH(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,f=[a.month],h=o.month,p=e.displayIndex===0,g=e.displayIndex===c.length-1,m=!p&&!g;s==="rtl"&&(t=[p,g],g=t[0],p=t[1]),p&&(f.push(a.caption_start),h=Qe(Qe({},h),o.caption_start)),g&&(f.push(a.caption_end),h=Qe(Qe({},h),o.caption_end)),m&&(f.push(a.caption_between),h=Qe(Qe({},h),o.caption_between));var v=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:cW;return i.jsxs("div",{className:f.join(" "),style:h,children:[i.jsx(v,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),i.jsx(JW,{id:d,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function sH(e){var t=It(),r=t.classNames,n=t.styles;return i.jsx("div",{className:r.months,style:n.months,children:e.children})}function aH(e){var t,r,n=e.initialProps,s=It(),a=bw(),o=Mf(),l=x.useState(!1),c=l[0],u=l[1];x.useEffect(function(){s.initialFocus&&a.focusTarget&&(c||(a.focus(a.focusTarget),u(!0)))},[s.initialFocus,c,a.focus,a.focusTarget,a]);var d=[s.classNames.root,s.className];s.numberOfMonths>1&&d.push(s.classNames.multiple_months),s.showWeekNumber&&d.push(s.classNames.with_weeknumber);var f=Qe(Qe({},s.styles.root),s.style),h=Object.keys(n).filter(function(g){return g.startsWith("data-")}).reduce(function(g,m){var v;return Qe(Qe({},g),(v={},v[m]=n[m],v))},{}),p=(r=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:sH;return i.jsx("div",Qe({className:d.join(" "),style:f,dir:s.dir,id:s.id,nonce:n.nonce,title:n.title,lang:n.lang},h,{children:i.jsx(p,{children:o.displayMonths.map(function(g,m){return i.jsx(nH,{displayIndex:m,displayMonth:g},m)})})}))}function iH(e){var t=e.children,r=AV(e,["children"]);return i.jsx(qV,{initialProps:r,children:i.jsx(aW,{children:i.jsx(BW,{initialProps:r,children:i.jsx(pW,{initialProps:r,children:i.jsx(vW,{initialProps:r,children:i.jsx(jW,{children:i.jsx(LW,{children:t})})})})})})})}function oH(e){return i.jsx(iH,Qe({},e,{children:i.jsx(aH,{initialProps:e})}))}function qm({className:e,classNames:t,showOutsideDays:r=!0,...n}){return i.jsx(oH,{showOutsideDays:r,className:Te("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Te(Fd({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Te(Fd({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...s})=>i.jsx(dk,{className:"h-4 w-4"}),IconRight:({...s})=>i.jsx(hy,{className:"h-4 w-4"})},...n})}qm.displayName="Calendar";var Ew="Popover",[IA,pse]=ns(Ew,[ao]),Of=ao(),[lH,fo]=IA(Ew),LA=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:o=!1}=e,l=Of(t),c=x.useRef(null),[u,d]=x.useState(!1),[f=!1,h]=Ws({prop:n,defaultProp:s,onChange:a});return i.jsx(W0,{...l,children:i.jsx(lH,{scope:t,contentId:ms(),triggerRef:c,open:f,onOpenChange:h,onOpenToggle:x.useCallback(()=>h(p=>!p),[h]),hasCustomAnchor:u,onCustomAnchorAdd:x.useCallback(()=>d(!0),[]),onCustomAnchorRemove:x.useCallback(()=>d(!1),[]),modal:o,children:r})})};LA.displayName=Ew;var $A="PopoverAnchor",cH=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=fo($A,r),a=Of(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=s;return x.useEffect(()=>(o(),()=>l()),[o,l]),i.jsx(gf,{...a,...n,ref:t})});cH.displayName=$A;var BA="PopoverTrigger",UA=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=fo(BA,r),a=Of(r),o=et(t,s.triggerRef),l=i.jsx(Ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":GA(s.open),...n,ref:o,onClick:De(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:i.jsx(gf,{asChild:!0,...a,children:l})});UA.displayName=BA;var Nw="PopoverPortal",[uH,dH]=IA(Nw,{forceMount:void 0}),zA=e=>{const{__scopePopover:t,forceMount:r,children:n,container:s}=e,a=fo(Nw,t);return i.jsx(uH,{scope:t,forceMount:r,children:i.jsx(Mr,{present:r||a.open,children:i.jsx(Gc,{asChild:!0,container:s,children:n})})})};zA.displayName=Nw;var $c="PopoverContent",VA=x.forwardRef((e,t)=>{const r=dH($c,e.__scopePopover),{forceMount:n=r.forceMount,...s}=e,a=fo($c,e.__scopePopover);return i.jsx(Mr,{present:n||a.open,children:a.modal?i.jsx(fH,{...s,ref:t}):i.jsx(hH,{...s,ref:t})})});VA.displayName=$c;var fH=x.forwardRef((e,t)=>{const r=fo($c,e.__scopePopover),n=x.useRef(null),s=et(t,n),a=x.useRef(!1);return x.useEffect(()=>{const o=n.current;if(o)return Nf(o)},[]),i.jsx(Ef,{as:da,allowPinchZoom:!0,children:i.jsx(WA,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:De(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),a.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:De(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:De(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),hH=x.forwardRef((e,t)=>{const r=fo($c,e.__scopePopover),n=x.useRef(!1),s=x.useRef(!1);return i.jsx(WA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),WA=x.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=e,h=fo($c,r),p=Of(r);return ip(),i.jsx(Sf,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(sl,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:i.jsx(H0,{"data-state":GA(h.open),role:"dialog",id:h.contentId,...p,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),HA="PopoverClose",mH=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=fo(HA,r);return i.jsx(Ge.button,{type:"button",...n,ref:t,onClick:De(e.onClick,()=>s.onOpenChange(!1))})});mH.displayName=HA;var pH="PopoverArrow",gH=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Of(r);return i.jsx(G0,{...s,...n,ref:t})});gH.displayName=pH;function GA(e){return e?"open":"closed"}var xH=LA,vH=UA,yH=zA,KA=VA;const Xm=xH,Qm=vH,zd=x.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},s)=>i.jsx(yH,{children:i.jsx(KA,{ref:s,align:t,sideOffset:r,className:Te("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));zd.displayName=KA.displayName;var jw="Checkbox",[wH,gse]=ns(jw),[_H,bH]=wH(jw),YA=x.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:s,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[h,p]=x.useState(null),g=et(t,b=>p(b)),m=x.useRef(!1),v=h?d||!!h.closest("form"):!0,[_=!1,y]=Ws({prop:s,defaultProp:a,onChange:u}),w=x.useRef(_);return x.useEffect(()=>{const b=h==null?void 0:h.form;if(b){const S=()=>y(w.current);return b.addEventListener("reset",S),()=>b.removeEventListener("reset",S)}},[h,y]),i.jsxs(_H,{scope:r,state:_,disabled:l,children:[i.jsx(Ge.button,{type:"button",role:"checkbox","aria-checked":Vi(_)?"mixed":_,"aria-required":o,"data-state":QA(_),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:g,onKeyDown:De(e.onKeyDown,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:De(e.onClick,b=>{y(S=>Vi(S)?!0:!S),v&&(m.current=b.isPropagationStopped(),m.current||b.stopPropagation())})}),v&&i.jsx(SH,{control:h,bubbles:!m.current,name:n,value:c,checked:_,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"},defaultChecked:Vi(a)?!1:a})]})});YA.displayName=jw;var qA="CheckboxIndicator",XA=x.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...s}=e,a=bH(qA,r);return i.jsx(Mr,{present:n||Vi(a.state)||a.state===!0,children:i.jsx(Ge.span,{"data-state":QA(a.state),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});XA.displayName=qA;var SH=e=>{const{control:t,checked:r,bubbles:n=!0,defaultChecked:s,...a}=e,o=x.useRef(null),l=pw(r),c=Ny(t);x.useEffect(()=>{const d=o.current,f=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==r&&p){const g=new Event("click",{bubbles:n});d.indeterminate=Vi(r),p.call(d,Vi(r)?!1:r),d.dispatchEvent(g)}},[l,r,n]);const u=x.useRef(Vi(r)?!1:r);return i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??u.current,...a,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Vi(e){return e==="indeterminate"}function QA(e){return Vi(e)?"indeterminate":e?"checked":"unchecked"}var JA=YA,EH=XA;const Ma=x.forwardRef(({className:e,indeterminate:t=!1,...r},n)=>{const s=x.useRef(null);return x.useEffect(()=>{if(s.current){const a=s.current.querySelector('input[type="checkbox"]');a&&(a.indeterminate=t)}},[t]),x.useImperativeHandle(n,()=>s.current),i.jsx(JA,{ref:s,className:Te("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...r,children:i.jsx(EH,{className:Te("flex items-center justify-center text-current"),children:i.jsx(Vo,{className:"h-4 w-4"})})})});Ma.displayName=JA.displayName;var iS=1,NH=.9,jH=.8,kH=.17,Xg=.1,Qg=.999,CH=.9999,TH=.99,AH=/[\\\/_+.#"@\[\(\{&]/,PH=/[\\\/_+.#"@\[\(\{&]/g,DH=/[\s-]/,ZA=/[\s-]/g;function Xv(e,t,r,n,s,a,o){if(a===t.length)return s===e.length?iS:TH;var l=`${s},${a}`;if(o[l]!==void 0)return o[l];for(var c=n.charAt(a),u=r.indexOf(c,s),d=0,f,h,p,g;u>=0;)f=Xv(e,t,r,n,u+1,a+1,o),f>d&&(u===s?f*=iS:AH.test(e.charAt(u-1))?(f*=jH,p=e.slice(s,u-1).match(PH),p&&s>0&&(f*=Math.pow(Qg,p.length))):DH.test(e.charAt(u-1))?(f*=NH,g=e.slice(s,u-1).match(ZA),g&&s>0&&(f*=Math.pow(Qg,g.length))):(f*=kH,s>0&&(f*=Math.pow(Qg,u-s))),e.charAt(u)!==t.charAt(a)&&(f*=CH)),(f<Xg&&r.charAt(u-1)===n.charAt(a+1)||n.charAt(a+1)===n.charAt(a)&&r.charAt(u-1)!==n.charAt(a))&&(h=Xv(e,t,r,n,u+1,a+2,o),h*Xg>f&&(f=h*Xg)),f>d&&(d=f),u=r.indexOf(c,u+1);return o[l]=d,d}function oS(e){return e.toLowerCase().replace(ZA," ")}function RH(e,t,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,Xv(e,t,oS(e),oS(t),0,0,{})}function vn(){return vn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vn.apply(null,arguments)}function cc(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function MH(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function eP(...e){return t=>e.forEach(r=>MH(r,t))}function Ff(...e){return x.useCallback(eP(...e),e)}function OH(e,t=[]){let r=[];function n(a,o){const l=x.createContext(o),c=r.length;r=[...r,o];function u(f){const{scope:h,children:p,...g}=f,m=(h==null?void 0:h[e][c])||l,v=x.useMemo(()=>g,Object.values(g));return x.createElement(m.Provider,{value:v},p)}function d(f,h){const p=(h==null?void 0:h[e][c])||l,g=x.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const s=()=>{const a=r.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,FH(s,...t)]}function FH(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}const Qv=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},IH=g1.useId||(()=>{});let LH=0;function Jg(e){const[t,r]=x.useState(IH());return Qv(()=>{e||r(n=>n??String(LH++))},[e]),e||(t?`radix-${t}`:"")}function Xo(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}function $H({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=BH({defaultProp:t,onChange:r}),a=e!==void 0,o=a?e:n,l=Xo(r),c=x.useCallback(u=>{if(a){const f=typeof u=="function"?u(e):u;f!==e&&l(f)}else s(u)},[a,e,s,l]);return[o,c]}function BH({defaultProp:e,onChange:t}){const r=x.useState(e),[n]=r,s=x.useRef(n),a=Xo(t);return x.useEffect(()=>{s.current!==n&&(a(n),s.current=n)},[n,s,a]),r}const kw=x.forwardRef((e,t)=>{const{children:r,...n}=e,s=x.Children.toArray(r),a=s.find(zH);if(a){const o=a.props.children,l=s.map(c=>c===a?x.Children.count(o)>1?x.Children.only(null):x.isValidElement(o)?o.props.children:null:c);return x.createElement(Jv,vn({},n,{ref:t}),x.isValidElement(o)?x.cloneElement(o,void 0,l):null)}return x.createElement(Jv,vn({},n,{ref:t}),r)});kw.displayName="Slot";const Jv=x.forwardRef((e,t)=>{const{children:r,...n}=e;return x.isValidElement(r)?x.cloneElement(r,{...VH(n,r.props),ref:t?eP(t,r.ref):r.ref}):x.Children.count(r)>1?x.Children.only(null):null});Jv.displayName="SlotClone";const UH=({children:e})=>x.createElement(x.Fragment,null,e);function zH(e){return x.isValidElement(e)&&e.type===UH}function VH(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...l)=>{a(...l),s(...l)}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}const WH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ys=WH.reduce((e,t)=>{const r=x.forwardRef((n,s)=>{const{asChild:a,...o}=n,l=a?kw:t;return x.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),x.createElement(l,vn({},o,{ref:s}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function HH(e,t){e&&Qa.flushSync(()=>e.dispatchEvent(t))}function GH(e,t=globalThis==null?void 0:globalThis.document){const r=Xo(e);x.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n),()=>t.removeEventListener("keydown",n)},[r,t])}const Zv="dismissableLayer.update",KH="dismissableLayer.pointerDownOutside",YH="dismissableLayer.focusOutside";let lS;const qH=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),XH=x.forwardRef((e,t)=>{var r;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...u}=e,d=x.useContext(qH),[f,h]=x.useState(null),p=(r=f==null?void 0:f.ownerDocument)!==null&&r!==void 0?r:globalThis==null?void 0:globalThis.document,[,g]=x.useState({}),m=Ff(t,C=>h(C)),v=Array.from(d.layers),[_]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(_),w=f?v.indexOf(f):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,S=w>=y,N=QH(C=>{const T=C.target,D=[...d.branches].some(F=>F.contains(T));!S||D||(a==null||a(C),l==null||l(C),C.defaultPrevented||c==null||c())},p),E=JH(C=>{const T=C.target;[...d.branches].some(F=>F.contains(T))||(o==null||o(C),l==null||l(C),C.defaultPrevented||c==null||c())},p);return GH(C=>{w===d.layers.size-1&&(s==null||s(C),!C.defaultPrevented&&c&&(C.preventDefault(),c()))},p),x.useEffect(()=>{if(f)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(lS=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),cS(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=lS)}},[f,p,n,d]),x.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),cS())},[f,d]),x.useEffect(()=>{const C=()=>g({});return document.addEventListener(Zv,C),()=>document.removeEventListener(Zv,C)},[]),x.createElement(ys.div,vn({},u,{ref:m,style:{pointerEvents:b?S?"auto":"none":void 0,...e.style},onFocusCapture:cc(e.onFocusCapture,E.onFocusCapture),onBlurCapture:cc(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:cc(e.onPointerDownCapture,N.onPointerDownCapture)}))});function QH(e,t=globalThis==null?void 0:globalThis.document){const r=Xo(e),n=x.useRef(!1),s=x.useRef(()=>{});return x.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let d=function(){tP(KH,r,u,{discrete:!0})};var c=d;const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=d,t.addEventListener("click",s.current,{once:!0})):d()}else t.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function JH(e,t=globalThis==null?void 0:globalThis.document){const r=Xo(e),n=x.useRef(!1);return x.useEffect(()=>{const s=a=>{a.target&&!n.current&&tP(YH,r,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function cS(){const e=new CustomEvent(Zv);document.dispatchEvent(e)}function tP(e,t,r,{discrete:n}){const s=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?HH(s,a):s.dispatchEvent(a)}const Zg="focusScope.autoFocusOnMount",ex="focusScope.autoFocusOnUnmount",uS={bubbles:!1,cancelable:!0},ZH=x.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=e,[l,c]=x.useState(null),u=Xo(s),d=Xo(a),f=x.useRef(null),h=Ff(t,m=>c(m)),p=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(n){let y=function(N){if(p.paused||!l)return;const E=N.target;l.contains(E)?f.current=E:di(f.current,{select:!0})},w=function(N){if(p.paused||!l)return;const E=N.relatedTarget;E!==null&&(l.contains(E)||di(f.current,{select:!0}))},b=function(N){if(document.activeElement===document.body)for(const C of N)C.removedNodes.length>0&&di(l)};var m=y,v=w,_=b;document.addEventListener("focusin",y),document.addEventListener("focusout",w);const S=new MutationObserver(b);return l&&S.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),S.disconnect()}}},[n,l,p.paused]),x.useEffect(()=>{if(l){fS.add(p);const m=document.activeElement;if(!l.contains(m)){const _=new CustomEvent(Zg,uS);l.addEventListener(Zg,u),l.dispatchEvent(_),_.defaultPrevented||(eG(aG(rP(l)),{select:!0}),document.activeElement===m&&di(l))}return()=>{l.removeEventListener(Zg,u),setTimeout(()=>{const _=new CustomEvent(ex,uS);l.addEventListener(ex,d),l.dispatchEvent(_),_.defaultPrevented||di(m??document.body,{select:!0}),l.removeEventListener(ex,d),fS.remove(p)},0)}}},[l,u,d,p]);const g=x.useCallback(m=>{if(!r&&!n||p.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,_=document.activeElement;if(v&&_){const y=m.currentTarget,[w,b]=tG(y);w&&b?!m.shiftKey&&_===b?(m.preventDefault(),r&&di(w,{select:!0})):m.shiftKey&&_===w&&(m.preventDefault(),r&&di(b,{select:!0})):_===y&&m.preventDefault()}},[r,n,p.paused]);return x.createElement(ys.div,vn({tabIndex:-1},o,{ref:h,onKeyDown:g}))});function eG(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(di(n,{select:t}),document.activeElement!==r)return}function tG(e){const t=rP(e),r=dS(t,e),n=dS(t.reverse(),e);return[r,n]}function rP(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function dS(e,t){for(const r of e)if(!rG(r,{upTo:t}))return r}function rG(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function nG(e){return e instanceof HTMLInputElement&&"select"in e}function di(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&nG(e)&&t&&e.select()}}const fS=sG();function sG(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=hS(e,t),e.unshift(t)},remove(t){var r;e=hS(e,t),(r=e[0])===null||r===void 0||r.resume()}}}function hS(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function aG(e){return e.filter(t=>t.tagName!=="A")}const iG=x.forwardRef((e,t)=>{var r;const{container:n=globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,...s}=e;return n?oy.createPortal(x.createElement(ys.div,vn({},s,{ref:t})),n):null});function oG(e,t){return x.useReducer((r,n)=>{const s=t[r][n];return s??r},e)}const Sp=e=>{const{present:t,children:r}=e,n=lG(t),s=typeof r=="function"?r({present:n.isPresent}):x.Children.only(r),a=Ff(n.ref,s.ref);return typeof r=="function"||n.isPresent?x.cloneElement(s,{ref:a}):null};Sp.displayName="Presence";function lG(e){const[t,r]=x.useState(),n=x.useRef({}),s=x.useRef(e),a=x.useRef("none"),o=e?"mounted":"unmounted",[l,c]=oG(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const u=kh(n.current);a.current=l==="mounted"?u:"none"},[l]),Qv(()=>{const u=n.current,d=s.current;if(d!==e){const h=a.current,p=kh(u);e?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Qv(()=>{if(t){const u=f=>{const p=kh(n.current).includes(f.animationName);f.target===t&&p&&Qa.flushSync(()=>c("ANIMATION_END"))},d=f=>{f.target===t&&(a.current=kh(n.current))};return t.addEventListener("animationstart",d),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{t.removeEventListener("animationstart",d),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function kh(e){return(e==null?void 0:e.animationName)||"none"}let tx=0;function cG(){x.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=r[0])!==null&&e!==void 0?e:mS()),document.body.insertAdjacentElement("beforeend",(t=r[1])!==null&&t!==void 0?t:mS()),tx++,()=>{tx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),tx--}},[])}function mS(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var nP=aT(),rx=function(){},Ep=x.forwardRef(function(e,t){var r=x.useRef(null),n=x.useState({onScrollCapture:rx,onWheelCapture:rx,onTouchMoveCapture:rx}),s=n[0],a=n[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,p=e.noIsolation,g=e.inert,m=e.allowPinchZoom,v=e.as,_=v===void 0?"div":v,y=$y(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=h,b=sT([r,t]),S=rn(rn({},y),s);return x.createElement(x.Fragment,null,d&&x.createElement(w,{sideCar:nP,removeScrollBar:u,shards:f,noIsolation:p,inert:g,setCallbacks:a,allowPinchZoom:!!m,lockRef:r}),o?x.cloneElement(x.Children.only(l),rn(rn({},S),{ref:b})):x.createElement(_,rn({},S,{className:c,ref:b}),l))});Ep.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ep.classNames={fullWidth:td,zeroRight:ed};var e1=!1;if(typeof window<"u")try{var Ch=Object.defineProperty({},"passive",{get:function(){return e1=!0,!0}});window.addEventListener("test",Ch,Ch),window.removeEventListener("test",Ch,Ch)}catch{e1=!1}var Pl=e1?{passive:!1}:!1,uG=function(e){return e.tagName==="TEXTAREA"},sP=function(e,t){var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!uG(e)&&r[t]==="visible")},dG=function(e){return sP(e,"overflowY")},fG=function(e){return sP(e,"overflowX")},pS=function(e,t){var r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var n=aP(e,r);if(n){var s=iP(e,r),a=s[1],o=s[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==document.body);return!1},hG=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},mG=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},aP=function(e,t){return e==="v"?dG(t):fG(t)},iP=function(e,t){return e==="v"?hG(t):mG(t)},pG=function(e,t){return e==="h"&&t==="rtl"?-1:1},gG=function(e,t,r,n,s){var a=pG(e,window.getComputedStyle(t).direction),o=a*n,l=r.target,c=t.contains(l),u=!1,d=o>0,f=0,h=0;do{var p=iP(e,l),g=p[0],m=p[1],v=p[2],_=m-v-a*g;(g||_)&&aP(e,l)&&(f+=_,h+=g),l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(f===0||!s)||!d&&(h===0||!s))&&(u=!0),u},Th=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},gS=function(e){return[e.deltaX,e.deltaY]},xS=function(e){return e&&"current"in e?e.current:e},xG=function(e,t){return e[0]===t[0]&&e[1]===t[1]},vG=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},yG=0,Dl=[];function wG(e){var t=x.useRef([]),r=x.useRef([0,0]),n=x.useRef(),s=x.useState(yG++)[0],a=x.useState(function(){return By()})[0],o=x.useRef(e);x.useEffect(function(){o.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var m=nT([e.lockRef.current],(e.shards||[]).map(xS),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=x.useCallback(function(m,v){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var _=Th(m),y=r.current,w="deltaX"in m?m.deltaX:y[0]-_[0],b="deltaY"in m?m.deltaY:y[1]-_[1],S,N=m.target,E=Math.abs(w)>Math.abs(b)?"h":"v";if("touches"in m&&E==="h"&&N.type==="range")return!1;var C=pS(E,N);if(!C)return!0;if(C?S=E:(S=E==="v"?"h":"v",C=pS(E,N)),!C)return!1;if(!n.current&&"changedTouches"in m&&(w||b)&&(n.current=S),!S)return!0;var T=n.current||S;return gG(T,v,m,T==="h"?w:b,!0)},[]),c=x.useCallback(function(m){var v=m;if(!(!Dl.length||Dl[Dl.length-1]!==a)){var _="deltaY"in v?gS(v):Th(v),y=t.current.filter(function(S){return S.name===v.type&&S.target===v.target&&xG(S.delta,_)})[0];if(y&&y.should){v.cancelable&&v.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(xS).filter(Boolean).filter(function(S){return S.contains(v.target)}),b=w.length>0?l(v,w[0]):!o.current.noIsolation;b&&v.cancelable&&v.preventDefault()}}},[]),u=x.useCallback(function(m,v,_,y){var w={name:m,delta:v,target:_,should:y};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(b){return b!==w})},1)},[]),d=x.useCallback(function(m){r.current=Th(m),n.current=void 0},[]),f=x.useCallback(function(m){u(m.type,gS(m),m.target,l(m,e.lockRef.current))},[]),h=x.useCallback(function(m){u(m.type,Th(m),m.target,l(m,e.lockRef.current))},[]);x.useEffect(function(){return Dl.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Pl),document.addEventListener("touchmove",c,Pl),document.addEventListener("touchstart",d,Pl),function(){Dl=Dl.filter(function(m){return m!==a}),document.removeEventListener("wheel",c,Pl),document.removeEventListener("touchmove",c,Pl),document.removeEventListener("touchstart",d,Pl)}},[]);var p=e.removeScrollBar,g=e.inert;return x.createElement(x.Fragment,null,g?x.createElement(a,{styles:vG(s)}):null,p?x.createElement(cT,{gapMode:"margin"}):null)}const _G=oT(nP,wG);var oP=x.forwardRef(function(e,t){return x.createElement(Ep,rn({},e,{ref:t,sideCar:_G}))});oP.classNames=Ep.classNames;const lP="Dialog",[cP,xse]=OH(lP),[bG,fl]=cP(lP),SG=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:o=!0}=e,l=x.useRef(null),c=x.useRef(null),[u=!1,d]=$H({prop:n,defaultProp:s,onChange:a});return x.createElement(bG,{scope:t,triggerRef:l,contentRef:c,contentId:Jg(),titleId:Jg(),descriptionId:Jg(),open:u,onOpenChange:d,onOpenToggle:x.useCallback(()=>d(f=>!f),[d]),modal:o},r)},uP="DialogPortal",[EG,dP]=cP(uP,{forceMount:void 0}),NG=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,a=fl(uP,t);return x.createElement(EG,{scope:t,forceMount:r},x.Children.map(n,o=>x.createElement(Sp,{present:r||a.open},x.createElement(iG,{asChild:!0,container:s},o))))},t1="DialogOverlay",jG=x.forwardRef((e,t)=>{const r=dP(t1,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,a=fl(t1,e.__scopeDialog);return a.modal?x.createElement(Sp,{present:n||a.open},x.createElement(kG,vn({},s,{ref:t}))):null}),kG=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=fl(t1,r);return x.createElement(oP,{as:kw,allowPinchZoom:!0,shards:[s.contentRef]},x.createElement(ys.div,vn({"data-state":hP(s.open)},n,{ref:t,style:{pointerEvents:"auto",...n.style}})))}),Vd="DialogContent",CG=x.forwardRef((e,t)=>{const r=dP(Vd,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,a=fl(Vd,e.__scopeDialog);return x.createElement(Sp,{present:n||a.open},a.modal?x.createElement(TG,vn({},s,{ref:t})):x.createElement(AG,vn({},s,{ref:t})))}),TG=x.forwardRef((e,t)=>{const r=fl(Vd,e.__scopeDialog),n=x.useRef(null),s=Ff(t,r.contentRef,n);return x.useEffect(()=>{const a=n.current;if(a)return Nf(a)},[]),x.createElement(fP,vn({},e,{ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:cc(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=r.triggerRef.current)===null||o===void 0||o.focus()}),onPointerDownOutside:cc(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:cc(e.onFocusOutside,a=>a.preventDefault())}))}),AG=x.forwardRef((e,t)=>{const r=fl(Vd,e.__scopeDialog),n=x.useRef(!1),s=x.useRef(!1);return x.createElement(fP,vn({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o;if((o=e.onCloseAutoFocus)===null||o===void 0||o.call(e,a),!a.defaultPrevented){var l;n.current||(l=r.triggerRef.current)===null||l===void 0||l.focus(),a.preventDefault()}n.current=!1,s.current=!1},onInteractOutside:a=>{var o,l;(o=e.onInteractOutside)===null||o===void 0||o.call(e,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const c=a.target;((l=r.triggerRef.current)===null||l===void 0?void 0:l.contains(c))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}}))}),fP=x.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=e,l=fl(Vd,r),c=x.useRef(null),u=Ff(t,c);return cG(),x.createElement(x.Fragment,null,x.createElement(ZH,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a},x.createElement(XH,vn({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":hP(l.open)},o,{ref:u,onDismiss:()=>l.onOpenChange(!1)}))),!1)});function hP(e){return e?"open":"closed"}const PG=SG,DG=NG,RG=jG,MG=CG;var ju='[cmdk-group=""]',nx='[cmdk-group-items=""]',OG='[cmdk-group-heading=""]',Cw='[cmdk-item=""]',vS=`${Cw}:not([aria-disabled="true"])`,r1="cmdk-item-select",bo="data-value",FG=(e,t,r)=>RH(e,t,r),mP=x.createContext(void 0),If=()=>x.useContext(mP),pP=x.createContext(void 0),Tw=()=>x.useContext(pP),gP=x.createContext(void 0),xP=x.forwardRef((e,t)=>{let r=Il(()=>{var k,W;return{search:"",value:(W=(k=e.value)!=null?k:e.defaultValue)!=null?W:"",filtered:{count:0,items:new Map,groups:new Set}}}),n=Il(()=>new Set),s=Il(()=>new Map),a=Il(()=>new Map),o=Il(()=>new Set),l=vP(e),{label:c,children:u,value:d,onValueChange:f,filter:h,shouldFilter:p,loop:g,disablePointerSelection:m=!1,vimBindings:v=!0,..._}=e,y=x.useId(),w=x.useId(),b=x.useId(),S=x.useRef(null),N=KG();Qo(()=>{if(d!==void 0){let k=d.trim();r.current.value=k,E.emit()}},[d]),Qo(()=>{N(6,L)},[]);let E=x.useMemo(()=>({subscribe:k=>(o.current.add(k),()=>o.current.delete(k)),snapshot:()=>r.current,setState:(k,W,R)=>{var M,re,oe;if(!Object.is(r.current[k],W)){if(r.current[k]=W,k==="search")P(),D(),N(1,F);else if(k==="value"&&(R||N(5,L),((M=l.current)==null?void 0:M.value)!==void 0)){let ce=W??"";(oe=(re=l.current).onValueChange)==null||oe.call(re,ce);return}E.emit()}},emit:()=>{o.current.forEach(k=>k())}}),[]),C=x.useMemo(()=>({value:(k,W,R)=>{var M;W!==((M=a.current.get(k))==null?void 0:M.value)&&(a.current.set(k,{value:W,keywords:R}),r.current.filtered.items.set(k,T(W,R)),N(2,()=>{D(),E.emit()}))},item:(k,W)=>(n.current.add(k),W&&(s.current.has(W)?s.current.get(W).add(k):s.current.set(W,new Set([k]))),N(3,()=>{P(),D(),r.current.value||F(),E.emit()}),()=>{a.current.delete(k),n.current.delete(k),r.current.filtered.items.delete(k);let R=A();N(4,()=>{P(),(R==null?void 0:R.getAttribute("id"))===k&&F(),E.emit()})}),group:k=>(s.current.has(k)||s.current.set(k,new Set),()=>{a.current.delete(k),s.current.delete(k)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],disablePointerSelection:m,listId:y,inputId:b,labelId:w,listInnerRef:S}),[]);function T(k,W){var R,M;let re=(M=(R=l.current)==null?void 0:R.filter)!=null?M:FG;return k?re(k,r.current.search,W):0}function D(){if(!r.current.search||l.current.shouldFilter===!1)return;let k=r.current.filtered.items,W=[];r.current.filtered.groups.forEach(M=>{let re=s.current.get(M),oe=0;re.forEach(ce=>{let me=k.get(ce);oe=Math.max(me,oe)}),W.push([M,oe])});let R=S.current;I().sort((M,re)=>{var oe,ce;let me=M.getAttribute("id"),pe=re.getAttribute("id");return((oe=k.get(pe))!=null?oe:0)-((ce=k.get(me))!=null?ce:0)}).forEach(M=>{let re=M.closest(nx);re?re.appendChild(M.parentElement===re?M:M.closest(`${nx} > *`)):R.appendChild(M.parentElement===R?M:M.closest(`${nx} > *`))}),W.sort((M,re)=>re[1]-M[1]).forEach(M=>{let re=S.current.querySelector(`${ju}[${bo}="${encodeURIComponent(M[0])}"]`);re==null||re.parentElement.appendChild(re)})}function F(){let k=I().find(R=>R.getAttribute("aria-disabled")!=="true"),W=k==null?void 0:k.getAttribute(bo);E.setState("value",W||void 0)}function P(){var k,W,R,M;if(!r.current.search||l.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let re=0;for(let oe of n.current){let ce=(W=(k=a.current.get(oe))==null?void 0:k.value)!=null?W:"",me=(M=(R=a.current.get(oe))==null?void 0:R.keywords)!=null?M:[],pe=T(ce,me);r.current.filtered.items.set(oe,pe),pe>0&&re++}for(let[oe,ce]of s.current)for(let me of ce)if(r.current.filtered.items.get(me)>0){r.current.filtered.groups.add(oe);break}r.current.filtered.count=re}function L(){var k,W,R;let M=A();M&&(((k=M.parentElement)==null?void 0:k.firstChild)===M&&((R=(W=M.closest(ju))==null?void 0:W.querySelector(OG))==null||R.scrollIntoView({block:"nearest"})),M.scrollIntoView({block:"nearest"}))}function A(){var k;return(k=S.current)==null?void 0:k.querySelector(`${Cw}[aria-selected="true"]`)}function I(){var k;return Array.from((k=S.current)==null?void 0:k.querySelectorAll(vS))}function Q(k){let W=I()[k];W&&E.setState("value",W.getAttribute(bo))}function q(k){var W;let R=A(),M=I(),re=M.findIndex(ce=>ce===R),oe=M[re+k];(W=l.current)!=null&&W.loop&&(oe=re+k<0?M[M.length-1]:re+k===M.length?M[0]:M[re+k]),oe&&E.setState("value",oe.getAttribute(bo))}function O(k){let W=A(),R=W==null?void 0:W.closest(ju),M;for(;R&&!M;)R=k>0?HG(R,ju):GG(R,ju),M=R==null?void 0:R.querySelector(vS);M?E.setState("value",M.getAttribute(bo)):q(k)}let H=()=>Q(I().length-1),G=k=>{k.preventDefault(),k.metaKey?H():k.altKey?O(1):q(1)},K=k=>{k.preventDefault(),k.metaKey?Q(0):k.altKey?O(-1):q(-1)};return x.createElement(ys.div,{ref:t,tabIndex:-1,..._,"cmdk-root":"",onKeyDown:k=>{var W;if((W=_.onKeyDown)==null||W.call(_,k),!k.defaultPrevented)switch(k.key){case"n":case"j":{v&&k.ctrlKey&&G(k);break}case"ArrowDown":{G(k);break}case"p":case"k":{v&&k.ctrlKey&&K(k);break}case"ArrowUp":{K(k);break}case"Home":{k.preventDefault(),Q(0);break}case"End":{k.preventDefault(),H();break}case"Enter":if(!k.nativeEvent.isComposing&&k.keyCode!==229){k.preventDefault();let R=A();if(R){let M=new Event(r1);R.dispatchEvent(M)}}}}},x.createElement("label",{"cmdk-label":"",htmlFor:C.inputId,id:C.labelId,style:qG},c),Np(e,k=>x.createElement(pP.Provider,{value:E},x.createElement(mP.Provider,{value:C},k))))}),IG=x.forwardRef((e,t)=>{var r,n;let s=x.useId(),a=x.useRef(null),o=x.useContext(gP),l=If(),c=vP(e),u=(n=(r=c.current)==null?void 0:r.forceMount)!=null?n:o==null?void 0:o.forceMount;Qo(()=>{if(!u)return l.item(s,o==null?void 0:o.id)},[u]);let d=yP(s,a,[e.value,e.children,a],e.keywords),f=Tw(),h=Jo(N=>N.value&&N.value===d.current),p=Jo(N=>u||l.filter()===!1?!0:N.search?N.filtered.items.get(s)>0:!0);x.useEffect(()=>{let N=a.current;if(!(!N||e.disabled))return N.addEventListener(r1,g),()=>N.removeEventListener(r1,g)},[p,e.onSelect,e.disabled]);function g(){var N,E;m(),(E=(N=c.current).onSelect)==null||E.call(N,d.current)}function m(){f.setState("value",d.current,!0)}if(!p)return null;let{disabled:v,value:_,onSelect:y,forceMount:w,keywords:b,...S}=e;return x.createElement(ys.div,{ref:Wd([a,t]),...S,id:s,"cmdk-item":"",role:"option","aria-disabled":!!v,"aria-selected":!!h,"data-disabled":!!v,"data-selected":!!h,onPointerMove:v||l.disablePointerSelection?void 0:m,onClick:v?void 0:g},e.children)}),LG=x.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:s,...a}=e,o=x.useId(),l=x.useRef(null),c=x.useRef(null),u=x.useId(),d=If(),f=Jo(p=>s||d.filter()===!1?!0:p.search?p.filtered.groups.has(o):!0);Qo(()=>d.group(o),[]),yP(o,l,[e.value,e.heading,c]);let h=x.useMemo(()=>({id:o,forceMount:s}),[s]);return x.createElement(ys.div,{ref:Wd([l,t]),...a,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},r&&x.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},r),Np(e,p=>x.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?u:void 0},x.createElement(gP.Provider,{value:h},p))))}),$G=x.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,s=x.useRef(null),a=Jo(o=>!o.search);return!r&&!a?null:x.createElement(ys.div,{ref:Wd([s,t]),...n,"cmdk-separator":"",role:"separator"})}),BG=x.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,s=e.value!=null,a=Tw(),o=Jo(d=>d.search),l=Jo(d=>d.value),c=If(),u=x.useMemo(()=>{var d;let f=(d=c.listInnerRef.current)==null?void 0:d.querySelector(`${Cw}[${bo}="${encodeURIComponent(l)}"]`);return f==null?void 0:f.getAttribute("id")},[]);return x.useEffect(()=>{e.value!=null&&a.setState("search",e.value)},[e.value]),x.createElement(ys.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":u,id:c.inputId,type:"text",value:s?e.value:o,onChange:d=>{s||a.setState("search",d.target.value),r==null||r(d.target.value)}})}),UG=x.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...s}=e,a=x.useRef(null),o=x.useRef(null),l=If();return x.useEffect(()=>{if(o.current&&a.current){let c=o.current,u=a.current,d,f=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let h=c.offsetHeight;u.style.setProperty("--cmdk-list-height",h.toFixed(1)+"px")})});return f.observe(c),()=>{cancelAnimationFrame(d),f.unobserve(c)}}},[]),x.createElement(ys.div,{ref:Wd([a,t]),...s,"cmdk-list":"",role:"listbox","aria-label":n,id:l.listId},Np(e,c=>x.createElement("div",{ref:Wd([o,l.listInnerRef]),"cmdk-list-sizer":""},c)))}),zG=x.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:s,contentClassName:a,container:o,...l}=e;return x.createElement(PG,{open:r,onOpenChange:n},x.createElement(DG,{container:o},x.createElement(RG,{"cmdk-overlay":"",className:s}),x.createElement(MG,{"aria-label":e.label,"cmdk-dialog":"",className:a},x.createElement(xP,{ref:t,...l}))))}),VG=x.forwardRef((e,t)=>Jo(r=>r.filtered.count===0)?x.createElement(ys.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),WG=x.forwardRef((e,t)=>{let{progress:r,children:n,label:s="Loading...",...a}=e;return x.createElement(ys.div,{ref:t,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},Np(e,o=>x.createElement("div",{"aria-hidden":!0},o)))}),Ln=Object.assign(xP,{List:UG,Item:IG,Input:BG,Group:LG,Separator:$G,Dialog:zG,Empty:VG,Loading:WG});function HG(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function GG(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function vP(e){let t=x.useRef(e);return Qo(()=>{t.current=e}),t}var Qo=typeof window>"u"?x.useEffect:x.useLayoutEffect;function Il(e){let t=x.useRef();return t.current===void 0&&(t.current=e()),t}function Wd(e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}function Jo(e){let t=Tw(),r=()=>e(t.snapshot());return x.useSyncExternalStore(t.subscribe,r,r)}function yP(e,t,r,n=[]){let s=x.useRef(),a=If();return Qo(()=>{var o;let l=(()=>{var u;for(let d of r){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():s.current}})(),c=n.map(u=>u.trim());a.value(e,l,c),(o=t.current)==null||o.setAttribute(bo,l),s.current=l}),s}var KG=()=>{let[e,t]=x.useState(),r=Il(()=>new Map);return Qo(()=>{r.current.forEach(n=>n()),r.current=new Map},[e]),(n,s)=>{r.current.set(n,s),t({})}};function YG(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Np({asChild:e,children:t},r){return e&&x.isValidElement(t)?x.cloneElement(YG(t),{ref:t.ref},r(t.props.children)):r(t)}var qG={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const wP=x.forwardRef(({className:e,...t},r)=>i.jsx(Ln,{ref:r,className:Te("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));wP.displayName=Ln.displayName;const _P=x.forwardRef(({className:e,...t},r)=>i.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[i.jsx(B0,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),i.jsx(Ln.Input,{ref:r,className:Te("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));_P.displayName=Ln.Input.displayName;const bP=x.forwardRef(({className:e,...t},r)=>i.jsx(Ln.List,{ref:r,className:Te("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));bP.displayName=Ln.List.displayName;const SP=x.forwardRef((e,t)=>i.jsx(Ln.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));SP.displayName=Ln.Empty.displayName;const EP=x.forwardRef(({className:e,...t},r)=>i.jsx(Ln.Group,{ref:r,className:Te("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));EP.displayName=Ln.Group.displayName;const XG=x.forwardRef(({className:e,...t},r)=>i.jsx(Ln.Separator,{ref:r,className:Te("-mx-1 h-px bg-border",e),...t}));XG.displayName=Ln.Separator.displayName;const NP=x.forwardRef(({className:e,...t},r)=>i.jsx(Ln.Item,{ref:r,className:Te("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));NP.displayName=Ln.Item.displayName;const QG=({selectedAttendees:e,onAttendeesChange:t,placeholder:r="Select attendees..."})=>{const[n,s]=x.useState(!1),[a,o]=x.useState([]),[l,c]=x.useState(!1),[u,d]=x.useState(""),{toast:f}=dt();x.useEffect(()=>{h()},[]);const h=async()=>{c(!0);try{const{data:w,error:b}=await fe.from("profiles").select("id, email, first_name, last_name").order("first_name");if(b)throw b;o((w||[]).filter(S=>typeof S.email=="string"&&S.email).map(S=>({...S,email:String(S.email)})))}catch(w){console.error("Error fetching users:",w),f({title:"Error",description:"Failed to load users",variant:"destructive"})}finally{c(!1)}},p=w=>{const b=e.includes(w);t(b?e.filter(S=>S!==w):[...e,w])},g=()=>{const w=a.map(b=>b.email).filter(b=>b);t(w)},m=()=>{t([])},v=()=>{u&&u.includes("@")?(e.includes(u)||t([...e,u]),d("")):f({title:"Invalid Email",description:"Please enter a valid email address",variant:"destructive"})},_=w=>{t(e.filter(b=>b!==w))},y=w=>{const b=a.find(S=>S.email===w);return b&&b.first_name&&b.last_name?`${b.first_name} ${b.last_name}`:w};return i.jsxs("div",{className:"space-y-3",children:[i.jsx(ze,{children:"Meeting Attendees"}),e.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2 p-2 border rounded-md bg-gray-50",children:e.map(w=>i.jsxs(Be,{variant:"secondary",className:"flex items-center gap-1",children:[i.jsx("span",{className:"text-xs",children:y(w)}),i.jsx(de,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>_(w),children:i.jsx(Za,{className:"h-3 w-3"})})]},w))}),i.jsxs(Xm,{open:n,onOpenChange:s,children:[i.jsx(Qm,{asChild:!0,children:i.jsxs(de,{variant:"outline",role:"combobox","aria-expanded":n,className:"w-full justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(lr,{className:"h-4 w-4"}),i.jsx("span",{children:e.length>0?`${e.length} selected`:r})]}),i.jsx(ff,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),i.jsx(zd,{className:"w-[350px] p-0 bg-white border rounded-xl shadow-xl mt-2",children:i.jsxs(wP,{children:[i.jsx(_P,{placeholder:"Search users...",className:"px-4 py-2 border-b rounded-t-xl"}),i.jsxs(bP,{className:"max-h-[320px] overflow-y-auto",children:[i.jsx(SP,{children:"No users found."}),i.jsxs(EP,{children:[i.jsxs("div",{className:"flex items-center space-x-2 p-3 border-b bg-gray-50 rounded-t-xl",children:[i.jsxs(de,{variant:"secondary",size:"sm",onClick:g,className:"flex items-center space-x-1",children:[i.jsx(mk,{className:"h-4 w-4"}),i.jsx("span",{children:"Select All"})]}),i.jsxs(de,{variant:"secondary",size:"sm",onClick:m,className:"flex items-center space-x-1",children:[i.jsx(O6,{className:"h-4 w-4"}),i.jsx("span",{children:"Deselect All"})]})]}),l?i.jsx("div",{className:"p-4 text-center text-sm text-gray-500",children:"Loading users..."}):a.map(w=>w.email&&i.jsxs(NP,{onSelect:()=>p(w.email),className:"flex items-center space-x-3 cursor-pointer px-4 py-2 hover:bg-gray-100 transition rounded-none group",children:[i.jsx("div",{className:"flex items-center justify-center h-8 w-8 bg-gray-200 rounded-full text-gray-500 font-bold text-xs",children:w.first_name?w.first_name[0]:w.email[0]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium",children:w.first_name&&w.last_name?`${w.first_name} ${w.last_name}`:w.email}),i.jsx("div",{className:"text-xs text-gray-600 group-hover:text-white transition-colors duration-150",children:w.email})]}),i.jsx("div",{className:"flex items-center",children:i.jsx(Ma,{checked:e.includes(w.email),onChange:()=>p(w.email),className:"bg-white border-gray-400 group-hover:border-gray-600"})})]},w.id))]})]})]})})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(lt,{placeholder:"Add email manually...",value:u,onChange:w=>d(w.target.value),onKeyPress:w=>{w.key==="Enter"&&(w.preventDefault(),v())}}),i.jsx(de,{variant:"outline",onClick:v,disabled:!u,children:"Add"})]}),i.jsx("p",{className:"text-xs text-gray-500",children:"Selected attendees will receive calendar invitations and meeting notifications."})]})};function sx(e){switch(e){case"30min":return 30;case"1hour":return 60;case"1.5hours":return 90;case"2hours":return 120;case"3hours":return 180;default:const t=parseFloat(e);return isNaN(t)?60:t}}const yS=({open:e,onOpenChange:t,preselectedDate:r,meetingToEdit:n})=>{const{register:s,handleSubmit:a,setValue:o,watch:l,reset:c,formState:{isSubmitting:u}}=Zz(),[d,f]=x.useState(),[h,p]=x.useState(!1),[g,m]=x.useState([]),[v,_]=x.useState([]),[y,w]=x.useState(!0),[b,S]=x.useState(!1),{createMeeting:N,updateMeeting:E}=cl(),{isConnected:C}=ul(),{user:T}=mt(),{toast:D}=dt(),F=l("type"),P=l("time");x.useEffect(()=>{e&&r&&f(r)},[e,r]),x.useEffect(()=>{const R=async M=>{if(!M.length)return[];const{data:re,error:oe}=await fe.from("profiles").select("id, email").in("id",M);return oe?M:M.map(ce=>{var me;return((me=re.find(pe=>pe.id===ce))==null?void 0:me.email)||ce})};if(e&&n){if(o("title",n.title||""),o("description",n.description||""),o("time",n.start_time?n.start_time.slice(11,16):""),n.duration)o("duration",n.duration);else if(n.start_time&&n.end_time){const M=new Date(n.start_time),re=new Date(n.end_time),oe=Math.round((re.getTime()-M.getTime())/6e4);o("duration",oe.toString())}o("type",n.meeting_type||""),o("location",n.location||""),f(n.start_time?new Date(n.start_time):void 0),_([]),w(n.rsvp_enabled!==!1),n.attendees&&n.attendees.length>0?R(n.attendees.map(M=>M.user_id)).then(M=>{const re=[...M,...n.manual_attendees||[]];m(re)}):m(n.manual_attendees||[])}else e&&!n&&(c(),f(r),m([]),_([]),w(!0))},[e,n,r,c,o]);const L=(R,M)=>{if(!R||!M)return!1;const re=new Date,oe=new Date(M);oe.setHours(0,0,0,0);const ce=new Date;if(ce.setHours(0,0,0,0),oe.getTime()!==ce.getTime())return!1;const[me,pe]=R.split(":").map(Number),je=new Date;je.setHours(me,pe,0,0);const we=new Date(re.getTime()+5*60*1e3);return je<=we},A=5,I=10*1024*1024,Q=["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain","image/jpeg","image/png"],q=R=>{if(console.log("Date selected:",R),f(R),p(!1),R&&P){const M=new Date;M.setHours(0,0,0,0);const re=new Date(R);re.setHours(0,0,0,0),re.getTime()===M.getTime()&&L(P,R)&&(o("time",""),D({title:"Time Reset",description:"Selected time was in the past, please choose a future time",variant:"destructive"}))}},O=R=>{const M=Array.from(R.target.files||[]);if(v.length+M.length>A){D({title:"Too Many Files",description:`Maximum ${A} files allowed`,variant:"destructive"});return}const re=[],oe=[];M.forEach(ce=>{if(ce.size>I){oe.push(`${ce.name}: File too large (max 10MB)`);return}if(!Q.includes(ce.type)){oe.push(`${ce.name}: File type not supported`);return}re.push({file:ce,name:ce.name,size:ce.size})}),oe.length>0&&D({title:"File Upload Errors",description:oe.join(", "),variant:"destructive"}),re.length>0&&_(ce=>[...ce,...re]),R.target.value=""},H=R=>{_(M=>M.filter((re,oe)=>oe!==R))},G=R=>{if(R===0)return"0 Bytes";const M=1024,re=["Bytes","KB","MB","GB"],oe=Math.floor(Math.log(R)/Math.log(M));return parseFloat((R/Math.pow(M,oe)).toFixed(2))+" "+re[oe]},K=async R=>{if(!(v.length===0||!T)){S(!0);try{for(const M of v){const re=M.file.name.split(".").pop(),oe=`${R}/${Date.now()}_${M.file.name}`,{data:ce,error:me}=await fe.storage.from("meeting-attachments").upload(oe,M.file);if(me)throw me;const{error:pe}=await fe.from("meeting_attachments").insert({meeting_id:R,name:M.file.name,file_path:ce.path,file_size:M.file.size,mime_type:M.file.type,uploaded_by:T.id});if(pe)throw pe}v.length>0&&D({title:"Files Uploaded",description:`${v.length} file(s) uploaded successfully`})}catch(M){console.error("Error uploading files:",M),D({title:"File Upload Failed",description:M.message||"Failed to upload some files",variant:"destructive"})}finally{S(!1)}}},k=async R=>{if(console.log("Form submission started"),console.log("Selected date:",d),console.log("Form data:",R),!d){D({title:"Date Required",description:"Please select a meeting date",variant:"destructive"});return}if(!R.time){D({title:"Time Required",description:"Please select a meeting time",variant:"destructive"});return}const M=new Date(d),[re,oe]=R.time.split(":").map(Number);M.setHours(re,oe,0,0);const ce={title:R.title,description:R.description,date:M,location:R.type==="online"?"Microsoft Teams Meeting":R.location,attendees:g.join(", "),attachments:v,rsvpEnabled:y,end_time:new Date(M.getTime()+sx(R.duration)*6e4).toISOString()};if(console.log("Meeting data being sent:",ce),n){const pe=[],je=[];for(const Ce of g){const{data:j}=await fe.from("profiles").select("id").eq("email",Ce).single();j!=null&&j.id?pe.push(Ce):je.push(Ce)}if(await E(n.id,{title:R.title,description:R.description,start_time:M.toISOString(),end_time:new Date(M.getTime()+sx(R.duration)*6e4).toISOString(),meeting_type:R.type,location:R.location,manual_attendees:je})){await fe.from("meeting_attendees").delete().eq("meeting_id",n.id);for(const Ce of pe){const{data:j}=await fe.from("profiles").select("id").eq("email",Ce).single(),se=j==null?void 0:j.id;se&&await fe.from("meeting_attendees").insert({meeting_id:n.id,user_id:se})}if(je.length>0)try{await fe.functions.invoke("send-outlook-email",{body:{subject:`Meeting Invitation: ${R.title}`,body:`
                  <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
                    <h2>Meeting Invitation</h2>
                    <p><strong>Meeting:</strong> ${R.title}</p>
                    <p><strong>Date:</strong> ${M.toLocaleDateString()}</p>
                    <p><strong>Time:</strong> ${R.time}</p>
                    <p><strong>Location:</strong> ${R.location}</p>
                    <p><strong>Description:</strong> ${R.description}</p>
                    <br>
                    <p>You have been invited to attend this meeting. Please respond to this email to confirm your attendance.</p>
                  </div>
                `,recipients:je}}),D({title:"Invitations Sent",description:`Invitations sent to ${je.length} external attendees`})}catch(Ce){console.error("Error sending invitations to manual emails:",Ce),D({title:"Invitation Error",description:"Failed to send invitations to external attendees",variant:"destructive"})}D({title:"Meeting Updated",description:"Meeting details updated successfully."}),c(),f(void 0),m([]),_([]),w(!0),t(!1,!0)}return}const me=await N({title:R.title,description:R.description,date:M,time:R.time,duration:R.duration,type:R.type,location:R.location,attendees:g.join(", "),attachments:v,rsvpEnabled:y,end_time:new Date(M.getTime()+sx(R.duration)*6e4).toISOString()});me&&(v.length>0&&await K(me.id),c(),f(void 0),m([]),_([]),w(!0),t(!1,!0))},W=()=>{c(),f(void 0),m([]),_([]),w(!0),t(!1,!1)};return i.jsx(bt,{open:e,onOpenChange:W,children:i.jsx(xt,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto bg-white rounded-xl shadow-xl p-0",children:i.jsxs("div",{className:"p-6",children:[i.jsxs(vt,{children:[i.jsx(yt,{children:n?"Edit Meeting":"Schedule New Meeting"}),i.jsxs(Mt,{children:[n?"Edit meeting details and attendees.":"Create a new meeting with file attachments.",r&&!n&&i.jsxs("span",{className:"block mt-2 text-primary text-sm font-medium",children:["Creating meeting for ",ht(r,"MMMM dd, yyyy")]}),!C&&F==="online"&&i.jsx("span",{className:"block mt-2 text-orange-600 text-sm",children:"Connect your Microsoft account in Settings to create Teams meetings automatically."})]})]}),i.jsxs("form",{onSubmit:a(k),className:"space-y-10 mt-4",children:[i.jsxs("div",{className:"mb-6 pb-6 border-b",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"Meeting Details"}),i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"title",children:"Title *"}),i.jsx(lt,{id:"title",...s("title",{required:!0}),placeholder:"e.g., Monthly Bureau Meeting"})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"description",children:"Description"}),i.jsx(Ks,{id:"description",...s("description"),placeholder:"Meeting agenda and details...",rows:3})]})]})]}),i.jsxs("div",{className:"mb-6 pb-6 border-b",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"Date & Time"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ze,{children:"Date *"}),i.jsxs(Xm,{open:h,onOpenChange:p,children:[i.jsx(Qm,{asChild:!0,children:i.jsxs(de,{variant:"outline",className:Te("w-full justify-start text-left font-normal",!d&&"text-muted-foreground"),type:"button",children:[i.jsx(Tr,{className:"mr-2 h-4 w-4"}),d?ht(d,"PPP"):"Pick a date"]})}),i.jsx(zd,{className:"w-auto p-0",align:"start",children:i.jsx(qm,{mode:"single",selected:d,onSelect:q,disabled:R=>R<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0,className:Te("p-3 pointer-events-auto")})})]})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"time",children:"Time *"}),i.jsxs("select",{id:"time",className:"w-full border rounded px-3 py-2 text-left bg-white focus:outline-none focus:ring-2 focus:ring-primary",value:P||"",onChange:R=>o("time",R.target.value),children:[i.jsx("option",{value:"",disabled:!0,children:"Select time"}),Array.from({length:24*4},(R,M)=>{const re=Math.floor(M/4),oe=M%4*15,ce=`${re.toString().padStart(2,"0")}:${oe.toString().padStart(2,"0")}`;return i.jsx("option",{value:ce,children:ce},ce)})]}),P&&L(P,d)&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:"Selected time is in the past. Please choose a time at least 5 minutes from now."})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"duration",children:"Duration *"}),i.jsxs(ma,{onValueChange:R=>o("duration",R),children:[i.jsx(Ys,{children:i.jsx(pa,{placeholder:"Select duration"})}),i.jsxs(qs,{children:[i.jsx(Rt,{value:"30min",children:"30 minutes"}),i.jsx(Rt,{value:"1hour",children:"1 hour"}),i.jsx(Rt,{value:"1.5hours",children:"1.5 hours"}),i.jsx(Rt,{value:"2hours",children:"2 hours"}),i.jsx(Rt,{value:"3hours",children:"3 hours"})]})]})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"type",children:"Meeting Type *"}),i.jsxs(ma,{onValueChange:R=>o("type",R),children:[i.jsx(Ys,{children:i.jsx(pa,{placeholder:"Select type"})}),i.jsxs(qs,{children:[i.jsx(Rt,{value:"online",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Us,{className:"h-4 w-4"}),i.jsx("span",{children:"Teams Meeting"})]})}),i.jsx(Rt,{value:"physical",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Fa,{className:"h-4 w-4"}),i.jsx("span",{children:"Physical Meeting"})]})}),i.jsx(Rt,{value:"hybrid",children:"Hybrid Meeting"})]})]})]}),F&&F!=="online"&&i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(ze,{htmlFor:"location",children:F==="hybrid"?"Physical Location *":"Meeting Location *"}),i.jsx(lt,{id:"location",...s("location",{required:F!=="online"}),placeholder:F==="hybrid"?"Conference room address":"Conference room or venue"})]}),(F==="online"||F==="hybrid")&&i.jsxs("div",{className:"md:col-span-2 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsx(Us,{className:"h-4 w-4 text-blue-600"}),i.jsx("span",{className:"font-medium text-blue-800",children:"Teams Meeting"})]}),i.jsx("p",{className:"text-sm text-blue-700",children:C?"A Microsoft Teams meeting will be created automatically with a shareable join link and calendar event.":"Connect your Microsoft account in Settings to automatically create Teams meetings with calendar integration."}),n&&(n.teams_join_url||n.teams_joinUrl)&&i.jsx("div",{className:"mt-2",children:i.jsx("a",{href:n.teams_join_url||n.teams_joinUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-700 underline font-medium",children:"Join Teams Meeting"})})]})]})]}),i.jsxs("div",{className:"mb-6 pb-6 border-b",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"Attendees"}),i.jsx(QG,{selectedAttendees:g,onAttendeesChange:m,placeholder:"Select meeting attendees..."}),i.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Selected attendees will receive calendar invitations and meeting notifications."})]}),i.jsxs("div",{className:"mb-6 pb-6 border-b",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"Attachments"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ze,{children:"File Attachments"}),i.jsxs("span",{className:"text-xs text-gray-500",children:["Max ",A," files, 10MB each"]})]}),i.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[i.jsx("input",{type:"file",multiple:!0,accept:".pdf,.docx,.pptx,.xlsx,.txt,.jpg,.jpeg,.png",onChange:O,className:"hidden",id:"file-upload",disabled:u||b}),i.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Ac,{className:"h-8 w-8 mx-auto text-gray-400 mb-2"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Click to attach files or drag and drop"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Supported: PDF, DOCX, PPTX, XLSX, TXT, JPG, PNG"})]})})]}),v.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm font-medium",children:"Attached Files:"}),v.map((R,M)=>i.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ac,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{className:"text-sm",children:R.name}),i.jsxs("span",{className:"text-xs text-gray-500",children:["(",G(R.size),")"]})]}),i.jsx(de,{variant:"ghost",size:"sm",onClick:()=>H(M),className:"h-6 w-6 p-0",type:"button",disabled:u||b,children:i.jsx(Za,{className:"h-4 w-4"})})]},M))]})]})]}),i.jsxs("div",{className:"mb-6 pb-6 border-b",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"RSVP"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"rsvp",checked:y,onChange:R=>w(R.target.checked),className:"rounded"}),i.jsx(ze,{htmlFor:"rsvp",children:"Enable RSVP (attendees can respond Yes/No/Maybe)"})]})]}),i.jsxs("div",{className:"sticky bottom-0 left-0 bg-white pt-4 pb-2 z-10 flex justify-end gap-2 border-t",children:[i.jsx(de,{type:"button",variant:"outline",onClick:W,disabled:u||b,children:"Cancel"}),i.jsx(de,{type:"submit",disabled:u||b,className:"w-full",children:n?"Save Changes":"Create Teams Meeting"})]})]})]})})})},JG=({open:e,onOpenChange:t,meeting:r})=>{const[n,s]=x.useState(""),[a,o]=x.useState([{id:1,name:"Radha Krishna Das",email:"rk.das@iskcon.org",status:"accepted"},{id:2,name:"Gopala Swami",email:"gopala@iskcon.org",status:"pending"},{id:3,name:"Sita Devi Dasi",email:"sita.dd@iskcon.org",status:"accepted"},{id:4,name:"Arjuna Das",email:"arjuna@iskcon.org",status:"declined"}]),l=()=>{if(n){const d={id:Date.now(),name:n.split("@")[0],email:n,status:"pending"};o([...a,d]),s("")}},c=d=>{o(a.filter(f=>f.id!==d))},u=d=>{switch(d){case"accepted":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"declined":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return r?i.jsx(bt,{open:e,onOpenChange:t,children:i.jsxs(xt,{className:"sm:max-w-[600px]",children:[i.jsxs(vt,{children:[i.jsx(yt,{children:"Manage Attendees"}),i.jsxs(Mt,{children:["Add or remove attendees for ",r.title]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(lt,{placeholder:"Enter email address",value:n,onChange:d=>s(d.target.value),onKeyPress:d=>d.key==="Enter"&&l()}),i.jsxs(de,{onClick:l,children:[i.jsx(fa,{className:"h-4 w-4 mr-2"}),"Add"]})]}),i.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:a.map(d=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs(Ld,{className:"h-8 w-8",children:[i.jsx($d,{src:""}),i.jsx(Bd,{children:d.name.split(" ").map(f=>f[0]).join("")})]}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:d.name}),i.jsx("div",{className:"text-sm text-gray-500",children:d.email})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Be,{className:u(d.status),children:d.status}),i.jsx(de,{variant:"ghost",size:"sm",onClick:()=>c(d.id),children:i.jsx(Za,{className:"h-4 w-4"})})]})]},d.id))})]}),i.jsxs(r4,{children:[i.jsx(de,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),i.jsxs(de,{className:"bg-primary hover:bg-primary/90",children:[i.jsx(Ja,{className:"h-4 w-4 mr-2"}),"Send Invitations"]})]})]})}):null},Lf=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(!1),{user:s}=mt(),{toast:a}=dt(),o=async f=>{if(!f)return[];try{console.log("Fetching attendance for meeting:",f);const{data:h,error:p}=await fe.from("attendance_records").select(`
          *,
          profiles!attendance_records_user_id_fkey(first_name, last_name, email)
        `).eq("meeting_id",f);return p?(console.error("Attendance fetch error:",p),[]):(console.log("Fetched attendance records:",h),h||[])}catch(h){return console.error("Error fetching attendance:",h),[]}},l=async f=>{var h,p;if(!s)return a({title:"Authentication Required",description:"Please sign in to mark attendance",variant:"destructive"}),!1;try{console.log("Marking attendance:",f);const{error:g}=await fe.from("attendance_records").upsert({meeting_id:f.meetingId,user_id:f.userId,attendance_status:f.status,attendance_type:f.type,join_time:(h=f.joinTime)==null?void 0:h.toISOString(),leave_time:(p=f.leaveTime)==null?void 0:p.toISOString(),notes:f.notes,verified_by:s.id,is_verified:!0},{onConflict:"meeting_id,user_id"});if(g)throw console.error("Attendance marking error:",g),g;return a({title:"Success",description:"Attendance marked successfully"}),await d(),!0}catch(g){return console.error("Error marking attendance:",g),a({title:"Error",description:g.message||"Failed to mark attendance",variant:"destructive"}),!1}},c=async(f,h)=>{if(h!=null&&h.attendees)try{const p=h.attendees.map(async m=>{const{data:v}=await fe.from("profiles").select("id").eq("email",m.emailAddress).single();if(!v)return null;const _=m.joinDateTime?new Date(m.joinDateTime):null,y=m.leaveDateTime?new Date(m.leaveDateTime):null;let w="present";return _?y&&_&&(y.getTime()-_.getTime())/6e4<15&&(w="left_early"):w="absent",{meeting_id:f,user_id:v.id,attendance_status:w,attendance_type:"online",join_time:_==null?void 0:_.toISOString(),leave_time:y==null?void 0:y.toISOString(),is_verified:!0}}),g=(await Promise.all(p)).filter(Boolean);if(g.length>0){const{error:m}=await fe.from("attendance_records").upsert(g);if(m)throw m;a({title:"Success",description:`Auto-tracked attendance for ${g.length} participants`})}}catch(p){console.error("Error auto-tracking attendance:",p),a({title:"Warning",description:"Failed to auto-track some attendance records",variant:"destructive"})}},u=async(f,h,p)=>{try{let g=fe.from("attendance_records").select(`
          *,
          profiles!attendance_records_user_id_fkey(first_name, last_name, email),
          meetings!attendance_records_meeting_id_fkey(title, start_time, meeting_type)
        `);f&&(g=g.eq("meeting_id",f)),h&&p&&(g=g.gte("created_at",h.toISOString()).lte("created_at",p.toISOString()));const{data:m,error:v}=await g;return v?(console.error("Report generation error:",v),[]):m||[]}catch(g){return console.error("Error generating report:",g),[]}},d=async()=>{n(!0);try{const{data:f,error:h}=await fe.from("attendance_records").select(`
          *,
          profiles!attendance_records_user_id_fkey(first_name, last_name, email)
        `);if(h){console.error("Attendance fetch error:",h),n(!1);return}const p=(f||[]).map(g=>({...g,attendance_status:g.attendance_status,attendance_type:g.attendance_type}));t(p)}catch(f){console.error("Error fetching attendance:",f)}n(!1)};return{attendanceRecords:e,loading:r,fetchAttendanceForMeeting:o,markAttendance:l,autoTrackOnlineAttendance:c,generateAttendanceReport:u,fetchAttendance:d}},ZG=({open:e,onOpenChange:t,meeting:r})=>{const[n,s]=x.useState("physical"),[a,o]=x.useState("present"),[l,c]=x.useState(""),[u,d]=x.useState(!1),{markAttendance:f}=Lf(),{user:h}=mt(),p=async()=>{if(!(!h||!r)){d(!0);try{await f({meetingId:r.id,userId:h.id,status:a,type:n,joinTime:new Date,notes:l})&&(t(!1),c(""))}catch(m){console.error("Check-in error:",m)}finally{d(!1)}}};if(!r)return null;const g=r.meeting_type==="online"||r.teams_join_url;return i.jsx(bt,{open:e,onOpenChange:t,children:i.jsxs(xt,{className:"sm:max-w-[500px]",children:[i.jsxs(vt,{children:[i.jsxs(yt,{className:"flex items-center space-x-2",children:[i.jsx(Wo,{className:"h-5 w-5"}),i.jsx("span",{children:"Check In to Meeting"})]}),i.jsx(Mt,{children:r.title})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(mr,{className:"h-4 w-4"}),i.jsx("span",{children:new Date(r.start_time).toLocaleString()})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[g?i.jsx(Us,{className:"h-4 w-4"}):i.jsx(Fa,{className:"h-4 w-4"}),i.jsx("span",{children:r.location||"Online Meeting"})]})]}),g&&r.location&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"How are you attending?"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs(de,{variant:n==="physical"?"default":"outline",size:"sm",onClick:()=>s("physical"),children:[i.jsx(Fa,{className:"h-4 w-4 mr-2"}),"In Person"]}),i.jsxs(de,{variant:n==="online"?"default":"outline",size:"sm",onClick:()=>s("online"),children:[i.jsx(Us,{className:"h-4 w-4 mr-2"}),"Online"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Attendance Status"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(de,{variant:a==="present"?"default":"outline",size:"sm",onClick:()=>o("present"),className:a==="present"?"bg-success hover:bg-success/90":"",children:"On Time"}),i.jsx(de,{variant:a==="late"?"default":"outline",size:"sm",onClick:()=>o("late"),className:a==="late"?"bg-warning hover:bg-warning/90":"",children:"Late Arrival"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Notes (Optional)"}),i.jsx(Ks,{value:l,onChange:m=>c(m.target.value),placeholder:"Any additional notes about your attendance...",rows:3})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[i.jsx(de,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),i.jsxs(de,{onClick:p,disabled:u,className:"bg-primary hover:bg-primary/90",children:[i.jsx(Wo,{className:"h-4 w-4 mr-2"}),u?"Checking In...":"Check In"]})]})]})]})})};function eK(e){if(!e)return[];let t=[];if(typeof e=="string")try{t=JSON.parse(e)}catch{return[]}else if(Array.isArray(e))t=e;else return[];return t.map(r=>{if(typeof r=="string"){try{const n=JSON.parse(r);if(n&&typeof n.email=="string")return{email:n.email,rsvp:n.rsvp==="yes"||n.rsvp==="no"||n.rsvp==="maybe"?n.rsvp:null}}catch{return null}return{email:r,rsvp:null}}return r&&typeof r.email=="string"?{email:r.email,rsvp:r.rsvp==="yes"||r.rsvp==="no"||r.rsvp==="maybe"?r.rsvp:null}:null}).filter(Boolean)}const tK=({open:e,onOpenChange:t,meeting:r})=>{const[n,s]=x.useState(r),[a,o]=x.useState([]),[l,c]=x.useState(!1),{toast:u}=dt(),{user:d}=mt(),[f,h]=x.useState(!1);cl();const p=async()=>{if(n){c(!0);try{console.log("Fetching RSVP responses for meeting:",n.id);const{data:w,error:b}=await fe.from("meeting_attendees").select("id, user_id, rsvp_response, rsvp_submitted_at").eq("meeting_id",n.id).order("rsvp_submitted_at",{ascending:!1,nullsFirst:!1});if(b)throw console.error("Error fetching attendees:",b),b;console.log("Attendees data:",w);const S=w.map(F=>F.user_id);console.log("User IDs to fetch profiles for:",S);const{data:N,error:E}=await fe.from("profiles").select("id, first_name, last_name, email").in("id",S);if(E)throw console.error("Error fetching profiles:",E),E;console.log("Profiles data:",N);const C=w.map(F=>{const P=N==null?void 0:N.find(L=>L.id===F.user_id);return{...F,rsvp_response:F.rsvp_response,profiles:P?{first_name:P.first_name||"Unknown",last_name:P.last_name||"User",email:P.email||"No email"}:null,is_manual:!1}}),T=eK(n.manual_attendees).map(F=>({email:F.email,rsvp:F.rsvp==="yes"||F.rsvp==="no"||F.rsvp==="maybe"?F.rsvp:null})),D=[...C,...T.map(F=>({id:`manual-${F.email}`,user_id:"",rsvp_response:F.rsvp,rsvp_submitted_at:null,profiles:{first_name:"External",last_name:"Attendee",email:F.email},is_manual:!0}))];console.log("Combined RSVP data:",D),o(D)}catch(w){console.error("Error fetching RSVP responses:",w),u({title:"Error",description:"Failed to load RSVP responses",variant:"destructive"})}finally{c(!1)}}};x.useEffect(()=>{e&&n&&(console.log("Dialog opened for meeting:",n.title),p())},[e,n]),x.useEffect(()=>{if(!e||!n)return;console.log("Setting up real-time subscription for meeting:",n.id);const w=fe.channel(`rsvp-updates-${n.id}`).on("postgres_changes",{event:"*",schema:"public",table:"meeting_attendees",filter:`meeting_id=eq.${n.id}`},b=>{console.log("Real-time RSVP update received:",b),p()}).subscribe(b=>{console.log("Real-time subscription status:",b)});return()=>{console.log("Cleaning up real-time subscription"),fe.removeChannel(w)}},[e,n]),x.useEffect(()=>{s(r)},[r]);const g=a.find(w=>w.user_id===(d==null?void 0:d.id)),m=async w=>{if(!(!n||!d)){h(!0);try{const{error:b}=await fe.from("meeting_attendees").update({rsvp_response:w,rsvp_submitted_at:new Date().toISOString()}).eq("meeting_id",n.id).eq("user_id",d.id);if(b)throw b;u({title:"RSVP Updated",description:`Your response: ${w.charAt(0).toUpperCase()+w.slice(1)}`}),p()}catch{u({title:"Error",description:"Failed to update RSVP",variant:"destructive"})}finally{h(!1)}}};if(!n)return null;const v={yes:a.filter(w=>!w.is_manual&&w.rsvp_response==="yes").length,no:a.filter(w=>!w.is_manual&&w.rsvp_response==="no").length,maybe:a.filter(w=>!w.is_manual&&w.rsvp_response==="maybe").length,pending:a.filter(w=>!w.is_manual&&!w.rsvp_response).length,external:a.filter(w=>w.is_manual).length},_=w=>{switch(w){case"yes":return i.jsx(qn,{className:"h-4 w-4 text-green-600"});case"no":return i.jsx(Ui,{className:"h-4 w-4 text-red-600"});case"maybe":return i.jsx(mr,{className:"h-4 w-4 text-yellow-600"});default:return i.jsx(mr,{className:"h-4 w-4 text-gray-400"})}},y=w=>{switch(w){case"yes":return i.jsx(Be,{className:"bg-green-100 text-green-800",children:"Yes"});case"no":return i.jsx(Be,{className:"bg-red-100 text-red-800",children:"No"});case"maybe":return i.jsx(Be,{className:"bg-yellow-100 text-yellow-800",children:"Maybe"});default:return i.jsx(Be,{variant:"outline",children:"No Response"})}};return i.jsx(bt,{open:e,onOpenChange:t,children:i.jsxs(xt,{className:"sm:max-w-[800px] max-h-[80vh] overflow-y-auto",children:[i.jsxs(vt,{children:[i.jsxs(yt,{className:"flex items-center space-x-2",children:[i.jsx(lr,{className:"h-5 w-5"}),i.jsx("span",{children:"RSVP Responses"})]}),i.jsxs(Mt,{children:['View attendee responses for "',n.title,'"']})]}),i.jsxs("div",{className:"space-y-6",children:[g&&i.jsxs(He,{className:"mb-2",children:[i.jsx(rt,{children:i.jsx(st,{children:"Your Response"})}),i.jsx(Ye,{children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(de,{variant:g.rsvp_response==="yes"?"default":"outline",onClick:()=>m("yes"),disabled:f,children:[i.jsx(qn,{className:"h-4 w-4 mr-1"})," Yes"]}),i.jsxs(de,{variant:g.rsvp_response==="no"?"destructive":"outline",onClick:()=>m("no"),disabled:f,children:[i.jsx(Ui,{className:"h-4 w-4 mr-1"})," No"]}),i.jsxs(de,{variant:g.rsvp_response==="maybe"?"secondary":"outline",onClick:()=>m("maybe"),disabled:f,children:[i.jsx(mr,{className:"h-4 w-4 mr-1"})," Maybe"]}),i.jsx("span",{className:"ml-4",children:y(g.rsvp_response)})]})})]}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-2",children:[i.jsx(He,{children:i.jsxs(Ye,{className:"p-4 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[i.jsx(qn,{className:"h-5 w-5 text-green-600"}),i.jsx("span",{className:"text-2xl font-bold text-green-600",children:v.yes})]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Yes"})]})}),i.jsx(He,{children:i.jsxs(Ye,{className:"p-4 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[i.jsx(Ui,{className:"h-5 w-5 text-red-600"}),i.jsx("span",{className:"text-2xl font-bold text-red-600",children:v.no})]}),i.jsx("p",{className:"text-sm text-gray-600",children:"No"})]})}),i.jsx(He,{children:i.jsxs(Ye,{className:"p-4 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[i.jsx(mr,{className:"h-5 w-5 text-yellow-600"}),i.jsx("span",{className:"text-2xl font-bold text-yellow-600",children:v.maybe})]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Maybe"})]})}),i.jsx(He,{children:i.jsxs(Ye,{className:"p-4 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[i.jsx(mr,{className:"h-5 w-5 text-gray-400"}),i.jsx("span",{className:"text-2xl font-bold text-gray-600",children:v.pending})]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Pending"})]})}),i.jsx(He,{children:i.jsxs(Ye,{className:"p-4 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[i.jsx(lr,{className:"h-5 w-5 text-blue-600"}),i.jsx("span",{className:"text-2xl font-bold text-blue-600",children:v.external})]}),i.jsx("p",{className:"text-sm text-gray-600",children:"External"})]})})]}),i.jsxs(He,{children:[i.jsx(rt,{children:i.jsx(st,{children:"Individual Responses"})}),i.jsx(Ye,{children:l?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):a.length>0?i.jsxs(kf,{children:[i.jsx(Cf,{children:i.jsxs(Ka,{children:[i.jsx(nr,{children:"Name"}),i.jsx(nr,{children:"Email"}),i.jsx(nr,{children:"Response"}),i.jsx(nr,{children:"Submitted"})]})}),i.jsx(Tf,{children:a.map(w=>{var b,S,N;return i.jsxs(Ka,{children:[i.jsx(sr,{className:"font-medium",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[w.is_manual?i.jsx(Be,{variant:"outline",className:"text-xs",children:"External"}):_(w.rsvp_response),i.jsxs("span",{children:[((b=w.profiles)==null?void 0:b.first_name)||"Unknown"," ",((S=w.profiles)==null?void 0:S.last_name)||"User"]})]})}),i.jsx(sr,{children:((N=w.profiles)==null?void 0:N.email)||"No email"}),i.jsx(sr,{children:y(w.rsvp_response)}),i.jsx(sr,{children:w.is_manual?i.jsx("span",{className:"text-gray-500",children:"External"}):w.rsvp_submitted_at?ht(new Date(w.rsvp_submitted_at),"MMM dd, h:mm a"):"-"})]},w.id)})})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(lr,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),i.jsx("p",{className:"text-gray-600",children:"No attendees found for this meeting"})]})})]})]})]})})};function rK(e,t){return x.useReducer((r,n)=>t[r][n]??r,e)}var Aw="ScrollArea",[jP,vse]=ns(Aw),[nK,ws]=jP(Aw),kP=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:a=600,...o}=e,[l,c]=x.useState(null),[u,d]=x.useState(null),[f,h]=x.useState(null),[p,g]=x.useState(null),[m,v]=x.useState(null),[_,y]=x.useState(0),[w,b]=x.useState(0),[S,N]=x.useState(!1),[E,C]=x.useState(!1),T=et(t,F=>c(F)),D=jf(s);return i.jsx(nK,{scope:r,type:n,dir:D,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:h,scrollbarX:p,onScrollbarXChange:g,scrollbarXEnabled:S,onScrollbarXEnabledChange:N,scrollbarY:m,onScrollbarYChange:v,scrollbarYEnabled:E,onScrollbarYEnabledChange:C,onCornerWidthChange:y,onCornerHeightChange:b,children:i.jsx(Ge.div,{dir:D,...o,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":_+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});kP.displayName=Aw;var CP="ScrollAreaViewport",TP=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,asChild:s,nonce:a,...o}=e,l=ws(CP,r),c=x.useRef(null),u=et(t,c,l.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:a}),i.jsx(Ge.div,{"data-radix-scroll-area-viewport":"",...o,asChild:s,ref:u,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:hK({asChild:s,children:n},d=>i.jsx("div",{"data-radix-scroll-area-content":"",ref:l.onContentChange,style:{minWidth:l.scrollbarXEnabled?"fit-content":void 0},children:d}))})]})});TP.displayName=CP;var va="ScrollAreaScrollbar",Pw=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=ws(va,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=s,l=e.orientation==="horizontal";return x.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),s.type==="hover"?i.jsx(sK,{...n,ref:t,forceMount:r}):s.type==="scroll"?i.jsx(aK,{...n,ref:t,forceMount:r}):s.type==="auto"?i.jsx(AP,{...n,ref:t,forceMount:r}):s.type==="always"?i.jsx(Dw,{...n,ref:t}):null});Pw.displayName=va;var sK=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=ws(va,e.__scopeScrollArea),[a,o]=x.useState(!1);return x.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(Mr,{present:r||a,children:i.jsx(AP,{"data-state":a?"visible":"hidden",...n,ref:t})})}),aK=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=ws(va,e.__scopeScrollArea),a=e.orientation==="horizontal",o=kp(()=>c("SCROLL_END"),100),[l,c]=rK("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),x.useEffect(()=>{const u=s.viewport,d=a?"scrollLeft":"scrollTop";if(u){let f=u[d];const h=()=>{const p=u[d];f!==p&&(c("SCROLL"),o()),f=p};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[s.viewport,a,c,o]),i.jsx(Mr,{present:r||l!=="hidden",children:i.jsx(Dw,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:De(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:De(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),AP=x.forwardRef((e,t)=>{const r=ws(va,e.__scopeScrollArea),{forceMount:n,...s}=e,[a,o]=x.useState(!1),l=e.orientation==="horizontal",c=kp(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:d)}},10);return Bc(r.viewport,c),Bc(r.content,c),i.jsx(Mr,{present:n||a,children:i.jsx(Dw,{"data-state":a?"visible":"hidden",...s,ref:t})})}),Dw=x.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,s=ws(va,e.__scopeScrollArea),a=x.useRef(null),o=x.useRef(0),[l,c]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=OP(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>a.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function f(h,p){return dK(h,o.current,l,p)}return r==="horizontal"?i.jsx(iK,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const h=s.viewport.scrollLeft,p=wS(h,l,s.dir);a.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=f(h,s.dir))}}):r==="vertical"?i.jsx(oK,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const h=s.viewport.scrollTop,p=wS(h,l);a.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=f(h))}}):null}),iK=x.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,a=ws(va,e.__scopeScrollArea),[o,l]=x.useState(),c=x.useRef(null),u=et(t,c,a.onScrollbarXChange);return x.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(DP,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":jp(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(a.viewport){const h=a.viewport.scrollLeft+d.deltaX;e.onWheelScroll(h),IP(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Zm(o.paddingLeft),paddingEnd:Zm(o.paddingRight)}})}})}),oK=x.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,a=ws(va,e.__scopeScrollArea),[o,l]=x.useState(),c=x.useRef(null),u=et(t,c,a.onScrollbarYChange);return x.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(DP,{"data-orientation":"vertical",...s,ref:u,sizes:r,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":jp(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(a.viewport){const h=a.viewport.scrollTop+d.deltaY;e.onWheelScroll(h),IP(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Zm(o.paddingTop),paddingEnd:Zm(o.paddingBottom)}})}})}),[lK,PP]=jP(va),DP=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...h}=e,p=ws(va,r),[g,m]=x.useState(null),v=et(t,T=>m(T)),_=x.useRef(null),y=x.useRef(""),w=p.viewport,b=n.content-n.viewport,S=Ht(d),N=Ht(c),E=kp(f,10);function C(T){if(_.current){const D=T.clientX-_.current.left,F=T.clientY-_.current.top;u({x:D,y:F})}}return x.useEffect(()=>{const T=D=>{const F=D.target;(g==null?void 0:g.contains(F))&&S(D,b)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[w,g,b,S]),x.useEffect(N,[n,N]),Bc(g,E),Bc(p.content,E),i.jsx(lK,{scope:r,scrollbar:g,hasThumb:s,onThumbChange:Ht(a),onThumbPointerUp:Ht(o),onThumbPositionChange:N,onThumbPointerDown:Ht(l),children:i.jsx(Ge.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:De(e.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),_.current=g.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),C(T))}),onPointerMove:De(e.onPointerMove,C),onPointerUp:De(e.onPointerUp,T=>{const D=T.target;D.hasPointerCapture(T.pointerId)&&D.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=y.current,p.viewport&&(p.viewport.style.scrollBehavior=""),_.current=null})})})}),Jm="ScrollAreaThumb",RP=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=PP(Jm,e.__scopeScrollArea);return i.jsx(Mr,{present:r||s.hasThumb,children:i.jsx(cK,{ref:t,...n})})}),cK=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...s}=e,a=ws(Jm,r),o=PP(Jm,r),{onThumbPositionChange:l}=o,c=et(t,f=>o.onThumbChange(f)),u=x.useRef(),d=kp(()=>{u.current&&(u.current(),u.current=void 0)},100);return x.useEffect(()=>{const f=a.viewport;if(f){const h=()=>{if(d(),!u.current){const p=fK(f,l);u.current=p,l()}};return l(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[a.viewport,d,l]),i.jsx(Ge.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:De(e.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),g=f.clientX-p.left,m=f.clientY-p.top;o.onThumbPointerDown({x:g,y:m})}),onPointerUp:De(e.onPointerUp,o.onThumbPointerUp)})});RP.displayName=Jm;var Rw="ScrollAreaCorner",MP=x.forwardRef((e,t)=>{const r=ws(Rw,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?i.jsx(uK,{...e,ref:t}):null});MP.displayName=Rw;var uK=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,s=ws(Rw,r),[a,o]=x.useState(0),[l,c]=x.useState(0),u=!!(a&&l);return Bc(s.scrollbarX,()=>{var f;const d=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),Bc(s.scrollbarY,()=>{var f;const d=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(d),o(d)}),u?i.jsx(Ge.div,{...n,ref:t,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Zm(e){return e?parseInt(e,10):0}function OP(e,t){const r=e/t;return isNaN(r)?0:r}function jp(e){const t=OP(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function dK(e,t,r,n="ltr"){const s=jp(r),a=s/2,o=t||a,l=s-o,c=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,f=n==="ltr"?[0,d]:[d*-1,0];return FP([c,u],f)(e)}function wS(e,t,r="ltr"){const n=jp(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,o=t.content-t.viewport,l=a-n,c=r==="ltr"?[0,o]:[o*-1,0],u=Wv(e,c);return FP([0,o],[0,l])(u)}function FP(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function IP(e,t){return e>0&&e<t}var fK=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function s(){const a={left:e.scrollLeft,top:e.scrollTop},o=r.left!==a.left,l=r.top!==a.top;(o||l)&&t(),r=a,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function kp(e,t){const r=Ht(e),n=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),x.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Bc(e,t){const r=Ht(t);Er(()=>{let n=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(n),s.unobserve(e)}}},[e,r])}function hK(e,t){const{asChild:r,children:n}=e;if(!r)return typeof t=="function"?t(n):t;const s=x.Children.only(n);return x.cloneElement(s,{children:typeof t=="function"?t(s.props.children):t})}var LP=kP,mK=TP,pK=MP;const Mw=x.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(LP,{ref:n,className:Te("relative overflow-hidden",e),...r,children:[i.jsx(mK,{className:"h-full w-full rounded-[inherit]",children:t}),i.jsx($P,{}),i.jsx(pK,{})]}));Mw.displayName=LP.displayName;const $P=x.forwardRef(({className:e,orientation:t="vertical",...r},n)=>i.jsx(Pw,{ref:n,orientation:t,className:Te("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:i.jsx(RP,{className:"relative flex-1 rounded-full bg-border"})}));$P.displayName=Pw.displayName;var gK="Separator",_S="horizontal",xK=["horizontal","vertical"],BP=x.forwardRef((e,t)=>{const{decorative:r,orientation:n=_S,...s}=e,a=vK(n)?n:_S,l=r?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return i.jsx(Ge.div,{"data-orientation":a,...l,...s,ref:t})});BP.displayName=gK;function vK(e){return xK.includes(e)}var UP=BP;const zP=x.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},s)=>i.jsx(UP,{ref:s,decorative:r,orientation:t,className:Te("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));zP.displayName=UP.displayName;const yK=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(!1),{user:s}=mt(),{accessToken:a,isConnected:o,checkAndRefreshToken:l}=ul();dt();const c=async()=>{try{const{data:p,error:g}=await fe.from("folders").select("id, name, parent_folder_id").in("name",["ISKCON Repository","Meeting Transcripts"]);if(g)throw g;const m=p==null?void 0:p.find(_=>_.name==="ISKCON Repository"&&_.parent_folder_id===null),v=p==null?void 0:p.find(_=>_.name==="Meeting Transcripts"&&_.parent_folder_id===(m==null?void 0:m.id));return(v==null?void 0:v.id)||null}catch(p){return console.error("Error finding Meeting Transcripts folder:",p),null}};return{transcripts:e,loading:r,fetchTranscriptForMeeting:async p=>{try{console.log(`Fetching saved transcript for meeting: ${p}`);const{data:g,error:m}=await fe.from("meeting_transcripts").select("*").eq("meeting_id",p).single();if(m&&m.code!=="PGRST116")throw console.error("Error fetching transcript:",m),m;return console.log("Saved transcript found:",!!g,"Has content:",!!(g!=null&&g.transcript_content)),g}catch(g){return g.code==="PGRST116"?(console.log("No saved transcript found for meeting:",p),null):(console.error("Error fetching transcript:",g),null)}},fetchTeamsTranscript:async(p,g)=>{var m,v,_,y,w,b,S,N,E,C,T,D,F,P,L,A,I,Q,q;if(!s)throw console.error("No authenticated user found"),new Error("No authenticated user found");if(!o||!a)throw console.error("Microsoft account not connected or no access token"),new Error("Microsoft account not connected. Please connect your Microsoft account in Settings.");try{console.log(`Enhanced Teams transcript extraction for meeting: ${g}`),console.log("Using access token:",a?"Present":"Missing"),await l();let O=null;for(let H=1;H<=5;H++)try{console.log(`Enhanced extraction attempt ${H} for Teams meeting`);const{data:G,error:K}=await fe.functions.invoke("fetch-teams-transcript",{body:{meetingId:g,accessToken:a}});if(K){if(console.error(`Enhanced attempt ${H} failed:`,K),O=K,(m=K.message)!=null&&m.includes("401")||(v=K.message)!=null&&v.includes("Unauthorized")||(_=K.message)!=null&&_.includes("expired")){console.log("Token issue detected, refreshing...");try{await l(),console.log("Token refreshed for enhanced extraction, retrying...");continue}catch(k){throw console.error("Token refresh failed during enhanced extraction:",k),new Error("Microsoft authentication expired. Please reconnect your Microsoft account in Settings.")}}if(H===5)throw K;await new Promise(k=>setTimeout(k,2e3*Math.pow(1.5,H-1)));continue}if(console.log("Enhanced Teams transcript response:",{success:G==null?void 0:G.success,hasTranscripts:!!((w=(y=G==null?void 0:G.transcript)==null?void 0:y.value)!=null&&w.length),hasRecordings:G==null?void 0:G.hasRecordings,hasContent:G==null?void 0:G.hasContent,contentLength:((b=G==null?void 0:G.transcriptContent)==null?void 0:b.length)||0,strategiesAttempted:((N=(S=G==null?void 0:G.extractionDetails)==null?void 0:S.strategiesAttempted)==null?void 0:N.length)||0,foundWith:G==null?void 0:G.foundWith,transcriptMethod:G==null?void 0:G.transcriptMethod}),(G==null?void 0:G.success)===!1)throw new Error(G.error||"Enhanced extraction failed");if(G!=null&&G.success&&(G!=null&&G.hasContent)&&(G!=null&&G.transcriptContent))return console.log("Enhanced extraction successful! Content length:",G.transcriptContent.length),G;if(G!=null&&G.success&&(G!=null&&G.hasRecordings)&&!(G!=null&&G.hasContent))throw new Error("Meeting recording found but transcript is still being processed. Transcripts can take up to 24 hours to become available after a meeting ends. Please try again later.");if(G!=null&&G.success&&((C=(E=G==null?void 0:G.transcript)==null?void 0:E.value)==null?void 0:C.length)>0&&!(G!=null&&G.hasContent))throw new Error("Transcript metadata found but content extraction failed. This may be due to transcript processing delays or access restrictions. Please try again in a few minutes.");if((G==null?void 0:G.success)===!1||!((D=(T=G==null?void 0:G.transcript)==null?void 0:T.value)!=null&&D.length)&&!(G!=null&&G.hasRecordings)){const k=G!=null&&G.foundWith?` (Meeting found via: ${G.foundWith})`:"";throw new Error(`No transcript or recording found for this meeting${k}. Ensure the meeting was recorded with transcription enabled in Teams.`)}else return console.log("Enhanced extraction returning partial data"),G}catch(G){if(console.error(`Enhanced extraction attempt ${H} error:`,G),O=G,H===5)throw G;await new Promise(K=>setTimeout(K,2e3*Math.pow(1.5,H-1)))}throw O}catch(O){console.error("Enhanced Teams transcript extraction error:",O);let H="Failed to extract Teams transcript using enhanced methods";throw(F=O.message)!=null&&F.includes("401")||(P=O.message)!=null&&P.includes("Unauthorized")?H="Microsoft authentication expired. Please reconnect your Microsoft account in Settings.":(L=O.message)!=null&&L.includes("404")||(A=O.message)!=null&&A.includes("Not Found")?H="Meeting not found in Teams. The meeting may not exist or you may not have access to it.":(I=O.message)!=null&&I.includes("403")?H="Access denied. Please ensure you have permission to access this meeting's transcript and recordings.":((Q=O.message)!=null&&Q.includes("processing")||(q=O.message)!=null&&q.includes("24 hours")||O.message)&&(H=O.message),new Error(H)}},saveTranscript:async(p,g)=>{var m;try{console.log(`Saving transcript for meeting: ${p}`),console.log("Transcript data length:",((m=g.content)==null?void 0:m.length)||0);const{data:v,error:_}=await fe.from("meeting_transcripts").upsert({meeting_id:p,transcript_content:g.content,summary:g.summary,action_items:g.actionItems,participants:g.participants,teams_transcript_id:g.teamsTranscriptId}).select().single();if(_)throw console.error("Error saving transcript:",_),_;return console.log("Transcript saved successfully:",v.id),v}catch(v){throw console.error("Error saving transcript:",v),new Error("Failed to save transcript to database")}},saveTranscriptToDocuments:async(p,g,m)=>{var v,_;if(!s)return!1;try{const y=await c(),w=m?new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"-"):new Date().toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"-"),b=`${g}_${w}_transcript.txt`,S=`
Meeting: ${g}
Date: ${m?new Date(m).toLocaleDateString():new Date().toLocaleDateString()}
Time: ${m?new Date(m).toLocaleTimeString():new Date().toLocaleTimeString()}

TRANSCRIPT:
${p.transcript_content||"No transcript content available"}

PARTICIPANTS:
${((v=p.participants)==null?void 0:v.map(E=>{var C,T,D;return`- ${((C=E.identity)==null?void 0:C.displayName)||((D=(T=E.identity)==null?void 0:T.user)==null?void 0:D.displayName)||E.emailAddress||"Unknown"}`}).join(`
`))||"No participants listed"}

SUMMARY:
${p.summary||"No summary available"}

ACTION ITEMS:
${((_=p.action_items)==null?void 0:_.map((E,C)=>`${C+1}. ${E.text||E}`).join(`
`))||"No action items"}
      `.trim(),{error:N}=await fe.from("documents").insert({name:b,file_path:`transcripts/${p.meeting_id}/${b}`,folder_id:y,uploaded_by:s.id,mime_type:"text/plain",file_size:S.length});if(N)throw N;return!0}catch(y){throw console.error("Error saving transcript to documents:",y),new Error("Failed to save transcript to documents")}}}},wK=({open:e,onOpenChange:t,meeting:r})=>{var F;const[n,s]=x.useState(null),[a,o]=x.useState(!1),[l,c]=x.useState(!1),[u,d]=x.useState(!1),[f,h]=x.useState(null),[p,g]=x.useState(null),{fetchTranscriptForMeeting:m,fetchTeamsTranscript:v,saveTranscript:_,saveTranscriptToDocuments:y}=yK(),{autoTrackOnlineAttendance:w}=Lf(),{accessToken:b,isConnected:S,isExpired:N,forceRefresh:E}=ul(),{toast:C}=dt(),T=async(P=!1)=>{var L,A,I,Q,q,O,H,G,K,k,W;if(r){o(!0),h(null),g(null);try{if(console.log(`Enhanced transcript loading for meeting: ${r.title} (ID: ${r.id})`),console.log("Teams meeting ID:",r.teams_meeting_id),!P){const R=await m(r.id);if(R&&R.transcript_content){console.log("Found saved transcript with content:",R),s(R),o(!1);return}}if(r.teams_meeting_id){if(console.log(`Starting enhanced Teams transcript extraction for: ${r.teams_meeting_id}`),!S||N){h("Microsoft account is not connected or token has expired. Please reconnect in Settings."),o(!1);return}if(!b){h("No Microsoft access token available. Please reconnect your Microsoft account in Settings."),o(!1);return}d(!0);try{const R=await v(r.id,r.teams_meeting_id);if(console.log("Enhanced Teams data received:",R),g(R),R)if(R.success&&R.hasContent&&R.transcriptContent){if(console.log("Enhanced processing successful, transcript content found..."),(I=(A=(L=R.attendees)==null?void 0:L.value)==null?void 0:A[0])!=null&&I.attendanceRecords)try{await w(r.id,R),console.log("Attendance tracked successfully from enhanced data")}catch(oe){console.warn("Failed to track attendance from enhanced data:",oe)}const M={content:R.transcriptContent,summary:"AI-generated summary will be available soon",actionItems:[],participants:((O=(q=(Q=R.attendees)==null?void 0:Q.value)==null?void 0:q[0])==null?void 0:O.attendanceRecords)||[],teamsTranscriptId:(K=(G=(H=R.transcript)==null?void 0:H.value)==null?void 0:G[0])==null?void 0:K.id},re=await _(r.id,M);re&&(s(re),C({title:"Enhanced Transcript Extracted!",description:"Teams transcript has been successfully extracted using enhanced methods and saved."}))}else if(R.hasRecordings&&!R.hasContent)h("Meeting recording found but transcript is still being processed. This can take up to 24 hours after the meeting ends. The enhanced extraction will continue to monitor for availability.");else if(((W=(k=R.transcript)==null?void 0:k.value)==null?void 0:W.length)>0&&!R.hasContent)h("Transcript is available in Teams but content could not be extracted with enhanced methods. This may be due to processing delays or access restrictions.");else if(R.success===!1)h(R.error||"Enhanced extraction methods were unable to retrieve transcript from this meeting.");else{const M=R.foundWith?` (Found via: ${R.foundWith})`:"";h(`No transcript found for this meeting in Teams${M}. Enhanced extraction attempted multiple strategies but found no accessible transcript data.`)}else h("Enhanced extraction failed to connect to Teams or retrieve meeting data.")}catch(R){console.error("Enhanced Teams extraction error:",R),h(R.message||"Enhanced extraction methods failed to retrieve transcript from Teams.")}d(!1)}else h("This meeting was not created through Teams integration, so enhanced transcript extraction is not available.")}catch(R){console.error("Enhanced transcript loading error:",R),h("An unexpected error occurred during enhanced transcript extraction. Please try again."),d(!1)}finally{o(!1)}}};if(x.useEffect(()=>{e&&r&&T()},[e,r]),!r)return null;const D=!!r.teams_meeting_id;return i.jsx(bt,{open:e,onOpenChange:t,children:i.jsxs(xt,{className:"sm:max-w-[800px] max-h-[90vh]",children:[i.jsxs(vt,{children:[i.jsxs(yt,{className:"flex items-center space-x-2",children:[i.jsx(Gt,{className:"h-5 w-5"}),i.jsx("span",{children:"Enhanced Meeting Transcript & Notes"})]}),i.jsx(Mt,{children:r.title})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(mr,{className:"h-4 w-4"}),i.jsx("span",{children:new Date(r.start_time).toLocaleDateString()})]}),(n==null?void 0:n.participants)&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(lr,{className:"h-4 w-4"}),i.jsxs("span",{children:[n.participants.length," participants"]})]}),D?i.jsxs(Be,{variant:"outline",className:"flex items-center space-x-1",children:[i.jsx(qn,{className:"h-3 w-3"}),i.jsx("span",{children:"Enhanced Teams Integration"})]}):i.jsxs(Be,{variant:"secondary",className:"flex items-center space-x-1",children:[i.jsx(Bs,{className:"h-3 w-3"}),i.jsx("span",{children:"No Teams Integration"})]}),!S&&i.jsxs(Be,{variant:"destructive",className:"flex items-center space-x-1",children:[i.jsx(Bs,{className:"h-3 w-3"}),i.jsx("span",{children:"Microsoft Disconnected"})]})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs(de,{variant:"outline",size:"sm",onClick:()=>T(!1),disabled:a||u,children:[i.jsx(Rn,{className:`h-4 w-4 mr-2 ${a||u?"animate-spin":""}`}),"Refresh"]}),D&&i.jsxs(de,{variant:"outline",size:"sm",onClick:async()=>{N&&await E(),T(!0)},disabled:a||u,children:[i.jsx(Rn,{className:`h-4 w-4 mr-2 ${a||u?"animate-spin":""}`}),"Enhanced Extract"]}),n&&i.jsxs(i.Fragment,{children:[i.jsxs(de,{variant:"outline",size:"sm",onClick:()=>{var q,O;const P=new Date(r.end_time||r.start_time).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"-"),L=`
Meeting: ${r.title}
Date: ${new Date(r.start_time).toLocaleDateString()}
Duration: ${Math.round((new Date(r.end_time).getTime()-new Date(r.start_time).getTime())/(1e3*60))} minutes

SUMMARY:
${n.summary||"No summary available"}

PARTICIPANTS:
${((q=n.participants)==null?void 0:q.map(H=>{var G,K,k;return`- ${((G=H.identity)==null?void 0:G.displayName)||((k=(K=H.identity)==null?void 0:K.user)==null?void 0:k.displayName)||H.emailAddress||"Unknown"}`}).join(`
`))||"No participants listed"}

TRANSCRIPT:
${n.transcript_content||"No transcript content available"}

ACTION ITEMS:
${((O=n.action_items)==null?void 0:O.map((H,G)=>`${G+1}. ${H.text||H}`).join(`
`))||"No action items"}
                      `.trim(),A=new Blob([L],{type:"text/plain"}),I=URL.createObjectURL(A),Q=document.createElement("a");Q.href=I,Q.download=`${r.title}_${P}_transcript.txt`,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),URL.revokeObjectURL(I)},children:[i.jsx(hs,{className:"h-4 w-4 mr-2"}),"Download"]}),i.jsxs(de,{variant:"outline",size:"sm",onClick:async()=>{if(!(!n||!r)){c(!0);try{await y(n,r.title,r.end_time)&&C({title:"Success",description:"Transcript has been saved to ISKCON Repository > Meeting Transcripts"})}catch(P){console.error("Error saving to documents:",P),C({title:"Error",description:"Failed to save transcript to documents",variant:"destructive"})}finally{c(!1)}}},disabled:l,children:[i.jsx(py,{className:"h-4 w-4 mr-2"}),l?"Saving...":"Save to Repository"]})]})]})]}),(a||u)&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:u?"Running enhanced transcript extraction with multiple strategies...":"Loading transcript..."}),u&&i.jsxs("div",{className:"text-sm text-gray-500 mt-2 space-y-1",children:[i.jsx("p",{children:" Searching through online meetings and calendar events"}),i.jsx("p",{children:" Checking call records and meeting recordings"}),i.jsx("p",{children:" Attempting multiple transcript extraction methods"}),i.jsx("p",{children:" Processing various content formats (VTT, plain text, JSON)"}),i.jsx("p",{children:" Progressive retry with intelligent backoff"})]})]}),f&&i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(Bs,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-yellow-800",children:"Enhanced Transcript Extraction Result"}),i.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:f}),p&&i.jsxs("div",{className:"mt-3 text-xs text-yellow-600 bg-yellow-100 p-2 rounded",children:[i.jsx("p",{children:i.jsx("strong",{children:"Enhanced Extraction Details:"})}),p.foundWith&&i.jsxs("p",{children:["Meeting discovered via: ",p.foundWith]}),p.transcriptMethod&&i.jsxs("p",{children:["Transcript method used: ",p.transcriptMethod]}),p.hasRecordings&&i.jsx("p",{children:"Recordings found: Yes"}),((F=p.extractionDetails)==null?void 0:F.strategiesAttempted)&&i.jsxs("p",{children:["Strategies attempted: ",p.extractionDetails.strategiesAttempted.join(", ")]}),p.suggestion&&i.jsxs("div",{className:"mt-2",children:[i.jsx("p",{children:i.jsx("strong",{children:"Suggestion:"})}),i.jsx("p",{children:p.suggestion})]})]}),i.jsxs("div",{className:"mt-3 text-sm text-yellow-700",children:[i.jsx("p",{children:i.jsx("strong",{children:"Enhanced extraction capabilities:"})}),i.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[i.jsx("li",{children:"Multiple transcript API endpoints (v1.0 and beta)"}),i.jsx("li",{children:"Advanced meeting discovery across calendar and calls"}),i.jsx("li",{children:"Call records and recording metadata analysis"}),i.jsx("li",{children:"Multiple content format processing (VTT, text, JSON)"}),i.jsx("li",{children:"Progressive retry with intelligent backoff"})]})]})]})]})}),!a&&!u&&!n&&!f&&i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx(Gt,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),i.jsx("p",{children:"No transcript available for this meeting"}),D?i.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[i.jsx("p",{children:"This meeting has Teams integration but no transcript was found."}),i.jsx("p",{children:'Try the "Enhanced Extract" button to attempt comprehensive extraction.'})]}):i.jsx("p",{className:"text-sm mt-2",children:"This meeting was not created through Teams integration."})]}),n&&i.jsx(Mw,{className:"max-h-[500px]",children:i.jsxs("div",{className:"space-y-6",children:[n.summary&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Summary"}),i.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:i.jsx("p",{className:"text-gray-700",children:n.summary})})]}),n.participants&&n.participants.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Participants"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:n.participants.map((P,L)=>{var A,I,Q;return i.jsx(Be,{variant:"outline",children:((A=P.identity)==null?void 0:A.displayName)||((Q=(I=P.identity)==null?void 0:I.user)==null?void 0:Q.displayName)||P.emailAddress||`Participant ${L+1}`},L)})})]}),n.action_items&&n.action_items.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Action Items"}),i.jsx("div",{className:"space-y-2",children:n.action_items.map((P,L)=>i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsxs("span",{className:"text-sm text-gray-500 mt-1",children:[L+1,"."]}),i.jsx("span",{className:"text-sm",children:P.text||P})]},L))})]}),i.jsx(zP,{}),n.transcript_content&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Full Transcript"}),i.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:i.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-700 font-sans",children:n.transcript_content})})]})]})})]})]})})},_K=()=>{const{user:e}=mt(),{accessToken:t,isConnected:r}=ul(),{toast:n}=dt(),s=async()=>{try{const{data:l,error:c}=await fe.from("folders").select("id, name, parent_folder_id").in("name",["ISKCON Repository","Meeting Transcripts"]);if(c)throw c;const u=l==null?void 0:l.find(f=>f.name==="ISKCON Repository"&&f.parent_folder_id===null),d=l==null?void 0:l.find(f=>f.name==="Meeting Transcripts"&&f.parent_folder_id===(u==null?void 0:u.id));return(d==null?void 0:d.id)||null}catch(l){return console.error("Error finding Meeting Transcripts folder:",l),null}},a=async()=>{if(!e||!r||!t){console.log("Auto-transcript: User not authenticated or Microsoft not connected");return}try{console.log("Processing expired meetings for auto-transcript...");const l=new Date(Date.now()-4*60*60*1e3).toISOString(),c=new Date().toISOString(),{data:u,error:d}=await fe.from("meetings").select(`
          id,
          title,
          teams_meeting_id,
          end_time,
          meeting_transcripts(id)
        `).not("teams_meeting_id","is",null).gte("end_time",l).lte("end_time",c);if(d){console.error("Error fetching meetings for auto-transcript:",d);return}const f=(u==null?void 0:u.filter(h=>!h.meeting_transcripts||h.meeting_transcripts.length===0))||[];console.log(`Found ${f.length} meetings to process for auto-transcript`);for(const h of f)try{await o(h),await new Promise(p=>setTimeout(p,3e3))}catch(p){console.error(`Failed to process transcript for meeting ${h.id}:`,p)}}catch(l){console.error("Error in processExpiredMeetings:",l)}},o=async l=>{var c,u,d,f,h,p,g;try{console.log(`Auto-processing transcript for meeting: ${l.title} (ID: ${l.id})`);let m=null,v=null;for(let b=1;b<=3;b++)try{console.log(`Attempt ${b} to fetch Teams transcript for ${l.title}`);const{data:S,error:N}=await fe.functions.invoke("fetch-teams-transcript",{body:{meetingId:l.teams_meeting_id,accessToken:t}});if(N){if(console.error(`Attempt ${b} failed for meeting ${l.id}:`,N),v=N,b===3)throw N;await new Promise(E=>setTimeout(E,2e3*b));continue}m=S;break}catch(S){if(console.error(`Attempt ${b} error for meeting ${l.id}:`,S),v=S,b===3)throw S;await new Promise(N=>setTimeout(N,2e3*b))}if(!m){console.log(`No transcript data available for meeting: ${l.title}`);return}if(!m.hasContent||!m.transcriptContent){console.log(`No transcript content available yet for meeting: ${l.title}`);return}console.log(`Processing transcript content for meeting: ${l.title}`);const _={transcript_content:m.transcriptContent||"",summary:"AI-generated summary will be available soon",action_items:[],participants:((d=(u=(c=m.attendees)==null?void 0:c.value)==null?void 0:u[0])==null?void 0:d.attendanceRecords)||[],teams_transcript_id:(p=(h=(f=m.transcript)==null?void 0:f.value)==null?void 0:h[0])==null?void 0:p.id},{data:y,error:w}=await fe.from("meeting_transcripts").upsert({meeting_id:l.id,..._}).select().single();if(w){console.error(`Error saving transcript for meeting ${l.id}:`,w);return}console.log(`Successfully saved transcript for meeting: ${l.title}`);try{const b=await s(),S=new Date(l.end_time).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"-"),N=`${l.title}_${S}_transcript.txt`,E=`
Meeting: ${l.title}
Date: ${new Date(l.end_time).toLocaleDateString()}
Time: ${new Date(l.end_time).toLocaleTimeString()}

TRANSCRIPT:
${_.transcript_content}

PARTICIPANTS:
${((g=_.participants)==null?void 0:g.map(T=>{var D,F,P;return`- ${((D=T.identity)==null?void 0:D.displayName)||((P=(F=T.identity)==null?void 0:F.user)==null?void 0:P.displayName)||"Unknown"}`}).join(`
`))||"No participants listed"}

SUMMARY:
${_.summary}
        `.trim(),{error:C}=await fe.from("documents").insert({name:N,file_path:`transcripts/${l.id}/${N}`,folder_id:b,uploaded_by:e.id,mime_type:"text/plain",file_size:E.length});C?console.error("Error saving transcript to documents:",C):console.log(`Transcript saved to Meeting Transcripts folder for meeting: ${l.title}`)}catch(b){console.error("Error saving transcript to documents:",b)}n({title:"Transcript Auto-Saved",description:`Meeting transcript for "${l.title}" has been automatically saved to ISKCON Repository > Meeting Transcripts.`})}catch(m){console.error(`Error auto-processing transcript for meeting ${l.id}:`,m)}};return x.useEffect(()=>{if(!e||!r)return;console.log("Setting up auto-transcript monitoring...");const l=setTimeout(()=>{a()},6e4),c=setInterval(a,15*60*1e3);return()=>{clearTimeout(l),clearInterval(c)}},[e,r,t]),{processExpiredMeetings:a,processMeetingTranscript:o}},bK=()=>{const[e,t]=x.useState(!1),[r,n]=x.useState(null),{user:s}=mt(),{toast:a}=dt(),o=x.useCallback(async()=>{var c,u;if(!s){a({title:"Authentication Required",description:"Please sign in to sync meetings",variant:"destructive"});return}t(!0);try{console.log("Starting Outlook meetings sync...");const{data:d,error:f}=await fe.functions.invoke("sync-outlook-meetings",{body:{user_id:s.id}});if(f)throw new Error(f.message);if(d!=null&&d.error)throw new Error(d.error);const{syncedCount:h,skippedCount:p,totalFound:g}=d;n(new Date),h>0?a({title:"Meetings Synced!",description:`Successfully imported ${h} meeting${h!==1?"s":""} from Outlook. ${p} already existed.`}):g===0&&a({title:"No Meetings Found",description:"No upcoming meetings found in your Outlook calendar."}),console.log(`Sync completed: ${h} synced, ${p} skipped, ${g} total`)}catch(d){console.error("Sync failed:",d);let f="Failed to sync meetings from Outlook";(c=d.message)!=null&&c.includes("Microsoft account not connected")?f="Microsoft account not connected. Please connect your account in Settings.":(u=d.message)!=null&&u.includes("Failed to fetch meetings")&&(f="Unable to access your Outlook calendar. Please check your Microsoft account connection."),a({title:"Sync Failed",description:f,variant:"destructive"})}finally{t(!1)}},[s,a]),l=x.useCallback(async()=>{r&&Date.now()-r.getTime()<5*60*1e3||await o()},[o,r]);return x.useEffect(()=>{s&&(console.log("Auto-syncing meetings on mount..."),l())},[s,l]),x.useEffect(()=>{if(!s)return;const c=setInterval(()=>{console.log("Auto-syncing meetings (periodic)..."),l()},10*60*1e3);return()=>clearInterval(c)},[s,l]),{syncing:e,lastSyncTime:r,syncOutlookMeetings:o,autoSync:l}},SK=()=>{const[e,t]=x.useState(!1),[r,n]=x.useState(!1),[s,a]=x.useState(!1),[o,l]=x.useState(!1),[c,u]=x.useState(!1),[d,f]=x.useState(!1),[h,p]=x.useState(null),[g,m]=x.useState(null),[v,_]=x.useState(void 0),[y,w]=x.useState(""),[b,S]=x.useState("upcoming"),[N,E]=x.useState(null),{meetings:C,loading:T,deletingMeetings:D,createMeeting:F,deleteMeeting:P,fetchMeetings:L,getDeletionProgress:A,isDeletingMeeting:I}=cl(),{user:Q}=mt(),{toast:q}=dt();ll();const{syncing:O,lastSyncTime:H,syncOutlookMeetings:G}=bK();_K();const{userRole:K,canDeleteMeetings:k,canScheduleMeetings:W}=oo();x.useEffect(()=>{if(!O&&H){console.log("Refreshing meetings after sync...");const B=setTimeout(()=>{L()},1e3);return()=>clearTimeout(B)}},[O,H]);const R=new Date,M=C.reduce((B,Y)=>(B.some(he=>Y.outlook_event_id&&he.outlook_event_id===Y.outlook_event_id||Y.teams_meeting_id&&he.teams_meeting_id===Y.teams_meeting_id||he.id===Y.id)||B.push(Y),B),[]);M.filter(B=>Ut(B.start_time)>=R).sort((B,Y)=>Fo(Ut(B.start_time),Ut(Y.start_time))),M.filter(B=>Ut(B.start_time)<R).sort((B,Y)=>$g(Ut(B.start_time),Ut(Y.start_time)));const re=x.useMemo(()=>{let B=M;return b==="upcoming"?(B=B.filter(Y=>Ut(Y.start_time)>=R),y.trim()&&(B=B.filter(Y=>{var ue;return(ue=Y.title)==null?void 0:ue.toLowerCase().includes(y.toLowerCase())})),B.sort((Y,ue)=>Fo(Ut(Y.start_time),Ut(ue.start_time)))):b==="past"?(B=B.filter(Y=>Ut(Y.start_time)<R),y.trim()&&(B=B.filter(Y=>{var ue;return(ue=Y.title)==null?void 0:ue.toLowerCase().includes(y.toLowerCase())})),B.sort((Y,ue)=>$g(Ut(Y.start_time),Ut(ue.start_time)))):(y.trim()&&(B=B.filter(Y=>{var ue;return(ue=Y.title)==null?void 0:ue.toLowerCase().includes(y.toLowerCase())})),B.sort((Y,ue)=>$g(Ut(Y.start_time),Ut(ue.start_time))))},[M,b,y,R]),[oe,ce]=x.useState(null),me=B=>ce(oe===B?null:B),pe=B=>{m(B),n(!0)},je=B=>{m(B),f(!0)},we=B=>{m(B),l(!0)},Ce=B=>{m(B),u(!0)},j=async(B,Y)=>{if(!k){q({title:"Access Denied",description:"You don't have permission to delete meetings",variant:"destructive"});return}if(I(B)){q({title:"Already Deleting",description:"This meeting is already being deleted",variant:"destructive"});return}p(B),await P(B),setTimeout(()=>{p(null)},3e3)},se=B=>{t(!1),_(void 0),B&&setTimeout(()=>{L()},500)},ae=(B,Y)=>{const ue=Ut(B),he=Ut(Y),le=Math.round((he.getTime()-ue.getTime())/(1e3*60)),Se=Math.floor(le/60),Fe=le%60;let Ie="";return Se>0&&(Ie+=`${Se}h `),Fe>0&&(Ie+=`${Fe}m`),{date:ht(ue,"MMM dd, yyyy"),time:ht(ue,"h:mm a"),duration:Ie.trim()||"0m"}},z=B=>{const Y=new Date,ue=Ut(B.start_time),he=Ut(B.end_time);return Y>=ue&&Y<=he},X=B=>{const Y=new Date,ue=Ut(B.start_time),he=Ut(B.end_time),le=new Date(ue.getTime()-60*60*1e3);return Y>=le&&Y<=he};x.useEffect(()=>{oe&&I(oe)&&ce(null)},[oe,I]);const ie=Q==null?void 0:Q.id,U=(B,Y="")=>B??Y;return T?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):i.jsxs("div",{className:"max-w-5xl mx-auto px-0 space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx(de,{variant:b==="all"?"default":"ghost",size:"sm",onClick:()=>S("all"),children:"All"}),i.jsx(de,{variant:b==="past"?"default":"ghost",size:"sm",onClick:()=>S("past"),children:"Past"}),i.jsx(de,{variant:b==="upcoming"?"default":"ghost",size:"sm",onClick:()=>S("upcoming"),children:"Upcoming"})]}),i.jsx("div",{className:"relative w-full max-w-xs",children:i.jsx(vp,{type:"text",placeholder:"Search meetings...",value:y,onChange:B=>w(B.target.value),className:"w-full"})})]}),i.jsxs("div",{className:"space-y-4",children:[re.length===0&&i.jsx("div",{className:"text-center text-muted-foreground py-12",children:"No meetings found."}),re.map(B=>{const Y=ae(U(B.start_time,""),U(B.end_time,"")),ue=B.start_time?Ut(B.start_time)<R:!1,he=!ue&&z(B),le=!ue&&X(B),Se=typeof B.attendee_count=="number"?B.attendee_count:Array.isArray(B.attendees)?B.attendees.length:0,Fe=I(B.id),Ie=oe===B.id,at=k&&(K==="super_admin"||K==="admin"||B.created_by===ie);return i.jsxs(He,{className:`w-full hover:shadow-md transition-shadow relative ${Fe?"opacity-50 pointer-events-none":""}`,children:[Fe&&i.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-10",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),i.jsxs(rt,{className:"pb-4 flex flex-row items-center gap-4 cursor-pointer",onClick:()=>me(B.id),children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs(st,{className:"text-lg flex flex-wrap items-center gap-2",children:[i.jsx("span",{className:"break-words leading-tight",children:U(B.title,"Untitled")}),he&&i.jsx(Be,{className:"bg-red-500 text-white animate-pulse shrink-0",children:"LIVE"}),B.meeting_type&&i.jsx(Be,{className:"bg-gray-200 text-gray-800 shrink-0 capitalize",children:B.meeting_type}),B.teams_join_url&&i.jsx(Be,{className:"bg-blue-500 text-white shrink-0",children:"Teams"}),ue&&i.jsx(Be,{className:"bg-gray-100 text-gray-800",variant:"secondary",children:"Completed"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-gray-600 mt-1",children:[i.jsx(Tr,{className:"h-4 w-4 shrink-0"}),i.jsxs("span",{className:"text-sm font-medium",children:[Y.date," at ",Y.time]}),i.jsxs("span",{className:"text-xs text-gray-500",children:["(",Y.duration,")"]})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-gray-600 mt-1",children:[i.jsx(lr,{className:"h-4 w-4 shrink-0"}),i.jsxs("span",{className:"text-sm",children:[Se," attendees"]})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Created by: ",B.created_by_name||B.created_by]})]}),i.jsx(de,{variant:"ghost",size:"icon",onClick:Kt=>{Kt.stopPropagation(),me(B.id)},children:Ie?i.jsx(dk,{className:"h-5 w-5"}):i.jsx(fa,{className:"h-5 w-5"})})]}),Ie&&i.jsxs(Ye,{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[B.teams_join_url&&i.jsx(de,{variant:"default",size:"sm",asChild:!0,disabled:Fe,className:"bg-blue-600 hover:bg-blue-700 text-white min-h-[40px]",children:i.jsxs("a",{href:B.teams_join_url,target:"_blank",rel:"noopener noreferrer",children:[i.jsx(Us,{className:"h-4 w-4 mr-2"})," Join Teams Meeting"]})}),le&&i.jsxs(de,{variant:"outline",size:"sm",onClick:()=>we(B),disabled:Fe,className:"bg-green-50 hover:bg-green-100 text-green-700 min-h-[40px]",children:[i.jsx(Wo,{className:"h-4 w-4 mr-2"})," Check In"]}),i.jsxs(de,{variant:"outline",size:"sm",onClick:()=>pe(B),className:"min-h-[40px]",children:[i.jsx(Gt,{className:"h-4 w-4 mr-2"})," Agenda"]}),B.teams_meeting_id?i.jsx(de,{asChild:!0,variant:"outline",size:"sm",className:"min-h-[40px]",children:i.jsxs("a",{href:`https://teams.microsoft.com/l/meetingTranscript/${B.teams_meeting_id}`,target:"_blank",rel:"noopener noreferrer",children:[i.jsx(Gt,{className:"h-4 w-4 mr-2"})," Transcript"]})}):i.jsxs(de,{variant:"outline",size:"sm",onClick:()=>je(B),className:"min-h-[40px]",children:[i.jsx(Gt,{className:"h-4 w-4 mr-2"})," Transcript"]}),B.rsvp_enabled&&i.jsxs(de,{variant:"outline",size:"sm",onClick:()=>Ce(B),className:"min-h-[40px]",children:[i.jsx(mk,{className:"h-4 w-4 mr-2"})," RSVP"]}),at&&i.jsxs(Xy,{children:[i.jsx(ZT,{asChild:!0,children:i.jsx(de,{variant:"destructive",size:"sm",disabled:Fe,className:"min-h-[40px]",children:Fe?i.jsxs("span",{className:"flex items-center",children:[i.jsx("span",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):i.jsxs(i.Fragment,{children:[i.jsx(br,{className:"h-4 w-4 mr-2"})," Delete"]})})}),i.jsxs(lp,{children:[i.jsxs(cp,{children:[i.jsx(dp,{children:"Delete Meeting Everywhere?"}),i.jsxs(fp,{children:["This will delete the meeting from the portal, Outlook, Teams, and all related data (attendees, attachments, transcripts). Are you sure you want to proceed?",i.jsx("br",{}),i.jsx("span",{className:"text-xs text-red-600 font-semibold",children:"If your Microsoft connection is missing or expired, the meeting may not be deleted from Outlook/Teams. You may be prompted to reconnect."})]})]}),i.jsxs(up,{children:[i.jsx(mp,{children:"Cancel"}),i.jsx(hp,{onClick:()=>j(B.id,B.title),disabled:Fe,children:"Yes, Delete Everywhere"})]})]})]}),(K==="admin"||K==="super_admin")&&i.jsxs(de,{variant:"outline",size:"sm",onClick:()=>E(B),className:"min-h-[40px]",children:[i.jsx(D6,{className:"h-4 w-4 mr-1"})," Edit"]})]}),i.jsx("div",{className:"text-sm text-muted-foreground mb-2",style:{whiteSpace:"pre-line"},children:U(B.description,"No description provided")})]})]},B.id)})]}),i.jsx(de,{onClick:()=>t(!0),className:"fixed bottom-8 right-8 z-50 rounded-full shadow-lg bg-[#8E1616] hover:bg-[#7A1414] text-white w-16 h-16 flex items-center justify-center text-3xl",children:i.jsx(fa,{className:"h-8 w-8"})}),W&&i.jsx(yS,{open:e,onOpenChange:se,preselectedDate:v}),i.jsx(R4,{open:r,onOpenChange:n,meeting:g}),i.jsx(JG,{open:s,onOpenChange:a,meeting:g}),i.jsx(ZG,{open:o,onOpenChange:l,meeting:g}),i.jsx(tK,{open:c,onOpenChange:u,meeting:g}),i.jsx(wK,{open:d,onOpenChange:f,meeting:g}),i.jsx(yS,{open:!!N,onOpenChange:(B,Y)=>{E(B?N:null),Y&&setTimeout(()=>{L()},1e3)},meetingToEdit:N})]})};var Ow="Switch",[EK,yse]=ns(Ow),[NK,jK]=EK(Ow),VP=x.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[h,p]=x.useState(null),g=et(t,w=>p(w)),m=x.useRef(!1),v=h?d||!!h.closest("form"):!0,[_=!1,y]=Ws({prop:s,defaultProp:a,onChange:u});return i.jsxs(NK,{scope:r,checked:_,disabled:l,children:[i.jsx(Ge.button,{type:"button",role:"switch","aria-checked":_,"aria-required":o,"data-state":GP(_),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:g,onClick:De(e.onClick,w=>{y(b=>!b),v&&(m.current=w.isPropagationStopped(),m.current||w.stopPropagation())})}),v&&i.jsx(kK,{control:h,bubbles:!m.current,name:n,value:c,checked:_,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});VP.displayName=Ow;var WP="SwitchThumb",HP=x.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,s=jK(WP,r);return i.jsx(Ge.span,{"data-state":GP(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})});HP.displayName=WP;var kK=e=>{const{control:t,checked:r,bubbles:n=!0,...s}=e,a=x.useRef(null),o=pw(r),l=Ny(t);return x.useEffect(()=>{const c=a.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==r&&f){const h=new Event("click",{bubbles:n});f.call(c,r),c.dispatchEvent(h)}},[o,r,n]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:a,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function GP(e){return e?"checked":"unchecked"}var KP=VP,CK=HP;const ls=x.forwardRef(({className:e,...t},r)=>i.jsx(KP,{className:Te("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:i.jsx(CK,{className:Te("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ls.displayName=KP.displayName;const tu=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(!0),{user:s}=mt(),a=async()=>{try{n(!0),await o();const{data:_,error:y}=await fe.from("polls").select(`
          *,
          sub_polls (*),
          poll_attachments (*)
        `).order("created_at",{ascending:!1});if(y)throw y;const w=await Promise.all(_.map(async b=>{const{data:S}=await fe.rpc("get_poll_stats",{poll_id_param:b.id});return{id:b.id,title:b.title,description:b.description,deadline:b.deadline,status:b.status,is_secret:b.is_secret,notify_members:b.notify_members,created_by:b.created_by,created_at:b.created_at,updated_at:b.updated_at,reopen_deadline:b.reopen_deadline,sub_polls:b.sub_polls||[],attachments:b.poll_attachments||[],stats:(S==null?void 0:S[0])||{total_voters:0,voted_count:0,pending_count:0,sub_poll_count:0}}}));if(s)for(const b of w){const{data:S}=await fe.from("poll_votes").select("id").eq("poll_id",b.id).eq("user_id",s.id).limit(1);b.hasVoted=!!(S&&S.length>0)}t(w)}catch(_){console.error("Error fetching polls:",_),ot.error("Failed to fetch polls")}finally{n(!1)}},o=async()=>{try{const{error:_}=await fe.rpc("auto_close_reopened_polls");if(_)throw _}catch(_){console.error("Error auto-closing expired polls:",_)}},l=async _=>{if(!s)return ot.error("You must be logged in to create a poll"),null;try{const{data:y,error:w}=await fe.from("polls").insert({title:_.title,description:_.description,deadline:_.deadline,notify_members:_.notify_members,created_by:s.id}).select().single();if(w)throw w;const b=_.subPolls.filter(S=>S.title.trim()).map((S,N)=>({poll_id:y.id,title:S.title,description:S.description,order_index:N}));if(b.length>0){const{error:S}=await fe.from("sub_polls").insert(b);if(S)throw S}return _.attachment&&await u(y.id,_.attachment),_.notify_members&&await f(y.id),ot.success("Poll created successfully"),await a(),y}catch(y){return console.error("Error creating poll:",y),ot.error("Failed to create poll"),null}},c=async(_,y)=>{if(!s)return ot.error("You must be logged in to update a poll"),!1;try{const{error:w}=await fe.from("polls").update({title:y.title,description:y.description,deadline:y.deadline,updated_at:new Date().toISOString()}).eq("id",_);if(w)throw w;for(const b of y.subPolls){const{error:S}=await fe.from("sub_polls").update({title:b.title,description:b.description}).eq("id",b.id);if(S)throw S}return ot.success("Poll updated successfully"),await a(),!0}catch(w){return console.error("Error updating poll:",w),ot.error("Failed to update poll"),!1}},u=async(_,y)=>{if(!s)return null;try{await d();const w=y.name.split(".").pop(),b=`${Date.now()}.${w}`,S=`${_}/${b}`;console.log("Uploading file to storage:",S);const{error:N}=await fe.storage.from("poll-attachments").upload(S,y);if(N)throw console.error("Upload error:",N),N;const{data:{publicUrl:E}}=fe.storage.from("poll-attachments").getPublicUrl(S);console.log("File uploaded successfully, public URL:",E);const{error:C}=await fe.from("poll_attachments").insert({poll_id:_,file_name:y.name,file_path:E,file_size:y.size,mime_type:y.type,uploaded_by:s.id});if(C)throw console.error("Database error:",C),C;return S}catch(w){return console.error("Error uploading attachment:",w),ot.error("Failed to upload attachment"),null}},d=async()=>{try{const{data:_,error:y}=await fe.storage.listBuckets();if(y){console.error("Error listing buckets:",y);return}if(!(_==null?void 0:_.some(b=>b.id==="poll-attachments"))){console.log("Creating poll-attachments bucket...");const{error:b}=await fe.storage.createBucket("poll-attachments",{public:!0,fileSizeLimit:52428800,allowedMimeTypes:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","image/jpeg","image/png","image/gif","image/webp","text/plain"]});b?console.error("Error creating bucket:",b):console.log("Poll-attachments bucket created successfully")}}catch(_){console.error("Error ensuring bucket exists:",_)}},f=async _=>{try{const{error:y}=await fe.functions.invoke("send-poll-notifications",{body:{pollId:_,notificationType:"initial"}});if(y)throw y}catch(y){console.error("Error sending notifications:",y)}},h=async _=>{try{const{error:y}=await fe.from("polls").delete().eq("id",_);if(y)throw y;ot.success("Poll deleted successfully"),await a()}catch(y){console.error("Error deleting poll:",y),ot.error("Failed to delete poll")}},p=async(_,y)=>{try{const{error:w}=await fe.from("polls").update({status:y,updated_at:new Date().toISOString()}).eq("id",_);if(w)throw w;ot.success(`Poll ${y==="completed"?"completed":y} successfully`),await a()}catch(w){console.error("Error updating poll status:",w),ot.error("Failed to update poll status")}},g=async(_,y)=>{try{if(console.log("Downloading attachment:",{filePath:_,fileName:y}),_.includes("supabase.co/storage")||_.includes("/storage/v1/object/public/")){console.log("Using direct download from public URL");const S=document.createElement("a");S.href=_,S.download=y,S.target="_blank",S.rel="noopener noreferrer",document.body.appendChild(S),S.click(),document.body.removeChild(S),ot.success(`Download started: ${y}`);return}console.log("Constructing public URL for legacy path");const{data:{publicUrl:w}}=fe.storage.from("poll-attachments").getPublicUrl(_);console.log("Constructed public URL:",w);const b=document.createElement("a");b.href=w,b.download=y,b.target="_blank",b.rel="noopener noreferrer",document.body.appendChild(b),b.click(),document.body.removeChild(b),ot.success(`Download started: ${y}`)}catch(w){console.error("Error downloading attachment:",w),ot.error("Failed to download attachment")}},m=async(_,y)=>{try{const{error:w}=await fe.rpc("reset_user_poll_votes",{poll_id_param:_,user_id_param:y});if(w)throw w;ot.success("User votes reset successfully"),await a()}catch(w){console.error("Error resetting user votes:",w),ot.error("Failed to reset user votes")}},v=async _=>{try{const{error:y}=await fe.rpc("reset_all_poll_votes",{poll_id_param:_});if(y)throw y;ot.success("All votes reset successfully"),await a()}catch(y){console.error("Error resetting all votes:",y),ot.error("Failed to reset all votes")}};return x.useEffect(()=>{a();const _=setInterval(()=>{a()},5*60*1e3);return()=>clearInterval(_)},[]),{polls:e,loading:r,createPoll:l,updatePoll:c,deletePoll:h,updatePollStatus:p,downloadAttachment:g,resetUserVotes:m,resetAllVotes:v,refetch:a}},TK=({open:e,onOpenChange:t})=>{const[r,n]=x.useState({title:"",description:"",deadline:"",notifyMembers:!0}),[s,a]=x.useState([{id:"1",title:"",description:""}]),[o,l]=x.useState(null),{createPoll:c}=tu(),[u,d]=x.useState(!1),f=()=>{const y={id:Date.now().toString(),title:"",description:""};a([...s,y])},h=y=>{s.length>1&&a(s.filter(w=>w.id!==y))},p=(y,w,b)=>{a(s.map(S=>S.id===y?{...S,[w]:b}:S))},g=y=>{var b;const w=(b=y.target.files)==null?void 0:b[0];w&&(["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(w.type)?l(w):(alert("Please select a PDF, DOC, or DOCX file."),y.target.value=""))},m=()=>{l(null)},v=()=>{n({title:"",description:"",deadline:"",notifyMembers:!0}),a([{id:"1",title:"",description:""}]),l(null)},_=async y=>{if(y.preventDefault(),u)return;d(!0);const w=s.filter(S=>S.title.trim()!=="");if(w.length===0){alert("Please add at least one sub-poll with a title."),d(!1);return}const b=await c({title:r.title,description:r.description,deadline:r.deadline,notify_members:r.notifyMembers,subPolls:w.map(S=>({title:S.title,description:S.description})),attachment:o||void 0});d(!1),b&&(t(!1),v())};return i.jsx(bt,{open:e,onOpenChange:t,children:i.jsxs(xt,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto z-50",children:[i.jsxs(vt,{children:[i.jsxs(yt,{className:"flex items-center space-x-2",children:[i.jsx(fa,{className:"h-5 w-5"}),i.jsx("span",{children:"Create New Poll"})]}),i.jsx(Mt,{children:"Create a new poll with multiple questions for committee voting"})]}),i.jsxs("form",{onSubmit:_,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"title",children:"Main Poll Title"}),i.jsx(lt,{id:"title",value:r.title,onChange:y=>n({...r,title:y.target.value}),placeholder:"Enter main poll title...",required:!0,className:"mt-2"})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"description",children:"Main Description"}),i.jsx(Ks,{id:"description",value:r.description,onChange:y=>n({...r,description:y.target.value}),placeholder:"Provide overall description of the poll...",rows:3,className:"mt-2"})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"deadline",children:"Voting Deadline"}),i.jsxs("div",{className:"relative mt-2",children:[i.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(lt,{id:"deadline",type:"datetime-local",value:r.deadline,onChange:y=>n({...r,deadline:y.target.value}),className:"pl-10",required:!0})]})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"attachment",children:"Supporting Document (Optional)"}),i.jsx("div",{className:"mt-2",children:o?i.jsx("div",{className:"border border-gray-300 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm",children:o.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:[(o.size/1024/1024).toFixed(2)," MB"]})]}),i.jsx(de,{type:"button",variant:"ghost",size:"sm",onClick:m,className:"text-red-500 hover:text-red-700",children:i.jsx(Za,{className:"h-4 w-4"})})]})}):i.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[i.jsx(xy,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),i.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Upload a supporting document (PDF, DOC, DOCX)"}),i.jsx("input",{type:"file",accept:".pdf,.doc,.docx",onChange:g,className:"hidden",id:"attachment-input"}),i.jsx(de,{type:"button",variant:"outline",onClick:()=>{var y;return(y=document.getElementById("attachment-input"))==null?void 0:y.click()},children:"Choose File"})]})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ze,{className:"text-lg font-semibold",children:"Poll Questions"}),i.jsxs(de,{type:"button",variant:"outline",size:"sm",onClick:f,children:[i.jsx(fa,{className:"h-4 w-4 mr-2"}),"Add Question"]})]}),i.jsx("div",{className:"space-y-4",children:s.map((y,w)=>i.jsxs(He,{className:"border-2 border-dashed border-gray-200",children:[i.jsx(rt,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(st,{className:"text-base",children:["Question ",w+1]}),s.length>1&&i.jsx(de,{type:"button",variant:"ghost",size:"sm",onClick:()=>h(y.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:i.jsx(br,{className:"h-4 w-4"})})]})}),i.jsxs(Ye,{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx(ze,{htmlFor:`subpoll-title-${y.id}`,children:"Question Title *"}),i.jsx(lt,{id:`subpoll-title-${y.id}`,value:y.title,onChange:b=>p(y.id,"title",b.target.value),placeholder:"Enter the question...",required:!0,className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:`subpoll-description-${y.id}`,children:"Question Description"}),i.jsx(Ks,{id:`subpoll-description-${y.id}`,value:y.description,onChange:b=>p(y.id,"description",b.target.value),placeholder:"Additional details about this question...",rows:2,className:"mt-1"})]}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:i.jsxs("p",{className:"text-sm text-blue-800",children:["Members will vote: ",i.jsx("strong",{children:"For"}),", ",i.jsx("strong",{children:"Against"}),", or ",i.jsx("strong",{children:"Abstain"})," on this question"]})})]})]},y.id))})]}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"notify",children:"Notify Members"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Send notification to all eligible voters"})]}),i.jsx(ls,{id:"notify",checked:r.notifyMembers,onCheckedChange:y=>n({...r,notifyMembers:y})})]})}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[i.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Voting Rules"}),i.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[i.jsx("li",{children:" Members must vote on each question: For, Against, or Abstain"}),i.jsx("li",{children:" Votes cannot be changed once submitted"}),i.jsx("li",{children:" Each question is evaluated independently"}),i.jsx("li",{children:" Voting is anonymous - individual choices are hidden from other members"})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(de,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),i.jsx(de,{type:"submit",className:"bg-red-700 hover:bg-red-800 text-white",disabled:u,children:u?"Creating...":`Create Poll (${s.length} question${s.length>1?"s":""})`})]})]})]})})},AK=e=>new Promise(t=>setTimeout(t,e)),ax=async(e,t=3,r=1e3)=>{let n;for(let s=0;s<t;s++)try{return await e()}catch(a){if(console.log(`Attempt ${s+1} failed:`,a),n=a,s<t-1){const o=r*Math.pow(2,s);console.log(`Retrying in ${o}ms...`),await AK(o)}}throw n},PK=()=>{const[e,t]=x.useState(!1),{user:r}=mt();return{submitVotes:async o=>{if(!r)return ot.error("You must be logged in to vote"),!1;try{t(!0),console.log("Starting vote submission for user:",r.id,"poll:",o.pollId);const l=await ax(async()=>{const{data:c,error:u}=await fe.from("poll_votes").select("sub_poll_id").eq("user_id",r.id).in("sub_poll_id",o.votes.map(h=>h.subPollId));if(u)throw console.error("Error checking existing votes:",u),u;if(c&&c.length>0)throw new Error("ALREADY_VOTED");const d=o.votes.map(h=>({poll_id:o.pollId,sub_poll_id:h.subPollId,user_id:r.id,vote:h.vote,comment:o.comment||null}));console.log("Inserting vote records:",d);const{error:f}=await fe.from("poll_votes").insert(d);if(f)throw console.error("Error inserting votes:",f),f;return!0});return console.log("Vote submission successful"),ot.success("Your votes have been submitted successfully"),l}catch(l){return console.error("Error submitting votes:",l),l.message==="ALREADY_VOTED"?ot.error("You have already voted on some of these questions"):ot.error("Failed to submit votes. Please check your connection and try again."),!1}finally{t(!1)}},getUserVotes:async o=>{if(!r)return null;try{console.log("Fetching user votes for poll:",o,"user:",r.id);const l=await ax(async()=>{const{data:c,error:u}=await fe.from("poll_votes").select("*").eq("poll_id",o).eq("user_id",r.id);if(u)throw u;return c});return console.log("Retrieved user votes:",l),l}catch(l){return console.error("Error fetching user votes:",l),null}},checkVotingEligibility:async o=>{var l;if(console.log("Checking voting eligibility for poll:",o,"user:",r==null?void 0:r.id),!r)return console.log("No user found"),{canVote:!1,reason:"Not logged in"};try{return await ax(async()=>{const{data:u,error:d}=await fe.from("polls").select("status, deadline").eq("id",o).single();if(d)throw console.error("Error fetching poll:",d),d;if(console.log("Poll data:",u),u.status!=="active")return{canVote:!1,reason:"Poll is not active"};if(new Date(u.deadline)<new Date)return{canVote:!1,reason:"Poll deadline has passed"};const{data:f,error:h}=await fe.from("poll_votes").select("id").eq("poll_id",o).eq("user_id",r.id).limit(1);if(h)throw console.error("Error checking existing votes:",h),h;return console.log("Existing votes:",f),f&&f.length>0?{canVote:!1,reason:"You have already voted on this poll"}:(console.log("User can vote"),{canVote:!0,reason:null})})}catch(c){return console.error("Error checking voting eligibility:",c),(l=c.message)!=null&&l.includes("Failed to fetch")?{canVote:!1,reason:"Network connection error. Please check your internet connection."}:{canVote:!1,reason:"Error checking eligibility. Please try again."}}},submitting:e}},bS=({documentId:e,documentType:t})=>({trackView:async()=>{var s,a;try{console.log("Tracking view for:",t,e);const{data:{user:o},error:l}=await fe.auth.getUser();if(l){console.error("Error getting user:",l);return}if(!o){console.error("No authenticated user found");return}const{data:c,error:u}=await fe.from("profiles").select("id").eq("id",o.id).single();if(u||!c){console.error("User profile not found, creating one...");const{error:f}=await fe.from("profiles").insert({id:o.id,email:o.email,first_name:((s=o.user_metadata)==null?void 0:s.first_name)||null,last_name:((a=o.user_metadata)==null?void 0:a.last_name)||null});f&&console.error("Error creating profile:",f)}const{error:d}=await fe.from("document_analytics").insert({document_id:e,document_type:t,user_id:o.id,action_type:"view",device_type:navigator.platform||"Unknown",user_agent:navigator.userAgent});if(d){console.error("Error recording analytics:",d);return}if(t==="document"){const{error:f}=await fe.from("document_views").insert({document_id:e,user_id:o.id,view_started_at:new Date().toISOString(),time_spent_seconds:0,completion_percentage:0,last_page_viewed:1});f&&console.error("Error tracking document view:",f)}else if(t==="meeting_attachment"){const{error:f}=await fe.rpc("increment_view_count",{table_name:"meeting_attachments",attachment_id:e});f?console.error("Error tracking meeting attachment view:",f):console.log("Meeting attachment view count incremented successfully")}else if(t==="poll_attachment"){const{error:f}=await fe.rpc("increment_view_count",{table_name:"poll_attachments",attachment_id:e});f?console.error("Error tracking poll attachment view:",f):console.log("Poll attachment view count incremented successfully")}console.log("View tracked successfully")}catch(o){console.error("Error in trackView:",o)}},trackDownload:async()=>{var s,a;try{console.log("Tracking download for:",t,e);const{data:{user:o},error:l}=await fe.auth.getUser();if(l){console.error("Error getting user:",l);return}if(!o){console.error("No authenticated user found");return}const{data:c,error:u}=await fe.from("profiles").select("id").eq("id",o.id).single();if(u||!c){console.error("User profile not found, creating one...");const{error:f}=await fe.from("profiles").insert({id:o.id,email:o.email,first_name:((s=o.user_metadata)==null?void 0:s.first_name)||null,last_name:((a=o.user_metadata)==null?void 0:a.last_name)||null});f&&console.error("Error creating profile:",f)}const{error:d}=await fe.from("document_analytics").insert({document_id:e,document_type:t,user_id:o.id,action_type:"download",device_type:navigator.platform||"Unknown",user_agent:navigator.userAgent});if(d){console.error("Error recording analytics:",d);return}if(t==="meeting_attachment"){const{error:f}=await fe.rpc("increment_download_count",{table_name:"meeting_attachments",attachment_id:e});f?console.error("Error tracking meeting attachment download:",f):console.log("Meeting attachment download count incremented successfully")}else if(t==="poll_attachment"){const{error:f}=await fe.rpc("increment_download_count",{table_name:"poll_attachments",attachment_id:e});f?console.error("Error tracking poll attachment download:",f):console.log("Poll attachment download count incremented successfully")}console.log("Download tracked successfully")}catch(o){console.error("Error in trackDownload:",o)}}}),DK=({attachments:e,onViewDocument:t})=>{const{downloadAttachment:r}=tu();if(!e||e.length===0)return null;const n=u=>u?u.includes("pdf")?Gt:u.includes("image")?Rr:u.includes("document")||u.includes("word")||u.includes("spreadsheet")||u.includes("excel")||u.includes("presentation")||u.includes("powerpoint")?Gt:Cd:Cd,s=u=>{if(!u)return"Unknown size";const d=["Bytes","KB","MB","GB"],f=Math.floor(Math.log(u)/Math.log(1024));return Math.round(u/Math.pow(1024,f)*100)/100+" "+d[f]},a=u=>u?u.includes("pdf")?"PDF":u.includes("image")?"Image":u.includes("document")||u.includes("word")?"Word":u.includes("spreadsheet")||u.includes("excel")?"Excel":u.includes("presentation")||u.includes("powerpoint")?"PowerPoint":"File":"File",o=async u=>{const{trackDownload:d}=bS({documentId:u.id,documentType:"poll_attachment"});try{console.log("Starting download for poll attachment:",u.id),await d(),console.log("Download tracked successfully for poll attachment:",u.id),await r(u.file_path,u.file_name),console.log("Download completed for poll attachment:",u.file_name)}catch(f){console.error("Error downloading poll attachment:",f)}},l=async u=>{const{trackView:d}=bS({documentId:u.id,documentType:"poll_attachment"});try{console.log("Starting view for poll attachment:",u.id),await d(),console.log("View tracked successfully for poll attachment:",u.id),t&&t(u)}catch(f){console.error("Error viewing poll attachment:",f),t&&t(u)}},c=u=>u?u.includes("pdf")||u.includes("image")||u.includes("text")||u.includes("document")||u.includes("word")||u.includes("spreadsheet")||u.includes("excel")||u.includes("presentation")||u.includes("powerpoint"):!1;return i.jsxs(He,{className:"mt-4",children:[i.jsx(rt,{className:"pb-4",children:i.jsxs(st,{className:"flex items-center gap-2 text-lg",children:[i.jsx(Gt,{className:"h-5 w-5"}),"Poll Attachments (",e.length,")"]})}),i.jsx(Ye,{className:"pt-0",children:i.jsx("div",{className:"space-y-3",children:e.map(u=>{const d=n(u.mime_type),f=c(u.mime_type)&&t,h=u.view_count||0,p=u.download_count||0;return i.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg hover:bg-muted/50 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:i.jsx(d,{className:"h-4 w-4 text-blue-600"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"text-sm font-medium text-foreground truncate",children:u.file_name}),i.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[i.jsx(Be,{variant:"outline",className:"text-xs",children:a(u.mime_type)}),i.jsx("span",{className:"text-xs text-muted-foreground",children:s(u.file_size)}),i.jsxs("span",{className:"text-xs text-muted-foreground flex items-center space-x-1",children:[i.jsx(Rr,{className:"h-3 w-3"}),i.jsx("span",{children:h})]}),i.jsxs("span",{className:"text-xs text-muted-foreground flex items-center space-x-1",children:[i.jsx(hs,{className:"h-3 w-3"}),i.jsx("span",{children:p})]})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[f&&i.jsxs(de,{size:"sm",variant:"outline",onClick:()=>l(u),className:"h-8 text-xs",children:[i.jsx(Rr,{className:"h-3 w-3 mr-1"}),"View"]}),i.jsx(D4,{documentId:u.id,documentName:u.file_name,documentType:"poll_attachment"}),i.jsxs(de,{size:"sm",variant:"outline",onClick:()=>o(u),className:"h-8 text-xs",children:[i.jsx(hs,{className:"h-3 w-3 mr-1"}),"Download"]})]})]},u.id)})})})]})},RK=({open:e,onOpenChange:t,poll:r})=>{var q,O,H,G,K,k,W;const[n,s]=x.useState(""),[a,o]=x.useState({}),[l,c]=x.useState({canVote:!0,reason:null}),[u,d]=x.useState(!1),[f,h]=x.useState(!1),[p,g]=x.useState(null),[m,v]=x.useState(!1),[_,y]=x.useState(""),{submitVotes:w,checkVotingEligibility:b,getUserVotes:S}=PK();x.useEffect(()=>{r&&e?(console.log("Dialog opened for poll:",r.id),E()):e||N()},[r,e]),x.useEffect(()=>{if(!(r!=null&&r.deadline))return;const R=()=>{const re=new Date,oe=new Date(r.deadline);if(cw(oe,re)){y("Poll closed");return}const ce=fz({start:re,end:oe});y(oz(ce,{format:["days","hours","minutes","seconds"]})+" left")};R();const M=setInterval(R,1e3);return()=>clearInterval(M)},[r==null?void 0:r.deadline]);const N=()=>{o({}),s(""),c({canVote:!0,reason:null}),d(!1),h(!1)},E=async()=>{if(r){h(!0),o({}),s(""),d(!1);try{console.log("Checking eligibility for poll:",r.id);const R=await b(r.id);if(console.log("Eligibility result:",R),c(R),!R.canVote){console.log("User cannot vote, checking for existing votes");const M=await S(r.id);if(M&&M.length>0){console.log("Found existing votes:",M);const re={};M.forEach(ce=>{re[ce.sub_poll_id]=ce.vote}),o(re);const oe=M.find(ce=>ce.comment);oe&&s(oe.comment||"")}}}catch(R){console.error("Error initializing dialog:",R),ot.error("Failed to load voting data"),c({canVote:!1,reason:"Failed to load voting data"})}finally{h(!1)}}},C=(R,M)=>{console.log("Vote selection changed:",{subPollId:R,vote:M}),o(re=>{const oe={...re,[R]:M};return console.log("Updated vote selections:",oe),oe})},T=((q=r==null?void 0:r.sub_polls)==null?void 0:q.every(R=>a.hasOwnProperty(R.id)))||!1,D=async()=>{if(!r||!T||u){console.log("Submit blocked:",{poll:!!r,allQuestionsAnswered:T,isSubmitting:u}),T||ot.error("Please answer all questions before submitting");return}console.log("Starting vote submission for poll:",r.id),console.log("Vote selections:",a),console.log("Comment:",n),d(!0);try{const R=Object.entries(a).map(([re,oe])=>({subPollId:re,vote:oe}));console.log("Formatted votes for submission:",R);const M=await w({pollId:r.id,votes:R,comment:n.trim()||void 0});console.log("Vote submission result:",M),M&&(ot.success("Your votes have been submitted successfully!"),t(!1),N())}catch(R){console.error("Error in handleSubmit:",R),ot.error("An error occurred while submitting votes")}finally{d(!1)}},F=()=>{console.log("Retrying initialization"),E()},P=R=>{const M={id:R.id,name:R.file_name,file_path:R.file_path,file_size:R.file_size,mime_type:R.mime_type,uploaded_by:R.uploaded_by,created_at:R.created_at};g(M),v(!0)},L=()=>{v(!1),g(null)};if(!r)return null;const A=[{value:"favor",label:"In Favour",icon:$6,color:"bg-green-50 border-green-200 hover:bg-green-100 text-green-700",selectedColor:"bg-green-100 border-green-400 ring-2 ring-green-200"},{value:"against",label:"Against",icon:L6,color:"bg-red-50 border-red-200 hover:bg-red-100 text-red-700",selectedColor:"bg-red-100 border-red-400 ring-2 ring-red-200"},{value:"abstain",label:"Abstain",icon:A6,color:"bg-gray-50 border-gray-200 hover:bg-gray-100 text-gray-700",selectedColor:"bg-gray-100 border-gray-400 ring-2 ring-gray-200"}],I=Object.keys(a).length,Q=((O=r.sub_polls)==null?void 0:O.length)||0;return i.jsxs(i.Fragment,{children:[i.jsx(bt,{open:e,onOpenChange:t,children:i.jsxs(xt,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(vt,{className:"space-y-3 pb-4 border-b",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:i.jsx(Yi,{className:"h-5 w-5 text-primary"})}),i.jsxs("div",{children:[i.jsx(yt,{className:"text-xl font-bold",children:r.title}),i.jsx(Mt,{className:"text-sm mt-1",children:r.description})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-gray-600",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(mr,{className:"h-3 w-3"}),i.jsxs("span",{children:["Deadline: ",ht(new Date(r.deadline),"MMM dd, yyyy HH:mm")]}),i.jsx("span",{className:"ml-2 font-semibold text-primary",children:_})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(lr,{className:"h-3 w-3"}),i.jsxs("span",{children:[((H=r.stats)==null?void 0:H.total_voters)||0," eligible voters"]})]}),i.jsx(Be,{variant:r.status==="active"?"default":"secondary",children:r.status}),r.is_secret&&i.jsx(Be,{variant:"outline",children:"Secret Ballot"})]})]}),f?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),i.jsx("p",{className:"text-gray-600",children:"Loading voting data..."})]})}):!l.canVote&&((G=l.reason)!=null&&G.includes("Network"))?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx(He,{className:"max-w-md mx-auto text-center",children:i.jsxs(Ye,{className:"p-8",children:[i.jsx(Bs,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Connection Error"}),i.jsx("p",{className:"text-gray-600 mb-4",children:l.reason}),i.jsxs(de,{onClick:F,variant:"outline",children:[i.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Retry"]})]})})}):!l.canVote&&!((K=l.reason)!=null&&K.includes("already voted"))?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx(He,{className:"max-w-md mx-auto text-center",children:i.jsxs(Ye,{className:"p-8",children:[i.jsx(Bs,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Cannot Vote"}),i.jsx("p",{className:"text-gray-600",children:l.reason})]})})}):i.jsxs("div",{className:"space-y-6 py-4",children:[(r==null?void 0:r.attachments)&&r.attachments.length>0&&i.jsx(DK,{attachments:r.attachments,onViewDocument:P}),i.jsx("div",{className:"space-y-6",children:(k=r.sub_polls)==null?void 0:k.map((R,M)=>i.jsx(He,{className:"border-2",children:i.jsx(Ye,{className:"p-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Question ",M+1,": ",R.title]}),R.description&&i.jsx("p",{className:"text-gray-600 text-sm mb-4",children:R.description})]}),a[R.id]&&i.jsx(qn,{className:"h-5 w-5 text-green-600 ml-4 flex-shrink-0"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:A.map(re=>{const oe=a[R.id]===re.value,ce=re.icon;return i.jsx("button",{onClick:()=>l.canVote&&C(R.id,re.value),disabled:!l.canVote,className:`p-4 border-2 rounded-lg transition-all duration-200 text-left ${oe?re.selectedColor:re.color} ${l.canVote?"cursor-pointer":"opacity-60 cursor-not-allowed"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ce,{className:"h-5 w-5"}),i.jsx("span",{className:"font-medium",children:re.label})]})},re.value)})})]})})},R.id))}),l.canVote&&i.jsxs(i.Fragment,{children:[i.jsx(He,{className:"bg-blue-50 border-blue-200",children:i.jsx(Ye,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"font-medium text-blue-900",children:["Progress: ",I," of ",Q," questions answered"]}),i.jsx(Be,{variant:T?"default":"secondary",children:T?"Ready to Submit":"In Progress"})]})})}),i.jsx(He,{children:i.jsxs(Ye,{className:"p-6",children:[i.jsx(ze,{className:"text-base font-medium mb-3 block",children:"Additional Comments (Optional)"}),i.jsx(Ks,{value:n,onChange:R=>s(R.target.value),placeholder:"Share your thoughts about this vote...",rows:3,className:"resize-none"})]})}),i.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[!T&&i.jsx(He,{className:"bg-amber-50 border-amber-200",children:i.jsx(Ye,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3 text-amber-800",children:[i.jsx(Bs,{className:"h-5 w-5"}),i.jsxs("p",{className:"text-sm font-medium",children:["Please answer all ",Q," questions before submitting your vote."]})]})})}),i.jsxs("div",{className:"flex gap-3 justify-end",children:[i.jsx(de,{variant:"outline",onClick:()=>t(!1),disabled:u,children:"Cancel"}),i.jsxs(de,{onClick:D,disabled:!T||u,className:"min-w-[150px]",children:[i.jsx(Yi,{className:"h-4 w-4 mr-2"}),u?"Submitting...":"Submit All Votes"]})]})]})]}),!l.canVote&&((W=l.reason)==null?void 0:W.includes("already voted"))&&Object.keys(a).length>0&&i.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Your Submitted Votes"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Below are the votes you previously submitted"})]}),n&&i.jsx(He,{children:i.jsxs(Ye,{className:"p-6",children:[i.jsx(ze,{className:"text-base font-medium mb-3 block",children:"Your Comment"}),i.jsx("div",{className:"bg-gray-100 p-3 rounded border text-gray-700",children:n})]})})]})]})]})}),i.jsx(Zy,{isOpen:m,onClose:L,document:p,documentType:"poll_attachment"})]})};function MK(e,t=[]){let r=[];function n(a,o){const l=x.createContext(o),c=r.length;r=[...r,o];function u(f){const{scope:h,children:p,...g}=f,m=(h==null?void 0:h[e][c])||l,v=x.useMemo(()=>g,Object.values(g));return i.jsx(m.Provider,{value:v,children:p})}function d(f,h){const p=(h==null?void 0:h[e][c])||l,g=x.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const s=()=>{const a=r.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,OK(s,...t)]}function OK(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var Fw="Progress",Iw=100,[FK,wse]=MK(Fw),[IK,LK]=FK(Fw),YP=x.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:s,getValueLabel:a=$K,...o}=e;(s||s===0)&&!SS(s)&&console.error(BK(`${s}`,"Progress"));const l=SS(s)?s:Iw;n!==null&&!ES(n,l)&&console.error(UK(`${n}`,"Progress"));const c=ES(n,l)?n:null,u=e0(c)?a(c,l):void 0;return i.jsx(IK,{scope:r,value:c,max:l,children:i.jsx(Ge.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":e0(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":QP(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});YP.displayName=Fw;var qP="ProgressIndicator",XP=x.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,s=LK(qP,r);return i.jsx(Ge.div,{"data-state":QP(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...n,ref:t})});XP.displayName=qP;function $K(e,t){return`${Math.round(e/t*100)}%`}function QP(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function e0(e){return typeof e=="number"}function SS(e){return e0(e)&&!isNaN(e)&&e>0}function ES(e,t){return e0(e)&&!isNaN(e)&&e<=t&&e>=0}function BK(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Iw}\`.`}function UK(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Iw} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var JP=YP,zK=XP;const Fu=x.forwardRef(({className:e,value:t,...r},n)=>i.jsx(JP,{ref:n,className:Te("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:i.jsx(zK,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Fu.displayName=JP.displayName;const VK=({open:e,onOpenChange:t,poll:r})=>{var N,E,C,T;const[n,s]=x.useState([]),[a,o]=x.useState({}),[l,c]=x.useState(!1),[u,d]=x.useState(!1),[f,h]=x.useState(((E=(N=r==null?void 0:r.sub_polls)==null?void 0:N[0])==null?void 0:E.id)||""),[p,g]=x.useState(!1);x.useEffect(()=>{r&&e&&(m(),v())},[r,e]);const m=async()=>{if(r){c(!0);try{const{data:D,error:F}=await fe.from("profiles").select("id, first_name, last_name, email, avatar_url").order("first_name");if(F)throw F;const{data:P,error:L}=await fe.from("poll_votes").select("user_id, voted_at").eq("poll_id",r.id);if(L)throw L;const A=new Map;P==null||P.forEach(Q=>{A.has(Q.user_id)||A.set(Q.user_id,Q.voted_at)});const I=(D==null?void 0:D.map(Q=>({id:Q.id,first_name:Q.first_name||"",last_name:Q.last_name||"",email:Q.email||"",avatar_url:Q.avatar_url,has_voted:A.has(Q.id),voted_at:A.get(Q.id)||null})))||[];s(I)}catch(D){console.error("Error fetching member voting status:",D)}finally{c(!1)}}},v=async()=>{var D;if(r){d(!0);try{console.log("Fetching vote results for poll:",r.id);const{data:F,error:P}=await fe.from("poll_votes").select("sub_poll_id, vote").eq("poll_id",r.id);if(P)throw P;console.log("Retrieved votes:",F);const L={};(D=r.sub_polls)==null||D.forEach(A=>{L[A.id]={favor:0,against:0,abstain:0,total:0}}),F==null||F.forEach(A=>{L[A.sub_poll_id]&&(A.vote==="favor"?L[A.sub_poll_id].favor++:A.vote==="against"?L[A.sub_poll_id].against++:A.vote==="abstain"&&L[A.sub_poll_id].abstain++,L[A.sub_poll_id].total++)}),console.log("Calculated results:",L),o(L)}catch(F){console.error("Error fetching vote results:",F)}finally{d(!1)}}};if(!r)return null;const _=n.filter(D=>D.has_voted),y=n.filter(D=>!D.has_voted),w=(D,F)=>F>0?Math.round(D/F*100):0,b=D=>{if(D.total===0)return null;const F=Math.max(D.favor,D.against,D.abstain);return D.favor===F&&D.favor>0?"favor":D.against===F&&D.against>0?"against":D.abstain===F&&D.abstain>0?"abstain":null},S=D=>{if(!D)return i.jsx(Be,{variant:"secondary",children:"No Votes"});switch(D){case"favor":return i.jsxs(Be,{className:"bg-green-100 text-green-800 border-green-300",children:[i.jsx(qn,{className:"h-3 w-3 mr-1"}),"Passed"]});case"against":return i.jsxs(Be,{className:"bg-red-100 text-red-800 border-red-300",children:[i.jsx(Ui,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"abstain":return i.jsxs(Be,{className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:[i.jsx(hv,{className:"h-3 w-3 mr-1"}),"Abstained"]});default:return i.jsx(Be,{variant:"secondary",children:"No Result"})}};return i.jsx(bt,{open:e,onOpenChange:t,children:i.jsxs(xt,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[i.jsxs(vt,{children:[i.jsxs(yt,{className:"flex items-center space-x-2",children:[i.jsx(lr,{className:"h-5 w-5"}),i.jsx("span",{children:"Poll Results"})]}),i.jsx(Mt,{children:"View voting results for each question"})]}),i.jsxs(He,{className:"mb-4",children:[i.jsxs(rt,{className:"py-2 px-4",children:[i.jsx(st,{className:"text-base",children:r.title}),r.description&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.description})]}),i.jsxs(Ye,{className:"flex flex-wrap gap-4 items-center py-2 px-4",children:[i.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[i.jsx(Tr,{className:"h-3 w-3"})," ",ht(new Date(r.deadline),"MMM dd, yyyy HH:mm")]}),i.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[i.jsx(lr,{className:"h-3 w-3"})," ",((C=r.stats)==null?void 0:C.voted_count)||0,"/",((T=r.stats)==null?void 0:T.total_voters)||0," voted"]}),i.jsx("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:i.jsx(Be,{variant:r.status==="active"?"default":"secondary",children:r.status})})]})]}),r.sub_polls&&r.sub_polls.length>0&&i.jsxs(dl,{value:f,onValueChange:h,className:"mb-4",children:[i.jsx(lo,{className:"flex flex-wrap gap-2 mb-2",children:r.sub_polls.map((D,F)=>i.jsxs(Br,{value:D.id,"aria-label":`Question ${F+1}`,children:["Q",F+1]},D.id))}),r.sub_polls.map((D,F)=>{const P=a[D.id]||{favor:0,against:0,abstain:0,total:0},L=b(P);return i.jsx(Ur,{value:D.id,children:i.jsxs(He,{className:"mb-4",children:[i.jsxs(rt,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(st,{className:"text-base",children:["Question ",F+1,": ",D.title]}),S(L)]}),D.description&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:D.description})]}),i.jsxs(Ye,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(qn,{className:"h-4 w-4 text-green-600"}),i.jsx("span",{className:"text-sm font-medium",children:"For"})]}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:[P.favor," votes (",w(P.favor,P.total),"%)"]})]}),i.jsx(Fu,{value:w(P.favor,P.total),className:"h-2"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ui,{className:"h-4 w-4 text-red-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Against"})]}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:[P.against," votes (",w(P.against,P.total),"%)"]})]}),i.jsx(Fu,{value:w(P.against,P.total),className:"h-2"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(hv,{className:"h-4 w-4 text-yellow-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Abstain"})]}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:[P.abstain," votes (",w(P.abstain,P.total),"%)"]})]}),i.jsx(Fu,{value:w(P.abstain,P.total),className:"h-2"})]}),P.total>0&&i.jsx("div",{className:"mt-3 pt-3 border-t",children:i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total votes: ",P.total]})})]})]})},D.id)})]}),i.jsxs(He,{className:"mb-4",children:[i.jsxs(rt,{className:"flex flex-row items-center justify-between cursor-pointer select-none",onClick:()=>g(D=>!D),"aria-label":"Toggle Member Voting Status",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(lr,{className:"h-5 w-5"}),i.jsx("span",{className:"text-base font-medium",children:"Member Voting Status"}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",_.length,"/",n.length," voted)"]})]}),i.jsx(de,{size:"icon",variant:"ghost","aria-label":p?"Collapse":"Expand",children:p?i.jsx(my,{}):i.jsx(ff,{})})]}),p&&i.jsx(Ye,{children:l?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-medium text-green-700 mb-3 flex items-center gap-2",children:[i.jsx(qn,{className:"h-4 w-4"}),"Voted (",_.length,")"]}),i.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:_.length>0?_.map(D=>i.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-green-50 rounded-lg",children:[i.jsxs(Ld,{className:"h-8 w-8",children:[i.jsx($d,{src:D.avatar_url||""}),i.jsxs(Bd,{children:[D.first_name.charAt(0),D.last_name.charAt(0)]})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[D.first_name," ",D.last_name]}),D.voted_at&&i.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[i.jsx(mr,{className:"h-3 w-3"}),ht(new Date(D.voted_at),"MMM dd, HH:mm")]})]}),i.jsx(qn,{className:"h-4 w-4 text-green-600"})]},D.id)):i.jsx("p",{className:"text-sm text-gray-500",children:"No votes cast yet"})})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"font-medium text-orange-700 mb-3 flex items-center gap-2",children:[i.jsx(mr,{className:"h-4 w-4"}),"Pending (",y.length,")"]}),i.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:y.length>0?y.map(D=>i.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-orange-50 rounded-lg",children:[i.jsxs(Ld,{className:"h-8 w-8",children:[i.jsx($d,{src:D.avatar_url||""}),i.jsxs(Bd,{children:[D.first_name.charAt(0),D.last_name.charAt(0)]})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[D.first_name," ",D.last_name]}),i.jsx("p",{className:"text-xs text-gray-500",children:D.email})]}),i.jsx(mr,{className:"h-4 w-4 text-orange-600"})]},D.id)):i.jsx("p",{className:"text-sm text-gray-500",children:"All members have voted"})})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[i.jsx("span",{children:"Voting Progress"}),i.jsxs("span",{children:[_.length,"/",n.length," members"]})]}),i.jsx(Fu,{value:n.length>0?_.length/n.length*100:0,className:"h-2"})]})]})})]}),r.is_secret&&i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-2",children:i.jsxs("p",{className:"text-sm text-yellow-800",children:[i.jsx("strong",{children:"Secret Ballot:"})," Individual votes are anonymous and cannot be traced back to specific voters. Only participation status is shown above."]})})]})})},WK=({open:e,onOpenChange:t,poll:r})=>{const[n,s]=x.useState({title:"",description:"",deadline:""}),[a,o]=x.useState([]),[l,c]=x.useState(!1),{updatePoll:u}=tu();x.useEffect(()=>{var p;r&&e&&(s({title:r.title,description:r.description||"",deadline:new Date(r.deadline).toISOString().slice(0,16)}),o(((p=r.sub_polls)==null?void 0:p.map(g=>({id:g.id,title:g.title,description:g.description||""})))||[]))},[r,e]);const d=(p,g,m)=>{o(v=>v.map((_,y)=>y===p?{..._,[g]:m}:_))},f=()=>{o(p=>[...p,{id:Date.now().toString(),title:"",description:""}])},h=async p=>{if(p.preventDefault(),!!r){c(!0);try{await u(r.id,{title:n.title,description:n.description,deadline:n.deadline,subPolls:a})&&(t(!1),ot.success("Poll updated successfully"))}catch(g){console.error("Error updating poll:",g),ot.error("Failed to update poll")}finally{c(!1)}}};return r?i.jsx(bt,{open:e,onOpenChange:t,children:i.jsxs(xt,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto z-50",children:[i.jsxs(vt,{children:[i.jsxs(yt,{className:"flex items-center space-x-2",children:[i.jsx(pk,{className:"h-5 w-5"}),i.jsx("span",{children:"Edit Poll"})]}),i.jsx(Mt,{children:"Update poll details and questions. Note: Changes will affect ongoing voting."})]}),i.jsxs("form",{onSubmit:h,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"edit-title",children:"Poll Title"}),i.jsx(lt,{id:"edit-title",value:n.title,onChange:p=>s({...n,title:p.target.value}),placeholder:"Enter poll title...",required:!0,className:"mt-2"})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"edit-description",children:"Description"}),i.jsx(Ks,{id:"edit-description",value:n.description,onChange:p=>s({...n,description:p.target.value}),placeholder:"Provide description of the poll...",rows:3,className:"mt-2"})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"edit-deadline",children:"Voting Deadline"}),i.jsxs("div",{className:"relative mt-2",children:[i.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(lt,{id:"edit-deadline",type:"datetime-local",value:n.deadline,onChange:p=>s({...n,deadline:p.target.value}),className:"pl-10",required:!0})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx(ze,{className:"text-lg font-semibold",children:"Poll Questions"}),i.jsx("div",{className:"flex justify-end mb-2",children:i.jsx(de,{type:"button",variant:"outline",size:"sm",onClick:f,children:"+ Add Question"})}),i.jsx("div",{className:"space-y-4",children:a.map((p,g)=>i.jsxs(He,{className:"border-2 border-dashed border-gray-200",children:[i.jsx(rt,{className:"pb-3",children:i.jsxs(st,{className:"text-base",children:["Question ",g+1]})}),i.jsxs(Ye,{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx(ze,{htmlFor:`edit-subpoll-title-${g}`,children:"Question Title"}),i.jsx(lt,{id:`edit-subpoll-title-${g}`,value:p.title,onChange:m=>d(g,"title",m.target.value),placeholder:"Enter the question...",className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:`edit-subpoll-description-${g}`,children:"Question Description"}),i.jsx(Ks,{id:`edit-subpoll-description-${g}`,value:p.description,onChange:m=>d(g,"description",m.target.value),placeholder:"Additional details about this question...",rows:2,className:"mt-1"})]})]})]},p.id))})]}),i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[i.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"Important Notice"}),i.jsx("p",{className:"text-sm text-yellow-800",children:"Editing this poll may affect ongoing voting. Members who have already voted will keep their votes, but changes to questions may cause confusion. Consider creating a new poll instead if major changes are needed."})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsxs(de,{type:"button",variant:"outline",onClick:()=>t(!1),children:[i.jsx(Za,{className:"h-4 w-4 mr-2"}),"Cancel"]}),i.jsxs(de,{type:"submit",disabled:l,className:"bg-primary hover:bg-primary/90",children:[i.jsx(py,{className:"h-4 w-4 mr-2"}),l?"Saving...":"Save Changes"]})]})]})]})}):null},ix=[{value:"15",label:"15 minutes"},{value:"30",label:"30 minutes"},{value:"60",label:"1 hour"},{value:"120",label:"2 hours"},{value:"240",label:"4 hours"},{value:"1440",label:"24 hours"}],HK=({open:e,onOpenChange:t,poll:r})=>{var y,w,b;const[n,s]=x.useState(""),[a,o]=x.useState("30"),[l,c]=x.useState([]),[u,d]=x.useState(!1),{resetUserVotes:f,resetAllVotes:h,refetch:p}=tu();x.useEffect(()=>{e&&r&&g()},[e,r]);const g=async()=>{try{const{data:S,error:N}=await fe.from("profiles").select("id, first_name, last_name, email").order("first_name");if(N)throw N;c(S||[])}catch(S){console.error("Error fetching profiles:",S)}},m=async()=>{var S;if(r){d(!0);try{const{error:N}=await fe.rpc("reopen_poll_with_deadline",{poll_id_param:r.id,minutes_param:parseInt(a)});if(N)throw N;ot.success(`Poll reopened for ${(S=ix.find(E=>E.value===a))==null?void 0:S.label}`),await p(),t(!1)}catch(N){console.error("Error reopening poll:",N),ot.error("Failed to reopen poll")}finally{d(!1)}}},v=async()=>{!r||!n||(d(!0),await f(r.id,n),d(!1),s(""))},_=async()=>{r&&confirm("Are you sure you want to reset ALL votes? This action cannot be undone.")&&(d(!0),await h(r.id),d(!1))};return r?i.jsx(bt,{open:e,onOpenChange:t,children:i.jsxs(xt,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[i.jsxs(vt,{children:[i.jsxs(yt,{className:"flex items-center space-x-2",children:[i.jsx(Rn,{className:"h-5 w-5"}),i.jsx("span",{children:"Reopen Poll"})]}),i.jsx(Mt,{children:"Manage poll reopening and vote resets for completed polls"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(He,{children:[i.jsxs(rt,{children:[i.jsxs(st,{className:"text-lg flex items-center gap-2",children:[r.title,i.jsx(Be,{variant:"secondary",children:"Completed"})]}),r.description&&i.jsx("p",{className:"text-sm text-muted-foreground",children:r.description})]}),i.jsx(Ye,{children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Voters:"}),i.jsx("span",{className:"ml-2 font-medium",children:((y=r.stats)==null?void 0:y.total_voters)||0})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Votes Cast:"}),i.jsx("span",{className:"ml-2 font-medium",children:((w=r.stats)==null?void 0:w.voted_count)||0})]})]})})]}),i.jsxs(He,{children:[i.jsx(rt,{children:i.jsxs(st,{className:"text-base flex items-center gap-2",children:[i.jsx(Rn,{className:"h-4 w-4"}),"Reopen Poll with Time Limit"]})}),i.jsxs(Ye,{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Reopen this completed poll for a specific duration. The poll will automatically close after the selected time."}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm font-medium mb-2 block flex items-center gap-2",children:[i.jsx(mr,{className:"h-4 w-4"}),"Select Duration"]}),i.jsxs(ma,{value:a,onValueChange:o,children:[i.jsx(Ys,{children:i.jsx(pa,{placeholder:"Select reopening duration"})}),i.jsx(qs,{children:ix.map(S=>i.jsx(Rt,{value:S.value,children:S.label},S.value))})]})]}),i.jsxs(de,{onClick:m,disabled:u,className:"w-full",children:[i.jsx(Rn,{className:"h-4 w-4 mr-2"}),u?"Reopening...":`Reopen Poll for ${(b=ix.find(S=>S.value===a))==null?void 0:b.label}`]})]})]})]}),i.jsxs(He,{children:[i.jsx(rt,{children:i.jsxs(st,{className:"text-base flex items-center gap-2",children:[i.jsx(vv,{className:"h-4 w-4"}),"Reset Individual User Votes"]})}),i.jsxs(Ye,{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Reset votes for a specific user on this poll. The user will be able to vote again."}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs(ma,{value:n,onValueChange:s,children:[i.jsx(Ys,{children:i.jsx(pa,{placeholder:"Select a user to reset votes"})}),i.jsx(qs,{children:l.map(S=>i.jsx(Rt,{value:S.id,children:S.first_name||S.last_name?`${S.first_name||""} ${S.last_name||""}`.trim():S.email||"Unknown User"},S.id))})]}),i.jsxs(de,{onClick:v,disabled:!n||u,variant:"outline",className:"w-full",children:[i.jsx(vv,{className:"h-4 w-4 mr-2"}),"Reset User Votes"]})]})]})]}),i.jsxs(He,{className:"border-destructive/20",children:[i.jsx(rt,{children:i.jsxs(st,{className:"text-base flex items-center gap-2 text-destructive",children:[i.jsx(lr,{className:"h-4 w-4"}),"Reset All Votes"]})}),i.jsxs(Ye,{className:"space-y-4",children:[i.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 text-destructive mb-2",children:[i.jsx(gy,{className:"h-4 w-4"}),i.jsx("span",{className:"font-medium",children:"Warning"})]}),i.jsx("p",{className:"text-sm text-destructive",children:"This will permanently delete ALL votes for this poll. This action cannot be undone."})]}),i.jsxs(de,{onClick:_,disabled:u,variant:"destructive",className:"w-full",children:[i.jsx(lr,{className:"h-4 w-4 mr-2"}),"Reset All Votes"]})]})]})]})]})}):null},GK=()=>{const[e,t]=x.useState(!1),[r,n]=x.useState(!1),[s,a]=x.useState(!1),[o,l]=x.useState(!1),[c,u]=x.useState(!1),[d,f]=x.useState(null),[h,p]=x.useState({}),{polls:g,loading:m,deletePoll:v,updatePollStatus:_,refetch:y}=tu(),w=oo(),{toast:b}=dt();ll();const S=g.filter(O=>O.status==="active"),N=g.filter(O=>O.status==="completed");ke.useEffect(()=>{const O=async()=>{var G;const H={};for(const K of N)try{const{data:k,error:W}=await fe.from("poll_votes").select("sub_poll_id, vote").eq("poll_id",K.id);if(W)throw W;const R={};(G=K.sub_polls)==null||G.forEach(M=>{R[M.id]={favor:0,against:0,abstain:0,total:0}}),k==null||k.forEach(M=>{R[M.sub_poll_id]&&(M.vote==="favor"?R[M.sub_poll_id].favor++:M.vote==="against"?R[M.sub_poll_id].against++:M.vote==="abstain"&&R[M.sub_poll_id].abstain++,R[M.sub_poll_id].total++)}),H[K.id]=R}catch(k){console.error("Error fetching poll results:",k)}p(H)};N.length>0&&O()},[N]);const E=O=>{const H=h[O.id];if(!H||!O.sub_polls)return null;let G=0,K=0,k=0,W=0;if(Object.values(H).forEach(M=>{G+=M.favor,K+=M.against,k+=M.abstain,W+=M.total}),W===0)return null;const R=Math.max(G,K,k);return G===R&&G>0?"favor":K===R&&K>0?"against":k===R&&k>0?"abstain":null},C=O=>{if(!O)return null;switch(O){case"favor":return i.jsxs(Be,{className:"bg-green-100 text-green-800 border-green-300",children:[i.jsx(qn,{className:"h-3 w-3 mr-1"}),"Passed"]});case"against":return i.jsxs(Be,{className:"bg-red-100 text-red-800 border-red-300",children:[i.jsx(Ui,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"abstain":return i.jsxs(Be,{className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:[i.jsx(hv,{className:"h-3 w-3 mr-1"}),"Abstained"]});default:return null}},T=O=>{f(O),n(!0)},D=O=>{f(O),a(!0)},F=O=>{if(!w.canEditVoting){b({title:"Access Denied",description:"You don't have permission to edit polls",variant:"destructive"});return}f(O),l(!0)},P=O=>{if(!w.canEditVoting){b({title:"Access Denied",description:"You don't have permission to reopen polls",variant:"destructive"});return}f(O),u(!0)},L=async(O,H)=>{if(!w.canDeleteContent){b({title:"Access Denied",description:"You don't have permission to delete polls",variant:"destructive"});return}confirm(H==="completed"?"Are you sure you want to delete this completed poll? This will permanently remove the poll and all its voting results. This action cannot be undone.":"Are you sure you want to delete this poll?")&&await v(O)},A=async O=>{if(!w.canEditVoting){b({title:"Access Denied",description:"You don't have permission to manage polls",variant:"destructive"});return}await _(O,"completed")},I=(O,H="")=>O??H,Q=O=>{O||y(),t(O)};if(m)return i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});const q=g.length===0;return i.jsxs("div",{className:"max-w-5xl mx-auto px-0 space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Voting & Polls"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Participate in decisions and view results."}),i.jsx("p",{className:"text-xs text-blue-700 bg-blue-50 rounded px-2 py-1 mt-2 inline-block",children:"All voting is anonymous. Individual choices are hidden from other members."})]}),w.canCreateVoting&&!w.loading&&i.jsxs(de,{onClick:()=>t(!0),className:"bg-[#8E1616] hover:bg-[#7A1414] text-white",children:[i.jsx(fa,{className:"h-4 w-4 mr-2"})," Create Poll"]})]}),q?i.jsx("div",{className:"text-center text-muted-foreground py-12",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsx(Yi,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"No polls available"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Polls will appear here when they are created by administrators."})]})}):i.jsxs(dl,{defaultValue:"active",className:"space-y-6",children:[i.jsxs(lo,{className:"grid w-full grid-cols-2",children:[i.jsxs(Br,{value:"active",children:["Active (",S.length,")"]}),i.jsxs(Br,{value:"completed",children:["Completed (",N.length,")"]})]}),i.jsx(Ur,{value:"active",className:"space-y-4",children:S.length===0?i.jsx("div",{className:"text-center text-muted-foreground py-8",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsx(qn,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"No active polls"}),i.jsx("p",{className:"text-sm text-gray-500",children:"All polls have been completed or are not yet available."})]})}):i.jsx("div",{className:"space-y-4",children:S.map(O=>{var H,G,K;return i.jsxs(He,{className:"hover:shadow-md transition-shadow border-l-4 border-l-green-500",children:[i.jsx(rt,{className:"pb-3",children:i.jsx("div",{className:"flex items-start justify-between",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs(st,{className:"text-lg flex items-center gap-2 mb-2",children:[i.jsx("span",{className:"font-semibold",children:I(O.title,"Untitled")}),i.jsx(Be,{className:"bg-green-500 text-white text-xs",children:"Active"})]}),O.description&&i.jsx(sn,{className:"text-sm text-gray-600 mt-1",children:I(O.description,"")})]})})}),i.jsxs(Ye,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-muted-foreground",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Tr,{className:"h-4 w-4 text-gray-500"}),i.jsxs("span",{children:["Deadline: ",O.deadline?ht(new Date(O.deadline),"MMM dd, yyyy"):"No deadline"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(lr,{className:"h-4 w-4 text-gray-500"}),i.jsxs("span",{children:[((H=O.stats)==null?void 0:H.voted_count)||0,"/",((G=O.stats)==null?void 0:G.total_voters)||0," voted"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Gt,{className:"h-4 w-4 text-gray-500"}),i.jsxs("span",{children:[((K=O.stats)==null?void 0:K.sub_poll_count)||0," questions"]})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t",children:[O.hasVoted?i.jsxs(de,{disabled:!0,className:"bg-gray-300 text-gray-600 cursor-not-allowed",children:[i.jsx(Vo,{className:"h-4 w-4 mr-2"}),"Voted"]}):i.jsxs(de,{onClick:()=>T(O),className:"bg-green-600 hover:bg-green-700 text-white",children:[i.jsx(Yi,{className:"h-4 w-4 mr-2"}),"Vote Now"]}),i.jsxs(de,{variant:"outline",onClick:()=>D(O),children:[i.jsx(Rr,{className:"h-4 w-4 mr-2"}),"View Results"]}),w.canEditVoting&&i.jsxs(de,{variant:"outline",onClick:()=>F(O),children:[i.jsx(pk,{className:"h-4 w-4 mr-2"}),"Edit"]}),w.canEditVoting&&i.jsxs(de,{variant:"outline",onClick:()=>A(O.id),className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50",children:[i.jsx(Vo,{className:"h-4 w-4 mr-2"}),"Complete"]}),w.canDeleteContent&&i.jsxs(de,{variant:"outline",onClick:()=>L(O.id,O.status),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-300",title:"Delete poll",children:[i.jsx(br,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]},O.id)})})}),i.jsx(Ur,{value:"completed",className:"space-y-4",children:N.length===0?i.jsx("div",{className:"text-center text-muted-foreground py-8",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsx(qn,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"No completed polls"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Completed polls will appear here once voting has finished."})]})}):i.jsx("div",{className:"space-y-4",children:N.map(O=>{const H=E(O),G=C(H);return i.jsxs(He,{className:"hover:shadow-md transition-shadow border-l-4 border-l-gray-400",children:[i.jsx(rt,{className:"pb-3",children:i.jsx("div",{className:"flex items-start justify-between",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs(st,{className:"text-lg flex items-center gap-2 mb-2",children:[i.jsx("span",{className:"font-semibold",children:I(O.title,"Untitled")}),i.jsx(Be,{variant:"secondary",className:"text-xs",children:"Completed"}),G]}),i.jsxs(sn,{className:"text-sm text-gray-600 mt-1",children:["Completed on ",O.deadline?ht(new Date(O.deadline),"MMM dd, yyyy"):"Unknown date"]})]})})}),i.jsx(Ye,{children:i.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t",children:[i.jsxs(de,{variant:"outline",onClick:()=>D(O),children:[i.jsx(Rr,{className:"h-4 w-4 mr-2"}),"View Results"]}),w.canEditVoting&&i.jsxs(de,{variant:"outline",onClick:()=>P(O),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:[i.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Reopen"]}),w.canDeleteContent&&i.jsxs(de,{variant:"outline",onClick:()=>L(O.id,O.status),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-300",title:O.status==="completed"?"Delete completed poll (this will permanently remove all voting results)":"Delete poll",children:[i.jsx(br,{className:"h-4 w-4 mr-2"}),O.status==="completed"?"Delete Poll":"Delete"]})]})})]},O.id)})})})]}),w.canCreateVoting&&i.jsx(TK,{open:e,onOpenChange:Q}),i.jsx(RK,{open:r,onOpenChange:n,poll:d}),i.jsx(VK,{open:s,onOpenChange:a,poll:d}),i.jsx(WK,{open:o,onOpenChange:l,poll:d}),i.jsx(HK,{open:c,onOpenChange:u,poll:d}),w.canCreateVoting&&i.jsx(de,{onClick:()=>t(!0),className:"fixed bottom-8 right-8 z-50 rounded-full shadow-lg bg-[#8E1616] hover:bg-[#7A1414] text-white w-16 h-16 flex items-center justify-center text-3xl",children:i.jsx(fa,{className:"h-8 w-8"})})]})},ZP=()=>{const[e,t]=x.useState(!1),{toast:r}=dt(),{user:n,session:s}=mt();return{createMember:async o=>{t(!0);try{if(console.log("Current user:",n),console.log("Current session:",s),!n||!s)return r({title:"Not authenticated",description:"You must be logged in as an admin to add members.",variant:"destructive"}),{error:"Not authenticated"};const{data:l,error:c}=await fe.functions.invoke("create-member",{body:o});return console.log("Edge function response:",l,c),c||!(l!=null&&l.success)?(r({title:"Creation Failed",description:(c==null?void 0:c.message)||(l==null?void 0:l.error)||"Failed to create member",variant:"destructive"}),{error:(c==null?void 0:c.message)||(l==null?void 0:l.error)}):(r({title:"Member Created",description:"Member added successfully."}),l)}catch(l){return console.error("Error in createMember:",l),r({title:"Creation Failed",description:l.message||"Failed to create member",variant:"destructive"}),{error:l.message}}finally{t(!1)}},isCreating:e}},KK=e=>{const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!e||typeof e!="string")return{isValid:!1,error:"Email is required"};const r=e.trim().toLowerCase();return t.test(r)?r.includes("<script>")||r.includes("javascript:")?{isValid:!1,error:"Invalid email format"}:{isValid:!0,sanitizedValue:r}:{isValid:!1,error:"Invalid email format"}},YK=e=>!e||typeof e!="string"?{isValid:!1,error:"Password is required"}:e.length<8?{isValid:!1,error:"Password must be at least 8 characters long"}:/[A-Za-z]/.test(e)?/[0-9]/.test(e)?{isValid:!0,sanitizedValue:e}:{isValid:!1,error:"Password must contain at least one number"}:{isValid:!1,error:"Password must contain at least one letter"},qK=e=>{if(!e)return{isValid:!0,sanitizedValue:""};if(typeof e!="string")return{isValid:!1,error:"Invalid phone number format"};const t=e.replace(/\s+/g,"").replace(/[^\d+]/g,"");return/^\+?[0-9]{10,15}$/.test(t)?{isValid:!0,sanitizedValue:t}:{isValid:!1,error:"Invalid phone number format"}},NS=(e,t="Name")=>{if(!e||typeof e!="string")return{isValid:!1,error:`${t} is required`};const r=e.trim();return r.length<2?{isValid:!1,error:`${t} must be at least 2 characters long`}:r.length>50?{isValid:!1,error:`${t} must be less than 50 characters`}:r.includes("<script>")||r.includes("javascript:")?{isValid:!1,error:`Invalid ${t.toLowerCase()} format`}:{isValid:!0,sanitizedValue:r}},XK=({open:e,onOpenChange:t,onMemberAdded:r})=>{const{createMember:n,isCreating:s}=ZP(),[a,o]=x.useState({email:"",firstName:"",lastName:"",phone:"",role:"member",notes:"",password:""}),[l,c]=x.useState(!1),[u,d]=x.useState(!1),[f,h]=x.useState(null),[p,g]=x.useState({}),[m,v]=x.useState(!1),_=x.useCallback(()=>{const E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+";let C="";for(let T=0;T<12;T++)C+=E.charAt(Math.floor(Math.random()*E.length));return C},[]),y=x.useCallback(()=>{const E=_();o(C=>({...C,password:E})),c(!0)},[_]),w=x.useCallback(()=>{const E={},C=KK(a.email);C.isValid||(E.email=C.error);const T=NS(a.firstName,"First name");T.isValid||(E.firstName=T.error);const D=NS(a.lastName,"Last name");D.isValid||(E.lastName=D.error);const F=YK(a.password);if(F.isValid||(E.password=F.error),a.phone){const P=qK(a.phone);P.isValid||(E.phone=P.error)}return(!a.role||!["super_admin","admin","member","secretary","treasurer"].includes(a.role))&&(E.role="Please select a valid role"),E},[a]),b=x.useCallback(async E=>{E.preventDefault(),h(null),g({});const C=w();if(Object.keys(C).length>0){g(C);return}v(!0);try{qu.log("Creating new member:",{email:a.email,role:a.role}),await n({email:a.email,firstName:a.firstName,lastName:a.lastName,phone:a.phone||void 0,role:a.role,notes:a.notes||void 0,password:a.password}),o({email:"",firstName:"",lastName:"",phone:"",role:"member",notes:"",password:""}),c(!1),d(!1),g({}),h(null),r==null||r(),t(!1)}catch(T){h(T.message||"Failed to create member. Please try again.")}finally{v(!1)}},[a,w,n,r,t]),S=x.useCallback((E,C)=>{o(T=>({...T,[E]:C})),p[E]&&g(T=>({...T,[E]:""}))},[p]),N=x.useCallback(()=>{o({email:"",firstName:"",lastName:"",phone:"",role:"member",notes:"",password:""}),c(!1),d(!1),g({}),h(null),t(!1)},[t]);return i.jsx(bt,{open:e,onOpenChange:N,children:i.jsxs(xt,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[i.jsxs(vt,{children:[i.jsxs(yt,{className:"flex items-center space-x-2",children:[i.jsx(Ki,{className:"h-5 w-5"}),i.jsx("span",{children:"Add New Member"})]}),i.jsx(Mt,{children:"Add a new bureau member with appropriate role and permissions"})]}),i.jsxs("form",{onSubmit:b,className:"space-y-4",children:[f&&i.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-red-50 border border-red-200 rounded-md",role:"alert",children:[i.jsx(Bs,{className:"h-4 w-4 text-red-500"}),i.jsx("span",{className:"text-sm text-red-700",children:f})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"email",children:"Email Address *"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ja,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(lt,{id:"email",type:"email",value:a.email,onChange:E=>S("email",E.target.value),placeholder:"member@iskcon.org",className:`pl-10 ${p.email?"border-red-500":""}`,required:!0,"aria-invalid":!!p.email,"aria-describedby":p.email?"email-error":void 0})]}),p.email&&i.jsx("div",{id:"email-error",className:"text-red-500 text-xs mt-1",role:"alert",children:p.email})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"firstName",children:"First Name *"}),i.jsx(lt,{id:"firstName",value:a.firstName,onChange:E=>S("firstName",E.target.value),placeholder:"Enter first name",className:p.firstName?"border-red-500":"",required:!0,"aria-invalid":!!p.firstName,"aria-describedby":p.firstName?"firstName-error":void 0}),p.firstName&&i.jsx("div",{id:"firstName-error",className:"text-red-500 text-xs mt-1",role:"alert",children:p.firstName})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"lastName",children:"Last Name *"}),i.jsx(lt,{id:"lastName",value:a.lastName,onChange:E=>S("lastName",E.target.value),placeholder:"Enter last name",className:p.lastName?"border-red-500":"",required:!0,"aria-invalid":!!p.lastName,"aria-describedby":p.lastName?"lastName-error":void 0}),p.lastName&&i.jsx("div",{id:"lastName-error",className:"text-red-500 text-xs mt-1",role:"alert",children:p.lastName})]})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"phone",children:"Phone Number"}),i.jsxs("div",{className:"relative",children:[i.jsx(Pc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(lt,{id:"phone",type:"tel",value:a.phone,onChange:E=>S("phone",E.target.value),placeholder:"+91 98765 43210",className:`pl-10 ${p.phone?"border-red-500":""}`,"aria-invalid":!!p.phone,"aria-describedby":p.phone?"phone-error":void 0})]}),p.phone&&i.jsx("div",{id:"phone-error",className:"text-red-500 text-xs mt-1",role:"alert",children:p.phone})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"role",children:"Role *"}),i.jsxs(ma,{value:a.role,onValueChange:E=>S("role",E),children:[i.jsx(Ys,{className:p.role?"border-red-500":"",children:i.jsx(pa,{placeholder:"Select a role"})}),i.jsxs(qs,{children:[i.jsx(Rt,{value:"member",children:"Member"}),i.jsx(Rt,{value:"secretary",children:"Secretary"}),i.jsx(Rt,{value:"treasurer",children:"Treasurer"}),i.jsx(Rt,{value:"admin",children:"Admin"}),i.jsx(Rt,{value:"super_admin",children:"Super Admin"})]})]}),p.role&&i.jsx("div",{className:"text-red-500 text-xs mt-1",role:"alert",children:p.role})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"password",children:"Password *"}),i.jsxs("div",{className:"relative",children:[i.jsx(lt,{id:"password",type:l?"text":"password",value:a.password,onChange:E=>S("password",E.target.value),placeholder:"Enter password",className:`pr-20 ${p.password?"border-red-500":""}`,required:!0,"aria-invalid":!!p.password,"aria-describedby":p.password?"password-error":void 0}),i.jsxs("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex space-x-1",children:[i.jsx(de,{type:"button",variant:"ghost",size:"sm",onClick:()=>c(!l),className:"h-6 w-6 p-0",children:l?i.jsx(Zh,{className:"h-3 w-3"}):i.jsx(Rr,{className:"h-3 w-3"})}),i.jsx(de,{type:"button",variant:"ghost",size:"sm",onClick:y,className:"h-6 w-6 p-0",children:i.jsx(Rn,{className:"h-3 w-3"})})]})]}),p.password&&i.jsx("div",{id:"password-error",className:"text-red-500 text-xs mt-1",role:"alert",children:p.password}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters with letters and numbers"})]}),i.jsxs("div",{children:[i.jsxs(de,{type:"button",variant:"ghost",onClick:()=>d(!u),className:"text-sm text-gray-600 hover:text-gray-800",children:[u?"Hide":"Add"," Notes"]}),u&&i.jsx(Ks,{value:a.notes,onChange:E=>S("notes",E.target.value),placeholder:"Additional notes about this member...",className:"mt-2",rows:3})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(de,{type:"button",variant:"outline",onClick:N,disabled:m,children:"Cancel"}),i.jsx(de,{type:"submit",disabled:m||s,children:m||s?"Creating...":"Create Member"})]})]})]})})};var n1=["Enter"," "],QK=["ArrowDown","PageUp","Home"],e3=["ArrowUp","PageDown","End"],JK=[...QK,...e3],ZK={ltr:[...n1,"ArrowRight"],rtl:[...n1,"ArrowLeft"]},eY={ltr:["ArrowLeft"],rtl:["ArrowRight"]},$f="Menu",[Hd,tY,rY]=F0($f),[hl,t3]=ns($f,[rY,ao,gp]),Cp=ao(),r3=gp(),[nY,ml]=hl($f),[sY,Bf]=hl($f),n3=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:s,onOpenChange:a,modal:o=!0}=e,l=Cp(t),[c,u]=x.useState(null),d=x.useRef(!1),f=Ht(a),h=jf(s);return x.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),i.jsx(W0,{...l,children:i.jsx(nY,{scope:t,open:r,onOpenChange:f,content:c,onContentChange:u,children:i.jsx(sY,{scope:t,onClose:x.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:h,modal:o,children:n})})})};n3.displayName=$f;var aY="MenuAnchor",Lw=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=Cp(r);return i.jsx(gf,{...s,...n,ref:t})});Lw.displayName=aY;var $w="MenuPortal",[iY,s3]=hl($w,{forceMount:void 0}),a3=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:s}=e,a=ml($w,t);return i.jsx(iY,{scope:t,forceMount:r,children:i.jsx(Mr,{present:r||a.open,children:i.jsx(Gc,{asChild:!0,container:s,children:n})})})};a3.displayName=$w;var ps="MenuContent",[oY,Bw]=hl(ps),i3=x.forwardRef((e,t)=>{const r=s3(ps,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,a=ml(ps,e.__scopeMenu),o=Bf(ps,e.__scopeMenu);return i.jsx(Hd.Provider,{scope:e.__scopeMenu,children:i.jsx(Mr,{present:n||a.open,children:i.jsx(Hd.Slot,{scope:e.__scopeMenu,children:o.modal?i.jsx(lY,{...s,ref:t}):i.jsx(cY,{...s,ref:t})})})})}),lY=x.forwardRef((e,t)=>{const r=ml(ps,e.__scopeMenu),n=x.useRef(null),s=et(t,n);return x.useEffect(()=>{const a=n.current;if(a)return Nf(a)},[]),i.jsx(Uw,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:De(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),cY=x.forwardRef((e,t)=>{const r=ml(ps,e.__scopeMenu);return i.jsx(Uw,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Uw=x.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:p,disableOutsideScroll:g,...m}=e,v=ml(ps,r),_=Bf(ps,r),y=Cp(r),w=r3(r),b=tY(r),[S,N]=x.useState(null),E=x.useRef(null),C=et(t,E,v.onContentChange),T=x.useRef(0),D=x.useRef(""),F=x.useRef(0),P=x.useRef(null),L=x.useRef("right"),A=x.useRef(0),I=g?Ef:x.Fragment,Q=g?{as:da,allowPinchZoom:!0}:void 0,q=H=>{var oe,ce;const G=D.current+H,K=b().filter(me=>!me.disabled),k=document.activeElement,W=(oe=K.find(me=>me.ref.current===k))==null?void 0:oe.textValue,R=K.map(me=>me.textValue),M=_Y(R,G,W),re=(ce=K.find(me=>me.textValue===M))==null?void 0:ce.ref.current;(function me(pe){D.current=pe,window.clearTimeout(T.current),pe!==""&&(T.current=window.setTimeout(()=>me(""),1e3))})(G),re&&setTimeout(()=>re.focus())};x.useEffect(()=>()=>window.clearTimeout(T.current),[]),ip();const O=x.useCallback(H=>{var K,k;return L.current===((K=P.current)==null?void 0:K.side)&&SY(H,(k=P.current)==null?void 0:k.area)},[]);return i.jsx(oY,{scope:r,searchRef:D,onItemEnter:x.useCallback(H=>{O(H)&&H.preventDefault()},[O]),onItemLeave:x.useCallback(H=>{var G;O(H)||((G=E.current)==null||G.focus(),N(null))},[O]),onTriggerLeave:x.useCallback(H=>{O(H)&&H.preventDefault()},[O]),pointerGraceTimerRef:F,onPointerGraceIntentChange:x.useCallback(H=>{P.current=H},[]),children:i.jsx(I,{...Q,children:i.jsx(Sf,{asChild:!0,trapped:s,onMountAutoFocus:De(a,H=>{var G;H.preventDefault(),(G=E.current)==null||G.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(sl,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:p,children:i.jsx(c4,{asChild:!0,...w,dir:_.dir,orientation:"vertical",loop:n,currentTabStopId:S,onCurrentTabStopIdChange:N,onEntryFocus:De(c,H=>{_.isUsingKeyboardRef.current||H.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(H0,{role:"menu","aria-orientation":"vertical","data-state":b3(v.open),"data-radix-menu-content":"",dir:_.dir,...y,...m,ref:C,style:{outline:"none",...m.style},onKeyDown:De(m.onKeyDown,H=>{const K=H.target.closest("[data-radix-menu-content]")===H.currentTarget,k=H.ctrlKey||H.altKey||H.metaKey,W=H.key.length===1;K&&(H.key==="Tab"&&H.preventDefault(),!k&&W&&q(H.key));const R=E.current;if(H.target!==R||!JK.includes(H.key))return;H.preventDefault();const re=b().filter(oe=>!oe.disabled).map(oe=>oe.ref.current);e3.includes(H.key)&&re.reverse(),yY(re)}),onBlur:De(e.onBlur,H=>{H.currentTarget.contains(H.target)||(window.clearTimeout(T.current),D.current="")}),onPointerMove:De(e.onPointerMove,Gd(H=>{const G=H.target,K=A.current!==H.clientX;if(H.currentTarget.contains(G)&&K){const k=H.clientX>A.current?"right":"left";L.current=k,A.current=H.clientX}}))})})})})})})});i3.displayName=ps;var uY="MenuGroup",zw=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return i.jsx(Ge.div,{role:"group",...n,ref:t})});zw.displayName=uY;var dY="MenuLabel",o3=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return i.jsx(Ge.div,{...n,ref:t})});o3.displayName=dY;var t0="MenuItem",jS="menu.itemSelect",Tp=x.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...s}=e,a=x.useRef(null),o=Bf(t0,e.__scopeMenu),l=Bw(t0,e.__scopeMenu),c=et(t,a),u=x.useRef(!1),d=()=>{const f=a.current;if(!r&&f){const h=new CustomEvent(jS,{bubbles:!0,cancelable:!0});f.addEventListener(jS,p=>n==null?void 0:n(p),{once:!0}),cy(f,h),h.defaultPrevented?u.current=!1:o.onClose()}};return i.jsx(l3,{...s,ref:c,disabled:r,onClick:De(e.onClick,d),onPointerDown:f=>{var h;(h=e.onPointerDown)==null||h.call(e,f),u.current=!0},onPointerUp:De(e.onPointerUp,f=>{var h;u.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:De(e.onKeyDown,f=>{const h=l.searchRef.current!=="";r||h&&f.key===" "||n1.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Tp.displayName=t0;var l3=x.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...a}=e,o=Bw(t0,r),l=r3(r),c=x.useRef(null),u=et(t,c),[d,f]=x.useState(!1),[h,p]=x.useState("");return x.useEffect(()=>{const g=c.current;g&&p((g.textContent??"").trim())},[a.children]),i.jsx(Hd.ItemSlot,{scope:r,disabled:n,textValue:s??h,children:i.jsx(u4,{asChild:!0,...l,focusable:!n,children:i.jsx(Ge.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...a,ref:u,onPointerMove:De(e.onPointerMove,Gd(g=>{n?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:De(e.onPointerLeave,Gd(g=>o.onItemLeave(g))),onFocus:De(e.onFocus,()=>f(!0)),onBlur:De(e.onBlur,()=>f(!1))})})})}),fY="MenuCheckboxItem",c3=x.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...s}=e;return i.jsx(m3,{scope:e.__scopeMenu,checked:r,children:i.jsx(Tp,{role:"menuitemcheckbox","aria-checked":r0(r)?"mixed":r,...s,ref:t,"data-state":Ww(r),onSelect:De(s.onSelect,()=>n==null?void 0:n(r0(r)?!0:!r),{checkForDefaultPrevented:!1})})})});c3.displayName=fY;var u3="MenuRadioGroup",[hY,mY]=hl(u3,{value:void 0,onValueChange:()=>{}}),d3=x.forwardRef((e,t)=>{const{value:r,onValueChange:n,...s}=e,a=Ht(n);return i.jsx(hY,{scope:e.__scopeMenu,value:r,onValueChange:a,children:i.jsx(zw,{...s,ref:t})})});d3.displayName=u3;var f3="MenuRadioItem",h3=x.forwardRef((e,t)=>{const{value:r,...n}=e,s=mY(f3,e.__scopeMenu),a=r===s.value;return i.jsx(m3,{scope:e.__scopeMenu,checked:a,children:i.jsx(Tp,{role:"menuitemradio","aria-checked":a,...n,ref:t,"data-state":Ww(a),onSelect:De(n.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,r)},{checkForDefaultPrevented:!1})})})});h3.displayName=f3;var Vw="MenuItemIndicator",[m3,pY]=hl(Vw,{checked:!1}),p3=x.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...s}=e,a=pY(Vw,r);return i.jsx(Mr,{present:n||r0(a.checked)||a.checked===!0,children:i.jsx(Ge.span,{...s,ref:t,"data-state":Ww(a.checked)})})});p3.displayName=Vw;var gY="MenuSeparator",g3=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return i.jsx(Ge.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});g3.displayName=gY;var xY="MenuArrow",x3=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=Cp(r);return i.jsx(G0,{...s,...n,ref:t})});x3.displayName=xY;var vY="MenuSub",[_se,v3]=hl(vY),Iu="MenuSubTrigger",y3=x.forwardRef((e,t)=>{const r=ml(Iu,e.__scopeMenu),n=Bf(Iu,e.__scopeMenu),s=v3(Iu,e.__scopeMenu),a=Bw(Iu,e.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:e.__scopeMenu},d=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>d,[d]),x.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),i.jsx(Lw,{asChild:!0,...u,children:i.jsx(l3,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":b3(r.open),...e,ref:O0(t,s.onTriggerChange),onClick:f=>{var h;(h=e.onClick)==null||h.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:De(e.onPointerMove,Gd(f=>{a.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:De(e.onPointerLeave,Gd(f=>{var p,g;d();const h=(p=r.content)==null?void 0:p.getBoundingClientRect();if(h){const m=(g=r.content)==null?void 0:g.dataset.side,v=m==="right",_=v?-5:5,y=h[v?"left":"right"],w=h[v?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+_,y:f.clientY},{x:y,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x:y,y:h.bottom}],side:m}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:De(e.onKeyDown,f=>{var p;const h=a.searchRef.current!=="";e.disabled||h&&f.key===" "||ZK[n.dir].includes(f.key)&&(r.onOpenChange(!0),(p=r.content)==null||p.focus(),f.preventDefault())})})})});y3.displayName=Iu;var w3="MenuSubContent",_3=x.forwardRef((e,t)=>{const r=s3(ps,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,a=ml(ps,e.__scopeMenu),o=Bf(ps,e.__scopeMenu),l=v3(w3,e.__scopeMenu),c=x.useRef(null),u=et(t,c);return i.jsx(Hd.Provider,{scope:e.__scopeMenu,children:i.jsx(Mr,{present:n||a.open,children:i.jsx(Hd.Slot,{scope:e.__scopeMenu,children:i.jsx(Uw,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:De(e.onFocusOutside,d=>{d.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:De(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:De(e.onKeyDown,d=>{var p;const f=d.currentTarget.contains(d.target),h=eY[o.dir].includes(d.key);f&&h&&(a.onOpenChange(!1),(p=l.trigger)==null||p.focus(),d.preventDefault())})})})})})});_3.displayName=w3;function b3(e){return e?"open":"closed"}function r0(e){return e==="indeterminate"}function Ww(e){return r0(e)?"indeterminate":e?"checked":"unchecked"}function yY(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function wY(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function _Y(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let o=wY(e,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function bY(e,t){const{x:r,y:n}=e;let s=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,u=t[o].x,d=t[o].y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(s=!s)}return s}function SY(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return bY(r,t)}function Gd(e){return t=>t.pointerType==="mouse"?e(t):void 0}var EY=n3,NY=Lw,jY=a3,kY=i3,CY=zw,TY=o3,AY=Tp,PY=c3,DY=d3,RY=h3,MY=p3,OY=g3,FY=x3,IY=y3,LY=_3,Hw="DropdownMenu",[$Y,bse]=ns(Hw,[t3]),_n=t3(),[BY,S3]=$Y(Hw),E3=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,c=_n(t),u=x.useRef(null),[d=!1,f]=Ws({prop:s,defaultProp:a,onChange:o});return i.jsx(BY,{scope:t,triggerId:ms(),triggerRef:u,contentId:ms(),open:d,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(h=>!h),[f]),modal:l,children:i.jsx(EY,{...c,open:d,onOpenChange:f,dir:n,modal:l,children:r})})};E3.displayName=Hw;var N3="DropdownMenuTrigger",j3=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=e,a=S3(N3,r),o=_n(r);return i.jsx(NY,{asChild:!0,...o,children:i.jsx(Ge.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:O0(t,a.triggerRef),onPointerDown:De(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:De(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});j3.displayName=N3;var UY="DropdownMenuPortal",k3=e=>{const{__scopeDropdownMenu:t,...r}=e,n=_n(t);return i.jsx(jY,{...n,...r})};k3.displayName=UY;var C3="DropdownMenuContent",T3=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=S3(C3,r),a=_n(r),o=x.useRef(!1);return i.jsx(kY,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...n,ref:t,onCloseAutoFocus:De(e.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:De(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});T3.displayName=C3;var zY="DropdownMenuGroup",VY=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_n(r);return i.jsx(CY,{...s,...n,ref:t})});VY.displayName=zY;var WY="DropdownMenuLabel",A3=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_n(r);return i.jsx(TY,{...s,...n,ref:t})});A3.displayName=WY;var HY="DropdownMenuItem",P3=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_n(r);return i.jsx(AY,{...s,...n,ref:t})});P3.displayName=HY;var GY="DropdownMenuCheckboxItem",D3=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_n(r);return i.jsx(PY,{...s,...n,ref:t})});D3.displayName=GY;var KY="DropdownMenuRadioGroup",YY=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_n(r);return i.jsx(DY,{...s,...n,ref:t})});YY.displayName=KY;var qY="DropdownMenuRadioItem",R3=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_n(r);return i.jsx(RY,{...s,...n,ref:t})});R3.displayName=qY;var XY="DropdownMenuItemIndicator",M3=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_n(r);return i.jsx(MY,{...s,...n,ref:t})});M3.displayName=XY;var QY="DropdownMenuSeparator",O3=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_n(r);return i.jsx(OY,{...s,...n,ref:t})});O3.displayName=QY;var JY="DropdownMenuArrow",ZY=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_n(r);return i.jsx(FY,{...s,...n,ref:t})});ZY.displayName=JY;var eq="DropdownMenuSubTrigger",F3=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_n(r);return i.jsx(IY,{...s,...n,ref:t})});F3.displayName=eq;var tq="DropdownMenuSubContent",I3=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_n(r);return i.jsx(LY,{...s,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});I3.displayName=tq;var rq=E3,nq=j3,sq=k3,L3=T3,$3=A3,B3=P3,U3=D3,z3=R3,V3=M3,W3=O3,H3=F3,G3=I3;const Kd=rq,Yd=nq,aq=x.forwardRef(({className:e,inset:t,children:r,...n},s)=>i.jsxs(H3,{ref:s,className:Te("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,i.jsx(hy,{className:"ml-auto h-4 w-4"})]}));aq.displayName=H3.displayName;const iq=x.forwardRef(({className:e,...t},r)=>i.jsx(G3,{ref:r,className:Te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));iq.displayName=G3.displayName;const Uc=x.forwardRef(({className:e,sideOffset:t=4,...r},n)=>i.jsx(sq,{children:i.jsx(L3,{ref:n,sideOffset:t,className:Te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Uc.displayName=L3.displayName;const dr=x.forwardRef(({className:e,inset:t,...r},n)=>i.jsx(B3,{ref:n,className:Te("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));dr.displayName=B3.displayName;const oq=x.forwardRef(({className:e,children:t,checked:r,...n},s)=>i.jsxs(U3,{ref:s,className:Te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(V3,{children:i.jsx(Vo,{className:"h-4 w-4"})})}),t]}));oq.displayName=U3.displayName;const lq=x.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(z3,{ref:n,className:Te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(V3,{children:i.jsx(fk,{className:"h-2 w-2 fill-current"})})}),t]}));lq.displayName=z3.displayName;const cq=x.forwardRef(({className:e,inset:t,...r},n)=>i.jsx($3,{ref:n,className:Te("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));cq.displayName=$3.displayName;const n0=x.forwardRef(({className:e,...t},r)=>i.jsx(W3,{ref:r,className:Te("-mx-1 my-1 h-px bg-muted",e),...t}));n0.displayName=W3.displayName;const uq=[{id:"1",action:"Logged in",timestamp:new Date(Date.now()-2*60*60*1e3).toISOString(),type:"login"},{id:"2",action:"Joined meeting",timestamp:new Date(Date.now()-4*60*60*1e3).toISOString(),details:"Monthly Board Meeting",type:"meeting"},{id:"3",action:"Downloaded document",timestamp:new Date(Date.now()-1*24*60*60*1e3).toISOString(),details:"Financial Report Q4.pdf",type:"document"},{id:"4",action:"Voted on poll",timestamp:new Date(Date.now()-2*24*60*60*1e3).toISOString(),details:"Budget Approval 2024",type:"vote"},{id:"5",action:"Logged out",timestamp:new Date(Date.now()-3*24*60*60*1e3).toISOString(),type:"logout"}],K3=({open:e,onOpenChange:t,member:r})=>{const n=o=>{switch(o){case"login":case"logout":return i.jsx(Ki,{className:"h-4 w-4"});case"meeting":return i.jsx(Tr,{className:"h-4 w-4"});case"document":return i.jsx(Ru,{className:"h-4 w-4"});case"vote":return i.jsx(Ru,{className:"h-4 w-4"});default:return i.jsx(Ru,{className:"h-4 w-4"})}},s=o=>{const l={login:"bg-green-100 text-green-800",logout:"bg-gray-100 text-gray-800",meeting:"bg-blue-100 text-blue-800",document:"bg-purple-100 text-purple-800",vote:"bg-orange-100 text-orange-800",other:"bg-gray-100 text-gray-800"};return i.jsx(Be,{className:l[o]||l.other,children:o.charAt(0).toUpperCase()+o.slice(1)})},a=o=>{const l=new Date(o),u=(new Date().getTime()-l.getTime())/(1e3*60*60);return u<24?`${Math.floor(u)}h ago`:`${Math.floor(u/24)}d ago`};return i.jsx(bt,{open:e,onOpenChange:t,children:i.jsxs(xt,{className:"max-w-2xl",children:[i.jsxs(vt,{children:[i.jsxs(yt,{className:"flex items-center space-x-2",children:[i.jsx(Ru,{className:"h-5 w-5"}),i.jsxs("span",{children:["Activity Log - ",r.first_name," ",r.last_name]})]}),i.jsx(Mt,{children:"Recent activity and actions performed by this member"})]}),i.jsx(Mw,{className:"h-96 w-full",children:i.jsx("div",{className:"space-y-4",children:uq.map(o=>i.jsxs("div",{className:"flex items-start space-x-4 p-4 border rounded-lg",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:n(o.type)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:o.action}),s(o.type)]}),o.details&&i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:o.details}),i.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[i.jsx(mr,{className:"h-3 w-3 mr-1"}),a(o.timestamp),i.jsx("span",{className:"mx-2",children:""}),new Date(o.timestamp).toLocaleString()]})]})]},o.id))})})]})})},Gw=()=>{const[e,t]=x.useState([]),[r,n]=x.useState([]),[s,a]=x.useState(!0),{user:o}=mt(),{toast:l}=dt(),{createMember:c,isCreating:u}=ZP(),d=x.useCallback(async()=>{try{a(!0);const{data:S,error:N}=await fe.from("profiles").select("*").order("created_at",{ascending:!1});if(N)throw console.error("Profiles fetch error:",N),N;const{data:E,error:C}=await fe.from("user_roles").select("user_id, role");C&&console.error("Roles fetch error:",C);const{data:T,error:D}=await fe.from("member_invitations").select("*").order("created_at",{ascending:!1});D&&console.error("Invitations fetch error:",D);const F=(S==null?void 0:S.map(I=>{var q,O,H,G,K,k;let Q=(E==null?void 0:E.filter(W=>W.user_id===I.id))||[];return(I.email==="cs@iskconbureau.in"||I.email==="bgd@iskconbureau.in")&&(Q.some(R=>R.role==="super_admin")||(Q=[{user_id:I.id,role:"super_admin"},...Q])),I.email==="admin@iskconbureau.in"&&(Q.some(R=>R.role==="admin")||(Q=[{user_id:I.id,role:"admin"},...Q])),{id:I.id,email:I.email||"",first_name:((q=I.first_name)==null?void 0:q.trim())||"",last_name:((O=I.last_name)==null?void 0:O.trim())||"",phone:I.phone||"",created_at:I.created_at||"",last_sign_in_at:void 0,roles:Q.map(W=>W.role),is_suspended:I.is_suspended||!1,isPending:!1,displayName:(H=I.first_name)!=null&&H.trim()||(G=I.last_name)!=null&&G.trim()?`${((K=I.first_name)==null?void 0:K.trim())||""} ${((k=I.last_name)==null?void 0:k.trim())||""}`.trim():I.email||I.id}}))||[],P=new Set(F.map(I=>I.email)),L=(T||[]).filter(I=>!P.has(I.email)).map(I=>{var Q,q,O,H;return{id:`invite-${I.id}`,email:I.email,first_name:I.first_name||"",last_name:I.last_name||"",phone:I.phone||"",created_at:I.created_at||"",last_sign_in_at:void 0,roles:[I.role],is_suspended:!1,isPending:!0,displayName:(Q=I.first_name)!=null&&Q.trim()||(q=I.last_name)!=null&&q.trim()?`${((O=I.first_name)==null?void 0:O.trim())||""} ${((H=I.last_name)==null?void 0:H.trim())||""}`.trim():I.email||I.id}}),A=[...F,...L].sort((I,Q)=>new Date(Q.created_at).getTime()-new Date(I.created_at).getTime());t(A)}catch(S){console.error("Error fetching members:",S),l({title:"Error",description:"Failed to load members",variant:"destructive"})}finally{a(!1)}},[l]);x.useEffect(()=>{let S,N;return(async()=>{o&&(console.log("Setting up real-time subscriptions..."),await d(),S=fe.channel("profiles-changes").on("postgres_changes",{event:"*",schema:"public",table:"profiles"},async C=>{console.log("Profiles real-time change detected:",C),await d()}).subscribe(C=>{console.log("Profiles subscription status:",C)}),N=fe.channel("user-roles-changes").on("postgres_changes",{event:"*",schema:"public",table:"user_roles"},async C=>{console.log("User roles real-time change detected:",C),await d()}).subscribe(C=>{console.log("User roles subscription status:",C)}))})(),()=>{S&&(console.log("Cleaning up profiles subscription"),fe.removeChannel(S)),N&&(console.log("Cleaning up roles subscription"),fe.removeChannel(N))}},[o,d]);const f=x.useCallback((S,N)=>{console.log("Optimistic update for member:",S,N),t(E=>E.map(C=>C.id===S?{...C,...N}:C))},[]),h=async S=>{const N=await c(S);return N&&(await y("Added new member",`Added ${S.firstName} ${S.lastName} as ${S.role.replace("_"," ")}`),await d()),N},p=async(S,N)=>{try{const E=e.find(D=>D.id===S);if((E==null?void 0:E.email)==="cs@iskconbureau.in"&&N!=="super_admin"){l({title:"Access Denied",description:"Cannot change the role of the system super admin",variant:"destructive"});return}console.log("Updating member role:",{memberId:S,newRole:N}),f(S,{roles:[N]});const{error:C}=await fe.from("user_roles").delete().eq("user_id",S);if(C)throw console.error("Error deleting existing roles:",C),await d(),C;const{error:T}=await fe.from("user_roles").insert({user_id:S,role:N});if(T)throw console.error("Error adding new role:",T),await d(),T;await y("Updated member role",`Changed role to ${N.replace("_"," ")}`),l({title:"Role Updated Successfully",description:`Member role has been changed to ${N.replace("_"," ")}`}),setTimeout(async()=>{await d()},1e3)}catch(E){console.error("Error updating role:",E),l({title:"Role Update Failed",description:E.message||"Failed to update member role",variant:"destructive"})}},g=async S=>{try{const N=e.find(T=>T.id===S);if(!N){l({title:"Delete Failed",description:"Member not found",variant:"destructive"});return}if(N.isPending){const T=S.replace("invite-",""),{error:D}=await fe.from("member_invitations").delete().eq("id",T);if(D){l({title:"Delete Failed",description:D.message,variant:"destructive"});return}l({title:"Invitation Deleted",description:"Pending invitation has been removed."}),await d();return}if(N.email==="cs@iskconbureau.in"){l({title:"Access Denied",description:"Cannot delete the system super admin",variant:"destructive"});return}const{error:E}=await fe.from("user_roles").delete().eq("user_id",S);E&&console.error("Error deleting user roles:",E);const{error:C}=await fe.from("profiles").delete().eq("id",S);if(C)throw console.error("Error deleting profile:",C),C;await y("Deleted member","Removed member from bureau"),l({title:"Member Deleted",description:"Member has been removed successfully"}),await d()}catch(N){console.error("Error deleting member:",N),l({title:"Delete Failed",description:N.message||"Failed to delete member",variant:"destructive"})}},m=async(S,N)=>{try{const E=e.find(T=>T.id===S);if((E==null?void 0:E.email)==="cs@iskconbureau.in"){l({title:"Access Denied",description:"Cannot suspend the system super admin",variant:"destructive"});return}console.log("Suspending member:",{memberId:S,suspend:N});const{error:C}=await fe.from("profiles").update({is_suspended:N}).eq("id",S);if(C)throw C;await y(N?"Suspended member":"Unsuspended member",`Account ${N?"suspended":"reactivated"}`),l({title:N?"Member Suspended":"Member Unsuspended",description:`Account has been ${N?"suspended":"reactivated"} successfully`}),await d()}catch(E){console.error("Error suspending member:",E),l({title:"Update Failed",description:E.message||"Failed to update member status",variant:"destructive"})}},v=async S=>{var N;try{const E=e.find(D=>D.id===S);if(!E){l({title:"Error",description:"Member not found",variant:"destructive"});return}console.log("Sending password reset email via Outlook for member:",S);const{data:C,error:T}=await fe.functions.invoke("send-otp",{body:{phoneNumber:E.email,name:`${E.first_name} ${E.last_name}`,type:"password_reset",userId:o==null?void 0:o.id}});if(T){if(console.error("Error sending password reset email:",T),(N=T.message)!=null&&N.includes("Microsoft account")){l({title:"Microsoft Account Required",description:"Please connect your Microsoft account in Settings to send password reset emails via Outlook.",variant:"destructive"});return}throw T}console.log("Password reset email sent successfully via Outlook:",C),await y("Reset password",`Password reset email sent via Outlook to ${E.first_name} ${E.last_name}`),l({title:"Password Reset Email Sent via Outlook",description:`A password reset email has been sent to ${E.email} through your connected Outlook account. The temporary password is valid for 24 hours.`})}catch(E){console.error("Error sending password reset email:",E),l({title:"Reset Failed",description:E.message||"Failed to send password reset email via Outlook",variant:"destructive"})}},_=()=>{const S=[["Name","Email","Phone","Role","Join Date"],...e.map(T=>[`${T.first_name} ${T.last_name}`,T.email,T.phone||"",T.roles[0]||"member",new Date(T.created_at).toLocaleDateString()])].map(T=>T.join(",")).join(`
`),N=new Blob([S],{type:"text/csv"}),E=window.URL.createObjectURL(N),C=document.createElement("a");C.href=E,C.download="members-export.csv",C.click(),window.URL.revokeObjectURL(E),l({title:"Export Complete",description:"Members list has been exported successfully"})},y=async(S,N)=>{var E,C;if(o)try{console.log("Activity logged:",{user_id:o.id,action:S,details:N,timestamp:new Date().toISOString()});const T={id:Date.now().toString(),user_id:o.id,action:S,timestamp:new Date().toISOString(),user_name:`${((E=o.user_metadata)==null?void 0:E.first_name)||""} ${((C=o.user_metadata)==null?void 0:C.last_name)||""}`.trim()||o.email||"Unknown User"};n(D=>[T,...D].slice(0,10))}catch(T){console.error("Error logging activity:",T)}};return{members:e,activityLogs:r,loading:s||u,addMember:h,updateMemberRole:p,deleteMember:g,suspendMember:m,resetPassword:v,exportMembers:_,fetchMembers:d,forceRefresh:d,logActivity:y,searchMembers:S=>{const N=(C,T)=>{const D=`${C.first_name} ${C.last_name}`.trim().toLowerCase(),F=`${T.first_name} ${T.last_name}`.trim().toLowerCase();return D.localeCompare(F)};if(!S.trim())return[...e].sort(N);const E=S.toLowerCase();return e.filter(C=>`${C.first_name} ${C.last_name}`.toLowerCase().includes(E)||C.email.toLowerCase().includes(E)||C.roles.some(T=>T.toLowerCase().includes(E))||C.phone&&C.phone.includes(S)).sort(N)},updateMemberOptimistically:f,resetMemberPassword:async(S,N)=>{try{const{error:E}=await fe.auth.admin.updateUser(S,{password:N});return E?(l({title:"Password Reset Failed",description:E.message,variant:"destructive"}),!1):(l({title:"Password Reset",description:"Password updated successfully.",variant:"default"}),!0)}catch(E){return l({title:"Password Reset Failed",description:E.message||"Unknown error",variant:"destructive"}),!1}}}},dq=({open:e,onOpenChange:t,member:r})=>{const[n,s]=x.useState(!1),{resetPassword:a,suspendMember:o,exportMembers:l}=Gw(),c=new Date(r.created_at).toLocaleDateString(),u=r.roles[0]||"member",d=async()=>{await a(r.id)},f=async()=>{await o(r.id,!r.is_suspended)},h=()=>{s(!0)},p=()=>{l()};return i.jsxs(i.Fragment,{children:[i.jsx(bt,{open:e,onOpenChange:t,children:i.jsxs(xt,{className:"max-w-2xl",children:[i.jsxs(vt,{children:[i.jsx(yt,{children:"Member Settings"}),i.jsxs(Mt,{children:["Manage settings and information for ",r.first_name," ",r.last_name]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(He,{children:[i.jsx(rt,{children:i.jsxs(st,{className:"flex items-center space-x-2",children:[i.jsx(Ki,{className:"h-5 w-5"}),i.jsx("span",{children:"Member Information"})]})}),i.jsx(Ye,{className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"First Name"}),i.jsx("p",{className:"text-gray-900",children:r.first_name})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Last Name"}),i.jsx("p",{className:"text-gray-900",children:r.last_name})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),i.jsxs("p",{className:"text-gray-900 flex items-center space-x-2",children:[i.jsx(Ja,{className:"h-4 w-4"}),i.jsx("span",{children:r.email})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone"}),i.jsxs("p",{className:"text-gray-900 flex items-center space-x-2",children:[i.jsx(Pc,{className:"h-4 w-4"}),i.jsx("span",{children:r.phone||"Not provided"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Join Date"}),i.jsxs("p",{className:"text-gray-900 flex items-center space-x-2",children:[i.jsx(Tr,{className:"h-4 w-4"}),i.jsx("span",{children:c})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),i.jsxs("p",{className:"text-gray-900 flex items-center space-x-2",children:[i.jsx(Gi,{className:"h-4 w-4"}),i.jsx(Be,{variant:r.is_suspended?"destructive":"secondary",children:r.is_suspended?"Suspended":"Active"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Role"}),i.jsxs("p",{className:"text-gray-900 flex items-center space-x-2",children:[i.jsx(Gi,{className:"h-4 w-4"}),i.jsx(Be,{children:u})]})]})]})})]}),i.jsxs(He,{children:[i.jsxs(rt,{children:[i.jsx(st,{children:"Account Actions"}),i.jsx(sn,{children:"Manage account settings and permissions"})]}),i.jsxs(Ye,{className:"space-y-3",children:[i.jsx(de,{variant:"outline",className:"w-full justify-start",onClick:d,children:"Reset Password"}),i.jsx(de,{variant:"outline",className:"w-full justify-start",onClick:f,children:r.is_suspended?"Unsuspend Account":"Suspend Account"}),i.jsx(de,{variant:"outline",className:"w-full justify-start",onClick:h,children:"View Activity Log"}),i.jsx(de,{variant:"outline",className:"w-full justify-start",onClick:p,children:"Export Data"})]})]})]})]})}),i.jsx(K3,{open:n,onOpenChange:s,member:r})]})},fq=({open:e,onOpenChange:t,member:r})=>{const[n,s]=x.useState(""),[a,o]=x.useState(""),[l,c]=x.useState(!1),{toast:u}=dt(),d=async()=>{if(!n.trim()||!a.trim()){u({title:"Missing Information",description:"Please fill in both subject and message",variant:"destructive"});return}c(!0);try{await new Promise(f=>setTimeout(f,1e3)),u({title:"Message Sent",description:`Message sent to ${r.first_name} ${r.last_name} successfully`}),s(""),o(""),t(!1)}catch{u({title:"Failed to Send",description:"There was an error sending the message",variant:"destructive"})}finally{c(!1)}};return i.jsx(bt,{open:e,onOpenChange:t,children:i.jsxs(xt,{className:"max-w-lg",children:[i.jsxs(vt,{children:[i.jsxs(yt,{className:"flex items-center space-x-2",children:[i.jsx(hk,{className:"h-5 w-5"}),i.jsx("span",{children:"Send Message"})]}),i.jsxs(Mt,{children:["Send a direct message to ",r.first_name," ",r.last_name," (",r.email,")"]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"subject",children:"Subject"}),i.jsx(lt,{id:"subject",placeholder:"Enter message subject",value:n,onChange:f=>s(f.target.value)})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"message",children:"Message"}),i.jsx(Ks,{id:"message",placeholder:"Type your message here...",rows:6,value:a,onChange:f=>o(f.target.value)})]}),i.jsxs("div",{className:"flex space-x-2 pt-4",children:[i.jsxs(de,{onClick:d,disabled:l,className:"flex-1",children:[i.jsx(R6,{className:"h-4 w-4 mr-2"}),l?"Sending...":"Send Message"]}),i.jsx(de,{variant:"outline",onClick:()=>t(!1),disabled:l,children:"Cancel"})]})]})]})})},hq=({open:e,onOpenChange:t,member:r,onMemberUpdated:n,onSetPassword:s})=>{var P,L,A,I;const[a,o]=x.useState(r.first_name),[l,c]=x.useState(r.last_name),[u,d]=x.useState(r.email),[f,h]=x.useState(r.phone||""),[p,g]=x.useState(!1),{toast:m}=dt(),v=oo(),[_,y]=x.useState({firstName:r.first_name||"",lastName:r.last_name||"",email:r.email||"",phone:r.phone||"",password:""}),[w,b]=x.useState(!1);ke.useEffect(()=>{e&&(o(r.first_name),c(r.last_name),d(r.email),h(r.phone||""))},[r,e]);const S=v.isSuperAdmin||v.isAdmin&&r.email!=="cs@iskconbureau.in"||r.id===((P=v.user)==null?void 0:P.id),N=v.isSuperAdmin||r.id===((L=v.user)==null?void 0:L.id),E=v.isSuperAdmin||v.isAdmin||r.id===((A=v.user)==null?void 0:A.id),C=v.isSuperAdmin||v.isAdmin||r.id===((I=v.user)==null?void 0:I.id),T=async()=>{if(!a.trim()||!l.trim()||!u.trim()){m({title:"Validation Error",description:"First name, last name, and email are required",variant:"destructive"});return}if(!S){m({title:"Access Denied",description:"You don't have permission to edit this member",variant:"destructive"});return}g(!0);try{console.log("Updating member profile:",{id:r.id,firstName:a.trim(),lastName:l.trim(),email:u.trim(),phone:f.trim(),canEditEmail:N,canEditPhone:E,canEditName:C});const Q={updated_at:new Date().toISOString()};C&&(Q.first_name=a.trim(),Q.last_name=l.trim()),N&&u!==r.email&&(Q.email=u.trim()),E&&(Q.phone=f.trim()||null),console.log("Update data being sent:",Q);const{error:q}=await fe.from("profiles").update(Q).eq("id",r.id);if(q){if(console.error("Error updating member:",q),q.message.includes("row-level security"))m({title:"Permission Denied",description:"You don't have sufficient permissions to make this update",variant:"destructive"});else throw q;return}console.log("Member profile updated successfully"),m({title:"Success!",description:`${a} ${l}'s information has been updated`,variant:"default"}),t(!1),setTimeout(()=>{n()},500),_.password&&(v.isAdmin||v.isSuperAdmin)&&s&&await s(r.id,_.password)}catch(Q){console.error("Error updating member:",Q),m({title:"Update Failed",description:Q.message||"Failed to update member information",variant:"destructive"})}finally{g(!1)}},D=()=>{o(r.first_name),c(r.last_name),d(r.email),h(r.phone||""),t(!1)};if(!S)return i.jsx(bt,{open:e,onOpenChange:t,children:i.jsxs(xt,{className:"max-w-md",children:[i.jsxs(vt,{children:[i.jsxs(yt,{className:"flex items-center space-x-2",children:[i.jsx(Gi,{className:"h-5 w-5 text-red-500"}),i.jsx("span",{children:"Access Denied"})]}),i.jsx(Mt,{children:"You don't have permission to edit this member's information."})]}),i.jsx("div",{className:"pt-4",children:i.jsx(de,{onClick:()=>t(!1),className:"w-full",children:"Close"})})]})});const F=r.email==="cs@iskconbureau.in";return i.jsx(bt,{open:e,onOpenChange:t,children:i.jsx(xt,{className:"max-w-md bg-white rounded-xl shadow-xl p-0",children:i.jsxs("div",{className:"p-6",children:[i.jsxs(vt,{children:[i.jsxs(yt,{className:"flex items-center space-x-2 text-2xl font-bold mb-1",children:[i.jsx(Ki,{className:"h-6 w-6 text-primary"}),i.jsx("span",{children:"Edit Member Information"}),F&&i.jsx(Gi,{className:"h-4 w-4 text-amber-500"})]}),i.jsxs(Mt,{className:"mb-4 text-gray-600",children:["Update member details.",F&&" This is a protected system account.",!N&&" You can only edit basic information."]})]}),i.jsxs("form",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-2",children:[i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"firstName",children:"First Name *"}),i.jsx(lt,{id:"firstName",value:a,onChange:Q=>o(Q.target.value),placeholder:"Enter first name",required:!0})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"lastName",children:"Last Name *"}),i.jsx(lt,{id:"lastName",value:l,onChange:Q=>c(Q.target.value),placeholder:"Enter last name",required:!0})]})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"email",children:"Email *"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ja,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(lt,{id:"email",value:u,onChange:Q=>d(Q.target.value),placeholder:"Enter email",required:!0,disabled:!N,className:"pl-10"})]})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"phone",children:"Phone Number"}),i.jsxs("div",{className:"relative",children:[i.jsx(Pc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(lt,{id:"phone",value:f,onChange:Q=>h(Q.target.value),placeholder:"Enter phone number",disabled:!E,className:"pl-10"})]})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"password",children:"Set New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(lt,{id:"password",type:w?"text":"password",value:_.password,onChange:Q=>y({..._,password:Q.target.value}),placeholder:"Enter new password",disabled:p}),i.jsx(de,{type:"button",variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs",onClick:()=>b(Q=>!Q),tabIndex:-1,children:w?"Hide":"Show"})]})]})]}),i.jsxs("div",{className:"sticky bottom-0 left-0 bg-white pt-4 pb-2 z-10 flex justify-end gap-2 border-t mt-6",children:[i.jsxs(de,{type:"button",variant:"destructive",onClick:T,disabled:p,className:"flex-1 flex items-center justify-center",children:[i.jsx(py,{className:"h-5 w-5 mr-2"}),"Save Changes"]}),i.jsxs(de,{type:"button",variant:"outline",onClick:D,disabled:p,className:"flex-1 flex items-center justify-center",children:[i.jsx(Za,{className:"h-5 w-5 mr-2"}),"Cancel"]})]})]})})})},mq=df("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Y3=x.forwardRef(({className:e,variant:t,...r},n)=>i.jsx("div",{ref:n,role:"alert",className:Te(mq({variant:t}),e),...r}));Y3.displayName="Alert";const pq=x.forwardRef(({className:e,...t},r)=>i.jsx("h5",{ref:r,className:Te("mb-1 font-medium leading-none tracking-tight",e),...t}));pq.displayName="AlertTitle";const q3=x.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Te("text-sm [&_p]:leading-relaxed",e),...t}));q3.displayName="AlertDescription";const gq=({open:e,onOpenChange:t,targetMember:r,currentSuperAdmin:n,onTransferComplete:s})=>{const[a,o]=x.useState(""),[l,c]=x.useState(!1),{toast:u}=dt(),d=`TRANSFER OWNERSHIP TO ${r.first_name} ${r.last_name}`,f=async()=>{if(a!==d){u({title:"Confirmation Required",description:"Please type the exact confirmation text to proceed",variant:"destructive"});return}c(!0);try{console.log("Transferring ownership from",n.email,"to",r.email),await new Promise(h=>setTimeout(h,2e3)),u({title:"Ownership Transferred Successfully",description:`${r.first_name} ${r.last_name} is now the Super Admin. You will be logged out shortly.`}),o(""),t(!1),s(),setTimeout(()=>{window.location.reload()},3e3)}catch(h){console.error("Error transferring ownership:",h),u({title:"Transfer Failed",description:"Failed to transfer ownership. Please try again.",variant:"destructive"})}finally{c(!1)}};return i.jsx(bt,{open:e,onOpenChange:t,children:i.jsxs(xt,{className:"max-w-md",children:[i.jsxs(vt,{children:[i.jsxs(yt,{className:"flex items-center space-x-2 text-red-600",children:[i.jsx(mv,{className:"h-5 w-5"}),i.jsx("span",{children:"Transfer Ownership"})]}),i.jsx(Mt,{children:"This action will transfer Super Admin privileges to another member"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(Y3,{className:"border-amber-200 bg-amber-50",children:[i.jsx(gy,{className:"h-4 w-4 text-amber-600"}),i.jsxs(q3,{className:"text-amber-800",children:[i.jsx("strong",{children:"Warning:"})," This action cannot be undone. You will lose Super Admin privileges immediately."]})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-semibold mb-2",children:"Transfer Details:"}),i.jsxs("div",{className:"text-sm space-y-1",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"From:"})," ",n.first_name," ",n.last_name," (",n.email,")"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"To:"})," ",r.first_name," ",r.last_name," (",r.email,")"]})]})]}),i.jsxs("div",{children:[i.jsxs(ze,{htmlFor:"confirmation",children:["Type the following to confirm:",i.jsx("code",{className:"bg-gray-200 px-1 rounded text-xs ml-1",children:d})]}),i.jsx(lt,{id:"confirmation",value:a,onChange:h=>o(h.target.value),placeholder:"Type confirmation text here...",className:"mt-2"})]}),i.jsxs("div",{className:"flex space-x-2 pt-4",children:[i.jsxs(de,{onClick:f,disabled:a!==d||l,className:"flex-1 bg-red-600 hover:bg-red-700",children:[i.jsx(mv,{className:"h-4 w-4 mr-2"}),l?"Transferring...":"Transfer Ownership"]}),i.jsx(de,{variant:"outline",onClick:()=>t(!1),disabled:l,children:"Cancel"})]})]})]})})},xq=({member:e,onRoleChange:t,onDeleteMember:r,onSuspendMember:n,onResetPassword:s,onMemberUpdated:a})=>{const[o,l]=x.useState(!1),[c,u]=x.useState(!1),[d,f]=x.useState(!1),[h,p]=x.useState(!1),[g,m]=x.useState(!1),[v,_]=x.useState(0),y=oo(),{user:w}=mt(),b=ll(),[S,N]=x.useState(!1),[E,C]=x.useState(null);ke.useEffect(()=>{const ce=pe=>{console.log("MemberCard received avatar update:",pe.detail),pe.detail.userId===e.id&&_(je=>je+1)},me=pe=>{console.log("MemberCard received profile update:",pe.detail),pe.detail.userId===e.id&&_(je=>je+1)};return window.addEventListener("avatarUpdated",ce),window.addEventListener("profileUpdated",me),()=>{window.removeEventListener("avatarUpdated",ce),window.removeEventListener("profileUpdated",me)}},[e.id]);const T=ce=>{const me={super_admin:"bg-red-500 text-white",admin:"bg-blue-500 text-white",member:"bg-gray-500 text-white"};return i.jsx(Be,{className:me[ce]||"bg-gray-500 text-white",children:ce==="super_admin"?"Super Admin":ce.replace("_"," ")})},F=((ce,me)=>{if(ce==="cs@iskconbureau.in"||ce==="bgd@iskconbureau.in")return"super_admin";const pe=me[0]||"member";return pe==="secretary"||pe==="treasurer"||pe==="super_admin"?"member":pe})(e.email,e.roles),P=new Date(e.created_at).toLocaleDateString(),L=`${e.first_name} ${e.last_name}`.trim()||e.email,A=()=>{var ce,me;return{id:(w==null?void 0:w.id)||"",email:(w==null?void 0:w.email)||"",first_name:((ce=w==null?void 0:w.user_metadata)==null?void 0:ce.first_name)||"",last_name:((me=w==null?void 0:w.user_metadata)==null?void 0:me.last_name)||"",created_at:new Date().toISOString(),roles:["super_admin"]}},I=async()=>{C(null);try{await r(e.id),N(!1)}catch(ce){C((ce==null?void 0:ce.message)||"Failed to delete member.")}},Q=()=>{s&&s(e.id)},q=()=>{a&&a()},O=async ce=>{if(console.log("Role change requested:",{memberId:e.id,newRole:ce,currentRole:F}),ce==="super_admin"&&F!=="super_admin"){m(!0);return}await t(e.id,ce)},H=()=>{q()},G=y.isSuperAdmin&&e.email!=="cs@iskconbureau.in",K=y.isSuperAdmin&&e.email!=="cs@iskconbureau.in",k=!1,W=y.isSuperAdmin&&e.email!=="cs@iskconbureau.in",R=y.isSuperAdmin,M=y.isSuperAdmin&&F!=="super_admin"&&e.email!=="cs@iskconbureau.in",re=e.email==="cs@iskconbureau.in",oe=re;return i.jsxs(i.Fragment,{children:[i.jsx(He,{className:"hover:shadow-md transition-shadow",children:i.jsx(Ye,{className:`${b?"p-4":"p-6"}`,children:i.jsxs("div",{className:`${b?"flex flex-col space-y-4":"flex items-center justify-between"}`,children:[i.jsxs("div",{className:`${b?"flex flex-col space-y-3":"flex items-center space-x-4"}`,children:[i.jsxs("div",{className:`${b?"flex items-center space-x-3":"flex items-center space-x-4"}`,children:[e.isPending&&i.jsx(Be,{className:"bg-yellow-500 text-white mr-2",children:"Pending Invitation"}),i.jsx(Bv,{userName:L,className:`${b?"w-12 h-12":"w-16 h-16"} flex-shrink-0`,refreshTrigger:v,userId:e.id}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsxs("h3",{className:`${b?"text-base":"text-lg"} font-semibold text-gray-900 truncate`,children:[e.first_name," ",e.last_name]}),i.jsxs("div",{className:`${b?"flex flex-col space-y-1":"flex items-center space-x-4"} ${b?"text-xs":"text-sm"} text-gray-500 mt-1`,children:[i.jsxs("span",{className:"flex items-center space-x-1 min-w-0",children:[i.jsx(Ja,{className:"h-4 w-4 flex-shrink-0"}),i.jsx("span",{className:"truncate",children:e.email})]}),e.phone&&i.jsxs("span",{className:"flex items-center space-x-1",children:[i.jsx(Pc,{className:"h-4 w-4 flex-shrink-0"}),i.jsx("span",{children:e.phone})]})]})]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[T(F),i.jsxs(Be,{variant:"outline",className:"text-xs",children:["Joined ",P]}),re&&i.jsx(Be,{className:"bg-gold-500 text-white text-xs",children:"System Admin"}),e.is_suspended&&i.jsxs(Be,{className:"bg-red-100 text-red-800 text-xs",children:[i.jsx(vv,{className:"h-3 w-3 mr-1"}),"Suspended"]}),oe&&i.jsxs(Be,{className:"bg-amber-100 text-amber-800 text-xs",children:[i.jsx(sc,{className:"h-3 w-3 mr-1"}),"Protected"]})]})]}),i.jsxs("div",{className:`${b?"flex flex-col space-y-3 w-full":"text-right space-y-3"}`,children:[i.jsxs("div",{className:`${b?"w-full":""}`,children:[i.jsx("label",{className:`${b?"text-xs":"text-sm"} text-gray-500 block mb-1`,children:"Role"}),i.jsxs(ma,{value:F,onValueChange:O,disabled:!G||oe,children:[i.jsx(Ys,{className:`${b?"w-full h-8":"w-32"}`,"aria-label":"Change Role",children:i.jsx(pa,{})}),i.jsxs(qs,{children:[y.isSuperAdmin&&i.jsx(Rt,{value:"super_admin",children:"Super Admin"}),i.jsx(Rt,{value:"admin",children:"Admin"}),i.jsx(Rt,{value:"member",children:"Member"})]})]}),!G&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:oe?"Protected role":"No permission"})]}),i.jsxs(Kd,{children:[i.jsx(Yd,{asChild:!0,children:i.jsx(de,{variant:"outline",size:"sm",className:`${b?"h-8 w-8 p-0":""}`,"aria-label":"Member Actions",children:i.jsx(kd,{className:"h-4 w-4"})})}),i.jsx(Uc,{children:i.jsxs(i.Fragment,{children:[M&&i.jsxs(dr,{onClick:()=>m(!0),children:[i.jsx(mv,{className:"h-4 w-4 mr-2"})," Transfer Ownership"]}),R&&i.jsxs(dr,{onClick:()=>p(!0),children:[i.jsx(pv,{className:"h-4 w-4 mr-2"})," Edit Member"]}),i.jsxs(dr,{onClick:()=>l(!0),children:[i.jsx(mf,{className:"h-4 w-4 mr-2"})," Member Settings"]}),i.jsxs(dr,{onClick:()=>f(!0),children:[i.jsx(Ru,{className:"h-4 w-4 mr-2"})," View Activity"]}),i.jsxs(dr,{onClick:()=>u(!0),children:[i.jsx(hk,{className:"h-4 w-4 mr-2"})," Message"]}),W&&i.jsxs(dr,{onClick:Q,children:[i.jsx(gv,{className:"h-4 w-4 mr-2"})," Reset Password"]}),k,K&&!oe&&i.jsxs(i.Fragment,{children:[i.jsx(n0,{}),i.jsxs(dr,{className:"text-red-600","aria-label":"Delete Member",onClick:()=>N(!0),children:[i.jsx(br,{className:"h-4 w-4 mr-2"})," Delete Member"]})]})]})})]}),K&&!oe&&i.jsx(Mc,{children:i.jsxs(Pd,{children:[i.jsx(Dd,{asChild:!0,children:i.jsx(de,{variant:"ghost",size:b?"sm":"icon",className:"text-red-600 hover:bg-red-100 ml-2","aria-label":"Delete Member",onClick:()=>N(!0),children:i.jsx(br,{className:"h-5 w-5"})})}),i.jsx(Oc,{children:"Delete Member"})]})})]})]})})}),K&&!oe&&i.jsx(Xy,{open:S,onOpenChange:N,children:i.jsxs(lp,{children:[i.jsxs(cp,{children:[i.jsx(dp,{children:"Delete Member"}),i.jsxs(fp,{children:["Are you sure you want to delete ",e.first_name," ",e.last_name,"? This action cannot be undone and will permanently remove their account and all associated data."]}),E&&i.jsx("div",{className:"text-red-600 text-sm mt-2",role:"alert",children:E})]}),i.jsxs(up,{children:[i.jsx(mp,{onClick:()=>N(!1),children:"Cancel"}),i.jsx(hp,{onClick:I,className:"bg-red-600 hover:bg-red-700",children:"Delete Member"})]})]})}),M&&i.jsx(gq,{open:g,onOpenChange:m,targetMember:e,currentSuperAdmin:A(),onTransferComplete:H}),R&&i.jsx(hq,{open:h,onOpenChange:p,member:e,onMemberUpdated:q}),i.jsx(dq,{open:o,onOpenChange:l,member:e}),i.jsx(fq,{open:c,onOpenChange:u,member:e}),i.jsx(K3,{open:d,onOpenChange:f,member:e})]})};console.log(" Member creation function is available for manual execution");const vq=()=>{const[e,t]=x.useState(""),[r,n]=x.useState(!1),{members:s,loading:a,addMember:o,updateMemberRole:l,deleteMember:c,suspendMember:u,resetPassword:d,searchMembers:f,fetchMembers:h}=Gw(),p=oo(),g=ll(),m=x.useMemo(()=>f(e),[s,e,f]),v=[{name:"Super Admin",description:"Full system access and super administration",permissions:["All Permissions","Manage Super Admins"],memberCount:s.filter(w=>w.roles.includes("super_admin")&&!w.isPending).length},{name:"Admin",description:"Full system access and administration",permissions:["All Permissions except Super Admin Management"],memberCount:s.filter(w=>w.roles.includes("admin")&&!w.isPending).length},{name:"Member",description:"Standard member access",permissions:["Meeting Access","Document View","Voting"],memberCount:s.filter(w=>(w.roles.includes("member")||w.roles.length===0)&&!w.isPending).length}],_=()=>{const w=[["Name","Email","Phone","Role","Join Date"],...s.map(E=>[`${E.first_name||""} ${E.last_name||""}`,E.email,E.phone||"",E.roles[0]||"member",new Date(E.created_at).toLocaleDateString()])].map(E=>E.join(",")).join(`
`),b=new Blob([w],{type:"text/csv"}),S=window.URL.createObjectURL(b),N=document.createElement("a");N.href=S,N.download="members-export.csv",N.click(),window.URL.revokeObjectURL(S)},y=async()=>{console.log("Member updated - triggering immediate data refresh");try{await h(),console.log("Member data refreshed successfully")}catch(w){console.error("Error refreshing member data:",w)}};return a?i.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"w-full max-w-full min-h-0 flex flex-col members-container",children:[i.jsx("div",{className:"w-full mb-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 members-header",children:[i.jsxs("div",{className:"min-w-0 flex-1 members-header-text",children:[i.jsx("h1",{className:`${g?"text-2xl":"text-2xl sm:text-3xl"} font-bold text-foreground mb-1 truncate`,children:"Member Management"}),i.jsx("p",{className:`${g?"text-sm":"text-sm sm:text-base"} text-muted-foreground`,children:"Manage bureau members, roles, and permissions"})]}),i.jsx("div",{className:"flex-shrink-0",children:p.canManageMembers&&i.jsxs(de,{className:`${g?"w-full":"w-full sm:w-auto"} h-10 sm:h-auto`,onClick:()=>n(!0),"aria-label":"Add Member",children:[i.jsx(fa,{className:"h-4 w-4 mr-2"}),i.jsx("span",{className:"whitespace-nowrap",children:"Add Member"})]})})]})}),i.jsx("div",{className:"w-full flex-1 min-h-0",children:i.jsxs(dl,{defaultValue:"members",className:"w-full h-full flex flex-col",children:[i.jsx("div",{className:"w-full mb-6",children:i.jsxs(lo,{className:`w-full grid grid-cols-2 ${g?"h-auto members-tabs-list":"h-10"}`,children:[i.jsx(Br,{value:"members",className:`${g?"text-xs px-2 py-3 flex-1 members-tabs-trigger":"text-xs sm:text-sm"} truncate`,children:g?`Members (${s.filter(w=>!w.isPending).length})`:`Members (${s.filter(w=>!w.isPending).length})`}),i.jsx(Br,{value:"roles",className:`${g?"text-xs px-2 py-3 flex-1 members-tabs-trigger":"text-xs sm:text-sm"} truncate`,children:"Roles & Permissions"})]})}),i.jsxs(Ur,{value:"members",className:"w-full flex-1 min-h-0 mt-0",children:[i.jsx("div",{className:"w-full mb-6",children:i.jsxs("div",{className:`flex ${g?"flex-col members-search-section":"flex-col sm:flex-row"} gap-4`,children:[i.jsx("div",{className:"flex-1 min-w-0",children:i.jsxs("div",{className:"relative",children:[i.jsx(B0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground flex-shrink-0"}),i.jsx(vp,{placeholder:"Search members by name, email, phone, or role...",value:e,onChange:w=>t(w.target.value),className:"pl-10 h-10"})]})}),p.canManageMembers&&i.jsx("div",{className:"flex-shrink-0",children:i.jsxs(de,{variant:"outline",onClick:_,className:`${g?"w-full":"w-full sm:w-auto"} h-10`,"aria-label":"Export Member List",children:[i.jsx(hs,{className:"h-4 w-4 mr-2"}),i.jsx("span",{className:"whitespace-nowrap",children:"Export List"})]})})]})}),i.jsx("div",{className:"w-full",children:m.length===0?i.jsx(He,{className:"w-full",children:i.jsxs(Ye,{className:`${g?"p-4":"p-6 sm:p-8"} text-center`,children:[i.jsx(lr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:`${g?"text-base":"text-lg"} font-medium text-foreground mb-2`,children:e?"No members found":"No members yet"}),i.jsx("p",{className:`${g?"text-xs":"text-sm"} text-muted-foreground mb-4`,children:e?"Try adjusting your search criteria":"Get started by adding your first member"}),!e&&p.canManageMembers&&i.jsxs(de,{onClick:()=>n(!0),className:`${g?"w-full text-sm py-2":"w-full sm:w-auto"}`,"aria-label":"Add Member",children:[i.jsx(fa,{className:"h-4 w-4 mr-2"}),"Add Member"]})]})}):i.jsx("div",{className:"w-full space-y-4 sm:space-y-6",children:m.map(w=>i.jsx(xq,{member:w,onRoleChange:async(b,S)=>{await l(b,S),await y()},onDeleteMember:async b=>{await c(b),await y()},onSuspendMember:async(b,S)=>{u&&(await u(b,S),await y())},onResetPassword:b=>{d&&d(b)},onMemberUpdated:y},w.id))})})]}),i.jsx(Ur,{value:"roles",className:"w-full flex-1 min-h-0 mt-0",children:i.jsx("div",{className:"w-full space-y-4 sm:space-y-6",children:v.map((w,b)=>i.jsxs(He,{className:"w-full hover:shadow-md transition-shadow p-2 sm:p-4",children:[i.jsx(rt,{className:`${g?"p-4 pb-3":"pb-4"}`,children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx(st,{className:`${g?"text-base":"text-lg sm:text-xl"} mb-2 leading-tight`,children:w.name}),i.jsx(sn,{className:`${g?"text-xs":"text-sm"} leading-relaxed`,children:w.description})]}),i.jsx("div",{className:"flex-shrink-0",children:i.jsxs(Be,{className:"bg-primary text-primary-foreground rounded-full px-3 py-1 text-xs",children:[w.memberCount," member",w.memberCount!==1?"s":""]})})]})}),i.jsx(Ye,{className:`${g?"p-4 pt-0":"pt-0"}`,children:i.jsxs("div",{children:[i.jsxs("h4",{className:`font-semibold mb-3 flex items-center ${g?"text-xs":"text-sm"}`,children:[i.jsx(Gi,{className:"h-4 w-4 mr-2 flex-shrink-0"}),"Permissions"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:w.permissions.map((S,N)=>i.jsx(Be,{variant:"secondary",className:"text-xs",children:S},N))})]})})]},b))})})]})}),p.canManageMembers&&i.jsx(XK,{open:r,onOpenChange:n,onMemberAdded:async()=>{n(!1),await y()}})]})})},X3=x.forwardRef(({...e},t)=>i.jsx("nav",{ref:t,"aria-label":"breadcrumb",...e}));X3.displayName="Breadcrumb";const Q3=x.forwardRef(({className:e,...t},r)=>i.jsx("ol",{ref:r,className:Te("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",e),...t}));Q3.displayName="BreadcrumbList";const im=x.forwardRef(({className:e,...t},r)=>i.jsx("li",{ref:r,className:Te("inline-flex items-center gap-1.5",e),...t}));im.displayName="BreadcrumbItem";const s1=x.forwardRef(({asChild:e,className:t,...r},n)=>{const s=e?da:"a";return i.jsx(s,{ref:n,className:Te("transition-colors hover:text-foreground",t),...r})});s1.displayName="BreadcrumbLink";const a1=x.forwardRef(({className:e,...t},r)=>i.jsx("span",{ref:r,role:"link","aria-disabled":"true","aria-current":"page",className:Te("font-normal text-foreground",e),...t}));a1.displayName="BreadcrumbPage";const i1=({children:e,className:t,...r})=>i.jsx("li",{role:"presentation","aria-hidden":"true",className:Te("[&>svg]:size-3.5",t),...r,children:e??i.jsx(hy,{})});i1.displayName="BreadcrumbSeparator";const yq=({folders:e,userProfiles:t,onFolderClick:r,onDeleteFolder:n,canAccessLockedFolders:s=!1,viewMode:a="card"})=>{const o=c=>{const u=t[c];return u?`${u.first_name} ${u.last_name}`:"Unknown User"},l=async(c,u)=>{await n(c)};return e.length===0?null:a==="list"?i.jsxs("div",{className:"mb-4 sm:mb-6",children:[i.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-foreground mb-3 sm:mb-4 flex items-center",children:[i.jsx(hh,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2 text-blue-500"}),"Folders (",e.length,")"]}),i.jsx("div",{className:"space-y-1",children:e.map(c=>i.jsxs("div",{className:"bg-card border rounded-lg p-3 hover:bg-muted/30 transition-colors cursor-pointer group relative flex items-center justify-between",onClick:()=>r(c.id),children:[i.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[c.is_locked?i.jsx(sc,{className:"h-5 w-5 text-red-500 flex-shrink-0"}):i.jsx(hh,{className:"h-5 w-5 text-blue-500 flex-shrink-0"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:`font-medium truncate text-sm ${c.is_locked?"text-red-700":""}`,children:c.name}),c.is_locked&&i.jsx(Be,{variant:"destructive",className:"text-xs",children:"LOCKED"})]}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Modified ",ht(new Date(c.updated_at),"MMM dd, yyyy"),"  Created by ",o(c.created_by)]})]})]}),s&&i.jsx("div",{onClick:u=>u.stopPropagation(),children:i.jsxs(Kd,{children:[i.jsx(Yd,{asChild:!0,children:i.jsx(de,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(kd,{className:"h-4 w-4"})})}),i.jsx(Uc,{align:"end",className:"w-40",children:i.jsxs(dr,{className:"text-red-600 focus:text-red-600",onClick:()=>l(c.id,c.name),children:[i.jsx(br,{className:"h-4 w-4 mr-2"}),"Delete"]})})]})})]},`folder-${c.id}`))})]}):i.jsxs("div",{className:"mb-4 sm:mb-6",children:[i.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-foreground mb-3 sm:mb-4 flex items-center",children:[i.jsx(hh,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2 text-blue-500"}),"Folders (",e.length,")"]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-4",children:e.map(c=>i.jsxs("div",{className:"bg-card border rounded-lg p-3 sm:p-4 hover:bg-muted/30 transition-colors cursor-pointer group",onClick:()=>r(c.id),children:[i.jsxs("div",{className:"flex items-start justify-between mb-2 sm:mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[c.is_locked?i.jsx(sc,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-500 flex-shrink-0"}):i.jsx(hh,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-500 flex-shrink-0"}),i.jsx("span",{className:`font-medium truncate text-sm sm:text-base ${c.is_locked?"text-red-700":""}`,children:c.name})]}),s&&i.jsx("div",{onClick:u=>u.stopPropagation(),children:i.jsxs(Kd,{children:[i.jsx(Yd,{asChild:!0,children:i.jsx(de,{variant:"ghost",size:"sm",className:"h-7 w-7 sm:h-8 sm:w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(kd,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),i.jsx(Uc,{align:"end",className:"w-40",children:i.jsxs(dr,{className:"text-red-600 focus:text-red-600",onClick:()=>l(c.id,c.name),children:[i.jsx(br,{className:"h-4 w-4 mr-2"}),"Delete"]})})]})})]}),c.is_locked&&i.jsx(Be,{variant:"destructive",className:"text-xs mb-2",children:"LOCKED"}),i.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[i.jsxs("div",{children:["Modified: ",ht(new Date(c.updated_at),"MMM dd, yyyy")]}),i.jsxs("div",{className:"truncate",children:["Created by: ",o(c.created_by)]})]})]},`folder-${c.id}`))})]})},wq=({isOpen:e,documentName:t,folders:r,currentFolderId:n,onClose:s,onMove:a,onCopy:o})=>{const[l,c]=x.useState(null),[u,d]=x.useState("move"),[f,h]=x.useState(!1);ke.useEffect(()=>{c(null),d("move")},[e]);const p=async()=>{h(!0),u==="move"?await a(l):await o(l),h(!1),s()};return i.jsx(bt,{open:e,onOpenChange:s,children:i.jsxs(xt,{children:[i.jsxs(vt,{children:[i.jsx(yt,{children:u==="move"?"Move Document":"Copy Document"}),i.jsxs(Mt,{children:["Select a folder to ",u,' "',t,'" into.']})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"targetFolder",children:"Target Folder"}),i.jsxs(ma,{value:l||"root",onValueChange:g=>c(g==="root"?null:g),children:[i.jsx(Ys,{children:i.jsx(pa,{placeholder:"Select folder"})}),i.jsxs(qs,{children:[i.jsx(Rt,{value:"root",children:"Root (No parent)"}),r.map(g=>i.jsx(Rt,{value:g.id,children:g.name},g.id))]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(de,{variant:u==="move"?"default":"outline",onClick:()=>d("move"),disabled:u==="move",children:"Move"}),i.jsx(de,{variant:u==="copy"?"default":"outline",onClick:()=>d("copy"),disabled:u==="copy",children:"Copy"})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx(de,{variant:"outline",onClick:s,disabled:f,children:"Cancel"}),i.jsx(de,{onClick:p,disabled:f,children:u==="move"?"Move":"Copy"})]})]})]})})},_q=({documents:e,userProfiles:t,currentUserId:r,canDeleteDocument:n,onViewDocument:s,onDownloadDocument:a,onToggleImportant:o,onRenameDocument:l,onCopyDocument:c,onDeleteDocument:u,onMoveDocument:d,onCopyToFolder:f,onDragStart:h,folders:p,viewMode:g="card",selectedIds:m=[],onSelectionChange:v})=>{const[_,y]=x.useState(null),[w,b]=x.useState(!1),[S,N]=x.useState(null),E=e.length>0&&e.every(G=>m.includes(G.id)),C=m.length>0&&!E,T=()=>{E?v==null||v([]):v==null||v(e.map(G=>G.id))},D=G=>{const K=m.includes(G)?m.filter(k=>k!==G):[...m,G];v==null||v(K)},F=G=>{const K=t[G];return K?`${K.first_name} ${K.last_name}`:"Unknown User"},P=G=>{if(G===null)return"N/A";const K=["Bytes","KB","MB","GB"],k=Math.floor(Math.log(G)/Math.log(1024));return Math.round(G/Math.pow(1024,k)*100)/100+" "+K[k]},L=G=>{y(G),h(G)},A=()=>{y(null)},I=(G,K)=>{K.target.closest("button")||K.target.closest('[role="menu"]')||s(G)},Q=G=>{N(G),b(!0)},q=()=>{b(!1),N(null)},O=async G=>{S&&await d(S.id,G)},H=async G=>{S&&await f(S.id,G)};return e.length===0?null:g==="list"?i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[i.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-foreground flex items-center",children:[i.jsx(Gt,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2 text-gray-500"}),"Documents (",e.length,")"]}),e.length>0&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ma,{checked:E,indeterminate:C,onCheckedChange:T,"aria-label":"Select all documents"}),i.jsx("span",{className:"text-sm text-muted-foreground",children:m.length>0&&`${m.length} selected`})]})]}),i.jsx("div",{className:"space-y-1",children:e.map(G=>{var K;return i.jsxs("div",{draggable:!0,onDragStart:()=>L(G.id),onDragEnd:A,onClick:k=>I(G,k),className:`bg-card border rounded-lg p-3 hover:bg-muted/30 transition-colors cursor-pointer group relative flex items-center justify-between ${_===G.id?"opacity-50":""}`,children:[i.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[i.jsx(Ma,{checked:m.includes(G.id),onCheckedChange:()=>D(G.id),"aria-label":`Select ${G.name}`,onClick:k=>k.stopPropagation()}),i.jsx(Gt,{className:"h-5 w-5 text-gray-500 flex-shrink-0"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"font-medium truncate text-sm",children:G.name}),G.is_important&&i.jsx(xv,{className:"h-3 w-3 text-yellow-500 fill-current flex-shrink-0"})]}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[((K=G.mime_type)==null?void 0:K.split("/")[1])||"Unknown","  ",P(G.file_size),"  Modified ",ht(new Date(G.updated_at),"MMM dd, yyyy"),"  by ",F(G.uploaded_by)]})]})]}),i.jsx("div",{className:"absolute top-2 right-2 z-10",onClick:k=>k.stopPropagation(),children:i.jsxs(Kd,{children:[i.jsx(Yd,{asChild:!0,children:i.jsx(de,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 opacity-70 hover:opacity-100 transition-opacity",children:i.jsx(kd,{className:"h-4 w-4"})})}),i.jsxs(Uc,{align:"end",className:"w-40",children:[i.jsxs(dr,{onClick:()=>s(G),children:[i.jsx(Rr,{className:"h-4 w-4 mr-2"}),"View"]}),n(G)&&i.jsxs(i.Fragment,{children:[i.jsxs(dr,{onClick:()=>l(G),children:[i.jsx(pv,{className:"h-4 w-4 mr-2"}),"Rename"]}),i.jsxs(dr,{onClick:()=>c(G.id),children:[i.jsx(Pm,{className:"h-4 w-4 mr-2"}),"Duplicate File"]}),i.jsxs(dr,{onClick:()=>Q(G),children:[i.jsx(Ab,{className:"h-4 w-4 mr-2"}),"Move/Copy to Folder"]})]}),i.jsx(n0,{}),n(G)&&i.jsxs(dr,{onClick:()=>u(G.id,G.name),children:[i.jsx(br,{className:"h-4 w-4 mr-2 text-red-600"}),i.jsx("span",{className:"text-red-600",children:"Delete"})]})]})]})})]},G.id)})})]}):i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[i.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-foreground flex items-center",children:[i.jsx(Gt,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2 text-gray-500"}),"Documents (",e.length,")"]}),e.length>0&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ma,{checked:E,indeterminate:C,onCheckedChange:T,"aria-label":"Select all documents"}),i.jsx("span",{className:"text-sm text-muted-foreground",children:m.length>0&&`${m.length} selected`})]})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-4",children:e.map(G=>{var K;return i.jsxs("div",{draggable:!0,onDragStart:()=>L(G.id),onDragEnd:A,onClick:k=>I(G,k),className:`bg-card border rounded-lg p-3 sm:p-4 hover:bg-muted/30 transition-colors cursor-pointer group relative ${_===G.id?"opacity-50":""}`,children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ma,{checked:m.includes(G.id),onCheckedChange:()=>D(G.id),"aria-label":`Select ${G.name}`,onClick:k=>k.stopPropagation()}),G.is_important&&i.jsx(xv,{className:"h-4 w-4 text-yellow-500 fill-current"})]})}),i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Gt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-gray-500 flex-shrink-0"}),i.jsx("span",{className:"font-medium truncate text-sm sm:text-base",title:G.name,children:G.name})]}),i.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[i.jsxs("div",{children:["Type: ",((K=G.mime_type)==null?void 0:K.split("/")[1])||"Unknown"]}),i.jsxs("div",{children:["Size: ",P(G.file_size)]}),i.jsxs("div",{children:["Modified: ",ht(new Date(G.updated_at),"MMM dd, yyyy")]}),i.jsxs("div",{className:"truncate",children:["Uploaded by: ",F(G.uploaded_by)]})]}),i.jsx("div",{className:"absolute top-2 right-2 z-10",onClick:k=>k.stopPropagation(),children:i.jsxs(Kd,{children:[i.jsx(Yd,{asChild:!0,children:i.jsx(de,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 opacity-70 hover:opacity-100 transition-opacity",children:i.jsx(kd,{className:"h-4 w-4"})})}),i.jsxs(Uc,{align:"end",className:"w-40",children:[i.jsxs(dr,{onClick:()=>s(G),children:[i.jsx(Rr,{className:"h-4 w-4 mr-2"}),"View"]}),n(G)&&i.jsxs(i.Fragment,{children:[i.jsxs(dr,{onClick:()=>l(G),children:[i.jsx(pv,{className:"h-4 w-4 mr-2"}),"Rename"]}),i.jsxs(dr,{onClick:()=>c(G.id),children:[i.jsx(Pm,{className:"h-4 w-4 mr-2"}),"Duplicate File"]}),i.jsxs(dr,{onClick:()=>Q(G),children:[i.jsx(Ab,{className:"h-4 w-4 mr-2"}),"Move/Copy to Folder"]})]}),i.jsx(n0,{}),n(G)&&i.jsxs(dr,{onClick:()=>u(G.id,G.name),children:[i.jsx(br,{className:"h-4 w-4 mr-2 text-red-600"}),i.jsx("span",{className:"text-red-600",children:"Delete"})]})]})]})})]},G.id)})}),i.jsx(wq,{isOpen:w,documentName:(S==null?void 0:S.name)||"",folders:p,currentFolderId:(S==null?void 0:S.folder_id)||null,onClose:q,onMove:O,onCopy:H})]})},bq=({isOpen:e,onClose:t,onUpload:r,currentFolderId:n})=>{const[s,a]=x.useState(null),{toast:o}=dt(),l=d=>{var h;const f=(h=d.target.files)==null?void 0:h[0];f&&a(f)},c=async()=>{if(!s){o({title:"No File Selected",description:"Please select a file to upload",variant:"destructive"});return}await r(s,n||void 0),a(null),t()},u=d=>{const f=["Bytes","KB","MB","GB"],h=Math.floor(Math.log(d)/Math.log(1024));return Math.round(d/Math.pow(1024,h)*100)/100+" "+f[h]};return i.jsx(bt,{open:e,onOpenChange:t,children:i.jsxs(xt,{children:[i.jsxs(vt,{children:[i.jsx(yt,{children:"Upload New Document"}),i.jsxs(Mt,{children:["Select a file to upload to the document repository",n&&" (will be uploaded to current folder)"]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"file",children:"Select File"}),i.jsx(lt,{id:"file",type:"file",onChange:l,accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.jpg,.jpeg,.png"}),s&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Selected: ",s.name," (",u(s.size),")"]})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx(de,{variant:"outline",onClick:t,children:"Cancel"}),i.jsxs(de,{onClick:c,disabled:!s,children:[i.jsx(xy,{className:"h-4 w-4 mr-2"}),"Upload"]})]})]})]})})},Sq=({isOpen:e,document:t,onClose:r,onRename:n})=>{const[s,a]=x.useState("");ke.useEffect(()=>{t&&a(t.name)},[t]);const o=async()=>{s.trim()&&(await n(s),r())};return i.jsx(bt,{open:e,onOpenChange:r,children:i.jsxs(xt,{children:[i.jsxs(vt,{children:[i.jsx(yt,{children:"Rename Document"}),i.jsx(Mt,{children:"Enter a new name for the document"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"newName",children:"Document Name"}),i.jsx(lt,{id:"newName",value:s,onChange:l=>a(l.target.value),placeholder:"Enter new document name"})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx(de,{variant:"outline",onClick:r,children:"Cancel"}),i.jsx(de,{onClick:o,disabled:!s.trim(),children:"Rename"})]})]})]})})},kS=({isOpen:e,onClose:t,inline:r=!1})=>{const[n,s]=x.useState([]),[a,o]=x.useState(!1),[l,c]=x.useState([]),{toast:u}=dt(),d=n.length>0&&n.every(S=>l.includes(S.id)),f=l.length>0&&!d,h=()=>{c(d?[]:n.map(S=>S.id))},p=S=>{c(N=>N.includes(S)?N.filter(E=>E!==S):[...N,S])},g=async()=>{o(!0);try{const{data:S,error:N}=await fe.from("recycle_bin").select("*").order("deleted_at",{ascending:!1});if(N)throw N;s((S||[]).map(E=>({...E,is_important:E.is_important||!1,is_hidden:E.is_hidden||!1})))}catch(S){console.error("Error fetching trash items:",S),u({title:"Error",description:"Failed to load trash items",variant:"destructive"})}finally{o(!1)}},m=async S=>{try{const{error:N}=await fe.rpc("restore_from_recycle_bin",{_recycle_bin_id:S});if(N)throw N;u({title:"Success",description:"Item restored successfully"}),g()}catch(N){console.error("Error restoring item:",N),u({title:"Error",description:"Failed to restore item",variant:"destructive"})}},v=async S=>{if(confirm("Are you sure you want to permanently delete this item? This action cannot be undone."))try{const{error:N}=await fe.from("recycle_bin").delete().eq("id",S);if(N)throw N;u({title:"Success",description:"Item permanently deleted"}),g()}catch(N){console.error("Error permanently deleting item:",N),u({title:"Error",description:"Failed to permanently delete item",variant:"destructive"})}},_=async()=>{if(l.length!==0)try{for(const S of l)await fe.rpc("restore_from_recycle_bin",{_recycle_bin_id:S});c([]),u({title:"Success",description:`${l.length} item(s) restored successfully`}),g()}catch(S){console.error("Error restoring items:",S),u({title:"Error",description:"Failed to restore items",variant:"destructive"})}},y=async()=>{if(l.length!==0&&confirm(`Are you sure you want to permanently delete ${l.length} item(s)? This action cannot be undone.`))try{for(const S of l)await fe.from("recycle_bin").delete().eq("id",S);c([]),u({title:"Success",description:`${l.length} item(s) permanently deleted`}),g()}catch(S){console.error("Error deleting items:",S),u({title:"Error",description:"Failed to delete items",variant:"destructive"})}},w=S=>{if(!S)return"Unknown";const N=["Bytes","KB","MB","GB"],E=Math.floor(Math.log(S)/Math.log(1024));return Math.round(S/Math.pow(1024,E)*100)/100+" "+N[E]};x.useEffect(()=>{e&&g()},[e]);const b=i.jsxs(i.Fragment,{children:[!r&&i.jsxs(vt,{children:[i.jsxs(yt,{className:"flex items-center gap-2",children:[i.jsx(br,{className:"h-5 w-5"}),"Trash"]}),i.jsx(Mt,{children:"Items in trash will be permanently deleted after 30 days"})]}),a?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):n.length===0?i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx(br,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),i.jsx("p",{className:"text-lg font-medium",children:"Trash is empty"}),i.jsx("p",{className:"text-sm mt-2",children:"Deleted documents will appear here"})]}):i.jsxs("div",{className:"space-y-4",children:[l.length>0&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[l.length," item(s) selected"]}),i.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[i.jsxs(de,{variant:"outline",size:"sm",onClick:_,className:"text-green-600 hover:bg-green-100",children:[i.jsx(gv,{className:"h-4 w-4 mr-1"}),"Restore All"]}),i.jsxs(de,{variant:"destructive",size:"sm",onClick:y,children:[i.jsx(br,{className:"h-4 w-4 mr-1"}),"Delete All"]})]})]}),i.jsxs(kf,{children:[i.jsx(Cf,{children:i.jsxs(Ka,{children:[i.jsx(nr,{className:"w-[50px]",children:i.jsx(Ma,{checked:d,indeterminate:f,onCheckedChange:h,"aria-label":"Select all items"})}),i.jsx(nr,{children:"Name"}),i.jsx(nr,{children:"Size"}),i.jsx(nr,{children:"Deleted"}),i.jsx(nr,{children:"Auto-delete"}),i.jsx(nr,{children:"Actions"})]})}),i.jsx(Tf,{children:n.map(S=>i.jsxs(Ka,{children:[i.jsx(sr,{children:i.jsx(Ma,{checked:l.includes(S.id),onCheckedChange:()=>p(S.id),"aria-label":`Select ${S.name}`})}),i.jsx(sr,{children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"font-medium",children:S.name}),S.is_important&&i.jsx(Be,{variant:"secondary",className:"text-xs",children:"Important"})]})}),i.jsx(sr,{children:w(S.file_size)}),i.jsx(sr,{children:ht(new Date(S.deleted_at),"MMM dd, yyyy")}),i.jsx(sr,{children:ht(new Date(S.permanent_delete_at),"MMM dd, yyyy")}),i.jsx(sr,{children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(de,{size:"sm",variant:"outline",onClick:()=>m(S.id),children:[i.jsx(gv,{className:"h-4 w-4 mr-1"}),"Restore"]}),i.jsxs(de,{size:"sm",variant:"destructive",onClick:()=>v(S.id),children:[i.jsx(br,{className:"h-4 w-4 mr-1"}),"Delete"]})]})})]},S.id))})]})]})]});return r?b:i.jsx(bt,{open:e,onOpenChange:t,children:i.jsx(xt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:b})})};function Ah(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var J3={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(r){e.exports=r()})(function(){return function r(n,s,a){function o(u,d){if(!s[u]){if(!n[u]){var f=typeof Ah=="function"&&Ah;if(!d&&f)return f(u,!0);if(l)return l(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var p=s[u]={exports:{}};n[u][0].call(p.exports,function(g){var m=n[u][1][g];return o(m||g)},p,p.exports,r,n,s,a)}return s[u].exports}for(var l=typeof Ah=="function"&&Ah,c=0;c<a.length;c++)o(a[c]);return o}({1:[function(r,n,s){var a=r("./utils"),o=r("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(c){for(var u,d,f,h,p,g,m,v=[],_=0,y=c.length,w=y,b=a.getTypeOf(c)!=="string";_<c.length;)w=y-_,f=b?(u=c[_++],d=_<y?c[_++]:0,_<y?c[_++]:0):(u=c.charCodeAt(_++),d=_<y?c.charCodeAt(_++):0,_<y?c.charCodeAt(_++):0),h=u>>2,p=(3&u)<<4|d>>4,g=1<w?(15&d)<<2|f>>6:64,m=2<w?63&f:64,v.push(l.charAt(h)+l.charAt(p)+l.charAt(g)+l.charAt(m));return v.join("")},s.decode=function(c){var u,d,f,h,p,g,m=0,v=0,_="data:";if(c.substr(0,_.length)===_)throw new Error("Invalid base64 input, it looks like a data url.");var y,w=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===l.charAt(64)&&w--,c.charAt(c.length-2)===l.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=o.uint8array?new Uint8Array(0|w):new Array(0|w);m<c.length;)u=l.indexOf(c.charAt(m++))<<2|(h=l.indexOf(c.charAt(m++)))>>4,d=(15&h)<<4|(p=l.indexOf(c.charAt(m++)))>>2,f=(3&p)<<6|(g=l.indexOf(c.charAt(m++))),y[v++]=u,p!==64&&(y[v++]=d),g!==64&&(y[v++]=f);return y}},{"./support":30,"./utils":32}],2:[function(r,n,s){var a=r("./external"),o=r("./stream/DataWorker"),l=r("./stream/Crc32Probe"),c=r("./stream/DataLengthProbe");function u(d,f,h,p,g){this.compressedSize=d,this.uncompressedSize=f,this.crc32=h,this.compression=p,this.compressedContent=g}u.prototype={getContentWorker:function(){var d=new o(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),f=this;return d.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,f,h){return d.pipe(new l).pipe(new c("uncompressedSize")).pipe(f.compressWorker(h)).pipe(new c("compressedSize")).withStreamInfo("compression",f)},n.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,s){var a=r("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},s.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,s){var a=r("./utils"),o=function(){for(var l,c=[],u=0;u<256;u++){l=u;for(var d=0;d<8;d++)l=1&l?3988292384^l>>>1:l>>>1;c[u]=l}return c}();n.exports=function(l,c){return l!==void 0&&l.length?a.getTypeOf(l)!=="string"?function(u,d,f,h){var p=o,g=h+f;u^=-1;for(var m=h;m<g;m++)u=u>>>8^p[255&(u^d[m])];return-1^u}(0|c,l,l.length,0):function(u,d,f,h){var p=o,g=h+f;u^=-1;for(var m=h;m<g;m++)u=u>>>8^p[255&(u^d.charCodeAt(m))];return-1^u}(0|c,l,l.length,0):0}},{"./utils":32}],5:[function(r,n,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(r,n,s){var a=null;a=typeof Promise<"u"?Promise:r("lie"),n.exports={Promise:a}},{lie:37}],7:[function(r,n,s){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=r("pako"),l=r("./utils"),c=r("./stream/GenericWorker"),u=a?"uint8array":"array";function d(f,h){c.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=h,this.meta={}}s.magic="\b\0",l.inherits(d,c),d.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(u,f.data),!1)},d.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(h){f.push({data:h,meta:f.meta})}},s.compressWorker=function(f){return new d("Deflate",f)},s.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,s){function a(p,g){var m,v="";for(m=0;m<g;m++)v+=String.fromCharCode(255&p),p>>>=8;return v}function o(p,g,m,v,_,y){var w,b,S=p.file,N=p.compression,E=y!==u.utf8encode,C=l.transformTo("string",y(S.name)),T=l.transformTo("string",u.utf8encode(S.name)),D=S.comment,F=l.transformTo("string",y(D)),P=l.transformTo("string",u.utf8encode(D)),L=T.length!==S.name.length,A=P.length!==D.length,I="",Q="",q="",O=S.dir,H=S.date,G={crc32:0,compressedSize:0,uncompressedSize:0};g&&!m||(G.crc32=p.crc32,G.compressedSize=p.compressedSize,G.uncompressedSize=p.uncompressedSize);var K=0;g&&(K|=8),E||!L&&!A||(K|=2048);var k=0,W=0;O&&(k|=16),_==="UNIX"?(W=798,k|=function(M,re){var oe=M;return M||(oe=re?16893:33204),(65535&oe)<<16}(S.unixPermissions,O)):(W=20,k|=function(M){return 63&(M||0)}(S.dosPermissions)),w=H.getUTCHours(),w<<=6,w|=H.getUTCMinutes(),w<<=5,w|=H.getUTCSeconds()/2,b=H.getUTCFullYear()-1980,b<<=4,b|=H.getUTCMonth()+1,b<<=5,b|=H.getUTCDate(),L&&(Q=a(1,1)+a(d(C),4)+T,I+="up"+a(Q.length,2)+Q),A&&(q=a(1,1)+a(d(F),4)+P,I+="uc"+a(q.length,2)+q);var R="";return R+=`
\0`,R+=a(K,2),R+=N.magic,R+=a(w,2),R+=a(b,2),R+=a(G.crc32,4),R+=a(G.compressedSize,4),R+=a(G.uncompressedSize,4),R+=a(C.length,2),R+=a(I.length,2),{fileRecord:f.LOCAL_FILE_HEADER+R+C+I,dirRecord:f.CENTRAL_FILE_HEADER+a(W,2)+R+a(F.length,2)+"\0\0\0\0"+a(k,4)+a(v,4)+C+I+F}}var l=r("../utils"),c=r("../stream/GenericWorker"),u=r("../utf8"),d=r("../crc32"),f=r("../signature");function h(p,g,m,v){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=m,this.encodeFileName=v,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(h,c),h.prototype.push=function(p){var g=p.meta.percent||0,m=this.entriesCount,v=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,c.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:m?(g+100*(m-v-1))/m:100}}))},h.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var g=this.streamFiles&&!p.file.dir;if(g){var m=o(p,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(p){this.accumulate=!1;var g=this.streamFiles&&!p.file.dir,m=o(p,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),g)this.push({data:function(v){return f.DATA_DESCRIPTOR+a(v.crc32,4)+a(v.compressedSize,4)+a(v.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var p=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var m=this.bytesWritten-p,v=function(_,y,w,b,S){var N=l.transformTo("string",S(b));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(_,2)+a(_,2)+a(y,4)+a(w,4)+a(N.length,2)+N}(this.dirRecords.length,m,p,this.zipComment,this.encodeFileName);this.push({data:v,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(p){this._sources.push(p);var g=this;return p.on("data",function(m){g.processChunk(m)}),p.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),p.on("error",function(m){g.error(m)}),this},h.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(p){var g=this._sources;if(!c.prototype.error.call(this,p))return!1;for(var m=0;m<g.length;m++)try{g[m].error(p)}catch{}return!0},h.prototype.lock=function(){c.prototype.lock.call(this);for(var p=this._sources,g=0;g<p.length;g++)p[g].lock()},n.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,s){var a=r("../compressions"),o=r("./ZipFileWorker");s.generateWorker=function(l,c,u){var d=new o(c.streamFiles,u,c.platform,c.encodeFileName),f=0;try{l.forEach(function(h,p){f++;var g=function(y,w){var b=y||w,S=a[b];if(!S)throw new Error(b+" is not a valid compression method !");return S}(p.options.compression,c.compression),m=p.options.compressionOptions||c.compressionOptions||{},v=p.dir,_=p.date;p._compressWorker(g,m).withStreamInfo("file",{name:h,dir:v,date:_,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(d)}),d.entriesCount=f}catch(h){d.error(h)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,s){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new a;for(var l in this)typeof this[l]!="function"&&(o[l]=this[l]);return o}}(a.prototype=r("./object")).loadAsync=r("./load"),a.support=r("./support"),a.defaults=r("./defaults"),a.version="3.10.1",a.loadAsync=function(o,l){return new a().loadAsync(o,l)},a.external=r("./external"),n.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,s){var a=r("./utils"),o=r("./external"),l=r("./utf8"),c=r("./zipEntries"),u=r("./stream/Crc32Probe"),d=r("./nodejsUtils");function f(h){return new o.Promise(function(p,g){var m=h.decompressed.getContentWorker().pipe(new u);m.on("error",function(v){g(v)}).on("end",function(){m.streamInfo.crc32!==h.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}n.exports=function(h,p){var g=this;return p=a.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),d.isNode&&d.isStream(h)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",h,!0,p.optimizedBinaryString,p.base64).then(function(m){var v=new c(p);return v.load(m),v}).then(function(m){var v=[o.Promise.resolve(m)],_=m.files;if(p.checkCRC32)for(var y=0;y<_.length;y++)v.push(f(_[y]));return o.Promise.all(v)}).then(function(m){for(var v=m.shift(),_=v.files,y=0;y<_.length;y++){var w=_[y],b=w.fileNameStr,S=a.resolve(w.fileNameStr);g.file(S,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:p.createFolders}),w.dir||(g.file(S).unsafeOriginalName=b)}return v.zipComment.length&&(g.comment=v.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,s){var a=r("../utils"),o=r("../stream/GenericWorker");function l(c,u){o.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(u)}a.inherits(l,o),l.prototype._bindStream=function(c){var u=this;(this._stream=c).pause(),c.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},l.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,s){var a=r("readable-stream").Readable;function o(l,c,u){a.call(this,c),this._helper=l;var d=this;l.on("data",function(f,h){d.push(f)||d._helper.pause(),u&&u(h)}).on("error",function(f){d.emit("error",f)}).on("end",function(){d.push(null)})}r("../utils").inherits(o,a),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(r,n,s){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,o);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,o)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var o=new Buffer(a);return o.fill(0),o},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(r,n,s){function a(S,N,E){var C,T=l.getTypeOf(N),D=l.extend(E||{},d);D.date=D.date||new Date,D.compression!==null&&(D.compression=D.compression.toUpperCase()),typeof D.unixPermissions=="string"&&(D.unixPermissions=parseInt(D.unixPermissions,8)),D.unixPermissions&&16384&D.unixPermissions&&(D.dir=!0),D.dosPermissions&&16&D.dosPermissions&&(D.dir=!0),D.dir&&(S=_(S)),D.createFolders&&(C=v(S))&&y.call(this,C,!0);var F=T==="string"&&D.binary===!1&&D.base64===!1;E&&E.binary!==void 0||(D.binary=!F),(N instanceof f&&N.uncompressedSize===0||D.dir||!N||N.length===0)&&(D.base64=!1,D.binary=!0,N="",D.compression="STORE",T="string");var P=null;P=N instanceof f||N instanceof c?N:g.isNode&&g.isStream(N)?new m(S,N):l.prepareContent(S,N,D.binary,D.optimizedBinaryString,D.base64);var L=new h(S,P,D);this.files[S]=L}var o=r("./utf8"),l=r("./utils"),c=r("./stream/GenericWorker"),u=r("./stream/StreamHelper"),d=r("./defaults"),f=r("./compressedObject"),h=r("./zipObject"),p=r("./generate"),g=r("./nodejsUtils"),m=r("./nodejs/NodejsStreamInputAdapter"),v=function(S){S.slice(-1)==="/"&&(S=S.substring(0,S.length-1));var N=S.lastIndexOf("/");return 0<N?S.substring(0,N):""},_=function(S){return S.slice(-1)!=="/"&&(S+="/"),S},y=function(S,N){return N=N!==void 0?N:d.createFolders,S=_(S),this.files[S]||a.call(this,S,null,{dir:!0,createFolders:N}),this.files[S]};function w(S){return Object.prototype.toString.call(S)==="[object RegExp]"}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(S){var N,E,C;for(N in this.files)C=this.files[N],(E=N.slice(this.root.length,N.length))&&N.slice(0,this.root.length)===this.root&&S(E,C)},filter:function(S){var N=[];return this.forEach(function(E,C){S(E,C)&&N.push(C)}),N},file:function(S,N,E){if(arguments.length!==1)return S=this.root+S,a.call(this,S,N,E),this;if(w(S)){var C=S;return this.filter(function(D,F){return!F.dir&&C.test(D)})}var T=this.files[this.root+S];return T&&!T.dir?T:null},folder:function(S){if(!S)return this;if(w(S))return this.filter(function(T,D){return D.dir&&S.test(T)});var N=this.root+S,E=y.call(this,N),C=this.clone();return C.root=E.name,C},remove:function(S){S=this.root+S;var N=this.files[S];if(N||(S.slice(-1)!=="/"&&(S+="/"),N=this.files[S]),N&&!N.dir)delete this.files[S];else for(var E=this.filter(function(T,D){return D.name.slice(0,S.length)===S}),C=0;C<E.length;C++)delete this.files[E[C].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(S){var N,E={};try{if((E=l.extend(S||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=E.type.toLowerCase(),E.compression=E.compression.toUpperCase(),E.type==="binarystring"&&(E.type="string"),!E.type)throw new Error("No output type specified.");l.checkSupport(E.type),E.platform!=="darwin"&&E.platform!=="freebsd"&&E.platform!=="linux"&&E.platform!=="sunos"||(E.platform="UNIX"),E.platform==="win32"&&(E.platform="DOS");var C=E.comment||this.comment||"";N=p.generateWorker(this,E,C)}catch(T){(N=new c("error")).error(T)}return new u(N,E.type||"string",E.mimeType)},generateAsync:function(S,N){return this.generateInternalStream(S).accumulate(N)},generateNodeStream:function(S,N){return(S=S||{}).type||(S.type="nodebuffer"),this.generateInternalStream(S).toNodejsStream(N)}};n.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,s){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,s){var a=r("./DataReader");function o(l){a.call(this,l);for(var c=0;c<this.data.length;c++)l[c]=255&l[c]}r("../utils").inherits(o,a),o.prototype.byteAt=function(l){return this.data[this.zero+l]},o.prototype.lastIndexOfSignature=function(l){for(var c=l.charCodeAt(0),u=l.charCodeAt(1),d=l.charCodeAt(2),f=l.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===c&&this.data[h+1]===u&&this.data[h+2]===d&&this.data[h+3]===f)return h-this.zero;return-1},o.prototype.readAndCheckSignature=function(l){var c=l.charCodeAt(0),u=l.charCodeAt(1),d=l.charCodeAt(2),f=l.charCodeAt(3),h=this.readData(4);return c===h[0]&&u===h[1]&&d===h[2]&&f===h[3]},o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(r,n,s){var a=r("../utils");function o(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var c,u=0;for(this.checkOffset(l),c=this.index+l-1;c>=this.index;c--)u=(u<<8)+this.byteAt(c);return this.index+=l,u},readString:function(l){return a.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},n.exports=o},{"../utils":32}],19:[function(r,n,s){var a=r("./Uint8ArrayReader");function o(l){a.call(this,l)}r("../utils").inherits(o,a),o.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,s){var a=r("./DataReader");function o(l){a.call(this,l)}r("../utils").inherits(o,a),o.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},o.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},o.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},o.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(r,n,s){var a=r("./ArrayReader");function o(l){a.call(this,l)}r("../utils").inherits(o,a),o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,s){var a=r("../utils"),o=r("../support"),l=r("./ArrayReader"),c=r("./StringReader"),u=r("./NodeBufferReader"),d=r("./Uint8ArrayReader");n.exports=function(f){var h=a.getTypeOf(f);return a.checkSupport(h),h!=="string"||o.uint8array?h==="nodebuffer"?new u(f):o.uint8array?new d(a.transformTo("uint8array",f)):new l(a.transformTo("array",f)):new c(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,s){var a=r("./GenericWorker"),o=r("../utils");function l(c){a.call(this,"ConvertWorker to "+c),this.destType=c}o.inherits(l,a),l.prototype.processChunk=function(c){this.push({data:o.transformTo(this.destType,c.data),meta:c.meta})},n.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,s){var a=r("./GenericWorker"),o=r("../crc32");function l(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(l,a),l.prototype.processChunk=function(c){this.streamInfo.crc32=o(c.data,this.streamInfo.crc32||0),this.push(c)},n.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,s){var a=r("../utils"),o=r("./GenericWorker");function l(c){o.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}a.inherits(l,o),l.prototype.processChunk=function(c){if(c){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+c.data.length}o.prototype.processChunk.call(this,c)},n.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,s){var a=r("../utils"),o=r("./GenericWorker");function l(c){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=a.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}a.inherits(l,o),l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,u);break;case"uint8array":c=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":c=this.data.slice(this.index,u)}return this.index=u,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,s){function a(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,l){return this._listeners[o].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,l){if(this._listeners[o])for(var c=0;c<this._listeners[o].length;c++)this._listeners[o][c].call(this,l)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var l=this;return o.on("data",function(c){l.processChunk(c)}),o.on("end",function(){l.end()}),o.on("error",function(c){l.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,l){return this.extraStreamInfo[o]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=a},{}],29:[function(r,n,s){var a=r("../utils"),o=r("./ConvertWorker"),l=r("./GenericWorker"),c=r("../base64"),u=r("../support"),d=r("../external"),f=null;if(u.nodestream)try{f=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(g,m){return new d.Promise(function(v,_){var y=[],w=g._internalType,b=g._outputType,S=g._mimeType;g.on("data",function(N,E){y.push(N),m&&m(E)}).on("error",function(N){y=[],_(N)}).on("end",function(){try{var N=function(E,C,T){switch(E){case"blob":return a.newBlob(a.transformTo("arraybuffer",C),T);case"base64":return c.encode(C);default:return a.transformTo(E,C)}}(b,function(E,C){var T,D=0,F=null,P=0;for(T=0;T<C.length;T++)P+=C[T].length;switch(E){case"string":return C.join("");case"array":return Array.prototype.concat.apply([],C);case"uint8array":for(F=new Uint8Array(P),T=0;T<C.length;T++)F.set(C[T],D),D+=C[T].length;return F;case"nodebuffer":return Buffer.concat(C);default:throw new Error("concat : unsupported type '"+E+"'")}}(w,y),S);v(N)}catch(E){_(E)}y=[]}).resume()})}function p(g,m,v){var _=m;switch(m){case"blob":case"arraybuffer":_="uint8array";break;case"base64":_="string"}try{this._internalType=_,this._outputType=m,this._mimeType=v,a.checkSupport(_),this._worker=g.pipe(new o(_)),g.lock()}catch(y){this._worker=new l("error"),this._worker.error(y)}}p.prototype={accumulate:function(g){return h(this,g)},on:function(g,m){var v=this;return g==="data"?this._worker.on(g,function(_){m.call(v,_.data,_.meta)}):this._worker.on(g,function(){a.delay(m,arguments,v)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},g)}},n.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var a=new ArrayBuffer(0);try{s.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(a),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!r("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,s){for(var a=r("./utils"),o=r("./support"),l=r("./nodejsUtils"),c=r("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function f(){c.call(this,"utf-8 decode"),this.leftOver=null}function h(){c.call(this,"utf-8 encode")}s.utf8encode=function(p){return o.nodebuffer?l.newBufferFrom(p,"utf-8"):function(g){var m,v,_,y,w,b=g.length,S=0;for(y=0;y<b;y++)(64512&(v=g.charCodeAt(y)))==55296&&y+1<b&&(64512&(_=g.charCodeAt(y+1)))==56320&&(v=65536+(v-55296<<10)+(_-56320),y++),S+=v<128?1:v<2048?2:v<65536?3:4;for(m=o.uint8array?new Uint8Array(S):new Array(S),y=w=0;w<S;y++)(64512&(v=g.charCodeAt(y)))==55296&&y+1<b&&(64512&(_=g.charCodeAt(y+1)))==56320&&(v=65536+(v-55296<<10)+(_-56320),y++),v<128?m[w++]=v:(v<2048?m[w++]=192|v>>>6:(v<65536?m[w++]=224|v>>>12:(m[w++]=240|v>>>18,m[w++]=128|v>>>12&63),m[w++]=128|v>>>6&63),m[w++]=128|63&v);return m}(p)},s.utf8decode=function(p){return o.nodebuffer?a.transformTo("nodebuffer",p).toString("utf-8"):function(g){var m,v,_,y,w=g.length,b=new Array(2*w);for(m=v=0;m<w;)if((_=g[m++])<128)b[v++]=_;else if(4<(y=u[_]))b[v++]=65533,m+=y-1;else{for(_&=y===2?31:y===3?15:7;1<y&&m<w;)_=_<<6|63&g[m++],y--;1<y?b[v++]=65533:_<65536?b[v++]=_:(_-=65536,b[v++]=55296|_>>10&1023,b[v++]=56320|1023&_)}return b.length!==v&&(b.subarray?b=b.subarray(0,v):b.length=v),a.applyFromCharCode(b)}(p=a.transformTo(o.uint8array?"uint8array":"array",p))},a.inherits(f,c),f.prototype.processChunk=function(p){var g=a.transformTo(o.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var m=g;(g=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),g.set(m,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var v=function(y,w){var b;for((w=w||y.length)>y.length&&(w=y.length),b=w-1;0<=b&&(192&y[b])==128;)b--;return b<0||b===0?w:b+u[y[b]]>w?b:w}(g),_=g;v!==g.length&&(o.uint8array?(_=g.subarray(0,v),this.leftOver=g.subarray(v,g.length)):(_=g.slice(0,v),this.leftOver=g.slice(v,g.length))),this.push({data:s.utf8decode(_),meta:p.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=f,a.inherits(h,c),h.prototype.processChunk=function(p){this.push({data:s.utf8encode(p.data),meta:p.meta})},s.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,s){var a=r("./support"),o=r("./base64"),l=r("./nodejsUtils"),c=r("./external");function u(m){return m}function d(m,v){for(var _=0;_<m.length;++_)v[_]=255&m.charCodeAt(_);return v}r("setimmediate"),s.newBlob=function(m,v){s.checkSupport("blob");try{return new Blob([m],{type:v})}catch{try{var _=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return _.append(m),_.getBlob(v)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(m,v,_){var y=[],w=0,b=m.length;if(b<=_)return String.fromCharCode.apply(null,m);for(;w<b;)v==="array"||v==="nodebuffer"?y.push(String.fromCharCode.apply(null,m.slice(w,Math.min(w+_,b)))):y.push(String.fromCharCode.apply(null,m.subarray(w,Math.min(w+_,b)))),w+=_;return y.join("")},stringifyByChar:function(m){for(var v="",_=0;_<m.length;_++)v+=String.fromCharCode(m[_]);return v},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function h(m){var v=65536,_=s.getTypeOf(m),y=!0;if(_==="uint8array"?y=f.applyCanBeUsed.uint8array:_==="nodebuffer"&&(y=f.applyCanBeUsed.nodebuffer),y)for(;1<v;)try{return f.stringifyByChunk(m,_,v)}catch{v=Math.floor(v/2)}return f.stringifyByChar(m)}function p(m,v){for(var _=0;_<m.length;_++)v[_]=m[_];return v}s.applyFromCharCode=h;var g={};g.string={string:u,array:function(m){return d(m,new Array(m.length))},arraybuffer:function(m){return g.string.uint8array(m).buffer},uint8array:function(m){return d(m,new Uint8Array(m.length))},nodebuffer:function(m){return d(m,l.allocBuffer(m.length))}},g.array={string:h,array:u,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return l.newBufferFrom(m)}},g.arraybuffer={string:function(m){return h(new Uint8Array(m))},array:function(m){return p(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:u,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return l.newBufferFrom(new Uint8Array(m))}},g.uint8array={string:h,array:function(m){return p(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:u,nodebuffer:function(m){return l.newBufferFrom(m)}},g.nodebuffer={string:h,array:function(m){return p(m,new Array(m.length))},arraybuffer:function(m){return g.nodebuffer.uint8array(m).buffer},uint8array:function(m){return p(m,new Uint8Array(m.length))},nodebuffer:u},s.transformTo=function(m,v){if(v=v||"",!m)return v;s.checkSupport(m);var _=s.getTypeOf(v);return g[_][m](v)},s.resolve=function(m){for(var v=m.split("/"),_=[],y=0;y<v.length;y++){var w=v[y];w==="."||w===""&&y!==0&&y!==v.length-1||(w===".."?_.pop():_.push(w))}return _.join("/")},s.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":a.nodebuffer&&l.isBuffer(m)?"nodebuffer":a.uint8array&&m instanceof Uint8Array?"uint8array":a.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(m){if(!a[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(m){var v,_,y="";for(_=0;_<(m||"").length;_++)y+="\\x"+((v=m.charCodeAt(_))<16?"0":"")+v.toString(16).toUpperCase();return y},s.delay=function(m,v,_){setImmediate(function(){m.apply(_||null,v||[])})},s.inherits=function(m,v){function _(){}_.prototype=v.prototype,m.prototype=new _},s.extend=function(){var m,v,_={};for(m=0;m<arguments.length;m++)for(v in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],v)&&_[v]===void 0&&(_[v]=arguments[m][v]);return _},s.prepareContent=function(m,v,_,y,w){return c.Promise.resolve(v).then(function(b){return a.blob&&(b instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(b))!==-1)&&typeof FileReader<"u"?new c.Promise(function(S,N){var E=new FileReader;E.onload=function(C){S(C.target.result)},E.onerror=function(C){N(C.target.error)},E.readAsArrayBuffer(b)}):b}).then(function(b){var S=s.getTypeOf(b);return S?(S==="arraybuffer"?b=s.transformTo("uint8array",b):S==="string"&&(w?b=o.decode(b):_&&y!==!0&&(b=function(N){return d(N,a.uint8array?new Uint8Array(N.length):new Array(N.length))}(b))),b):c.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,s){var a=r("./reader/readerFor"),o=r("./utils"),l=r("./signature"),c=r("./zipEntry"),u=r("./support");function d(f){this.files=[],this.loadOptions=f}d.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(h)+", expected "+o.pretty(f)+")")}},isSignature:function(f,h){var p=this.reader.index;this.reader.setIndex(f);var g=this.reader.readString(4)===h;return this.reader.setIndex(p),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),h=u.uint8array?"uint8array":"array",p=o.transformTo(h,f);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,h,p,g=this.zip64EndOfCentralSize-44;0<g;)f=this.reader.readInt(2),h=this.reader.readInt(4),p=this.reader.readData(h),this.zip64ExtensibleData[f]={id:f,length:h,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,h;for(f=0;f<this.files.length;f++)h=this.files[f],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(f=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var h=f;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var g=h-p;if(0<g)this.isSignature(h,l.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(f){this.reader=a(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,s){var a=r("./reader/readerFor"),o=r("./utils"),l=r("./compressedObject"),c=r("./crc32"),u=r("./utf8"),d=r("./compressions"),f=r("./support");function h(p,g){this.options=p,this.loadOptions=g}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var g,m;if(p.skip(22),this.fileNameLength=p.readInt(2),m=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=function(v){for(var _ in d)if(Object.prototype.hasOwnProperty.call(d,_)&&d[_].magic===v)return d[_];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,g,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var g=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(g),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=a(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var g,m,v,_=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<_;)g=p.readInt(2),m=p.readInt(2),v=p.readData(m),this.extraFields[g]={id:g,length:m,value:v};p.setIndex(_)},handleUTF8:function(){var p=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var m=o.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var v=this.findExtraFieldUnicodeComment();if(v!==null)this.fileCommentStr=v;else{var _=o.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(_)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var g=a(p.value);return g.readInt(1)!==1||c(this.fileName)!==g.readInt(4)?null:u.utf8decode(g.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var g=a(p.value);return g.readInt(1)!==1||c(this.fileComment)!==g.readInt(4)?null:u.utf8decode(g.readData(p.length-5))}return null}},n.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,s){function a(g,m,v){this.name=g,this.dir=v.dir,this.date=v.date,this.comment=v.comment,this.unixPermissions=v.unixPermissions,this.dosPermissions=v.dosPermissions,this._data=m,this._dataBinary=v.binary,this.options={compression:v.compression,compressionOptions:v.compressionOptions}}var o=r("./stream/StreamHelper"),l=r("./stream/DataWorker"),c=r("./utf8"),u=r("./compressedObject"),d=r("./stream/GenericWorker");a.prototype={internalStream:function(g){var m=null,v="string";try{if(!g)throw new Error("No output type specified.");var _=(v=g.toLowerCase())==="string"||v==="text";v!=="binarystring"&&v!=="text"||(v="string"),m=this._decompressWorker();var y=!this._dataBinary;y&&!_&&(m=m.pipe(new c.Utf8EncodeWorker)),!y&&_&&(m=m.pipe(new c.Utf8DecodeWorker))}catch(w){(m=new d("error")).error(w)}return new o(m,v,"")},async:function(g,m){return this.internalStream(g).accumulate(m)},nodeStream:function(g,m){return this.internalStream(g||"nodebuffer").toNodejsStream(m)},_compressWorker:function(g,m){if(this._data instanceof u&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var v=this._decompressWorker();return this._dataBinary||(v=v.pipe(new c.Utf8EncodeWorker)),u.createWorkerFrom(v,g,m)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new l(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<f.length;p++)a.prototype[f[p]]=h;n.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,s){(function(a){var o,l,c=a.MutationObserver||a.WebKitMutationObserver;if(c){var u=0,d=new c(g),f=a.document.createTextNode("");d.observe(f,{characterData:!0}),o=function(){f.data=u=++u%2}}else if(a.setImmediate||a.MessageChannel===void 0)o="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var m=a.document.createElement("script");m.onreadystatechange=function(){g(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},a.document.documentElement.appendChild(m)}:function(){setTimeout(g,0)};else{var h=new a.MessageChannel;h.port1.onmessage=g,o=function(){h.port2.postMessage(0)}}var p=[];function g(){var m,v;l=!0;for(var _=p.length;_;){for(v=p,p=[],m=-1;++m<_;)v[m]();_=p.length}l=!1}n.exports=function(m){p.push(m)!==1||l||o()}}).call(this,typeof nn<"u"?nn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,s){var a=r("immediate");function o(){}var l={},c=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function f(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,_!==o&&m(this,_)}function h(_,y,w){this.promise=_,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function p(_,y,w){a(function(){var b;try{b=y(w)}catch(S){return l.reject(_,S)}b===_?l.reject(_,new TypeError("Cannot resolve promise with itself")):l.resolve(_,b)})}function g(_){var y=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof y=="function")return function(){y.apply(_,arguments)}}function m(_,y){var w=!1;function b(E){w||(w=!0,l.reject(_,E))}function S(E){w||(w=!0,l.resolve(_,E))}var N=v(function(){y(S,b)});N.status==="error"&&b(N.value)}function v(_,y){var w={};try{w.value=_(y),w.status="success"}catch(b){w.status="error",w.value=b}return w}(n.exports=f).prototype.finally=function(_){if(typeof _!="function")return this;var y=this.constructor;return this.then(function(w){return y.resolve(_()).then(function(){return w})},function(w){return y.resolve(_()).then(function(){throw w})})},f.prototype.catch=function(_){return this.then(null,_)},f.prototype.then=function(_,y){if(typeof _!="function"&&this.state===u||typeof y!="function"&&this.state===c)return this;var w=new this.constructor(o);return this.state!==d?p(w,this.state===u?_:y,this.outcome):this.queue.push(new h(w,_,y)),w},h.prototype.callFulfilled=function(_){l.resolve(this.promise,_)},h.prototype.otherCallFulfilled=function(_){p(this.promise,this.onFulfilled,_)},h.prototype.callRejected=function(_){l.reject(this.promise,_)},h.prototype.otherCallRejected=function(_){p(this.promise,this.onRejected,_)},l.resolve=function(_,y){var w=v(g,y);if(w.status==="error")return l.reject(_,w.value);var b=w.value;if(b)m(_,b);else{_.state=u,_.outcome=y;for(var S=-1,N=_.queue.length;++S<N;)_.queue[S].callFulfilled(y)}return _},l.reject=function(_,y){_.state=c,_.outcome=y;for(var w=-1,b=_.queue.length;++w<b;)_.queue[w].callRejected(y);return _},f.resolve=function(_){return _ instanceof this?_:l.resolve(new this(o),_)},f.reject=function(_){var y=new this(o);return l.reject(y,_)},f.all=function(_){var y=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=_.length,b=!1;if(!w)return this.resolve([]);for(var S=new Array(w),N=0,E=-1,C=new this(o);++E<w;)T(_[E],E);return C;function T(D,F){y.resolve(D).then(function(P){S[F]=P,++N!==w||b||(b=!0,l.resolve(C,S))},function(P){b||(b=!0,l.reject(C,P))})}},f.race=function(_){var y=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=_.length,b=!1;if(!w)return this.resolve([]);for(var S=-1,N=new this(o);++S<w;)E=_[S],y.resolve(E).then(function(C){b||(b=!0,l.resolve(N,C))},function(C){b||(b=!0,l.reject(N,C))});var E;return N}},{immediate:36}],38:[function(r,n,s){var a={};(0,r("./lib/utils/common").assign)(a,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),n.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,s){var a=r("./zlib/deflate"),o=r("./utils/common"),l=r("./utils/strings"),c=r("./zlib/messages"),u=r("./zlib/zstream"),d=Object.prototype.toString,f=0,h=-1,p=0,g=8;function m(_){if(!(this instanceof m))return new m(_);this.options=o.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},_||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var w=a.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(w!==f)throw new Error(c[w]);if(y.header&&a.deflateSetHeader(this.strm,y.header),y.dictionary){var b;if(b=typeof y.dictionary=="string"?l.string2buf(y.dictionary):d.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(w=a.deflateSetDictionary(this.strm,b))!==f)throw new Error(c[w]);this._dict_set=!0}}function v(_,y){var w=new m(y);if(w.push(_,!0),w.err)throw w.msg||c[w.err];return w.result}m.prototype.push=function(_,y){var w,b,S=this.strm,N=this.options.chunkSize;if(this.ended)return!1;b=y===~~y?y:y===!0?4:0,typeof _=="string"?S.input=l.string2buf(_):d.call(_)==="[object ArrayBuffer]"?S.input=new Uint8Array(_):S.input=_,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new o.Buf8(N),S.next_out=0,S.avail_out=N),(w=a.deflate(S,b))!==1&&w!==f)return this.onEnd(w),!(this.ended=!0);S.avail_out!==0&&(S.avail_in!==0||b!==4&&b!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(o.shrinkBuf(S.output,S.next_out))):this.onData(o.shrinkBuf(S.output,S.next_out)))}while((0<S.avail_in||S.avail_out===0)&&w!==1);return b===4?(w=a.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===f):b!==2||(this.onEnd(f),!(S.avail_out=0))},m.prototype.onData=function(_){this.chunks.push(_)},m.prototype.onEnd=function(_){_===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},s.Deflate=m,s.deflate=v,s.deflateRaw=function(_,y){return(y=y||{}).raw=!0,v(_,y)},s.gzip=function(_,y){return(y=y||{}).gzip=!0,v(_,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,s){var a=r("./zlib/inflate"),o=r("./utils/common"),l=r("./utils/strings"),c=r("./zlib/constants"),u=r("./zlib/messages"),d=r("./zlib/zstream"),f=r("./zlib/gzheader"),h=Object.prototype.toString;function p(m){if(!(this instanceof p))return new p(m);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},m||{});var v=this.options;v.raw&&0<=v.windowBits&&v.windowBits<16&&(v.windowBits=-v.windowBits,v.windowBits===0&&(v.windowBits=-15)),!(0<=v.windowBits&&v.windowBits<16)||m&&m.windowBits||(v.windowBits+=32),15<v.windowBits&&v.windowBits<48&&!(15&v.windowBits)&&(v.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var _=a.inflateInit2(this.strm,v.windowBits);if(_!==c.Z_OK)throw new Error(u[_]);this.header=new f,a.inflateGetHeader(this.strm,this.header)}function g(m,v){var _=new p(v);if(_.push(m,!0),_.err)throw _.msg||u[_.err];return _.result}p.prototype.push=function(m,v){var _,y,w,b,S,N,E=this.strm,C=this.options.chunkSize,T=this.options.dictionary,D=!1;if(this.ended)return!1;y=v===~~v?v:v===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof m=="string"?E.input=l.binstring2buf(m):h.call(m)==="[object ArrayBuffer]"?E.input=new Uint8Array(m):E.input=m,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new o.Buf8(C),E.next_out=0,E.avail_out=C),(_=a.inflate(E,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&T&&(N=typeof T=="string"?l.string2buf(T):h.call(T)==="[object ArrayBuffer]"?new Uint8Array(T):T,_=a.inflateSetDictionary(this.strm,N)),_===c.Z_BUF_ERROR&&D===!0&&(_=c.Z_OK,D=!1),_!==c.Z_STREAM_END&&_!==c.Z_OK)return this.onEnd(_),!(this.ended=!0);E.next_out&&(E.avail_out!==0&&_!==c.Z_STREAM_END&&(E.avail_in!==0||y!==c.Z_FINISH&&y!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=l.utf8border(E.output,E.next_out),b=E.next_out-w,S=l.buf2string(E.output,w),E.next_out=b,E.avail_out=C-b,b&&o.arraySet(E.output,E.output,w,b,0),this.onData(S)):this.onData(o.shrinkBuf(E.output,E.next_out)))),E.avail_in===0&&E.avail_out===0&&(D=!0)}while((0<E.avail_in||E.avail_out===0)&&_!==c.Z_STREAM_END);return _===c.Z_STREAM_END&&(y=c.Z_FINISH),y===c.Z_FINISH?(_=a.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===c.Z_OK):y!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(E.avail_out=0))},p.prototype.onData=function(m){this.chunks.push(m)},p.prototype.onEnd=function(m){m===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},s.Inflate=p,s.inflate=g,s.inflateRaw=function(m,v){return(v=v||{}).raw=!0,g(m,v)},s.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,s){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(c){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var f in d)d.hasOwnProperty(f)&&(c[f]=d[f])}}return c},s.shrinkBuf=function(c,u){return c.length===u?c:c.subarray?c.subarray(0,u):(c.length=u,c)};var o={arraySet:function(c,u,d,f,h){if(u.subarray&&c.subarray)c.set(u.subarray(d,d+f),h);else for(var p=0;p<f;p++)c[h+p]=u[d+p]},flattenChunks:function(c){var u,d,f,h,p,g;for(u=f=0,d=c.length;u<d;u++)f+=c[u].length;for(g=new Uint8Array(f),u=h=0,d=c.length;u<d;u++)p=c[u],g.set(p,h),h+=p.length;return g}},l={arraySet:function(c,u,d,f,h){for(var p=0;p<f;p++)c[h+p]=u[d+p]},flattenChunks:function(c){return[].concat.apply([],c)}};s.setTyped=function(c){c?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,l))},s.setTyped(a)},{}],42:[function(r,n,s){var a=r("./common"),o=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var c=new a.Buf8(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(f,h){if(h<65537&&(f.subarray&&l||!f.subarray&&o))return String.fromCharCode.apply(null,a.shrinkBuf(f,h));for(var p="",g=0;g<h;g++)p+=String.fromCharCode(f[g]);return p}c[254]=c[254]=1,s.string2buf=function(f){var h,p,g,m,v,_=f.length,y=0;for(m=0;m<_;m++)(64512&(p=f.charCodeAt(m)))==55296&&m+1<_&&(64512&(g=f.charCodeAt(m+1)))==56320&&(p=65536+(p-55296<<10)+(g-56320),m++),y+=p<128?1:p<2048?2:p<65536?3:4;for(h=new a.Buf8(y),m=v=0;v<y;m++)(64512&(p=f.charCodeAt(m)))==55296&&m+1<_&&(64512&(g=f.charCodeAt(m+1)))==56320&&(p=65536+(p-55296<<10)+(g-56320),m++),p<128?h[v++]=p:(p<2048?h[v++]=192|p>>>6:(p<65536?h[v++]=224|p>>>12:(h[v++]=240|p>>>18,h[v++]=128|p>>>12&63),h[v++]=128|p>>>6&63),h[v++]=128|63&p);return h},s.buf2binstring=function(f){return d(f,f.length)},s.binstring2buf=function(f){for(var h=new a.Buf8(f.length),p=0,g=h.length;p<g;p++)h[p]=f.charCodeAt(p);return h},s.buf2string=function(f,h){var p,g,m,v,_=h||f.length,y=new Array(2*_);for(p=g=0;p<_;)if((m=f[p++])<128)y[g++]=m;else if(4<(v=c[m]))y[g++]=65533,p+=v-1;else{for(m&=v===2?31:v===3?15:7;1<v&&p<_;)m=m<<6|63&f[p++],v--;1<v?y[g++]=65533:m<65536?y[g++]=m:(m-=65536,y[g++]=55296|m>>10&1023,y[g++]=56320|1023&m)}return d(y,g)},s.utf8border=function(f,h){var p;for((h=h||f.length)>f.length&&(h=f.length),p=h-1;0<=p&&(192&f[p])==128;)p--;return p<0||p===0?h:p+c[f[p]]>h?p:h}},{"./common":41}],43:[function(r,n,s){n.exports=function(a,o,l,c){for(var u=65535&a|0,d=a>>>16&65535|0,f=0;l!==0;){for(l-=f=2e3<l?2e3:l;d=d+(u=u+o[c++]|0)|0,--f;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(r,n,s){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,s){var a=function(){for(var o,l=[],c=0;c<256;c++){o=c;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;l[c]=o}return l}();n.exports=function(o,l,c,u){var d=a,f=u+c;o^=-1;for(var h=u;h<f;h++)o=o>>>8^d[255&(o^l[h])];return-1^o}},{}],46:[function(r,n,s){var a,o=r("../utils/common"),l=r("./trees"),c=r("./adler32"),u=r("./crc32"),d=r("./messages"),f=0,h=4,p=0,g=-2,m=-1,v=4,_=2,y=8,w=9,b=286,S=30,N=19,E=2*b+1,C=15,T=3,D=258,F=D+T+1,P=42,L=113,A=1,I=2,Q=3,q=4;function O(j,se){return j.msg=d[se],se}function H(j){return(j<<1)-(4<j?9:0)}function G(j){for(var se=j.length;0<=--se;)j[se]=0}function K(j){var se=j.state,ae=se.pending;ae>j.avail_out&&(ae=j.avail_out),ae!==0&&(o.arraySet(j.output,se.pending_buf,se.pending_out,ae,j.next_out),j.next_out+=ae,se.pending_out+=ae,j.total_out+=ae,j.avail_out-=ae,se.pending-=ae,se.pending===0&&(se.pending_out=0))}function k(j,se){l._tr_flush_block(j,0<=j.block_start?j.block_start:-1,j.strstart-j.block_start,se),j.block_start=j.strstart,K(j.strm)}function W(j,se){j.pending_buf[j.pending++]=se}function R(j,se){j.pending_buf[j.pending++]=se>>>8&255,j.pending_buf[j.pending++]=255&se}function M(j,se){var ae,z,X=j.max_chain_length,ie=j.strstart,U=j.prev_length,B=j.nice_match,Y=j.strstart>j.w_size-F?j.strstart-(j.w_size-F):0,ue=j.window,he=j.w_mask,le=j.prev,Se=j.strstart+D,Fe=ue[ie+U-1],Ie=ue[ie+U];j.prev_length>=j.good_match&&(X>>=2),B>j.lookahead&&(B=j.lookahead);do if(ue[(ae=se)+U]===Ie&&ue[ae+U-1]===Fe&&ue[ae]===ue[ie]&&ue[++ae]===ue[ie+1]){ie+=2,ae++;do;while(ue[++ie]===ue[++ae]&&ue[++ie]===ue[++ae]&&ue[++ie]===ue[++ae]&&ue[++ie]===ue[++ae]&&ue[++ie]===ue[++ae]&&ue[++ie]===ue[++ae]&&ue[++ie]===ue[++ae]&&ue[++ie]===ue[++ae]&&ie<Se);if(z=D-(Se-ie),ie=Se-D,U<z){if(j.match_start=se,B<=(U=z))break;Fe=ue[ie+U-1],Ie=ue[ie+U]}}while((se=le[se&he])>Y&&--X!=0);return U<=j.lookahead?U:j.lookahead}function re(j){var se,ae,z,X,ie,U,B,Y,ue,he,le=j.w_size;do{if(X=j.window_size-j.lookahead-j.strstart,j.strstart>=le+(le-F)){for(o.arraySet(j.window,j.window,le,le,0),j.match_start-=le,j.strstart-=le,j.block_start-=le,se=ae=j.hash_size;z=j.head[--se],j.head[se]=le<=z?z-le:0,--ae;);for(se=ae=le;z=j.prev[--se],j.prev[se]=le<=z?z-le:0,--ae;);X+=le}if(j.strm.avail_in===0)break;if(U=j.strm,B=j.window,Y=j.strstart+j.lookahead,ue=X,he=void 0,he=U.avail_in,ue<he&&(he=ue),ae=he===0?0:(U.avail_in-=he,o.arraySet(B,U.input,U.next_in,he,Y),U.state.wrap===1?U.adler=c(U.adler,B,he,Y):U.state.wrap===2&&(U.adler=u(U.adler,B,he,Y)),U.next_in+=he,U.total_in+=he,he),j.lookahead+=ae,j.lookahead+j.insert>=T)for(ie=j.strstart-j.insert,j.ins_h=j.window[ie],j.ins_h=(j.ins_h<<j.hash_shift^j.window[ie+1])&j.hash_mask;j.insert&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[ie+T-1])&j.hash_mask,j.prev[ie&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=ie,ie++,j.insert--,!(j.lookahead+j.insert<T)););}while(j.lookahead<F&&j.strm.avail_in!==0)}function oe(j,se){for(var ae,z;;){if(j.lookahead<F){if(re(j),j.lookahead<F&&se===f)return A;if(j.lookahead===0)break}if(ae=0,j.lookahead>=T&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+T-1])&j.hash_mask,ae=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart),ae!==0&&j.strstart-ae<=j.w_size-F&&(j.match_length=M(j,ae)),j.match_length>=T)if(z=l._tr_tally(j,j.strstart-j.match_start,j.match_length-T),j.lookahead-=j.match_length,j.match_length<=j.max_lazy_match&&j.lookahead>=T){for(j.match_length--;j.strstart++,j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+T-1])&j.hash_mask,ae=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart,--j.match_length!=0;);j.strstart++}else j.strstart+=j.match_length,j.match_length=0,j.ins_h=j.window[j.strstart],j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+1])&j.hash_mask;else z=l._tr_tally(j,0,j.window[j.strstart]),j.lookahead--,j.strstart++;if(z&&(k(j,!1),j.strm.avail_out===0))return A}return j.insert=j.strstart<T-1?j.strstart:T-1,se===h?(k(j,!0),j.strm.avail_out===0?Q:q):j.last_lit&&(k(j,!1),j.strm.avail_out===0)?A:I}function ce(j,se){for(var ae,z,X;;){if(j.lookahead<F){if(re(j),j.lookahead<F&&se===f)return A;if(j.lookahead===0)break}if(ae=0,j.lookahead>=T&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+T-1])&j.hash_mask,ae=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart),j.prev_length=j.match_length,j.prev_match=j.match_start,j.match_length=T-1,ae!==0&&j.prev_length<j.max_lazy_match&&j.strstart-ae<=j.w_size-F&&(j.match_length=M(j,ae),j.match_length<=5&&(j.strategy===1||j.match_length===T&&4096<j.strstart-j.match_start)&&(j.match_length=T-1)),j.prev_length>=T&&j.match_length<=j.prev_length){for(X=j.strstart+j.lookahead-T,z=l._tr_tally(j,j.strstart-1-j.prev_match,j.prev_length-T),j.lookahead-=j.prev_length-1,j.prev_length-=2;++j.strstart<=X&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+T-1])&j.hash_mask,ae=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart),--j.prev_length!=0;);if(j.match_available=0,j.match_length=T-1,j.strstart++,z&&(k(j,!1),j.strm.avail_out===0))return A}else if(j.match_available){if((z=l._tr_tally(j,0,j.window[j.strstart-1]))&&k(j,!1),j.strstart++,j.lookahead--,j.strm.avail_out===0)return A}else j.match_available=1,j.strstart++,j.lookahead--}return j.match_available&&(z=l._tr_tally(j,0,j.window[j.strstart-1]),j.match_available=0),j.insert=j.strstart<T-1?j.strstart:T-1,se===h?(k(j,!0),j.strm.avail_out===0?Q:q):j.last_lit&&(k(j,!1),j.strm.avail_out===0)?A:I}function me(j,se,ae,z,X){this.good_length=j,this.max_lazy=se,this.nice_length=ae,this.max_chain=z,this.func=X}function pe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*E),this.dyn_dtree=new o.Buf16(2*(2*S+1)),this.bl_tree=new o.Buf16(2*(2*N+1)),G(this.dyn_ltree),G(this.dyn_dtree),G(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(C+1),this.heap=new o.Buf16(2*b+1),G(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*b+1),G(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function je(j){var se;return j&&j.state?(j.total_in=j.total_out=0,j.data_type=_,(se=j.state).pending=0,se.pending_out=0,se.wrap<0&&(se.wrap=-se.wrap),se.status=se.wrap?P:L,j.adler=se.wrap===2?0:1,se.last_flush=f,l._tr_init(se),p):O(j,g)}function we(j){var se=je(j);return se===p&&function(ae){ae.window_size=2*ae.w_size,G(ae.head),ae.max_lazy_match=a[ae.level].max_lazy,ae.good_match=a[ae.level].good_length,ae.nice_match=a[ae.level].nice_length,ae.max_chain_length=a[ae.level].max_chain,ae.strstart=0,ae.block_start=0,ae.lookahead=0,ae.insert=0,ae.match_length=ae.prev_length=T-1,ae.match_available=0,ae.ins_h=0}(j.state),se}function Ce(j,se,ae,z,X,ie){if(!j)return g;var U=1;if(se===m&&(se=6),z<0?(U=0,z=-z):15<z&&(U=2,z-=16),X<1||w<X||ae!==y||z<8||15<z||se<0||9<se||ie<0||v<ie)return O(j,g);z===8&&(z=9);var B=new pe;return(j.state=B).strm=j,B.wrap=U,B.gzhead=null,B.w_bits=z,B.w_size=1<<B.w_bits,B.w_mask=B.w_size-1,B.hash_bits=X+7,B.hash_size=1<<B.hash_bits,B.hash_mask=B.hash_size-1,B.hash_shift=~~((B.hash_bits+T-1)/T),B.window=new o.Buf8(2*B.w_size),B.head=new o.Buf16(B.hash_size),B.prev=new o.Buf16(B.w_size),B.lit_bufsize=1<<X+6,B.pending_buf_size=4*B.lit_bufsize,B.pending_buf=new o.Buf8(B.pending_buf_size),B.d_buf=1*B.lit_bufsize,B.l_buf=3*B.lit_bufsize,B.level=se,B.strategy=ie,B.method=ae,we(j)}a=[new me(0,0,0,0,function(j,se){var ae=65535;for(ae>j.pending_buf_size-5&&(ae=j.pending_buf_size-5);;){if(j.lookahead<=1){if(re(j),j.lookahead===0&&se===f)return A;if(j.lookahead===0)break}j.strstart+=j.lookahead,j.lookahead=0;var z=j.block_start+ae;if((j.strstart===0||j.strstart>=z)&&(j.lookahead=j.strstart-z,j.strstart=z,k(j,!1),j.strm.avail_out===0)||j.strstart-j.block_start>=j.w_size-F&&(k(j,!1),j.strm.avail_out===0))return A}return j.insert=0,se===h?(k(j,!0),j.strm.avail_out===0?Q:q):(j.strstart>j.block_start&&(k(j,!1),j.strm.avail_out),A)}),new me(4,4,8,4,oe),new me(4,5,16,8,oe),new me(4,6,32,32,oe),new me(4,4,16,16,ce),new me(8,16,32,32,ce),new me(8,16,128,128,ce),new me(8,32,128,256,ce),new me(32,128,258,1024,ce),new me(32,258,258,4096,ce)],s.deflateInit=function(j,se){return Ce(j,se,y,15,8,0)},s.deflateInit2=Ce,s.deflateReset=we,s.deflateResetKeep=je,s.deflateSetHeader=function(j,se){return j&&j.state?j.state.wrap!==2?g:(j.state.gzhead=se,p):g},s.deflate=function(j,se){var ae,z,X,ie;if(!j||!j.state||5<se||se<0)return j?O(j,g):g;if(z=j.state,!j.output||!j.input&&j.avail_in!==0||z.status===666&&se!==h)return O(j,j.avail_out===0?-5:g);if(z.strm=j,ae=z.last_flush,z.last_flush=se,z.status===P)if(z.wrap===2)j.adler=0,W(z,31),W(z,139),W(z,8),z.gzhead?(W(z,(z.gzhead.text?1:0)+(z.gzhead.hcrc?2:0)+(z.gzhead.extra?4:0)+(z.gzhead.name?8:0)+(z.gzhead.comment?16:0)),W(z,255&z.gzhead.time),W(z,z.gzhead.time>>8&255),W(z,z.gzhead.time>>16&255),W(z,z.gzhead.time>>24&255),W(z,z.level===9?2:2<=z.strategy||z.level<2?4:0),W(z,255&z.gzhead.os),z.gzhead.extra&&z.gzhead.extra.length&&(W(z,255&z.gzhead.extra.length),W(z,z.gzhead.extra.length>>8&255)),z.gzhead.hcrc&&(j.adler=u(j.adler,z.pending_buf,z.pending,0)),z.gzindex=0,z.status=69):(W(z,0),W(z,0),W(z,0),W(z,0),W(z,0),W(z,z.level===9?2:2<=z.strategy||z.level<2?4:0),W(z,3),z.status=L);else{var U=y+(z.w_bits-8<<4)<<8;U|=(2<=z.strategy||z.level<2?0:z.level<6?1:z.level===6?2:3)<<6,z.strstart!==0&&(U|=32),U+=31-U%31,z.status=L,R(z,U),z.strstart!==0&&(R(z,j.adler>>>16),R(z,65535&j.adler)),j.adler=1}if(z.status===69)if(z.gzhead.extra){for(X=z.pending;z.gzindex<(65535&z.gzhead.extra.length)&&(z.pending!==z.pending_buf_size||(z.gzhead.hcrc&&z.pending>X&&(j.adler=u(j.adler,z.pending_buf,z.pending-X,X)),K(j),X=z.pending,z.pending!==z.pending_buf_size));)W(z,255&z.gzhead.extra[z.gzindex]),z.gzindex++;z.gzhead.hcrc&&z.pending>X&&(j.adler=u(j.adler,z.pending_buf,z.pending-X,X)),z.gzindex===z.gzhead.extra.length&&(z.gzindex=0,z.status=73)}else z.status=73;if(z.status===73)if(z.gzhead.name){X=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>X&&(j.adler=u(j.adler,z.pending_buf,z.pending-X,X)),K(j),X=z.pending,z.pending===z.pending_buf_size)){ie=1;break}ie=z.gzindex<z.gzhead.name.length?255&z.gzhead.name.charCodeAt(z.gzindex++):0,W(z,ie)}while(ie!==0);z.gzhead.hcrc&&z.pending>X&&(j.adler=u(j.adler,z.pending_buf,z.pending-X,X)),ie===0&&(z.gzindex=0,z.status=91)}else z.status=91;if(z.status===91)if(z.gzhead.comment){X=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>X&&(j.adler=u(j.adler,z.pending_buf,z.pending-X,X)),K(j),X=z.pending,z.pending===z.pending_buf_size)){ie=1;break}ie=z.gzindex<z.gzhead.comment.length?255&z.gzhead.comment.charCodeAt(z.gzindex++):0,W(z,ie)}while(ie!==0);z.gzhead.hcrc&&z.pending>X&&(j.adler=u(j.adler,z.pending_buf,z.pending-X,X)),ie===0&&(z.status=103)}else z.status=103;if(z.status===103&&(z.gzhead.hcrc?(z.pending+2>z.pending_buf_size&&K(j),z.pending+2<=z.pending_buf_size&&(W(z,255&j.adler),W(z,j.adler>>8&255),j.adler=0,z.status=L)):z.status=L),z.pending!==0){if(K(j),j.avail_out===0)return z.last_flush=-1,p}else if(j.avail_in===0&&H(se)<=H(ae)&&se!==h)return O(j,-5);if(z.status===666&&j.avail_in!==0)return O(j,-5);if(j.avail_in!==0||z.lookahead!==0||se!==f&&z.status!==666){var B=z.strategy===2?function(Y,ue){for(var he;;){if(Y.lookahead===0&&(re(Y),Y.lookahead===0)){if(ue===f)return A;break}if(Y.match_length=0,he=l._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++,he&&(k(Y,!1),Y.strm.avail_out===0))return A}return Y.insert=0,ue===h?(k(Y,!0),Y.strm.avail_out===0?Q:q):Y.last_lit&&(k(Y,!1),Y.strm.avail_out===0)?A:I}(z,se):z.strategy===3?function(Y,ue){for(var he,le,Se,Fe,Ie=Y.window;;){if(Y.lookahead<=D){if(re(Y),Y.lookahead<=D&&ue===f)return A;if(Y.lookahead===0)break}if(Y.match_length=0,Y.lookahead>=T&&0<Y.strstart&&(le=Ie[Se=Y.strstart-1])===Ie[++Se]&&le===Ie[++Se]&&le===Ie[++Se]){Fe=Y.strstart+D;do;while(le===Ie[++Se]&&le===Ie[++Se]&&le===Ie[++Se]&&le===Ie[++Se]&&le===Ie[++Se]&&le===Ie[++Se]&&le===Ie[++Se]&&le===Ie[++Se]&&Se<Fe);Y.match_length=D-(Fe-Se),Y.match_length>Y.lookahead&&(Y.match_length=Y.lookahead)}if(Y.match_length>=T?(he=l._tr_tally(Y,1,Y.match_length-T),Y.lookahead-=Y.match_length,Y.strstart+=Y.match_length,Y.match_length=0):(he=l._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++),he&&(k(Y,!1),Y.strm.avail_out===0))return A}return Y.insert=0,ue===h?(k(Y,!0),Y.strm.avail_out===0?Q:q):Y.last_lit&&(k(Y,!1),Y.strm.avail_out===0)?A:I}(z,se):a[z.level].func(z,se);if(B!==Q&&B!==q||(z.status=666),B===A||B===Q)return j.avail_out===0&&(z.last_flush=-1),p;if(B===I&&(se===1?l._tr_align(z):se!==5&&(l._tr_stored_block(z,0,0,!1),se===3&&(G(z.head),z.lookahead===0&&(z.strstart=0,z.block_start=0,z.insert=0))),K(j),j.avail_out===0))return z.last_flush=-1,p}return se!==h?p:z.wrap<=0?1:(z.wrap===2?(W(z,255&j.adler),W(z,j.adler>>8&255),W(z,j.adler>>16&255),W(z,j.adler>>24&255),W(z,255&j.total_in),W(z,j.total_in>>8&255),W(z,j.total_in>>16&255),W(z,j.total_in>>24&255)):(R(z,j.adler>>>16),R(z,65535&j.adler)),K(j),0<z.wrap&&(z.wrap=-z.wrap),z.pending!==0?p:1)},s.deflateEnd=function(j){var se;return j&&j.state?(se=j.state.status)!==P&&se!==69&&se!==73&&se!==91&&se!==103&&se!==L&&se!==666?O(j,g):(j.state=null,se===L?O(j,-3):p):g},s.deflateSetDictionary=function(j,se){var ae,z,X,ie,U,B,Y,ue,he=se.length;if(!j||!j.state||(ie=(ae=j.state).wrap)===2||ie===1&&ae.status!==P||ae.lookahead)return g;for(ie===1&&(j.adler=c(j.adler,se,he,0)),ae.wrap=0,he>=ae.w_size&&(ie===0&&(G(ae.head),ae.strstart=0,ae.block_start=0,ae.insert=0),ue=new o.Buf8(ae.w_size),o.arraySet(ue,se,he-ae.w_size,ae.w_size,0),se=ue,he=ae.w_size),U=j.avail_in,B=j.next_in,Y=j.input,j.avail_in=he,j.next_in=0,j.input=se,re(ae);ae.lookahead>=T;){for(z=ae.strstart,X=ae.lookahead-(T-1);ae.ins_h=(ae.ins_h<<ae.hash_shift^ae.window[z+T-1])&ae.hash_mask,ae.prev[z&ae.w_mask]=ae.head[ae.ins_h],ae.head[ae.ins_h]=z,z++,--X;);ae.strstart=z,ae.lookahead=T-1,re(ae)}return ae.strstart+=ae.lookahead,ae.block_start=ae.strstart,ae.insert=ae.lookahead,ae.lookahead=0,ae.match_length=ae.prev_length=T-1,ae.match_available=0,j.next_in=B,j.input=Y,j.avail_in=U,ae.wrap=ie,p},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,s){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,n,s){n.exports=function(a,o){var l,c,u,d,f,h,p,g,m,v,_,y,w,b,S,N,E,C,T,D,F,P,L,A,I;l=a.state,c=a.next_in,A=a.input,u=c+(a.avail_in-5),d=a.next_out,I=a.output,f=d-(o-a.avail_out),h=d+(a.avail_out-257),p=l.dmax,g=l.wsize,m=l.whave,v=l.wnext,_=l.window,y=l.hold,w=l.bits,b=l.lencode,S=l.distcode,N=(1<<l.lenbits)-1,E=(1<<l.distbits)-1;e:do{w<15&&(y+=A[c++]<<w,w+=8,y+=A[c++]<<w,w+=8),C=b[y&N];t:for(;;){if(y>>>=T=C>>>24,w-=T,(T=C>>>16&255)===0)I[d++]=65535&C;else{if(!(16&T)){if(!(64&T)){C=b[(65535&C)+(y&(1<<T)-1)];continue t}if(32&T){l.mode=12;break e}a.msg="invalid literal/length code",l.mode=30;break e}D=65535&C,(T&=15)&&(w<T&&(y+=A[c++]<<w,w+=8),D+=y&(1<<T)-1,y>>>=T,w-=T),w<15&&(y+=A[c++]<<w,w+=8,y+=A[c++]<<w,w+=8),C=S[y&E];r:for(;;){if(y>>>=T=C>>>24,w-=T,!(16&(T=C>>>16&255))){if(!(64&T)){C=S[(65535&C)+(y&(1<<T)-1)];continue r}a.msg="invalid distance code",l.mode=30;break e}if(F=65535&C,w<(T&=15)&&(y+=A[c++]<<w,(w+=8)<T&&(y+=A[c++]<<w,w+=8)),p<(F+=y&(1<<T)-1)){a.msg="invalid distance too far back",l.mode=30;break e}if(y>>>=T,w-=T,(T=d-f)<F){if(m<(T=F-T)&&l.sane){a.msg="invalid distance too far back",l.mode=30;break e}if(L=_,(P=0)===v){if(P+=g-T,T<D){for(D-=T;I[d++]=_[P++],--T;);P=d-F,L=I}}else if(v<T){if(P+=g+v-T,(T-=v)<D){for(D-=T;I[d++]=_[P++],--T;);if(P=0,v<D){for(D-=T=v;I[d++]=_[P++],--T;);P=d-F,L=I}}}else if(P+=v-T,T<D){for(D-=T;I[d++]=_[P++],--T;);P=d-F,L=I}for(;2<D;)I[d++]=L[P++],I[d++]=L[P++],I[d++]=L[P++],D-=3;D&&(I[d++]=L[P++],1<D&&(I[d++]=L[P++]))}else{for(P=d-F;I[d++]=I[P++],I[d++]=I[P++],I[d++]=I[P++],2<(D-=3););D&&(I[d++]=I[P++],1<D&&(I[d++]=I[P++]))}break}}break}}while(c<u&&d<h);c-=D=w>>3,y&=(1<<(w-=D<<3))-1,a.next_in=c,a.next_out=d,a.avail_in=c<u?u-c+5:5-(c-u),a.avail_out=d<h?h-d+257:257-(d-h),l.hold=y,l.bits=w}},{}],49:[function(r,n,s){var a=r("../utils/common"),o=r("./adler32"),l=r("./crc32"),c=r("./inffast"),u=r("./inftrees"),d=1,f=2,h=0,p=-2,g=1,m=852,v=592;function _(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(P){var L;return P&&P.state?(L=P.state,P.total_in=P.total_out=L.total=0,P.msg="",L.wrap&&(P.adler=1&L.wrap),L.mode=g,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new a.Buf32(m),L.distcode=L.distdyn=new a.Buf32(v),L.sane=1,L.back=-1,h):p}function b(P){var L;return P&&P.state?((L=P.state).wsize=0,L.whave=0,L.wnext=0,w(P)):p}function S(P,L){var A,I;return P&&P.state?(I=P.state,L<0?(A=0,L=-L):(A=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?p:(I.window!==null&&I.wbits!==L&&(I.window=null),I.wrap=A,I.wbits=L,b(P))):p}function N(P,L){var A,I;return P?(I=new y,(P.state=I).window=null,(A=S(P,L))!==h&&(P.state=null),A):p}var E,C,T=!0;function D(P){if(T){var L;for(E=new a.Buf32(512),C=new a.Buf32(32),L=0;L<144;)P.lens[L++]=8;for(;L<256;)P.lens[L++]=9;for(;L<280;)P.lens[L++]=7;for(;L<288;)P.lens[L++]=8;for(u(d,P.lens,0,288,E,0,P.work,{bits:9}),L=0;L<32;)P.lens[L++]=5;u(f,P.lens,0,32,C,0,P.work,{bits:5}),T=!1}P.lencode=E,P.lenbits=9,P.distcode=C,P.distbits=5}function F(P,L,A,I){var Q,q=P.state;return q.window===null&&(q.wsize=1<<q.wbits,q.wnext=0,q.whave=0,q.window=new a.Buf8(q.wsize)),I>=q.wsize?(a.arraySet(q.window,L,A-q.wsize,q.wsize,0),q.wnext=0,q.whave=q.wsize):(I<(Q=q.wsize-q.wnext)&&(Q=I),a.arraySet(q.window,L,A-I,Q,q.wnext),(I-=Q)?(a.arraySet(q.window,L,A-I,I,0),q.wnext=I,q.whave=q.wsize):(q.wnext+=Q,q.wnext===q.wsize&&(q.wnext=0),q.whave<q.wsize&&(q.whave+=Q))),0}s.inflateReset=b,s.inflateReset2=S,s.inflateResetKeep=w,s.inflateInit=function(P){return N(P,15)},s.inflateInit2=N,s.inflate=function(P,L){var A,I,Q,q,O,H,G,K,k,W,R,M,re,oe,ce,me,pe,je,we,Ce,j,se,ae,z,X=0,ie=new a.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return p;(A=P.state).mode===12&&(A.mode=13),O=P.next_out,Q=P.output,G=P.avail_out,q=P.next_in,I=P.input,H=P.avail_in,K=A.hold,k=A.bits,W=H,R=G,se=h;e:for(;;)switch(A.mode){case g:if(A.wrap===0){A.mode=13;break}for(;k<16;){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}if(2&A.wrap&&K===35615){ie[A.check=0]=255&K,ie[1]=K>>>8&255,A.check=l(A.check,ie,2,0),k=K=0,A.mode=2;break}if(A.flags=0,A.head&&(A.head.done=!1),!(1&A.wrap)||(((255&K)<<8)+(K>>8))%31){P.msg="incorrect header check",A.mode=30;break}if((15&K)!=8){P.msg="unknown compression method",A.mode=30;break}if(k-=4,j=8+(15&(K>>>=4)),A.wbits===0)A.wbits=j;else if(j>A.wbits){P.msg="invalid window size",A.mode=30;break}A.dmax=1<<j,P.adler=A.check=1,A.mode=512&K?10:12,k=K=0;break;case 2:for(;k<16;){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}if(A.flags=K,(255&A.flags)!=8){P.msg="unknown compression method",A.mode=30;break}if(57344&A.flags){P.msg="unknown header flags set",A.mode=30;break}A.head&&(A.head.text=K>>8&1),512&A.flags&&(ie[0]=255&K,ie[1]=K>>>8&255,A.check=l(A.check,ie,2,0)),k=K=0,A.mode=3;case 3:for(;k<32;){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}A.head&&(A.head.time=K),512&A.flags&&(ie[0]=255&K,ie[1]=K>>>8&255,ie[2]=K>>>16&255,ie[3]=K>>>24&255,A.check=l(A.check,ie,4,0)),k=K=0,A.mode=4;case 4:for(;k<16;){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}A.head&&(A.head.xflags=255&K,A.head.os=K>>8),512&A.flags&&(ie[0]=255&K,ie[1]=K>>>8&255,A.check=l(A.check,ie,2,0)),k=K=0,A.mode=5;case 5:if(1024&A.flags){for(;k<16;){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}A.length=K,A.head&&(A.head.extra_len=K),512&A.flags&&(ie[0]=255&K,ie[1]=K>>>8&255,A.check=l(A.check,ie,2,0)),k=K=0}else A.head&&(A.head.extra=null);A.mode=6;case 6:if(1024&A.flags&&(H<(M=A.length)&&(M=H),M&&(A.head&&(j=A.head.extra_len-A.length,A.head.extra||(A.head.extra=new Array(A.head.extra_len)),a.arraySet(A.head.extra,I,q,M,j)),512&A.flags&&(A.check=l(A.check,I,M,q)),H-=M,q+=M,A.length-=M),A.length))break e;A.length=0,A.mode=7;case 7:if(2048&A.flags){if(H===0)break e;for(M=0;j=I[q+M++],A.head&&j&&A.length<65536&&(A.head.name+=String.fromCharCode(j)),j&&M<H;);if(512&A.flags&&(A.check=l(A.check,I,M,q)),H-=M,q+=M,j)break e}else A.head&&(A.head.name=null);A.length=0,A.mode=8;case 8:if(4096&A.flags){if(H===0)break e;for(M=0;j=I[q+M++],A.head&&j&&A.length<65536&&(A.head.comment+=String.fromCharCode(j)),j&&M<H;);if(512&A.flags&&(A.check=l(A.check,I,M,q)),H-=M,q+=M,j)break e}else A.head&&(A.head.comment=null);A.mode=9;case 9:if(512&A.flags){for(;k<16;){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}if(K!==(65535&A.check)){P.msg="header crc mismatch",A.mode=30;break}k=K=0}A.head&&(A.head.hcrc=A.flags>>9&1,A.head.done=!0),P.adler=A.check=0,A.mode=12;break;case 10:for(;k<32;){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}P.adler=A.check=_(K),k=K=0,A.mode=11;case 11:if(A.havedict===0)return P.next_out=O,P.avail_out=G,P.next_in=q,P.avail_in=H,A.hold=K,A.bits=k,2;P.adler=A.check=1,A.mode=12;case 12:if(L===5||L===6)break e;case 13:if(A.last){K>>>=7&k,k-=7&k,A.mode=27;break}for(;k<3;){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}switch(A.last=1&K,k-=1,3&(K>>>=1)){case 0:A.mode=14;break;case 1:if(D(A),A.mode=20,L!==6)break;K>>>=2,k-=2;break e;case 2:A.mode=17;break;case 3:P.msg="invalid block type",A.mode=30}K>>>=2,k-=2;break;case 14:for(K>>>=7&k,k-=7&k;k<32;){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}if((65535&K)!=(K>>>16^65535)){P.msg="invalid stored block lengths",A.mode=30;break}if(A.length=65535&K,k=K=0,A.mode=15,L===6)break e;case 15:A.mode=16;case 16:if(M=A.length){if(H<M&&(M=H),G<M&&(M=G),M===0)break e;a.arraySet(Q,I,q,M,O),H-=M,q+=M,G-=M,O+=M,A.length-=M;break}A.mode=12;break;case 17:for(;k<14;){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}if(A.nlen=257+(31&K),K>>>=5,k-=5,A.ndist=1+(31&K),K>>>=5,k-=5,A.ncode=4+(15&K),K>>>=4,k-=4,286<A.nlen||30<A.ndist){P.msg="too many length or distance symbols",A.mode=30;break}A.have=0,A.mode=18;case 18:for(;A.have<A.ncode;){for(;k<3;){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}A.lens[U[A.have++]]=7&K,K>>>=3,k-=3}for(;A.have<19;)A.lens[U[A.have++]]=0;if(A.lencode=A.lendyn,A.lenbits=7,ae={bits:A.lenbits},se=u(0,A.lens,0,19,A.lencode,0,A.work,ae),A.lenbits=ae.bits,se){P.msg="invalid code lengths set",A.mode=30;break}A.have=0,A.mode=19;case 19:for(;A.have<A.nlen+A.ndist;){for(;me=(X=A.lencode[K&(1<<A.lenbits)-1])>>>16&255,pe=65535&X,!((ce=X>>>24)<=k);){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}if(pe<16)K>>>=ce,k-=ce,A.lens[A.have++]=pe;else{if(pe===16){for(z=ce+2;k<z;){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}if(K>>>=ce,k-=ce,A.have===0){P.msg="invalid bit length repeat",A.mode=30;break}j=A.lens[A.have-1],M=3+(3&K),K>>>=2,k-=2}else if(pe===17){for(z=ce+3;k<z;){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}k-=ce,j=0,M=3+(7&(K>>>=ce)),K>>>=3,k-=3}else{for(z=ce+7;k<z;){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}k-=ce,j=0,M=11+(127&(K>>>=ce)),K>>>=7,k-=7}if(A.have+M>A.nlen+A.ndist){P.msg="invalid bit length repeat",A.mode=30;break}for(;M--;)A.lens[A.have++]=j}}if(A.mode===30)break;if(A.lens[256]===0){P.msg="invalid code -- missing end-of-block",A.mode=30;break}if(A.lenbits=9,ae={bits:A.lenbits},se=u(d,A.lens,0,A.nlen,A.lencode,0,A.work,ae),A.lenbits=ae.bits,se){P.msg="invalid literal/lengths set",A.mode=30;break}if(A.distbits=6,A.distcode=A.distdyn,ae={bits:A.distbits},se=u(f,A.lens,A.nlen,A.ndist,A.distcode,0,A.work,ae),A.distbits=ae.bits,se){P.msg="invalid distances set",A.mode=30;break}if(A.mode=20,L===6)break e;case 20:A.mode=21;case 21:if(6<=H&&258<=G){P.next_out=O,P.avail_out=G,P.next_in=q,P.avail_in=H,A.hold=K,A.bits=k,c(P,R),O=P.next_out,Q=P.output,G=P.avail_out,q=P.next_in,I=P.input,H=P.avail_in,K=A.hold,k=A.bits,A.mode===12&&(A.back=-1);break}for(A.back=0;me=(X=A.lencode[K&(1<<A.lenbits)-1])>>>16&255,pe=65535&X,!((ce=X>>>24)<=k);){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}if(me&&!(240&me)){for(je=ce,we=me,Ce=pe;me=(X=A.lencode[Ce+((K&(1<<je+we)-1)>>je)])>>>16&255,pe=65535&X,!(je+(ce=X>>>24)<=k);){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}K>>>=je,k-=je,A.back+=je}if(K>>>=ce,k-=ce,A.back+=ce,A.length=pe,me===0){A.mode=26;break}if(32&me){A.back=-1,A.mode=12;break}if(64&me){P.msg="invalid literal/length code",A.mode=30;break}A.extra=15&me,A.mode=22;case 22:if(A.extra){for(z=A.extra;k<z;){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}A.length+=K&(1<<A.extra)-1,K>>>=A.extra,k-=A.extra,A.back+=A.extra}A.was=A.length,A.mode=23;case 23:for(;me=(X=A.distcode[K&(1<<A.distbits)-1])>>>16&255,pe=65535&X,!((ce=X>>>24)<=k);){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}if(!(240&me)){for(je=ce,we=me,Ce=pe;me=(X=A.distcode[Ce+((K&(1<<je+we)-1)>>je)])>>>16&255,pe=65535&X,!(je+(ce=X>>>24)<=k);){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}K>>>=je,k-=je,A.back+=je}if(K>>>=ce,k-=ce,A.back+=ce,64&me){P.msg="invalid distance code",A.mode=30;break}A.offset=pe,A.extra=15&me,A.mode=24;case 24:if(A.extra){for(z=A.extra;k<z;){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}A.offset+=K&(1<<A.extra)-1,K>>>=A.extra,k-=A.extra,A.back+=A.extra}if(A.offset>A.dmax){P.msg="invalid distance too far back",A.mode=30;break}A.mode=25;case 25:if(G===0)break e;if(M=R-G,A.offset>M){if((M=A.offset-M)>A.whave&&A.sane){P.msg="invalid distance too far back",A.mode=30;break}re=M>A.wnext?(M-=A.wnext,A.wsize-M):A.wnext-M,M>A.length&&(M=A.length),oe=A.window}else oe=Q,re=O-A.offset,M=A.length;for(G<M&&(M=G),G-=M,A.length-=M;Q[O++]=oe[re++],--M;);A.length===0&&(A.mode=21);break;case 26:if(G===0)break e;Q[O++]=A.length,G--,A.mode=21;break;case 27:if(A.wrap){for(;k<32;){if(H===0)break e;H--,K|=I[q++]<<k,k+=8}if(R-=G,P.total_out+=R,A.total+=R,R&&(P.adler=A.check=A.flags?l(A.check,Q,R,O-R):o(A.check,Q,R,O-R)),R=G,(A.flags?K:_(K))!==A.check){P.msg="incorrect data check",A.mode=30;break}k=K=0}A.mode=28;case 28:if(A.wrap&&A.flags){for(;k<32;){if(H===0)break e;H--,K+=I[q++]<<k,k+=8}if(K!==(4294967295&A.total)){P.msg="incorrect length check",A.mode=30;break}k=K=0}A.mode=29;case 29:se=1;break e;case 30:se=-3;break e;case 31:return-4;case 32:default:return p}return P.next_out=O,P.avail_out=G,P.next_in=q,P.avail_in=H,A.hold=K,A.bits=k,(A.wsize||R!==P.avail_out&&A.mode<30&&(A.mode<27||L!==4))&&F(P,P.output,P.next_out,R-P.avail_out)?(A.mode=31,-4):(W-=P.avail_in,R-=P.avail_out,P.total_in+=W,P.total_out+=R,A.total+=R,A.wrap&&R&&(P.adler=A.check=A.flags?l(A.check,Q,R,P.next_out-R):o(A.check,Q,R,P.next_out-R)),P.data_type=A.bits+(A.last?64:0)+(A.mode===12?128:0)+(A.mode===20||A.mode===15?256:0),(W==0&&R===0||L===4)&&se===h&&(se=-5),se)},s.inflateEnd=function(P){if(!P||!P.state)return p;var L=P.state;return L.window&&(L.window=null),P.state=null,h},s.inflateGetHeader=function(P,L){var A;return P&&P.state&&2&(A=P.state).wrap?((A.head=L).done=!1,h):p},s.inflateSetDictionary=function(P,L){var A,I=L.length;return P&&P.state?(A=P.state).wrap!==0&&A.mode!==11?p:A.mode===11&&o(1,L,I,0)!==A.check?-3:F(P,L,I,I)?(A.mode=31,-4):(A.havedict=1,h):p},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,s){var a=r("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(d,f,h,p,g,m,v,_){var y,w,b,S,N,E,C,T,D,F=_.bits,P=0,L=0,A=0,I=0,Q=0,q=0,O=0,H=0,G=0,K=0,k=null,W=0,R=new a.Buf16(16),M=new a.Buf16(16),re=null,oe=0;for(P=0;P<=15;P++)R[P]=0;for(L=0;L<p;L++)R[f[h+L]]++;for(Q=F,I=15;1<=I&&R[I]===0;I--);if(I<Q&&(Q=I),I===0)return g[m++]=20971520,g[m++]=20971520,_.bits=1,0;for(A=1;A<I&&R[A]===0;A++);for(Q<A&&(Q=A),P=H=1;P<=15;P++)if(H<<=1,(H-=R[P])<0)return-1;if(0<H&&(d===0||I!==1))return-1;for(M[1]=0,P=1;P<15;P++)M[P+1]=M[P]+R[P];for(L=0;L<p;L++)f[h+L]!==0&&(v[M[f[h+L]]++]=L);if(E=d===0?(k=re=v,19):d===1?(k=o,W-=257,re=l,oe-=257,256):(k=c,re=u,-1),P=A,N=m,O=L=K=0,b=-1,S=(G=1<<(q=Q))-1,d===1&&852<G||d===2&&592<G)return 1;for(;;){for(C=P-O,D=v[L]<E?(T=0,v[L]):v[L]>E?(T=re[oe+v[L]],k[W+v[L]]):(T=96,0),y=1<<P-O,A=w=1<<q;g[N+(K>>O)+(w-=y)]=C<<24|T<<16|D|0,w!==0;);for(y=1<<P-1;K&y;)y>>=1;if(y!==0?(K&=y-1,K+=y):K=0,L++,--R[P]==0){if(P===I)break;P=f[h+v[L]]}if(Q<P&&(K&S)!==b){for(O===0&&(O=Q),N+=A,H=1<<(q=P-O);q+O<I&&!((H-=R[q+O])<=0);)q++,H<<=1;if(G+=1<<q,d===1&&852<G||d===2&&592<G)return 1;g[b=K&S]=Q<<24|q<<16|N-m|0}}return K!==0&&(g[N+K]=P-O<<24|64<<16|0),_.bits=Q,0}},{"../utils/common":41}],51:[function(r,n,s){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,s){var a=r("../utils/common"),o=0,l=1;function c(X){for(var ie=X.length;0<=--ie;)X[ie]=0}var u=0,d=29,f=256,h=f+1+d,p=30,g=19,m=2*h+1,v=15,_=16,y=7,w=256,b=16,S=17,N=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],C=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(h+2));c(F);var P=new Array(2*p);c(P);var L=new Array(512);c(L);var A=new Array(256);c(A);var I=new Array(d);c(I);var Q,q,O,H=new Array(p);function G(X,ie,U,B,Y){this.static_tree=X,this.extra_bits=ie,this.extra_base=U,this.elems=B,this.max_length=Y,this.has_stree=X&&X.length}function K(X,ie){this.dyn_tree=X,this.max_code=0,this.stat_desc=ie}function k(X){return X<256?L[X]:L[256+(X>>>7)]}function W(X,ie){X.pending_buf[X.pending++]=255&ie,X.pending_buf[X.pending++]=ie>>>8&255}function R(X,ie,U){X.bi_valid>_-U?(X.bi_buf|=ie<<X.bi_valid&65535,W(X,X.bi_buf),X.bi_buf=ie>>_-X.bi_valid,X.bi_valid+=U-_):(X.bi_buf|=ie<<X.bi_valid&65535,X.bi_valid+=U)}function M(X,ie,U){R(X,U[2*ie],U[2*ie+1])}function re(X,ie){for(var U=0;U|=1&X,X>>>=1,U<<=1,0<--ie;);return U>>>1}function oe(X,ie,U){var B,Y,ue=new Array(v+1),he=0;for(B=1;B<=v;B++)ue[B]=he=he+U[B-1]<<1;for(Y=0;Y<=ie;Y++){var le=X[2*Y+1];le!==0&&(X[2*Y]=re(ue[le]++,le))}}function ce(X){var ie;for(ie=0;ie<h;ie++)X.dyn_ltree[2*ie]=0;for(ie=0;ie<p;ie++)X.dyn_dtree[2*ie]=0;for(ie=0;ie<g;ie++)X.bl_tree[2*ie]=0;X.dyn_ltree[2*w]=1,X.opt_len=X.static_len=0,X.last_lit=X.matches=0}function me(X){8<X.bi_valid?W(X,X.bi_buf):0<X.bi_valid&&(X.pending_buf[X.pending++]=X.bi_buf),X.bi_buf=0,X.bi_valid=0}function pe(X,ie,U,B){var Y=2*ie,ue=2*U;return X[Y]<X[ue]||X[Y]===X[ue]&&B[ie]<=B[U]}function je(X,ie,U){for(var B=X.heap[U],Y=U<<1;Y<=X.heap_len&&(Y<X.heap_len&&pe(ie,X.heap[Y+1],X.heap[Y],X.depth)&&Y++,!pe(ie,B,X.heap[Y],X.depth));)X.heap[U]=X.heap[Y],U=Y,Y<<=1;X.heap[U]=B}function we(X,ie,U){var B,Y,ue,he,le=0;if(X.last_lit!==0)for(;B=X.pending_buf[X.d_buf+2*le]<<8|X.pending_buf[X.d_buf+2*le+1],Y=X.pending_buf[X.l_buf+le],le++,B===0?M(X,Y,ie):(M(X,(ue=A[Y])+f+1,ie),(he=E[ue])!==0&&R(X,Y-=I[ue],he),M(X,ue=k(--B),U),(he=C[ue])!==0&&R(X,B-=H[ue],he)),le<X.last_lit;);M(X,w,ie)}function Ce(X,ie){var U,B,Y,ue=ie.dyn_tree,he=ie.stat_desc.static_tree,le=ie.stat_desc.has_stree,Se=ie.stat_desc.elems,Fe=-1;for(X.heap_len=0,X.heap_max=m,U=0;U<Se;U++)ue[2*U]!==0?(X.heap[++X.heap_len]=Fe=U,X.depth[U]=0):ue[2*U+1]=0;for(;X.heap_len<2;)ue[2*(Y=X.heap[++X.heap_len]=Fe<2?++Fe:0)]=1,X.depth[Y]=0,X.opt_len--,le&&(X.static_len-=he[2*Y+1]);for(ie.max_code=Fe,U=X.heap_len>>1;1<=U;U--)je(X,ue,U);for(Y=Se;U=X.heap[1],X.heap[1]=X.heap[X.heap_len--],je(X,ue,1),B=X.heap[1],X.heap[--X.heap_max]=U,X.heap[--X.heap_max]=B,ue[2*Y]=ue[2*U]+ue[2*B],X.depth[Y]=(X.depth[U]>=X.depth[B]?X.depth[U]:X.depth[B])+1,ue[2*U+1]=ue[2*B+1]=Y,X.heap[1]=Y++,je(X,ue,1),2<=X.heap_len;);X.heap[--X.heap_max]=X.heap[1],function(Ie,at){var Kt,wt,Or,pt,$n,ss,Yt=at.dyn_tree,ri=at.max_code,Xe=at.stat_desc.static_tree,Nt=at.stat_desc.has_stree,St=at.stat_desc.extra_bits,cn=at.stat_desc.extra_base,Nr=at.stat_desc.max_length,bn=0;for(pt=0;pt<=v;pt++)Ie.bl_count[pt]=0;for(Yt[2*Ie.heap[Ie.heap_max]+1]=0,Kt=Ie.heap_max+1;Kt<m;Kt++)Nr<(pt=Yt[2*Yt[2*(wt=Ie.heap[Kt])+1]+1]+1)&&(pt=Nr,bn++),Yt[2*wt+1]=pt,ri<wt||(Ie.bl_count[pt]++,$n=0,cn<=wt&&($n=St[wt-cn]),ss=Yt[2*wt],Ie.opt_len+=ss*(pt+$n),Nt&&(Ie.static_len+=ss*(Xe[2*wt+1]+$n)));if(bn!==0){do{for(pt=Nr-1;Ie.bl_count[pt]===0;)pt--;Ie.bl_count[pt]--,Ie.bl_count[pt+1]+=2,Ie.bl_count[Nr]--,bn-=2}while(0<bn);for(pt=Nr;pt!==0;pt--)for(wt=Ie.bl_count[pt];wt!==0;)ri<(Or=Ie.heap[--Kt])||(Yt[2*Or+1]!==pt&&(Ie.opt_len+=(pt-Yt[2*Or+1])*Yt[2*Or],Yt[2*Or+1]=pt),wt--)}}(X,ie),oe(ue,Fe,X.bl_count)}function j(X,ie,U){var B,Y,ue=-1,he=ie[1],le=0,Se=7,Fe=4;for(he===0&&(Se=138,Fe=3),ie[2*(U+1)+1]=65535,B=0;B<=U;B++)Y=he,he=ie[2*(B+1)+1],++le<Se&&Y===he||(le<Fe?X.bl_tree[2*Y]+=le:Y!==0?(Y!==ue&&X.bl_tree[2*Y]++,X.bl_tree[2*b]++):le<=10?X.bl_tree[2*S]++:X.bl_tree[2*N]++,ue=Y,Fe=(le=0)===he?(Se=138,3):Y===he?(Se=6,3):(Se=7,4))}function se(X,ie,U){var B,Y,ue=-1,he=ie[1],le=0,Se=7,Fe=4;for(he===0&&(Se=138,Fe=3),B=0;B<=U;B++)if(Y=he,he=ie[2*(B+1)+1],!(++le<Se&&Y===he)){if(le<Fe)for(;M(X,Y,X.bl_tree),--le!=0;);else Y!==0?(Y!==ue&&(M(X,Y,X.bl_tree),le--),M(X,b,X.bl_tree),R(X,le-3,2)):le<=10?(M(X,S,X.bl_tree),R(X,le-3,3)):(M(X,N,X.bl_tree),R(X,le-11,7));ue=Y,Fe=(le=0)===he?(Se=138,3):Y===he?(Se=6,3):(Se=7,4)}}c(H);var ae=!1;function z(X,ie,U,B){R(X,(u<<1)+(B?1:0),3),function(Y,ue,he,le){me(Y),W(Y,he),W(Y,~he),a.arraySet(Y.pending_buf,Y.window,ue,he,Y.pending),Y.pending+=he}(X,ie,U)}s._tr_init=function(X){ae||(function(){var ie,U,B,Y,ue,he=new Array(v+1);for(Y=B=0;Y<d-1;Y++)for(I[Y]=B,ie=0;ie<1<<E[Y];ie++)A[B++]=Y;for(A[B-1]=Y,Y=ue=0;Y<16;Y++)for(H[Y]=ue,ie=0;ie<1<<C[Y];ie++)L[ue++]=Y;for(ue>>=7;Y<p;Y++)for(H[Y]=ue<<7,ie=0;ie<1<<C[Y]-7;ie++)L[256+ue++]=Y;for(U=0;U<=v;U++)he[U]=0;for(ie=0;ie<=143;)F[2*ie+1]=8,ie++,he[8]++;for(;ie<=255;)F[2*ie+1]=9,ie++,he[9]++;for(;ie<=279;)F[2*ie+1]=7,ie++,he[7]++;for(;ie<=287;)F[2*ie+1]=8,ie++,he[8]++;for(oe(F,h+1,he),ie=0;ie<p;ie++)P[2*ie+1]=5,P[2*ie]=re(ie,5);Q=new G(F,E,f+1,h,v),q=new G(P,C,0,p,v),O=new G(new Array(0),T,0,g,y)}(),ae=!0),X.l_desc=new K(X.dyn_ltree,Q),X.d_desc=new K(X.dyn_dtree,q),X.bl_desc=new K(X.bl_tree,O),X.bi_buf=0,X.bi_valid=0,ce(X)},s._tr_stored_block=z,s._tr_flush_block=function(X,ie,U,B){var Y,ue,he=0;0<X.level?(X.strm.data_type===2&&(X.strm.data_type=function(le){var Se,Fe=4093624447;for(Se=0;Se<=31;Se++,Fe>>>=1)if(1&Fe&&le.dyn_ltree[2*Se]!==0)return o;if(le.dyn_ltree[18]!==0||le.dyn_ltree[20]!==0||le.dyn_ltree[26]!==0)return l;for(Se=32;Se<f;Se++)if(le.dyn_ltree[2*Se]!==0)return l;return o}(X)),Ce(X,X.l_desc),Ce(X,X.d_desc),he=function(le){var Se;for(j(le,le.dyn_ltree,le.l_desc.max_code),j(le,le.dyn_dtree,le.d_desc.max_code),Ce(le,le.bl_desc),Se=g-1;3<=Se&&le.bl_tree[2*D[Se]+1]===0;Se--);return le.opt_len+=3*(Se+1)+5+5+4,Se}(X),Y=X.opt_len+3+7>>>3,(ue=X.static_len+3+7>>>3)<=Y&&(Y=ue)):Y=ue=U+5,U+4<=Y&&ie!==-1?z(X,ie,U,B):X.strategy===4||ue===Y?(R(X,2+(B?1:0),3),we(X,F,P)):(R(X,4+(B?1:0),3),function(le,Se,Fe,Ie){var at;for(R(le,Se-257,5),R(le,Fe-1,5),R(le,Ie-4,4),at=0;at<Ie;at++)R(le,le.bl_tree[2*D[at]+1],3);se(le,le.dyn_ltree,Se-1),se(le,le.dyn_dtree,Fe-1)}(X,X.l_desc.max_code+1,X.d_desc.max_code+1,he+1),we(X,X.dyn_ltree,X.dyn_dtree)),ce(X),B&&me(X)},s._tr_tally=function(X,ie,U){return X.pending_buf[X.d_buf+2*X.last_lit]=ie>>>8&255,X.pending_buf[X.d_buf+2*X.last_lit+1]=255&ie,X.pending_buf[X.l_buf+X.last_lit]=255&U,X.last_lit++,ie===0?X.dyn_ltree[2*U]++:(X.matches++,ie--,X.dyn_ltree[2*(A[U]+f+1)]++,X.dyn_dtree[2*k(ie)]++),X.last_lit===X.lit_bufsize-1},s._tr_align=function(X){R(X,2,3),M(X,w,F),function(ie){ie.bi_valid===16?(W(ie,ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0):8<=ie.bi_valid&&(ie.pending_buf[ie.pending++]=255&ie.bi_buf,ie.bi_buf>>=8,ie.bi_valid-=8)}(X)}},{"../utils/common":41}],53:[function(r,n,s){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,n,s){(function(a){(function(o,l){if(!o.setImmediate){var c,u,d,f,h=1,p={},g=!1,m=o.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(o);v=v&&v.setTimeout?v:o,c={}.toString.call(o.process)==="[object process]"?function(b){process.nextTick(function(){y(b)})}:function(){if(o.postMessage&&!o.importScripts){var b=!0,S=o.onmessage;return o.onmessage=function(){b=!1},o.postMessage("","*"),o.onmessage=S,b}}()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",w,!1):o.attachEvent("onmessage",w),function(b){o.postMessage(f+b,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(b){y(b.data)},function(b){d.port2.postMessage(b)}):m&&"onreadystatechange"in m.createElement("script")?(u=m.documentElement,function(b){var S=m.createElement("script");S.onreadystatechange=function(){y(b),S.onreadystatechange=null,u.removeChild(S),S=null},u.appendChild(S)}):function(b){setTimeout(y,0,b)},v.setImmediate=function(b){typeof b!="function"&&(b=new Function(""+b));for(var S=new Array(arguments.length-1),N=0;N<S.length;N++)S[N]=arguments[N+1];var E={callback:b,args:S};return p[h]=E,c(h),h++},v.clearImmediate=_}function _(b){delete p[b]}function y(b){if(g)setTimeout(y,0,b);else{var S=p[b];if(S){g=!0;try{(function(N){var E=N.callback,C=N.args;switch(C.length){case 0:E();break;case 1:E(C[0]);break;case 2:E(C[0],C[1]);break;case 3:E(C[0],C[1],C[2]);break;default:E.apply(l,C)}})(S)}finally{_(b),g=!1}}}}function w(b){b.source===o&&typeof b.data=="string"&&b.data.indexOf(f)===0&&y(+b.data.slice(f.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof nn<"u"?nn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(J3);var Eq=J3.exports;const Nq=d1(Eq),jq=()=>{const{user:e}=mt(),t=oo(),{toast:r}=dt(),[n,s]=x.useState(""),[a,o]=x.useState(null),[l,c]=x.useState(!1),[u,d]=x.useState(!1),[f,h]=x.useState(null),[p,g]=x.useState(null),[m,v]=x.useState("card"),[_,y]=x.useState([]),[w,b]=x.useState(!1),{documents:S,folders:N,userProfiles:E,uploadDocument:C,createFolder:T,deleteDocument:D,deleteFolder:F,renameDocumentMutation:P,moveDocument:L,refreshDocuments:A,toggleImportant:I}=Jy(a),Q=!!n.trim(),q=a||"",O=x.useMemo(()=>N?Q?N.filter(j=>j.name&&j.name.toLowerCase().includes(n.toLowerCase())):N.filter(j=>(j.parent_folder_id??"")===q):[],[N,q,n,Q]),H=x.useMemo(()=>S?Q?S.filter(j=>j.name&&j.name.toLowerCase().includes(n.toLowerCase())):S.filter(j=>(j.folder_id??"")===q):[],[S,q,n,Q]),K=(()=>{if(!a||!N||N.length===0)return[];const j=[];let se=a,ae=0;const z=10;for(;se&&ae<z;){const X=N.find(ie=>ie.id===se);if(X)j.unshift(X),se=X.parent_folder_id;else break;ae++}return j})(),k=async j=>{try{return await F.mutateAsync(j),r({title:"Success",description:"Folder deleted successfully"}),!0}catch(se){return r({title:"Error",description:se.message||"Failed to delete folder",variant:"destructive"}),!1}},W=async(j,se)=>{await L.mutateAsync({documentId:j,targetFolderId:se})},R=async(j,se)=>{try{await D.mutateAsync(j),r({title:"Success",description:`"${se}" moved to trash`})}catch(ae){r({title:"Error",description:ae.message||"Failed to delete document",variant:"destructive"})}},M=async()=>{if(_.length!==0)try{const j=H.filter(se=>_.includes(se.id));for(const se of j)await D.mutateAsync(se.id);y([]),r({title:"Success",description:`${j.length} document(s) moved to trash`})}catch(j){r({title:"Error",description:j.message||"Failed to delete documents",variant:"destructive"})}},re=async()=>{if(_.length===0)return;const j=H.filter(U=>_.includes(U.id));if(j.length===1){const U=j[0];if(typeof U.file_path=="string"&&U.file_path){const B=document.createElement("a");B.href=U.file_path,B.download=U.name||"document",B.target="_blank",B.rel="noopener noreferrer",document.body.appendChild(B),B.click(),document.body.removeChild(B),r({title:"Download Started",description:"Started download for 1 document."})}else r({title:"No Download",description:"No downloadable document found.",variant:"destructive"});return}const se=new Nq;let ae=0;for(const U of j)if(typeof U.file_path=="string"&&U.file_path)try{const B=await fetch(U.file_path);if(!B.ok)continue;const Y=await B.blob();se.file(U.name||`document-${U.id}`,Y),ae++}catch{}if(ae===0){r({title:"No Download",description:"No downloadable documents found.",variant:"destructive"});return}const z=await se.generateAsync({type:"blob"}),X=URL.createObjectURL(z),ie=document.createElement("a");ie.href=X,ie.download=`documents-${Date.now()}.zip`,document.body.appendChild(ie),ie.click(),document.body.removeChild(ie),setTimeout(()=>URL.revokeObjectURL(X),1e4),r({title:"Download Started",description:`Started download for ${ae} documents as ZIP.`})},oe=async j=>{if(_.length!==0)try{const se=H.filter(ae=>_.includes(ae.id));for(const ae of se)await I.mutateAsync({documentId:ae.id,isImportant:j});y([]),r({title:"Success",description:`${se.length} document(s) ${j?"marked as":"unmarked from"} important`})}catch(se){r({title:"Error",description:se.message||"Failed to update documents",variant:"destructive"})}},ce=j=>{y(j)},me=(j,se="")=>j??se;function pe(j,se){if(!j||!se)return"Folder";const ae=j.find(z=>z.id===se);return ae&&typeof ae.name=="string"&&ae.name.length>0?ae.name:"Folder"}const je=async(j,se)=>{r({title:"Copy",description:`Copy document ${j} to folder ${se}`})},we=j=>t.isAdmin||t.isSuperAdmin;if(!N||!S)return i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});const Ce=O.length===0&&H.length===0;return i.jsxs("div",{className:"max-w-7xl mx-auto px-0 sm:px-6 lg:px-8 py-6 space-y-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[a&&i.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>o(null),title:"Go back",children:[i.jsx($0,{className:"h-4 w-4"}),i.jsx("span",{children:"Back"})]}),i.jsx("h1",{className:"text-2xl font-bold",children:a?pe(N,a):"Document Repository"})]}),i.jsxs("div",{className:"flex gap-2",children:[!w&&i.jsxs(de,{onClick:()=>c(!0),className:"bg-[#8E1616] hover:bg-[#7A1414] text-white flex items-center gap-2",children:[i.jsx(fa,{className:"h-4 w-4"})," Upload"]}),i.jsxs(de,{variant:w?"default":"outline",onClick:()=>b(!w),className:"flex items-center gap-2",children:[i.jsx(br,{className:"h-4 w-4"}),w?"Exit Trash":"Trash"]}),i.jsx(de,{variant:m==="card"?"default":"ghost",size:"icon",onClick:()=>v("card"),children:i.jsx(N6,{className:"h-4 w-4"})}),i.jsx(de,{variant:m==="list"?"default":"ghost",size:"icon",onClick:()=>v("list"),children:i.jsx(j6,{className:"h-4 w-4"})})]})]}),i.jsx("div",{className:"bg-muted/50 rounded-lg p-4",children:i.jsx(X3,{children:i.jsxs(Q3,{children:[i.jsx(im,{children:i.jsxs(s1,{onClick:()=>{o(null),b(!1)},className:"cursor-pointer flex items-center gap-1",children:[i.jsx(hf,{className:"h-4 w-4"})," Home"]})}),w&&i.jsxs(i.Fragment,{children:[i.jsx(i1,{}),i.jsx(im,{children:i.jsxs(a1,{className:"flex items-center gap-1",children:[i.jsx(br,{className:"h-4 w-4"})," Trash"]})})]}),!w&&K.map((j,se)=>i.jsxs(ke.Fragment,{children:[i.jsx(i1,{}),i.jsx(im,{children:se===K.length-1?i.jsx(a1,{children:j.name}):i.jsx(s1,{onClick:()=>o(j.id),className:"cursor-pointer",children:j.name})})]},j.id))]})})}),i.jsxs("div",{className:"relative flex items-center gap-2 mb-4 w-full max-w-md",children:[i.jsx(B0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),i.jsx(vp,{type:"text",placeholder:"Search documents and folders...",value:n||"",onChange:j=>s(j.target.value),className:"pl-10 bg-background border-input"})]}),_.length>0&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[_.length," document(s) selected"]}),i.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[i.jsxs(de,{variant:"outline",size:"sm",onClick:re,className:"text-blue-600 hover:bg-blue-100",children:[i.jsx(hs,{className:"h-4 w-4 mr-1"}),"Download"]}),i.jsxs(de,{variant:"outline",size:"sm",onClick:()=>oe(!0),className:"text-yellow-600 hover:bg-yellow-100",children:[i.jsx(xv,{className:"h-4 w-4 mr-1"}),"Mark Important"]}),i.jsxs(de,{variant:"outline",size:"sm",onClick:()=>oe(!1),className:"text-gray-600 hover:bg-gray-100",children:[i.jsx(F6,{className:"h-4 w-4 mr-1"}),"Unmark Important"]}),(t.isAdmin||t.isSuperAdmin)&&i.jsxs(de,{variant:"destructive",size:"sm",onClick:M,children:[i.jsx(br,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]}),w?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[i.jsx(br,{className:"h-5 w-5"}),"Recycle Bin"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Items will be permanently deleted after 30 days"})]}),i.jsx(kS,{isOpen:!0,onClose:()=>b(!1),inline:!0})]}):Ce?i.jsx("div",{className:"text-center text-muted-foreground py-12 text-lg",children:"No documents or folders found."}):i.jsxs(i.Fragment,{children:[i.jsx(yq,{folders:O.map(j=>({...j,name:me(j.name,"Untitled"),id:me(j.id,"")})),userProfiles:E||{},onFolderClick:o,onDeleteFolder:k,canAccessLockedFolders:!0,viewMode:m}),i.jsx(_q,{documents:H.map(j=>({...j,name:me(j.name,"Untitled"),id:me(j.id,"")})),userProfiles:E||{},currentUserId:e==null?void 0:e.id,canDeleteDocument:we,onViewDocument:g,onDownloadDocument:()=>{},onToggleImportant:()=>{},onRenameDocument:h,onCopyDocument:()=>{},onDeleteDocument:R,onMoveDocument:W,onCopyToFolder:je,onDragStart:()=>{},folders:N,viewMode:m,selectedIds:_,onSelectionChange:ce})]}),i.jsx(bq,{isOpen:l,onClose:()=>c(!1),onUpload:async(j,se)=>{try{await C(j,se||a||void 0),c(!1),r({title:"Success",description:`Document "${j.name}" uploaded successfully`})}catch(ae){r({title:"Error",description:ae.message||"Failed to upload document",variant:"destructive"})}},currentFolderId:a}),i.jsx(Sq,{isOpen:!!f,document:f,onClose:()=>h(null),onRename:async j=>{try{await P.mutateAsync({documentId:f==null?void 0:f.id,newName:j}),h(null),r({title:"Success",description:"Document renamed successfully"})}catch{r({title:"Error",description:"Failed to rename document",variant:"destructive"})}}}),i.jsx(kS,{isOpen:u,onClose:()=>d(!1)}),i.jsx(Zy,{isOpen:!!p,onClose:()=>g(null),document:p,documentType:"document"})]})},kq=({email:e,onBack:t,onOpenInOutlook:r})=>{var u,d;const n=f=>new Date(f).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),s=f=>f==="high"?i.jsx(Be,{variant:"destructive",className:"text-xs",children:"High Priority"}):null,a=f=>f.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').trim(),o=f=>{navigator.clipboard.writeText(f)},l=[],c=[];return i.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsxs(de,{variant:"ghost",onClick:t,className:"flex items-center gap-2","aria-label":"Back to Inbox",children:[i.jsx($0,{className:"h-4 w-4"}),"Back to Inbox"]}),i.jsx(de,{variant:"outline",onClick:()=>r(e),className:"flex items-center gap-2 ml-auto","aria-label":"Open in Outlook",children:i.jsx(Mc,{children:i.jsxs(Pd,{children:[i.jsx(Dd,{asChild:!0,children:i.jsx(ua,{className:"h-4 w-4"})}),i.jsx(Oc,{children:"Open in Outlook"})]})})})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm",children:[i.jsx("div",{className:"border-b border-gray-100 p-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsx("h1",{className:"text-xl font-semibold text-gray-900 flex-1",children:e.subject||"No Subject"}),s(e.importance)]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(Ki,{className:"h-5 w-5 text-white"})}),i.jsx("div",{className:"flex-1 min-w-0",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700 w-12",children:"From:"}),i.jsx("span",{className:"font-medium text-gray-900",children:((u=e.from)==null?void 0:u.name)||"Unknown Sender"}),i.jsxs("span",{className:"text-sm text-gray-600",children:["<",((d=e.from)==null?void 0:d.address)||"",">"]}),i.jsx("button",{onClick:()=>{var f;return o(((f=e.from)==null?void 0:f.address)||"")},className:"text-blue-600 hover:text-blue-800 transition-colors p-1",title:"Copy email address",children:i.jsx(Pm,{className:"h-3 w-3"})})]})})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx("span",{className:"text-xs font-semibold text-white",children:"TO"})}),i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700 w-12",children:"To:"}),i.jsx("span",{className:"text-sm text-gray-900",children:"Me"}),i.jsx("button",{onClick:()=>o("current-user@email.com"),className:"text-blue-600 hover:text-blue-800 transition-colors p-1",title:"Copy email address",children:i.jsx(Pm,{className:"h-3 w-3"})})]})})]}),l.length>0&&i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-yellow-500 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx("span",{className:"text-xs font-semibold text-white",children:"CC"})}),i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700 w-12",children:"Cc:"}),i.jsx("span",{className:"text-sm text-gray-900",children:l.join(", ")})]})})]}),c.length>0&&i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx("span",{className:"text-xs font-semibold text-white",children:"BCC"})}),i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700 w-12",children:"Bcc:"}),i.jsx("span",{className:"text-sm text-gray-900",children:c.join(", ")})]})})]}),i.jsxs("div",{className:"flex items-center gap-3 pt-3 border-t border-gray-200 mt-4",children:[i.jsx(Tr,{className:"h-4 w-4 text-gray-400"}),i.jsxs("span",{className:"text-sm text-gray-600",children:["Sent: ",n(e.receivedDateTime||"")]}),e.hasAttachments&&i.jsxs("div",{className:"flex items-center gap-1 ml-4",children:[i.jsx(Ac,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-600",children:"Has attachments"})]})]})]})]})}),i.jsx("div",{className:"p-6",children:a(e.body)?i.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-4",children:i.jsx("div",{className:"text-gray-800 text-sm leading-relaxed whitespace-pre-wrap font-mono",children:a(e.body)})}):i.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-4 text-center",children:i.jsx("p",{className:"text-gray-500 italic",children:"This email has no content."})})}),i.jsx("div",{className:"border-t border-gray-100 p-4 bg-gray-50",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-500",children:["Message ID: ",e.id.substring(0,20),"..."]}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsx(de,{variant:"default",size:"sm",onClick:()=>r(e),className:"flex items-center gap-2",children:i.jsx(Mc,{children:i.jsxs(Pd,{children:[i.jsx(Dd,{asChild:!0,children:i.jsx(ua,{className:"h-4 w-4"})}),i.jsx(Oc,{children:"Open in Outlook"})]})})})})]})})]})]})},Cq=()=>{const[e,t]=x.useState(""),[r,n]=x.useState(null),{emails:s,loading:a,fetchEmails:o,markAsRead:l,sendEmail:c,sending:u}=n4(),d=25,f=s.filter(b=>b.subject.toLowerCase().includes(e.toLowerCase())||b.from.name.toLowerCase().includes(e.toLowerCase())||b.from.address.toLowerCase().includes(e.toLowerCase())),h=f.slice(0,d),p=f.length>d,g=b=>{const S=new Date(b),E=(new Date().getTime()-S.getTime())/(1e3*60*60);return E<24?S.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):E<168?S.toLocaleDateString("en-US",{weekday:"short"}):S.toLocaleDateString("en-US",{month:"short",day:"numeric"})},m=b=>b==="high"?i.jsx(Be,{variant:"destructive",className:"text-xs",children:"High Priority"}):null,v=b=>{const S=`https://outlook.office.com/mail/inbox/id/${b.id}`;window.open(S,"_blank","noopener,noreferrer")},_=()=>{window.open("https://outlook.office.com/mail/inbox","_blank","noopener,noreferrer")},y=async b=>{await l(b.id),n(b)},w=()=>{n(null)};return r?i.jsx(kq,{email:r,onBack:w,onOpenInOutlook:v}):i.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[i.jsxs("div",{className:"flex flex-col space-y-2",children:[i.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Email"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Manage your communications"})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[i.jsx("div",{className:"flex-1 max-w-md",children:i.jsxs("div",{className:"relative",children:[i.jsx(B0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(lt,{placeholder:"Search emails by subject, sender, or address",className:"pl-10 border-gray-300 focus:border-blue-500 focus:ring-blue-500",value:e,onChange:b=>t(b.target.value)})]})}),i.jsxs(de,{variant:"outline",onClick:o,disabled:a,className:"flex items-center gap-2 border-gray-300 hover:bg-gray-50","aria-label":"Refresh Email List",children:[i.jsx(Rn,{className:`h-4 w-4 ${a?"animate-spin":""}`}),"Refresh"]})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[!a&&h.length>0&&i.jsx("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",h.length," of ",f.length," emails",p&&` (${f.length-d} more available)`]})}),a?i.jsx("div",{className:"flex items-center justify-center py-16",children:i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Loading emails..."})]})}):h.length>0?i.jsx("div",{className:"divide-y divide-gray-100 text-sm",children:i.jsx("div",{className:"overflow-x-auto",children:h.map((b,S)=>{var N;return i.jsx("div",{className:`group hover:bg-gray-50 transition-colors cursor-pointer ${b.isRead?"":"bg-blue-50/30"}`,onClick:()=>y(b),children:i.jsx("div",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[!b.isRead&&i.jsx(fk,{className:"h-2 w-2 fill-blue-500 text-blue-500 mt-2 flex-shrink-0"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:`text-sm truncate ${b.isRead?"font-medium text-gray-700":"font-semibold text-gray-900"}`,children:((N=b.from)==null?void 0:N.name)||"Unknown Sender"}),b.hasAttachments&&i.jsx(Ac,{className:"h-3 w-3 text-gray-400 flex-shrink-0"}),m(b.importance)]}),i.jsx("div",{className:"mb-1",children:i.jsx("span",{className:`text-sm ${b.isRead?"text-gray-700":"font-semibold text-gray-900"} line-clamp-1`,children:b.subject||"No Subject"})}),i.jsxs("p",{className:"text-sm text-gray-600 line-clamp-1",children:[b.body.replace(/<[^>]*>/g,"").substring(0,100),b.body.replace(/<[^>]*>/g,"").length>100?"...":""]})]})]}),i.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[i.jsx("span",{className:"text-xs text-gray-500 min-w-fit",children:g(b.receivedDateTime||"")}),i.jsxs(de,{variant:"ghost",size:"sm",onClick:E=>{E.stopPropagation(),v(b)},className:"opacity-0 group-hover:opacity-100 transition-opacity h-8 px-3 text-blue-600 hover:bg-blue-100","aria-label":"Open in Outlook",children:[i.jsx(ua,{className:"h-3 w-3 mr-1"}),"Open"]})]})]})})},b.id||S)})})}):i.jsx("div",{className:"text-center py-16",children:i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:i.jsx(Ja,{className:"h-8 w-8 text-gray-400"})}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e?"No emails found":"No emails"}),i.jsx("p",{className:"text-sm text-gray-500 max-w-sm",children:e?"Try adjusting your search terms":s.length===0?"Connect your Microsoft account in Settings to view emails":"All caught up! No new emails to show."})]})]})})]}),p&&i.jsx("div",{className:"mt-4 text-center",children:i.jsx(de,{variant:"outline",onClick:_,className:"text-blue-600 hover:bg-blue-100",children:"View More in Outlook"})})]})},Tq=({open:e,onOpenChange:t})=>{const[r,n]=x.useState(""),[s,a]=x.useState(""),[o,l]=x.useState("present"),[c,u]=x.useState("physical"),[d,f]=x.useState(""),[h,p]=x.useState(!1),{markAttendance:g,attendanceRecords:m=[]}=Lf(),{meetings:v}=cl(),{user:_}=mt(),y=v.filter(E=>{if(!_)return!1;const C=Array.isArray(E.attendees)&&E.attendees.some(D=>D.user_id===_.id)||Array.isArray(E.manual_attendees)&&E.manual_attendees.some(D=>D.email===_.email),T=m.some(D=>D.meeting_id===E.id&&D.user_id===_.id);return C&&!T}),w=v.find(E=>E.id===r);x.useEffect(()=>{e&&(n(""),a(""),l("present"),u("physical"),f(""))},[e]);const b=async()=>{if(!(!r||!_)){p(!0);try{await g({meetingId:r,userId:_.id,status:o,type:c,joinTime:o!=="absent"?new Date:void 0,notes:d})&&t(!1)}catch(E){console.error("Error marking attendance:",E)}finally{p(!1)}}},S=E=>{const C=new Date,T=new Date(E.start_time),D=new Date(E.end_time);return C>=T&&C<=D?i.jsx(Be,{className:"bg-green-500 text-white",children:"Live"}):C<T?i.jsx(Be,{className:"bg-blue-500 text-white",children:"Upcoming"}):i.jsx(Be,{variant:"secondary",children:"Completed"})},N=E=>{const C=new Date(E.start_time);return{date:ht(C,"MMM dd, yyyy"),time:ht(C,"h:mm a"),isOnline:E.meeting_type==="online"||E.teams_join_url}};return i.jsx(bt,{open:e,onOpenChange:t,children:i.jsxs(xt,{className:"sm:max-w-[600px]",children:[i.jsxs(vt,{children:[i.jsxs(yt,{className:"flex items-center space-x-2",children:[i.jsx(Wo,{className:"h-5 w-5"}),i.jsx("span",{children:"Mark Attendance"})]}),i.jsx(Mt,{children:"Record attendance for a meeting"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"meeting",children:"Select Meeting"}),i.jsxs(ma,{value:r,onValueChange:n,children:[i.jsx(Ys,{children:i.jsx(pa,{placeholder:"Choose a meeting"})}),i.jsx(qs,{children:y.map(E=>{const C=N(E);return i.jsx(Rt,{value:E.id,children:i.jsx("div",{className:"flex items-center justify-between w-full",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:E.title}),i.jsxs("div",{className:"text-sm text-gray-500 flex items-center space-x-2",children:[i.jsxs("span",{className:"flex items-center space-x-1",children:[i.jsx(Tr,{className:"h-3 w-3"}),i.jsx("span",{children:C.date})]}),i.jsxs("span",{className:"flex items-center space-x-1",children:[i.jsx(mr,{className:"h-3 w-3"}),i.jsx("span",{children:C.time})]}),C.isOnline?i.jsx(Us,{className:"h-3 w-3"}):i.jsx(Fa,{className:"h-3 w-3"})]})]})})},E.id)})})]}),w&&i.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[S(w),i.jsx("span",{className:"text-sm text-gray-500",children:w.location||"Online Meeting"})]})]}),w&&w.meeting_type==="hybrid"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{children:"Attendance Type"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs(de,{variant:c==="physical"?"default":"outline",size:"sm",onClick:()=>u("physical"),children:[i.jsx(Fa,{className:"h-4 w-4 mr-2"}),"In Person"]}),i.jsxs(de,{variant:c==="online"?"default":"outline",size:"sm",onClick:()=>u("online"),children:[i.jsx(Us,{className:"h-4 w-4 mr-2"}),"Online"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{children:"Attendance Status"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(de,{variant:o==="present"?"default":"outline",size:"sm",onClick:()=>l("present"),className:o==="present"?"bg-green-500 hover:bg-green-600":"",children:"Present"}),i.jsx(de,{variant:o==="late"?"default":"outline",size:"sm",onClick:()=>l("late"),className:o==="late"?"bg-yellow-500 hover:bg-yellow-600":"",children:"Late"}),i.jsx(de,{variant:o==="absent"?"default":"outline",size:"sm",onClick:()=>l("absent"),className:o==="absent"?"bg-red-500 hover:bg-red-600":"",children:"Absent"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"notes",children:"Notes (Optional)"}),i.jsx(Ks,{id:"notes",value:d,onChange:E=>f(E.target.value),placeholder:"Any additional notes about the attendance...",rows:3})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[i.jsx(de,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),i.jsxs(de,{onClick:b,disabled:h||!r,className:"bg-primary hover:bg-primary/90",children:[i.jsx(Wo,{className:"h-4 w-4 mr-2"}),h?"Recording...":"Mark Attendance"]})]})]})]})})},Aq=({open:e,onOpenChange:t})=>{var w;const[r,n]=x.useState([]),[s,a]=x.useState(!1),[o,l]=x.useState("current_month"),{generateAttendanceReport:c}=Lf(),u=()=>{const b=[{id:"1",first_name:"Arjun",last_name:"Sharma",email:"arjun.sharma@example.com"},{id:"2",first_name:"Priya",last_name:"Patel",email:"priya.patel@example.com"},{id:"3",first_name:"Rahul",last_name:"Gupta",email:"rahul.gupta@example.com"},{id:"4",first_name:"Kavita",last_name:"Singh",email:"kavita.singh@example.com"},{id:"5",first_name:"Amit",last_name:"Kumar",email:"amit.kumar@example.com"},{id:"6",first_name:"Sneha",last_name:"Joshi",email:"sneha.joshi@example.com"},{id:"7",first_name:"Vikram",last_name:"Reddy",email:"vikram.reddy@example.com"},{id:"8",first_name:"Meera",last_name:"Nair",email:"meera.nair@example.com"}],S=[],N=new Date;return b.forEach((E,C)=>{const T=5+Math.floor(Math.random()*4);for(let D=0;D<T;D++){const F=new Date(N.getTime()-Math.random()*30*24*60*60*1e3),P=C<3?[.8,.15,.05]:C<6?[.6,.25,.15]:[.4,.3,.3],L=Math.random();let A="present";L<P[2]?A="absent":L<P[1]+P[2]&&(A="late"),S.push({id:`${E.id}-${D}`,meeting_id:`meeting-${D+1}`,user_id:E.id,attendance_status:A,duration_minutes:A==="absent"?0:45+Math.floor(Math.random()*60),created_at:F.toISOString(),profiles:E})}}),S};x.useEffect(()=>{e&&f()},[e,o]);const d=()=>{const b=new Date;switch(o){case"current_week":return{start:vs(b),end:Ud(b)};case"last_week":return{start:vs(V2(b,1)),end:Ud(V2(b,1))};case"current_month":return{start:Sr(b),end:Ra(b)};case"last_month":return{start:Sr(Wg(b,1)),end:Ra(Wg(b,1))};case"last_3_months":return{start:Sr(Wg(b,2)),end:Ra(b)};default:return{start:Sr(b),end:Ra(b)}}},f=async()=>{a(!0);try{const{start:b,end:S}=d(),N=await c(void 0,b,S);if(!N||N.length===0){const E=u();n(E)}else n(N)}catch(b){console.error("Error loading report data:",b);const S=u();n(S)}finally{a(!1)}},h=()=>{if(!r.length)return{totalMeetings:0,avgAttendance:0,totalMembers:0,activeMembers:0};const b=[...new Set(r.map(T=>T.meeting_id))],S=[...new Set(r.map(T=>T.user_id))],N=[...new Set(r.filter(T=>T.attendance_status==="present"||T.attendance_status==="late").map(T=>T.user_id))],E=b.length,C=r.length>0?Math.round(r.filter(T=>T.attendance_status==="present"||T.attendance_status==="late").length/r.length*100):0;return{totalMeetings:E,avgAttendance:C,totalMembers:S.length,activeMembers:N.length}},p=()=>{const b=r.reduce((S,N)=>{var T,D,F;const E=N.user_id,C=`${(T=N.profiles)==null?void 0:T.first_name} ${(D=N.profiles)==null?void 0:D.last_name}`;switch(S[E]||(S[E]={name:C,email:(F=N.profiles)==null?void 0:F.email,totalMeetings:0,attended:0,late:0,absent:0,totalDuration:0,averageDuration:0,attendanceStreak:0,lastAttendance:null}),S[E].totalMeetings++,N.attendance_status){case"present":S[E].attended++,S[E].lastAttendance=N.created_at;break;case"late":S[E].late++,S[E].lastAttendance=N.created_at;break;case"absent":S[E].absent++;break}return N.duration_minutes&&(S[E].totalDuration+=N.duration_minutes),S},{});return Object.values(b).forEach(S=>{S.totalMeetings>0&&(S.averageDuration=Math.round(S.totalDuration/S.totalMeetings),S.attendanceRate=Math.round((S.attended+S.late)/S.totalMeetings*100))}),Object.values(b).sort((S,N)=>N.attendanceRate-S.attendanceRate)},g=()=>{const b=r.reduce((S,N)=>{var T,D,F;const E=N.user_id,C=`${(T=N.profiles)==null?void 0:T.first_name} ${(D=N.profiles)==null?void 0:D.last_name}`;switch(S[E]||(S[E]={name:C,email:(F=N.profiles)==null?void 0:F.email,totalMeetings:0,attended:0,late:0,absent:0,totalDuration:0}),S[E].totalMeetings++,N.attendance_status){case"present":S[E].attended++;break;case"late":S[E].late++;break;case"absent":S[E].absent++;break}return N.duration_minutes&&(S[E].totalDuration+=N.duration_minutes),S},{});return Object.values(b)},m=()=>{const S=["Member,Email,Total Meetings,Attended,Late,Absent,Attendance Rate,Total Duration (hours)",...g().map(T=>[T.name,T.email,T.totalMeetings,T.attended,T.late,T.absent,`${Math.round((T.attended+T.late)/T.totalMeetings*100)}%`,`${Math.round(T.totalDuration/60*100)/100}`].join(","))].join(`
`),N=new Blob([S],{type:"text/csv"}),E=URL.createObjectURL(N),C=document.createElement("a");C.href=E,C.download=`attendance_analytics_${o}_${ht(new Date,"yyyy-MM-dd")}.csv`,C.click(),URL.revokeObjectURL(E)},v=h(),_=p(),y=g();return i.jsx(bt,{open:e,onOpenChange:t,children:i.jsxs(xt,{className:"sm:max-w-[1200px] max-h-[90vh] overflow-y-auto",children:[i.jsxs(vt,{children:[i.jsxs(yt,{className:"flex items-center space-x-2",children:[i.jsx(Ti,{className:"h-5 w-5"}),i.jsx("span",{children:"Attendance Analytics & Reports"})]}),i.jsxs(Mt,{children:["Comprehensive attendance analytics with member-wise insights and tracking",r.length>0&&((w=r[0].profiles)==null?void 0:w.first_name)==="Arjun"&&i.jsx("span",{className:"text-orange-600 font-medium",children:" (Sample Data)"})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs(ma,{value:o,onValueChange:l,children:[i.jsx(Ys,{className:"w-[200px]",children:i.jsx(pa,{placeholder:"Select period"})}),i.jsxs(qs,{children:[i.jsx(Rt,{value:"current_week",children:"Current Week"}),i.jsx(Rt,{value:"last_week",children:"Last Week"}),i.jsx(Rt,{value:"current_month",children:"Current Month"}),i.jsx(Rt,{value:"last_month",children:"Last Month"}),i.jsx(Rt,{value:"last_3_months",children:"Last 3 Months"})]})]}),i.jsxs(de,{onClick:m,variant:"outline",children:[i.jsx(hs,{className:"h-4 w-4 mr-2"}),"Download Report"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[i.jsxs(He,{children:[i.jsx(rt,{className:"pb-2",children:i.jsx(st,{className:"text-sm font-medium text-gray-600",children:"Total Meetings"})}),i.jsxs(Ye,{children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:v.totalMeetings}),i.jsx("p",{className:"text-xs text-gray-500",children:"In selected period"})]})]}),i.jsxs(He,{children:[i.jsx(rt,{className:"pb-2",children:i.jsx(st,{className:"text-sm font-medium text-gray-600",children:"Average Attendance"})}),i.jsxs(Ye,{children:[i.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[v.avgAttendance,"%"]}),i.jsx("p",{className:"text-xs text-gray-500",children:"Overall attendance rate"})]})]}),i.jsxs(He,{children:[i.jsx(rt,{className:"pb-2",children:i.jsx(st,{className:"text-sm font-medium text-gray-600",children:"Total Members"})}),i.jsxs(Ye,{children:[i.jsx("div",{className:"text-2xl font-bold text-purple-600",children:v.totalMembers}),i.jsx("p",{className:"text-xs text-gray-500",children:"Registered members"})]})]}),i.jsxs(He,{children:[i.jsx(rt,{className:"pb-2",children:i.jsx(st,{className:"text-sm font-medium text-gray-600",children:"Active Members"})}),i.jsxs(Ye,{children:[i.jsx("div",{className:"text-2xl font-bold text-orange-600",children:v.activeMembers}),i.jsx("p",{className:"text-xs text-gray-500",children:"With attendance records"})]})]})]}),i.jsxs(dl,{defaultValue:"summary",className:"space-y-4",children:[i.jsxs(lo,{className:"grid w-full grid-cols-2",children:[i.jsx(Br,{value:"summary",children:"Member Summary"}),i.jsx(Br,{value:"analytics",children:"Detailed Analytics"})]}),i.jsx(Ur,{value:"summary",children:i.jsxs(He,{children:[i.jsx(rt,{children:i.jsxs(st,{className:"flex items-center space-x-2",children:[i.jsx(lr,{className:"h-4 w-4"}),i.jsx("span",{children:"Member Attendance Summary"})]})}),i.jsx(Ye,{children:s?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):y.length>0?i.jsx("div",{className:"rounded-md border",children:i.jsxs(kf,{children:[i.jsx(Cf,{children:i.jsxs(Ka,{children:[i.jsx(nr,{children:"Member"}),i.jsx(nr,{children:"Total Meetings"}),i.jsx(nr,{children:"Present"}),i.jsx(nr,{children:"Late"}),i.jsx(nr,{children:"Absent"}),i.jsx(nr,{children:"Attendance Rate"}),i.jsx(nr,{children:"Total Time"})]})}),i.jsx(Tf,{children:y.map((b,S)=>{const N=Math.round((b.attended+b.late)/b.totalMeetings*100);return i.jsxs(Ka,{children:[i.jsx(sr,{children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:b.name}),i.jsx("div",{className:"text-sm text-gray-500",children:b.email})]})}),i.jsx(sr,{children:b.totalMeetings}),i.jsx(sr,{children:i.jsx(Be,{className:"bg-green-100 text-green-800 border-green-200",children:b.attended})}),i.jsx(sr,{children:i.jsx(Be,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:b.late})}),i.jsx(sr,{children:i.jsx(Be,{className:"bg-red-100 text-red-800 border-red-200",children:b.absent})}),i.jsx(sr,{children:i.jsxs(Be,{variant:N>=80?"default":N>=60?"secondary":"destructive",children:[N,"%"]})}),i.jsx(sr,{children:i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(mr,{className:"h-3 w-3"}),i.jsxs("span",{children:[Math.round(b.totalDuration/60*100)/100,"h"]})]})})]},S)})})]})}):i.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[i.jsx(Ti,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No attendance data available for selected period"})]})})]})}),i.jsx(Ur,{value:"analytics",children:i.jsxs(He,{children:[i.jsx(rt,{children:i.jsxs(st,{className:"flex items-center space-x-2",children:[i.jsx(B6,{className:"h-4 w-4"}),i.jsx("span",{children:"Detailed Member Analytics"})]})}),i.jsx(Ye,{children:s?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):_.length>0?i.jsx("div",{className:"space-y-4",children:_.map((b,S)=>i.jsxs(He,{className:"p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg",children:b.name}),i.jsx("p",{className:"text-sm text-gray-500",children:b.email})]}),i.jsxs(Be,{variant:b.attendanceRate>=80?"default":b.attendanceRate>=60?"secondary":"destructive",className:"text-sm",children:[b.attendanceRate,"% Attendance"]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-lg font-bold text-blue-600",children:b.totalMeetings}),i.jsx("div",{className:"text-gray-500",children:"Total Meetings"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-lg font-bold text-green-600",children:b.attended}),i.jsx("div",{className:"text-gray-500",children:"Present"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-lg font-bold text-yellow-600",children:b.late}),i.jsx("div",{className:"text-gray-500",children:"Late"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-lg font-bold text-red-600",children:b.absent}),i.jsx("div",{className:"text-gray-500",children:"Absent"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[b.averageDuration,"m"]}),i.jsx("div",{className:"text-gray-500",children:"Avg Duration"})]})]}),b.lastAttendance&&i.jsx("div",{className:"mt-3 pt-3 border-t",children:i.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[i.jsx(Wo,{className:"h-4 w-4 mr-1"}),"Last attendance: ",ht(Ut(b.lastAttendance),"MMM dd, yyyy")]})})]},S))}):i.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[i.jsx(I6,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No detailed analytics available for selected period"})]})})]})})]})]})]})})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var s0={};s0.version="0.18.5";var Z3=1252,Pq=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],eD=function(e){Pq.indexOf(e)!=-1&&(Z3=e)};function Dq(){eD(1252)}var qd=function(e){eD(e)};function Rq(){qd(1200),Dq()}var Ph=function(t){return String.fromCharCode(t)},CS=function(t){return String.fromCharCode(t)},So,Pi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Xd(e){for(var t="",r=0,n=0,s=0,a=0,o=0,l=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),a=r>>2,n=e.charCodeAt(u++),o=(r&3)<<4|n>>4,s=e.charCodeAt(u++),l=(n&15)<<2|s>>6,c=s&63,isNaN(n)?l=c=64:isNaN(s)&&(c=64),t+=Pi.charAt(a)+Pi.charAt(o)+Pi.charAt(l)+Pi.charAt(c);return t}function Ya(e){var t="",r=0,n=0,s=0,a=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)a=Pi.indexOf(e.charAt(u++)),o=Pi.indexOf(e.charAt(u++)),r=a<<2|o>>4,t+=String.fromCharCode(r),l=Pi.indexOf(e.charAt(u++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=Pi.indexOf(e.charAt(u++)),s=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(s));return t}var Et=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),ti=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Zo(e){return Et?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function TS(e){return Et?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Os=function(t){return Et?ti(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function Ap(e){if(typeof ArrayBuffer>"u")return Os(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Uf(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Mq(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}var zr=Et?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:ti(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function Oq(e){for(var t=[],r=0,n=e.length+250,s=Zo(e.length+255),a=0;a<e.length;++a){var o=e.charCodeAt(a);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++a)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>n&&(t.push(s.slice(0,r)),r=0,s=Zo(65535),n=65530)}return t.push(s.slice(0,r)),zr(t)}var sd=/\u0000/g,Dh=/[\u0001-\u0006]/g;function uc(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Is(e,t){var r=""+e;return r.length>=t?r:rr("0",t-r.length)+r}function Kw(e,t){var r=""+e;return r.length>=t?r:rr(" ",t-r.length)+r}function a0(e,t){var r=""+e;return r.length>=t?r:r+rr(" ",t-r.length)}function Fq(e,t){var r=""+Math.round(e);return r.length>=t?r:rr("0",t-r.length)+r}function Iq(e,t){var r=""+e;return r.length>=t?r:rr("0",t-r.length)+r}var AS=Math.pow(2,32);function Rl(e,t){if(e>AS||e<-AS)return Fq(e,t);var r=Math.round(e);return Iq(r,t)}function i0(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var PS=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],ox=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Lq(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var ar={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},DS={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},$q={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function o0(e,t,r){for(var n=e<0?-1:1,s=e*n,a=0,o=1,l=0,c=1,u=0,d=0,f=Math.floor(s);u<t&&(f=Math.floor(s),l=f*o+a,d=f*u+c,!(s-f<5e-8));)s=1/(s-f),a=o,o=l,c=u,u=d;if(d>t&&(u>t?(d=c,l=a):(d=u,l=o)),!r)return[0,n*l,d];var h=Math.floor(n*l/d);return[h,n*l-h*d,d]}function Rh(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),a=0,o=[],l={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],a=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],a=c.getDay(),n<60&&(a=(a+6)%7),r&&(a=Gq(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=a,l}var tD=new Date(1899,11,31,0,0,0),Bq=tD.getTime(),Uq=new Date(1900,2,1,0,0,0);function rD(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Uq&&(r+=24*60*60*1e3),(r-(Bq+(e.getTimezoneOffset()-tD.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function Yw(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function zq(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Vq(e){var t=e<0?12:11,r=Yw(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Wq(e){var t=Yw(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Hq(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Vq(e):t===10?r=e.toFixed(10).substr(0,12):r=Wq(e),Yw(zq(r.toUpperCase()))}function o1(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Hq(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Zi(14,rD(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Gq(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Kq(e,t,r,n){var s="",a=0,o=0,l=r.y,c,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return ox[r.m-1][1];case 5:return ox[r.m-1][0];default:return ox[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return PS[r.q][0];default:return PS[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Is(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,a=Math.round(o*(r.S+r.u)),a>=60*o&&(a=0),t==="s"?a===0?"0":""+a/o:(s=Is(a,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?Is(c,u):"";return d}function Di(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var nD=/%/g;function Yq(e,t,r){var n=t.replace(nD,""),s=t.length-n.length;return Ia(e,n,r*Math.pow(10,2*s))+rr("%",s)}function qq(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Ia(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function sD(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+sD(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+a):r+="E+"+(o-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var aD=/# (\?+)( ?)\/( ?)(\d+)/;function Xq(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),a=Math.floor(s/n),o=s-a*n,l=n;return r+(a===0?"":""+a)+" "+(o===0?rr(" ",e[1].length+1+e[4].length):Kw(o,e[1].length)+e[2]+"/"+e[3]+Is(l,e[4].length))}function Qq(e,t,r){return r+(t===0?"":""+t)+rr(" ",e[1].length+2+e[4].length)}var iD=/^#*0*\.([0#]+)/,oD=/\).*[0#]/,lD=/\(###\) ###\\?-####/;function mn(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function RS(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function MS(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Jq(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Zq(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function as(e,t,r){if(e.charCodeAt(0)===40&&!t.match(oD)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?as("n",n,r):"("+as("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return qq(e,t,r);if(t.indexOf("%")!==-1)return Yq(e,t,r);if(t.indexOf("E")!==-1)return sD(t,r);if(t.charCodeAt(0)===36)return"$"+as(e,t.substr(t.charAt(1)==" "?2:1),r);var s,a,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Rl(c,t.length);if(t.match(/^[#?]+$/))return s=Rl(r,0),s==="0"&&(s=""),s.length>t.length?s:mn(t.substr(0,t.length-s.length))+s;if(a=t.match(aD))return Xq(a,c,u);if(t.match(/^#+0+$/))return u+Rl(c,t.length-t.indexOf("0"));if(a=t.match(iD))return s=RS(r,a[1].length).replace(/^([^\.]+)$/,"$1."+mn(a[1])).replace(/\.$/,"."+mn(a[1])).replace(/\.(\d*)$/,function(g,m){return"."+m+rr("0",mn(a[1]).length-m.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return u+RS(c,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return u+Di(Rl(c,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+as(e,t,-r):Di(""+(Math.floor(r)+Jq(r,a[1].length)))+"."+Is(MS(r,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return as(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=uc(as(e,t.replace(/[\\-]/g,""),r)),o=0,uc(uc(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<s.length?s.charAt(o++):g==="0"?"0":""}));if(t.match(lD))return s=as(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(a[4].length,7),l=o0(c,Math.pow(10,o)-1,!1),s=""+u,d=Ia("n",a[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=a0(l[2],o),d.length<a[4].length&&(d=mn(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(a[1].length,a[4].length),7),l=o0(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Kw(l[1],o)+a[2]+"/"+a[3]+a0(l[2],o):rr(" ",2*o+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=Rl(r,0),t.length<=s.length?s:mn(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var f=t.indexOf(".")-o,h=t.length-s.length-f;return mn(t.substr(0,f)+s+t.substr(t.length-h))}if(a=t.match(/^00,000\.([#0]*0)$/))return o=MS(r,a[1].length),r<0?"-"+as(e,t,-r):Di(Zq(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Is(0,3-g.length):"")+g})+"."+Is(o,a[1].length);switch(t){case"###,##0.00":return as(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=Di(Rl(c,0));return p!=="0"?u+p:"";case"###,###.00":return as(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return as(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function eX(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Ia(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function tX(e,t,r){var n=t.replace(nD,""),s=t.length-n.length;return Ia(e,n,r*Math.pow(10,2*s))+rr("%",s)}function cD(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+cD(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+a):r+="E+"+(o-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Zs(e,t,r){if(e.charCodeAt(0)===40&&!t.match(oD)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Zs("n",n,r):"("+Zs("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return eX(e,t,r);if(t.indexOf("%")!==-1)return tX(e,t,r);if(t.indexOf("E")!==-1)return cD(t,r);if(t.charCodeAt(0)===36)return"$"+Zs(e,t.substr(t.charAt(1)==" "?2:1),r);var s,a,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Is(c,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:mn(t.substr(0,t.length-s.length))+s;if(a=t.match(aD))return Qq(a,c,u);if(t.match(/^#+0+$/))return u+Is(c,t.length-t.indexOf("0"));if(a=t.match(iD))return s=(""+r).replace(/^([^\.]+)$/,"$1."+mn(a[1])).replace(/\.$/,"."+mn(a[1])),s=s.replace(/\.(\d*)$/,function(g,m){return"."+m+rr("0",mn(a[1]).length-m.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return u+Di(""+c);if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Zs(e,t,-r):Di(""+r)+"."+rr("0",a[1].length);if(a=t.match(/^#,#*,#0/))return Zs(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=uc(Zs(e,t.replace(/[\\-]/g,""),r)),o=0,uc(uc(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<s.length?s.charAt(o++):g==="0"?"0":""}));if(t.match(lD))return s=Zs(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(a[4].length,7),l=o0(c,Math.pow(10,o)-1,!1),s=""+u,d=Ia("n",a[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=a0(l[2],o),d.length<a[4].length&&(d=mn(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(a[1].length,a[4].length),7),l=o0(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Kw(l[1],o)+a[2]+"/"+a[3]+a0(l[2],o):rr(" ",2*o+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:mn(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var f=t.indexOf(".")-o,h=t.length-s.length-f;return mn(t.substr(0,f)+s+t.substr(t.length-h))}if(a=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Zs(e,t,-r):Di(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Is(0,3-g.length):"")+g})+"."+Is(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=Di(""+c);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return Zs(e,t.slice(0,t.lastIndexOf(".")),r)+mn(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Ia(e,t,r){return(r|0)===r?Zs(e,t,r):as(e,t,r)}function rX(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var uD=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function dD(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":i0(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(uD))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function nX(e,t,r,n){for(var s=[],a="",o=0,l="",c="t",u,d,f,h="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!i0(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(a="";(f=e.charCodeAt(++o))!==34&&o<e.length;)a+=String.fromCharCode(f);s[s.length]={t:"t",v:a},++o;break;case"\\":var p=e.charAt(++o),g=p==="("||p===")"?p:"t";s[s.length]={t:g,v:p},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(u==null&&(u=Rh(t,r,e.charAt(o+1)==="2"),u==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=Rh(t,r),u==null))return"";for(a=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)a+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=h),s[s.length]={t:l,v:a},c=l;break;case"A":case"a":case"":var m={t:l,v:l};if(u==null&&(u=Rh(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(m.v=u.H>=12?"P":"A"),m.t="T",h="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(m.v=u.H>=12?"PM":"AM"),m.t="T",o+=5,h="h"):e.substr(o,5).toUpperCase()==="/"?(u!=null&&(m.v=u.H>=12?"":""),m.t="T",o+=5,h="h"):(m.t="t",++o),u==null&&m.t==="T")return"";s[s.length]=m,c=l;break;case"[":for(a=l;e.charAt(o++)!=="]"&&o<e.length;)a+=e.charAt(o);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(uD)){if(u==null&&(u=Rh(t,r),u==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},c=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",dD(e)||(s[s.length]={t:"t",v:a}));break;case".":if(u!=null){for(a=l;++o<e.length&&(l=e.charAt(o))==="0";)a+=l;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)a+=l;s[s.length]={t:"n",v:a};break;case"?":for(a=l;e.charAt(++o)===l;)a+=l;s[s.length]={t:l,v:a},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)a+=e.charAt(o);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var v=0,_=0,y;for(o=s.length-1,c="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=h,c="h",v<1&&(v=1);break;case"s":(y=s[o].v.match(/\.0+$/))&&(_=Math.max(_,y[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":c=s[o].t;break;case"m":c==="s"&&(s[o].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&s[o].v.match(/[Hh]/)&&(v=1),v<2&&s[o].v.match(/[Mm]/)&&(v=2),v<3&&s[o].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var w="",b;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=Kq(s[o].t.charCodeAt(0),s[o].v,u,_),s[o].t="t";break;case"n":case"?":for(b=o+1;s[b]!=null&&((l=s[b].t)==="?"||l==="D"||(l===" "||l==="t")&&s[b+1]!=null&&(s[b+1].t==="?"||s[b+1].t==="t"&&s[b+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[b].v==="/"||s[b].v===" "&&s[b+1]!=null&&s[b+1].t=="?"));)s[o].v+=s[b].v,s[b]={v:"",t:";"},++b;w+=s[o].v,o=b-1;break;case"G":s[o].t="t",s[o].v=o1(t,r);break}var S="",N,E;if(w.length>0){w.charCodeAt(0)==40?(N=t<0&&w.charCodeAt(0)===45?-t:t,E=Ia("n",w,N)):(N=t<0&&n>1?-t:t,E=Ia("n",w,N),N<0&&s[0]&&s[0].t=="t"&&(E=E.substr(1),s[0].v="-"+s[0].v)),b=E.length-1;var C=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){C=o;break}var T=s.length;if(C===s.length&&E.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(b>=s[o].v.length-1?(b-=s[o].v.length,s[o].v=E.substr(b+1,s[o].v.length)):b<0?s[o].v="":(s[o].v=E.substr(0,b+1),b=-1),s[o].t="t",T=o);b>=0&&T<s.length&&(s[T].v=E.substr(0,b+1)+s[T].v)}else if(C!==s.length&&E.indexOf("E")===-1){for(b=E.indexOf(".")-1,o=C;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(d=s[o].v.indexOf(".")>-1&&o===C?s[o].v.indexOf(".")-1:s[o].v.length-1,S=s[o].v.substr(d+1);d>=0;--d)b>=0&&(s[o].v.charAt(d)==="0"||s[o].v.charAt(d)==="#")&&(S=E.charAt(b--)+S);s[o].v=S,s[o].t="t",T=o}for(b>=0&&T<s.length&&(s[T].v=E.substr(0,b+1)+s[T].v),b=E.indexOf(".")+1,o=C;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==C)){for(d=s[o].v.indexOf(".")>-1&&o===C?s[o].v.indexOf(".")+1:0,S=s[o].v.substr(0,d);d<s[o].v.length;++d)b<E.length&&(S+=E.charAt(b++));s[o].v=S,s[o].t="t",T=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(N=n>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=Ia(s[o].t,s[o].v,N),s[o].t="t");var D="";for(o=0;o!==s.length;++o)s[o]!=null&&(D+=s[o].v);return D}var OS=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function FS(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function sX(e,t){var r=rX(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(OS),l=r[1].match(OS);return FS(t,o)?[n,r[0]]:FS(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,a]}function Zi(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:ar)[e],n==null&&(n=r.table&&r.table[DS[e]]||ar[DS[e]]),n==null&&(n=$q[e]||"General");break}if(i0(n,0))return o1(t,r);t instanceof Date&&(t=rD(t,r.date1904));var s=sX(n,t);if(i0(s[1]))return o1(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return nX(s[1],t,r,s[0])}function fD(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(ar[r]==null){t<0&&(t=r);continue}if(ar[r]==e){t=r;break}}t<0&&(t=391)}return ar[t]=e,t}function Pp(e){for(var t=0;t!=392;++t)e[t]!==void 0&&fD(e[t],t)}function Dp(){ar=Lq()}var hD=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function aX(e){var t=typeof e=="number"?ar[e]:e;return t=t.replace(hD,"(\\d+)"),new RegExp("^"+t+"$")}function iX(e,t,r){var n=-1,s=-1,a=-1,o=-1,l=-1,c=-1;(t.match(hD)||[]).forEach(function(f,h){var p=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=p;break;case"d":a=p;break;case"h":o=p;break;case"s":c=p;break;case"m":o>=0?l=p:s=p;break}}),c>=0&&l==-1&&s>=0&&(l=s,s=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:n==-1&&s==-1&&a==-1?d:u+"T"+d}var oX=function(){var e={};e.version="1.2.0";function t(){for(var E=0,C=new Array(256),T=0;T!=256;++T)E=T,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,C[T]=E;return typeof Int32Array<"u"?new Int32Array(C):C}var r=t();function n(E){var C=0,T=0,D=0,F=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(D=0;D!=256;++D)F[D]=E[D];for(D=0;D!=256;++D)for(T=E[D],C=256+D;C<4096;C+=256)T=F[C]=T>>>8^E[T&255];var P=[];for(D=1;D!=16;++D)P[D-1]=typeof Int32Array<"u"?F.subarray(D*256,D*256+256):F.slice(D*256,D*256+256);return P}var s=n(r),a=s[0],o=s[1],l=s[2],c=s[3],u=s[4],d=s[5],f=s[6],h=s[7],p=s[8],g=s[9],m=s[10],v=s[11],_=s[12],y=s[13],w=s[14];function b(E,C){for(var T=C^-1,D=0,F=E.length;D<F;)T=T>>>8^r[(T^E.charCodeAt(D++))&255];return~T}function S(E,C){for(var T=C^-1,D=E.length-15,F=0;F<D;)T=w[E[F++]^T&255]^y[E[F++]^T>>8&255]^_[E[F++]^T>>16&255]^v[E[F++]^T>>>24]^m[E[F++]]^g[E[F++]]^p[E[F++]]^h[E[F++]]^f[E[F++]]^d[E[F++]]^u[E[F++]]^c[E[F++]]^l[E[F++]]^o[E[F++]]^a[E[F++]]^r[E[F++]];for(D+=15;F<D;)T=T>>>8^r[(T^E[F++])&255];return~T}function N(E,C){for(var T=C^-1,D=0,F=E.length,P=0,L=0;D<F;)P=E.charCodeAt(D++),P<128?T=T>>>8^r[(T^P)&255]:P<2048?(T=T>>>8^r[(T^(192|P>>6&31))&255],T=T>>>8^r[(T^(128|P&63))&255]):P>=55296&&P<57344?(P=(P&1023)+64,L=E.charCodeAt(D++)&1023,T=T>>>8^r[(T^(240|P>>8&7))&255],T=T>>>8^r[(T^(128|P>>2&63))&255],T=T>>>8^r[(T^(128|L>>6&15|(P&3)<<4))&255],T=T>>>8^r[(T^(128|L&63))&255]):(T=T>>>8^r[(T^(224|P>>12&15))&255],T=T>>>8^r[(T^(128|P>>6&63))&255],T=T>>>8^r[(T^(128|P&63))&255]);return~T}return e.table=r,e.bstr=b,e.buf=S,e.str=N,e}(),Dt=function(){var t={};t.version="1.2.1";function r(V,ee){for(var J=V.split("/"),Z=ee.split("/"),te=0,ne=0,xe=Math.min(J.length,Z.length);te<xe;++te){if(ne=J[te].length-Z[te].length)return ne;if(J[te]!=Z[te])return J[te]<Z[te]?-1:1}return J.length-Z.length}function n(V){if(V.charAt(V.length-1)=="/")return V.slice(0,-1).indexOf("/")===-1?V:n(V.slice(0,-1));var ee=V.lastIndexOf("/");return ee===-1?V:V.slice(0,ee+1)}function s(V){if(V.charAt(V.length-1)=="/")return s(V.slice(0,-1));var ee=V.lastIndexOf("/");return ee===-1?V:V.slice(ee+1)}function a(V,ee){typeof ee=="string"&&(ee=new Date(ee));var J=ee.getHours();J=J<<6|ee.getMinutes(),J=J<<5|ee.getSeconds()>>>1,V.write_shift(2,J);var Z=ee.getFullYear()-1980;Z=Z<<4|ee.getMonth()+1,Z=Z<<5|ee.getDate(),V.write_shift(2,Z)}function o(V){var ee=V.read_shift(2)&65535,J=V.read_shift(2)&65535,Z=new Date,te=J&31;J>>>=5;var ne=J&15;J>>>=4,Z.setMilliseconds(0),Z.setFullYear(J+1980),Z.setMonth(ne-1),Z.setDate(te);var xe=ee&31;ee>>>=5;var Ee=ee&63;return ee>>>=6,Z.setHours(ee),Z.setMinutes(Ee),Z.setSeconds(xe<<1),Z}function l(V){Wn(V,0);for(var ee={},J=0;V.l<=V.length-4;){var Z=V.read_shift(2),te=V.read_shift(2),ne=V.l+te,xe={};switch(Z){case 21589:J=V.read_shift(1),J&1&&(xe.mtime=V.read_shift(4)),te>5&&(J&2&&(xe.atime=V.read_shift(4)),J&4&&(xe.ctime=V.read_shift(4))),xe.mtime&&(xe.mt=new Date(xe.mtime*1e3));break}V.l=ne,ee[Z]=xe}return ee}var c;function u(){return c||(c={})}function d(V,ee){if(V[0]==80&&V[1]==75)return St(V,ee);if((V[0]|32)==109&&(V[1]|32)==105)return WR(V,ee);if(V.length<512)throw new Error("CFB file size "+V.length+" < 512");var J=3,Z=512,te=0,ne=0,xe=0,Ee=0,ge=0,ve=[],ye=V.slice(0,512);Wn(ye,0);var Ae=f(ye);switch(J=Ae[0],J){case 3:Z=512;break;case 4:Z=4096;break;case 0:if(Ae[1]==0)return St(V,ee);default:throw new Error("Major Version: Expected 3 or 4 saw "+J)}Z!==512&&(ye=V.slice(0,Z),Wn(ye,28));var $e=V.slice(0,Z);h(ye,J);var Ve=ye.read_shift(4,"i");if(J===3&&Ve!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ve);ye.l+=4,xe=ye.read_shift(4,"i"),ye.l+=4,ye.chk("00100000","Mini Stream Cutoff Size: "),Ee=ye.read_shift(4,"i"),te=ye.read_shift(4,"i"),ge=ye.read_shift(4,"i"),ne=ye.read_shift(4,"i");for(var Re=-1,Ue=0;Ue<109&&(Re=ye.read_shift(4,"i"),!(Re<0));++Ue)ve[Ue]=Re;var Ze=p(V,Z);v(ge,ne,Ze,Z,ve);var qt=y(Ze,xe,ve,Z);qt[xe].name="!Directory",te>0&&Ee!==L&&(qt[Ee].name="!MiniFAT"),qt[ve[0]].name="!FAT",qt.fat_addrs=ve,qt.ssz=Z;var Xt={},Yr=[],iu=[],ou=[];w(xe,qt,Ze,Yr,te,Xt,iu,Ee),g(iu,ou,Yr),Yr.shift();var lu={FileIndex:iu,FullPaths:ou};return ee&&ee.raw&&(lu.raw={header:$e,sectors:Ze}),lu}function f(V){if(V[V.l]==80&&V[V.l+1]==75)return[0,0];V.chk(A,"Header Signature: "),V.l+=16;var ee=V.read_shift(2,"u");return[V.read_shift(2,"u"),ee]}function h(V,ee){var J=9;switch(V.l+=2,J=V.read_shift(2)){case 9:if(ee!=3)throw new Error("Sector Shift: Expected 9 saw "+J);break;case 12:if(ee!=4)throw new Error("Sector Shift: Expected 12 saw "+J);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+J)}V.chk("0600","Mini Sector Shift: "),V.chk("000000000000","Reserved: ")}function p(V,ee){for(var J=Math.ceil(V.length/ee)-1,Z=[],te=1;te<J;++te)Z[te-1]=V.slice(te*ee,(te+1)*ee);return Z[J-1]=V.slice(J*ee),Z}function g(V,ee,J){for(var Z=0,te=0,ne=0,xe=0,Ee=0,ge=J.length,ve=[],ye=[];Z<ge;++Z)ve[Z]=ye[Z]=Z,ee[Z]=J[Z];for(;Ee<ye.length;++Ee)Z=ye[Ee],te=V[Z].L,ne=V[Z].R,xe=V[Z].C,ve[Z]===Z&&(te!==-1&&ve[te]!==te&&(ve[Z]=ve[te]),ne!==-1&&ve[ne]!==ne&&(ve[Z]=ve[ne])),xe!==-1&&(ve[xe]=Z),te!==-1&&Z!=ve[Z]&&(ve[te]=ve[Z],ye.lastIndexOf(te)<Ee&&ye.push(te)),ne!==-1&&Z!=ve[Z]&&(ve[ne]=ve[Z],ye.lastIndexOf(ne)<Ee&&ye.push(ne));for(Z=1;Z<ge;++Z)ve[Z]===Z&&(ne!==-1&&ve[ne]!==ne?ve[Z]=ve[ne]:te!==-1&&ve[te]!==te&&(ve[Z]=ve[te]));for(Z=1;Z<ge;++Z)if(V[Z].type!==0){if(Ee=Z,Ee!=ve[Ee])do Ee=ve[Ee],ee[Z]=ee[Ee]+"/"+ee[Z];while(Ee!==0&&ve[Ee]!==-1&&Ee!=ve[Ee]);ve[Z]=-1}for(ee[0]+="/",Z=1;Z<ge;++Z)V[Z].type!==2&&(ee[Z]+="/")}function m(V,ee,J){for(var Z=V.start,te=V.size,ne=[],xe=Z;J&&te>0&&xe>=0;)ne.push(ee.slice(xe*P,xe*P+P)),te-=P,xe=Eo(J,xe*4);return ne.length===0?be(0):zr(ne).slice(0,V.size)}function v(V,ee,J,Z,te){var ne=L;if(V===L){if(ee!==0)throw new Error("DIFAT chain shorter than expected")}else if(V!==-1){var xe=J[V],Ee=(Z>>>2)-1;if(!xe)return;for(var ge=0;ge<Ee&&(ne=Eo(xe,ge*4))!==L;++ge)te.push(ne);v(Eo(xe,Z-4),ee-1,J,Z,te)}}function _(V,ee,J,Z,te){var ne=[],xe=[];te||(te=[]);var Ee=Z-1,ge=0,ve=0;for(ge=ee;ge>=0;){te[ge]=!0,ne[ne.length]=ge,xe.push(V[ge]);var ye=J[Math.floor(ge*4/Z)];if(ve=ge*4&Ee,Z<4+ve)throw new Error("FAT boundary crossed: "+ge+" 4 "+Z);if(!V[ye])break;ge=Eo(V[ye],ve)}return{nodes:ne,data:WS([xe])}}function y(V,ee,J,Z){var te=V.length,ne=[],xe=[],Ee=[],ge=[],ve=Z-1,ye=0,Ae=0,$e=0,Ve=0;for(ye=0;ye<te;++ye)if(Ee=[],$e=ye+ee,$e>=te&&($e-=te),!xe[$e]){ge=[];var Re=[];for(Ae=$e;Ae>=0;){Re[Ae]=!0,xe[Ae]=!0,Ee[Ee.length]=Ae,ge.push(V[Ae]);var Ue=J[Math.floor(Ae*4/Z)];if(Ve=Ae*4&ve,Z<4+Ve)throw new Error("FAT boundary crossed: "+Ae+" 4 "+Z);if(!V[Ue]||(Ae=Eo(V[Ue],Ve),Re[Ae]))break}ne[$e]={nodes:Ee,data:WS([ge])}}return ne}function w(V,ee,J,Z,te,ne,xe,Ee){for(var ge=0,ve=Z.length?2:0,ye=ee[V].data,Ae=0,$e=0,Ve;Ae<ye.length;Ae+=128){var Re=ye.slice(Ae,Ae+128);Wn(Re,64),$e=Re.read_shift(2),Ve=Zw(Re,0,$e-ve),Z.push(Ve);var Ue={name:Ve,type:Re.read_shift(1),color:Re.read_shift(1),L:Re.read_shift(4,"i"),R:Re.read_shift(4,"i"),C:Re.read_shift(4,"i"),clsid:Re.read_shift(16),state:Re.read_shift(4,"i"),start:0,size:0},Ze=Re.read_shift(2)+Re.read_shift(2)+Re.read_shift(2)+Re.read_shift(2);Ze!==0&&(Ue.ct=b(Re,Re.l-8));var qt=Re.read_shift(2)+Re.read_shift(2)+Re.read_shift(2)+Re.read_shift(2);qt!==0&&(Ue.mt=b(Re,Re.l-8)),Ue.start=Re.read_shift(4,"i"),Ue.size=Re.read_shift(4,"i"),Ue.size<0&&Ue.start<0&&(Ue.size=Ue.type=0,Ue.start=L,Ue.name=""),Ue.type===5?(ge=Ue.start,te>0&&ge!==L&&(ee[ge].name="!StreamData")):Ue.size>=4096?(Ue.storage="fat",ee[Ue.start]===void 0&&(ee[Ue.start]=_(J,Ue.start,ee.fat_addrs,ee.ssz)),ee[Ue.start].name=Ue.name,Ue.content=ee[Ue.start].data.slice(0,Ue.size)):(Ue.storage="minifat",Ue.size<0?Ue.size=0:ge!==L&&Ue.start!==L&&ee[ge]&&(Ue.content=m(Ue,ee[ge].data,(ee[Ee]||{}).data))),Ue.content&&Wn(Ue.content,0),ne[Ve]=Ue,xe.push(Ue)}}function b(V,ee){return new Date((Kn(V,ee+4)/1e7*Math.pow(2,32)+Kn(V,ee)/1e7-11644473600)*1e3)}function S(V,ee){return u(),d(c.readFileSync(V),ee)}function N(V,ee){var J=ee&&ee.type;switch(J||Et&&Buffer.isBuffer(V)&&(J="buffer"),J||"base64"){case"file":return S(V,ee);case"base64":return d(Os(Ya(V)),ee);case"binary":return d(Os(V),ee)}return d(V,ee)}function E(V,ee){var J=ee||{},Z=J.root||"Root Entry";if(V.FullPaths||(V.FullPaths=[]),V.FileIndex||(V.FileIndex=[]),V.FullPaths.length!==V.FileIndex.length)throw new Error("inconsistent CFB structure");V.FullPaths.length===0&&(V.FullPaths[0]=Z+"/",V.FileIndex[0]={name:Z,type:5}),J.CLSID&&(V.FileIndex[0].clsid=J.CLSID),C(V)}function C(V){var ee="Sh33tJ5";if(!Dt.find(V,"/"+ee)){var J=be(4);J[0]=55,J[1]=J[3]=50,J[2]=54,V.FileIndex.push({name:ee,type:2,content:J,size:4,L:69,R:69,C:69}),V.FullPaths.push(V.FullPaths[0]+ee),T(V)}}function T(V,ee){E(V);for(var J=!1,Z=!1,te=V.FullPaths.length-1;te>=0;--te){var ne=V.FileIndex[te];switch(ne.type){case 0:Z?J=!0:(V.FileIndex.pop(),V.FullPaths.pop());break;case 1:case 2:case 5:Z=!0,isNaN(ne.R*ne.L*ne.C)&&(J=!0),ne.R>-1&&ne.L>-1&&ne.R==ne.L&&(J=!0);break;default:J=!0;break}}if(!(!J&&!ee)){var xe=new Date(1987,1,19),Ee=0,ge=Object.create?Object.create(null):{},ve=[];for(te=0;te<V.FullPaths.length;++te)ge[V.FullPaths[te]]=!0,V.FileIndex[te].type!==0&&ve.push([V.FullPaths[te],V.FileIndex[te]]);for(te=0;te<ve.length;++te){var ye=n(ve[te][0]);Z=ge[ye],Z||(ve.push([ye,{name:s(ye).replace("/",""),type:1,clsid:Q,ct:xe,mt:xe,content:null}]),ge[ye]=!0)}for(ve.sort(function(Ve,Re){return r(Ve[0],Re[0])}),V.FullPaths=[],V.FileIndex=[],te=0;te<ve.length;++te)V.FullPaths[te]=ve[te][0],V.FileIndex[te]=ve[te][1];for(te=0;te<ve.length;++te){var Ae=V.FileIndex[te],$e=V.FullPaths[te];if(Ae.name=s($e).replace("/",""),Ae.L=Ae.R=Ae.C=-(Ae.color=1),Ae.size=Ae.content?Ae.content.length:0,Ae.start=0,Ae.clsid=Ae.clsid||Q,te===0)Ae.C=ve.length>1?1:-1,Ae.size=0,Ae.type=5;else if($e.slice(-1)=="/"){for(Ee=te+1;Ee<ve.length&&n(V.FullPaths[Ee])!=$e;++Ee);for(Ae.C=Ee>=ve.length?-1:Ee,Ee=te+1;Ee<ve.length&&n(V.FullPaths[Ee])!=n($e);++Ee);Ae.R=Ee>=ve.length?-1:Ee,Ae.type=1}else n(V.FullPaths[te+1]||"")==n($e)&&(Ae.R=te+1),Ae.type=2}}}function D(V,ee){var J=ee||{};if(J.fileType=="mad")return HR(V,J);switch(T(V),J.fileType){case"zip":return Nr(V,J)}var Z=function(Ve){for(var Re=0,Ue=0,Ze=0;Ze<Ve.FileIndex.length;++Ze){var qt=Ve.FileIndex[Ze];if(qt.content){var Xt=qt.content.length;Xt>0&&(Xt<4096?Re+=Xt+63>>6:Ue+=Xt+511>>9)}}for(var Yr=Ve.FullPaths.length+3>>2,iu=Re+7>>3,ou=Re+127>>7,lu=iu+Ue+Yr+ou,mo=lu+127>>7,Bp=mo<=109?0:Math.ceil((mo-109)/127);lu+mo+Bp+127>>7>mo;)Bp=++mo<=109?0:Math.ceil((mo-109)/127);var ya=[1,Bp,mo,ou,Yr,Ue,Re,0];return Ve.FileIndex[0].size=Re<<6,ya[7]=(Ve.FileIndex[0].start=ya[0]+ya[1]+ya[2]+ya[3]+ya[4]+ya[5])+(ya[6]+7>>3),ya}(V),te=be(Z[7]<<9),ne=0,xe=0;{for(ne=0;ne<8;++ne)te.write_shift(1,I[ne]);for(ne=0;ne<8;++ne)te.write_shift(2,0);for(te.write_shift(2,62),te.write_shift(2,3),te.write_shift(2,65534),te.write_shift(2,9),te.write_shift(2,6),ne=0;ne<3;++ne)te.write_shift(2,0);for(te.write_shift(4,0),te.write_shift(4,Z[2]),te.write_shift(4,Z[0]+Z[1]+Z[2]+Z[3]-1),te.write_shift(4,0),te.write_shift(4,4096),te.write_shift(4,Z[3]?Z[0]+Z[1]+Z[2]-1:L),te.write_shift(4,Z[3]),te.write_shift(-4,Z[1]?Z[0]-1:L),te.write_shift(4,Z[1]),ne=0;ne<109;++ne)te.write_shift(-4,ne<Z[2]?Z[1]+ne:-1)}if(Z[1])for(xe=0;xe<Z[1];++xe){for(;ne<236+xe*127;++ne)te.write_shift(-4,ne<Z[2]?Z[1]+ne:-1);te.write_shift(-4,xe===Z[1]-1?L:xe+1)}var Ee=function(Ve){for(xe+=Ve;ne<xe-1;++ne)te.write_shift(-4,ne+1);Ve&&(++ne,te.write_shift(-4,L))};for(xe=ne=0,xe+=Z[1];ne<xe;++ne)te.write_shift(-4,q.DIFSECT);for(xe+=Z[2];ne<xe;++ne)te.write_shift(-4,q.FATSECT);Ee(Z[3]),Ee(Z[4]);for(var ge=0,ve=0,ye=V.FileIndex[0];ge<V.FileIndex.length;++ge)ye=V.FileIndex[ge],ye.content&&(ve=ye.content.length,!(ve<4096)&&(ye.start=xe,Ee(ve+511>>9)));for(Ee(Z[6]+7>>3);te.l&511;)te.write_shift(-4,q.ENDOFCHAIN);for(xe=ne=0,ge=0;ge<V.FileIndex.length;++ge)ye=V.FileIndex[ge],ye.content&&(ve=ye.content.length,!(!ve||ve>=4096)&&(ye.start=xe,Ee(ve+63>>6)));for(;te.l&511;)te.write_shift(-4,q.ENDOFCHAIN);for(ne=0;ne<Z[4]<<2;++ne){var Ae=V.FullPaths[ne];if(!Ae||Ae.length===0){for(ge=0;ge<17;++ge)te.write_shift(4,0);for(ge=0;ge<3;++ge)te.write_shift(4,-1);for(ge=0;ge<12;++ge)te.write_shift(4,0);continue}ye=V.FileIndex[ne],ne===0&&(ye.start=ye.size?ye.start-1:L);var $e=ne===0&&J.root||ye.name;if(ve=2*($e.length+1),te.write_shift(64,$e,"utf16le"),te.write_shift(2,ve),te.write_shift(1,ye.type),te.write_shift(1,ye.color),te.write_shift(-4,ye.L),te.write_shift(-4,ye.R),te.write_shift(-4,ye.C),ye.clsid)te.write_shift(16,ye.clsid,"hex");else for(ge=0;ge<4;++ge)te.write_shift(4,0);te.write_shift(4,ye.state||0),te.write_shift(4,0),te.write_shift(4,0),te.write_shift(4,0),te.write_shift(4,0),te.write_shift(4,ye.start),te.write_shift(4,ye.size),te.write_shift(4,0)}for(ne=1;ne<V.FileIndex.length;++ne)if(ye=V.FileIndex[ne],ye.size>=4096)if(te.l=ye.start+1<<9,Et&&Buffer.isBuffer(ye.content))ye.content.copy(te,te.l,0,ye.size),te.l+=ye.size+511&-512;else{for(ge=0;ge<ye.size;++ge)te.write_shift(1,ye.content[ge]);for(;ge&511;++ge)te.write_shift(1,0)}for(ne=1;ne<V.FileIndex.length;++ne)if(ye=V.FileIndex[ne],ye.size>0&&ye.size<4096)if(Et&&Buffer.isBuffer(ye.content))ye.content.copy(te,te.l,0,ye.size),te.l+=ye.size+63&-64;else{for(ge=0;ge<ye.size;++ge)te.write_shift(1,ye.content[ge]);for(;ge&63;++ge)te.write_shift(1,0)}if(Et)te.l=te.length;else for(;te.l<te.length;)te.write_shift(1,0);return te}function F(V,ee){var J=V.FullPaths.map(function(ge){return ge.toUpperCase()}),Z=J.map(function(ge){var ve=ge.split("/");return ve[ve.length-(ge.slice(-1)=="/"?2:1)]}),te=!1;ee.charCodeAt(0)===47?(te=!0,ee=J[0].slice(0,-1)+ee):te=ee.indexOf("/")!==-1;var ne=ee.toUpperCase(),xe=te===!0?J.indexOf(ne):Z.indexOf(ne);if(xe!==-1)return V.FileIndex[xe];var Ee=!ne.match(Dh);for(ne=ne.replace(sd,""),Ee&&(ne=ne.replace(Dh,"!")),xe=0;xe<J.length;++xe)if((Ee?J[xe].replace(Dh,"!"):J[xe]).replace(sd,"")==ne||(Ee?Z[xe].replace(Dh,"!"):Z[xe]).replace(sd,"")==ne)return V.FileIndex[xe];return null}var P=64,L=-2,A="d0cf11e0a1b11ae1",I=[208,207,17,224,161,177,26,225],Q="00000000000000000000000000000000",q={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:L,FREESECT:-1,HEADER_SIGNATURE:A,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Q,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function O(V,ee,J){u();var Z=D(V,J);c.writeFileSync(ee,Z)}function H(V){for(var ee=new Array(V.length),J=0;J<V.length;++J)ee[J]=String.fromCharCode(V[J]);return ee.join("")}function G(V,ee){var J=D(V,ee);switch(ee&&ee.type||"buffer"){case"file":return u(),c.writeFileSync(ee.filename,J),J;case"binary":return typeof J=="string"?J:H(J);case"base64":return Xd(typeof J=="string"?J:H(J));case"buffer":if(Et)return Buffer.isBuffer(J)?J:ti(J);case"array":return typeof J=="string"?Os(J):J}return J}var K;function k(V){try{var ee=V.InflateRaw,J=new ee;if(J._processChunk(new Uint8Array([3,0]),J._finishFlushFlag),J.bytesRead)K=V;else throw new Error("zlib does not expose bytesRead")}catch(Z){console.error("cannot use native zlib: "+(Z.message||Z))}}function W(V,ee){if(!K)return Xe(V,ee);var J=K.InflateRaw,Z=new J,te=Z._processChunk(V.slice(V.l),Z._finishFlushFlag);return V.l+=Z.bytesRead,te}function R(V){return K?K.deflateRawSync(V):Kt(V)}var M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],re=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],oe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ce(V){var ee=(V<<1|V<<11)&139536|(V<<5|V<<15)&558144;return(ee>>16|ee>>8|ee)&255}for(var me=typeof Uint8Array<"u",pe=me?new Uint8Array(256):[],je=0;je<256;++je)pe[je]=ce(je);function we(V,ee){var J=pe[V&255];return ee<=8?J>>>8-ee:(J=J<<8|pe[V>>8&255],ee<=16?J>>>16-ee:(J=J<<8|pe[V>>16&255],J>>>24-ee))}function Ce(V,ee){var J=ee&7,Z=ee>>>3;return(V[Z]|(J<=6?0:V[Z+1]<<8))>>>J&3}function j(V,ee){var J=ee&7,Z=ee>>>3;return(V[Z]|(J<=5?0:V[Z+1]<<8))>>>J&7}function se(V,ee){var J=ee&7,Z=ee>>>3;return(V[Z]|(J<=4?0:V[Z+1]<<8))>>>J&15}function ae(V,ee){var J=ee&7,Z=ee>>>3;return(V[Z]|(J<=3?0:V[Z+1]<<8))>>>J&31}function z(V,ee){var J=ee&7,Z=ee>>>3;return(V[Z]|(J<=1?0:V[Z+1]<<8))>>>J&127}function X(V,ee,J){var Z=ee&7,te=ee>>>3,ne=(1<<J)-1,xe=V[te]>>>Z;return J<8-Z||(xe|=V[te+1]<<8-Z,J<16-Z)||(xe|=V[te+2]<<16-Z,J<24-Z)||(xe|=V[te+3]<<24-Z),xe&ne}function ie(V,ee,J){var Z=ee&7,te=ee>>>3;return Z<=5?V[te]|=(J&7)<<Z:(V[te]|=J<<Z&255,V[te+1]=(J&7)>>8-Z),ee+3}function U(V,ee,J){var Z=ee&7,te=ee>>>3;return J=(J&1)<<Z,V[te]|=J,ee+1}function B(V,ee,J){var Z=ee&7,te=ee>>>3;return J<<=Z,V[te]|=J&255,J>>>=8,V[te+1]=J,ee+8}function Y(V,ee,J){var Z=ee&7,te=ee>>>3;return J<<=Z,V[te]|=J&255,J>>>=8,V[te+1]=J&255,V[te+2]=J>>>8,ee+16}function ue(V,ee){var J=V.length,Z=2*J>ee?2*J:ee+5,te=0;if(J>=ee)return V;if(Et){var ne=TS(Z);if(V.copy)V.copy(ne);else for(;te<V.length;++te)ne[te]=V[te];return ne}else if(me){var xe=new Uint8Array(Z);if(xe.set)xe.set(V);else for(;te<J;++te)xe[te]=V[te];return xe}return V.length=Z,V}function he(V){for(var ee=new Array(V),J=0;J<V;++J)ee[J]=0;return ee}function le(V,ee,J){var Z=1,te=0,ne=0,xe=0,Ee=0,ge=V.length,ve=me?new Uint16Array(32):he(32);for(ne=0;ne<32;++ne)ve[ne]=0;for(ne=ge;ne<J;++ne)V[ne]=0;ge=V.length;var ye=me?new Uint16Array(ge):he(ge);for(ne=0;ne<ge;++ne)ve[te=V[ne]]++,Z<te&&(Z=te),ye[ne]=0;for(ve[0]=0,ne=1;ne<=Z;++ne)ve[ne+16]=Ee=Ee+ve[ne-1]<<1;for(ne=0;ne<ge;++ne)Ee=V[ne],Ee!=0&&(ye[ne]=ve[Ee+16]++);var Ae=0;for(ne=0;ne<ge;++ne)if(Ae=V[ne],Ae!=0)for(Ee=we(ye[ne],Z)>>Z-Ae,xe=(1<<Z+4-Ae)-1;xe>=0;--xe)ee[Ee|xe<<Ae]=Ae&15|ne<<4;return Z}var Se=me?new Uint16Array(512):he(512),Fe=me?new Uint16Array(32):he(32);if(!me){for(var Ie=0;Ie<512;++Ie)Se[Ie]=0;for(Ie=0;Ie<32;++Ie)Fe[Ie]=0}(function(){for(var V=[],ee=0;ee<32;ee++)V.push(5);le(V,Fe,32);var J=[];for(ee=0;ee<=143;ee++)J.push(8);for(;ee<=255;ee++)J.push(9);for(;ee<=279;ee++)J.push(7);for(;ee<=287;ee++)J.push(8);le(J,Se,288)})();var at=function(){for(var ee=me?new Uint8Array(32768):[],J=0,Z=0;J<oe.length-1;++J)for(;Z<oe[J+1];++Z)ee[Z]=J;for(;Z<32768;++Z)ee[Z]=29;var te=me?new Uint8Array(259):[];for(J=0,Z=0;J<re.length-1;++J)for(;Z<re[J+1];++Z)te[Z]=J;function ne(Ee,ge){for(var ve=0;ve<Ee.length;){var ye=Math.min(65535,Ee.length-ve),Ae=ve+ye==Ee.length;for(ge.write_shift(1,+Ae),ge.write_shift(2,ye),ge.write_shift(2,~ye&65535);ye-- >0;)ge[ge.l++]=Ee[ve++]}return ge.l}function xe(Ee,ge){for(var ve=0,ye=0,Ae=me?new Uint16Array(32768):[];ye<Ee.length;){var $e=Math.min(65535,Ee.length-ye);if($e<10){for(ve=ie(ge,ve,+(ye+$e==Ee.length)),ve&7&&(ve+=8-(ve&7)),ge.l=ve/8|0,ge.write_shift(2,$e),ge.write_shift(2,~$e&65535);$e-- >0;)ge[ge.l++]=Ee[ye++];ve=ge.l*8;continue}ve=ie(ge,ve,+(ye+$e==Ee.length)+2);for(var Ve=0;$e-- >0;){var Re=Ee[ye];Ve=(Ve<<5^Re)&32767;var Ue=-1,Ze=0;if((Ue=Ae[Ve])&&(Ue|=ye&-32768,Ue>ye&&(Ue-=32768),Ue<ye))for(;Ee[Ue+Ze]==Ee[ye+Ze]&&Ze<250;)++Ze;if(Ze>2){Re=te[Ze],Re<=22?ve=B(ge,ve,pe[Re+1]>>1)-1:(B(ge,ve,3),ve+=5,B(ge,ve,pe[Re-23]>>5),ve+=3);var qt=Re<8?0:Re-4>>2;qt>0&&(Y(ge,ve,Ze-re[Re]),ve+=qt),Re=ee[ye-Ue],ve=B(ge,ve,pe[Re]>>3),ve-=3;var Xt=Re<4?0:Re-2>>1;Xt>0&&(Y(ge,ve,ye-Ue-oe[Re]),ve+=Xt);for(var Yr=0;Yr<Ze;++Yr)Ae[Ve]=ye&32767,Ve=(Ve<<5^Ee[ye])&32767,++ye;$e-=Ze-1}else Re<=143?Re=Re+48:ve=U(ge,ve,1),ve=B(ge,ve,pe[Re]),Ae[Ve]=ye&32767,++ye}ve=B(ge,ve,0)-1}return ge.l=(ve+7)/8|0,ge.l}return function(ge,ve){return ge.length<8?ne(ge,ve):xe(ge,ve)}}();function Kt(V){var ee=be(50+Math.floor(V.length*1.1)),J=at(V,ee);return ee.slice(0,J)}var wt=me?new Uint16Array(32768):he(32768),Or=me?new Uint16Array(32768):he(32768),pt=me?new Uint16Array(128):he(128),$n=1,ss=1;function Yt(V,ee){var J=ae(V,ee)+257;ee+=5;var Z=ae(V,ee)+1;ee+=5;var te=se(V,ee)+4;ee+=4;for(var ne=0,xe=me?new Uint8Array(19):he(19),Ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ge=1,ve=me?new Uint8Array(8):he(8),ye=me?new Uint8Array(8):he(8),Ae=xe.length,$e=0;$e<te;++$e)xe[M[$e]]=ne=j(V,ee),ge<ne&&(ge=ne),ve[ne]++,ee+=3;var Ve=0;for(ve[0]=0,$e=1;$e<=ge;++$e)ye[$e]=Ve=Ve+ve[$e-1]<<1;for($e=0;$e<Ae;++$e)(Ve=xe[$e])!=0&&(Ee[$e]=ye[Ve]++);var Re=0;for($e=0;$e<Ae;++$e)if(Re=xe[$e],Re!=0){Ve=pe[Ee[$e]]>>8-Re;for(var Ue=(1<<7-Re)-1;Ue>=0;--Ue)pt[Ve|Ue<<Re]=Re&7|$e<<3}var Ze=[];for(ge=1;Ze.length<J+Z;)switch(Ve=pt[z(V,ee)],ee+=Ve&7,Ve>>>=3){case 16:for(ne=3+Ce(V,ee),ee+=2,Ve=Ze[Ze.length-1];ne-- >0;)Ze.push(Ve);break;case 17:for(ne=3+j(V,ee),ee+=3;ne-- >0;)Ze.push(0);break;case 18:for(ne=11+z(V,ee),ee+=7;ne-- >0;)Ze.push(0);break;default:Ze.push(Ve),ge<Ve&&(ge=Ve);break}var qt=Ze.slice(0,J),Xt=Ze.slice(J);for($e=J;$e<286;++$e)qt[$e]=0;for($e=Z;$e<30;++$e)Xt[$e]=0;return $n=le(qt,wt,286),ss=le(Xt,Or,30),ee}function ri(V,ee){if(V[0]==3&&!(V[1]&3))return[Zo(ee),2];for(var J=0,Z=0,te=TS(ee||1<<18),ne=0,xe=te.length>>>0,Ee=0,ge=0;!(Z&1);){if(Z=j(V,J),J+=3,Z>>>1)Z>>1==1?(Ee=9,ge=5):(J=Yt(V,J),Ee=$n,ge=ss);else{J&7&&(J+=8-(J&7));var ve=V[J>>>3]|V[(J>>>3)+1]<<8;if(J+=32,ve>0)for(!ee&&xe<ne+ve&&(te=ue(te,ne+ve),xe=te.length);ve-- >0;)te[ne++]=V[J>>>3],J+=8;continue}for(;;){!ee&&xe<ne+32767&&(te=ue(te,ne+32767),xe=te.length);var ye=X(V,J,Ee),Ae=Z>>>1==1?Se[ye]:wt[ye];if(J+=Ae&15,Ae>>>=4,!(Ae>>>8&255))te[ne++]=Ae;else{if(Ae==256)break;Ae-=257;var $e=Ae<8?0:Ae-4>>2;$e>5&&($e=0);var Ve=ne+re[Ae];$e>0&&(Ve+=X(V,J,$e),J+=$e),ye=X(V,J,ge),Ae=Z>>>1==1?Fe[ye]:Or[ye],J+=Ae&15,Ae>>>=4;var Re=Ae<4?0:Ae-2>>1,Ue=oe[Ae];for(Re>0&&(Ue+=X(V,J,Re),J+=Re),!ee&&xe<Ve&&(te=ue(te,Ve+100),xe=te.length);ne<Ve;)te[ne]=te[ne-Ue],++ne}}}return ee?[te,J+7>>>3]:[te.slice(0,ne),J+7>>>3]}function Xe(V,ee){var J=V.slice(V.l||0),Z=ri(J,ee);return V.l+=Z[1],Z[0]}function Nt(V,ee){if(V)typeof console<"u"&&console.error(ee);else throw new Error(ee)}function St(V,ee){var J=V;Wn(J,0);var Z=[],te=[],ne={FileIndex:Z,FullPaths:te};E(ne,{root:ee.root});for(var xe=J.length-4;(J[xe]!=80||J[xe+1]!=75||J[xe+2]!=5||J[xe+3]!=6)&&xe>=0;)--xe;J.l=xe+4,J.l+=4;var Ee=J.read_shift(2);J.l+=6;var ge=J.read_shift(4);for(J.l=ge,xe=0;xe<Ee;++xe){J.l+=20;var ve=J.read_shift(4),ye=J.read_shift(4),Ae=J.read_shift(2),$e=J.read_shift(2),Ve=J.read_shift(2);J.l+=8;var Re=J.read_shift(4),Ue=l(J.slice(J.l+Ae,J.l+Ae+$e));J.l+=Ae+$e+Ve;var Ze=J.l;J.l=Re+4,cn(J,ve,ye,ne,Ue),J.l=Ze}return ne}function cn(V,ee,J,Z,te){V.l+=2;var ne=V.read_shift(2),xe=V.read_shift(2),Ee=o(V);if(ne&8257)throw new Error("Unsupported ZIP encryption");for(var ge=V.read_shift(4),ve=V.read_shift(4),ye=V.read_shift(4),Ae=V.read_shift(2),$e=V.read_shift(2),Ve="",Re=0;Re<Ae;++Re)Ve+=String.fromCharCode(V[V.l++]);if($e){var Ue=l(V.slice(V.l,V.l+$e));(Ue[21589]||{}).mt&&(Ee=Ue[21589].mt),((te||{})[21589]||{}).mt&&(Ee=te[21589].mt)}V.l+=$e;var Ze=V.slice(V.l,V.l+ve);switch(xe){case 8:Ze=W(V,ye);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+xe)}var qt=!1;ne&8&&(ge=V.read_shift(4),ge==134695760&&(ge=V.read_shift(4),qt=!0),ve=V.read_shift(4),ye=V.read_shift(4)),ve!=ee&&Nt(qt,"Bad compressed size: "+ee+" != "+ve),ye!=J&&Nt(qt,"Bad uncompressed size: "+J+" != "+ye),$p(Z,Ve,Ze,{unsafe:!0,mt:Ee})}function Nr(V,ee){var J=ee||{},Z=[],te=[],ne=be(1),xe=J.compression?8:0,Ee=0,ge=0,ve=0,ye=0,Ae=0,$e=V.FullPaths[0],Ve=$e,Re=V.FileIndex[0],Ue=[],Ze=0;for(ge=1;ge<V.FullPaths.length;++ge)if(Ve=V.FullPaths[ge].slice($e.length),Re=V.FileIndex[ge],!(!Re.size||!Re.content||Ve=="Sh33tJ5")){var qt=ye,Xt=be(Ve.length);for(ve=0;ve<Ve.length;++ve)Xt.write_shift(1,Ve.charCodeAt(ve)&127);Xt=Xt.slice(0,Xt.l),Ue[Ae]=oX.buf(Re.content,0);var Yr=Re.content;xe==8&&(Yr=R(Yr)),ne=be(30),ne.write_shift(4,67324752),ne.write_shift(2,20),ne.write_shift(2,Ee),ne.write_shift(2,xe),Re.mt?a(ne,Re.mt):ne.write_shift(4,0),ne.write_shift(-4,Ue[Ae]),ne.write_shift(4,Yr.length),ne.write_shift(4,Re.content.length),ne.write_shift(2,Xt.length),ne.write_shift(2,0),ye+=ne.length,Z.push(ne),ye+=Xt.length,Z.push(Xt),ye+=Yr.length,Z.push(Yr),ne=be(46),ne.write_shift(4,33639248),ne.write_shift(2,0),ne.write_shift(2,20),ne.write_shift(2,Ee),ne.write_shift(2,xe),ne.write_shift(4,0),ne.write_shift(-4,Ue[Ae]),ne.write_shift(4,Yr.length),ne.write_shift(4,Re.content.length),ne.write_shift(2,Xt.length),ne.write_shift(2,0),ne.write_shift(2,0),ne.write_shift(2,0),ne.write_shift(2,0),ne.write_shift(4,0),ne.write_shift(4,qt),Ze+=ne.l,te.push(ne),Ze+=Xt.length,te.push(Xt),++Ae}return ne=be(22),ne.write_shift(4,101010256),ne.write_shift(2,0),ne.write_shift(2,0),ne.write_shift(2,Ae),ne.write_shift(2,Ae),ne.write_shift(4,Ze),ne.write_shift(4,ye),ne.write_shift(2,0),zr([zr(Z),zr(te),ne])}var bn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Lp(V,ee){if(V.ctype)return V.ctype;var J=V.name||"",Z=J.match(/\.([^\.]+)$/);return Z&&bn[Z[1]]||ee&&(Z=(J=ee).match(/[\.\\]([^\.\\])+$/),Z&&bn[Z[1]])?bn[Z[1]]:"application/octet-stream"}function BR(V){for(var ee=Xd(V),J=[],Z=0;Z<ee.length;Z+=76)J.push(ee.slice(Z,Z+76));return J.join(`\r
`)+`\r
`}function UR(V){var ee=V.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ve){var ye=ve.charCodeAt(0).toString(16).toUpperCase();return"="+(ye.length==1?"0"+ye:ye)});ee=ee.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ee.charAt(0)==`
`&&(ee="=0D"+ee.slice(1)),ee=ee.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var J=[],Z=ee.split(`\r
`),te=0;te<Z.length;++te){var ne=Z[te];if(ne.length==0){J.push("");continue}for(var xe=0;xe<ne.length;){var Ee=76,ge=ne.slice(xe,xe+Ee);ge.charAt(Ee-1)=="="?Ee--:ge.charAt(Ee-2)=="="?Ee-=2:ge.charAt(Ee-3)=="="&&(Ee-=3),ge=ne.slice(xe,xe+Ee),xe+=Ee,xe<ne.length&&(ge+="="),J.push(ge)}}return J.join(`\r
`)}function zR(V){for(var ee=[],J=0;J<V.length;++J){for(var Z=V[J];J<=V.length&&Z.charAt(Z.length-1)=="=";)Z=Z.slice(0,Z.length-1)+V[++J];ee.push(Z)}for(var te=0;te<ee.length;++te)ee[te]=ee[te].replace(/[=][0-9A-Fa-f]{2}/g,function(ne){return String.fromCharCode(parseInt(ne.slice(1),16))});return Os(ee.join(`\r
`))}function VR(V,ee,J){for(var Z="",te="",ne="",xe,Ee=0;Ee<10;++Ee){var ge=ee[Ee];if(!ge||ge.match(/^\s*$/))break;var ve=ge.match(/^(.*?):\s*([^\s].*)$/);if(ve)switch(ve[1].toLowerCase()){case"content-location":Z=ve[2].trim();break;case"content-type":ne=ve[2].trim();break;case"content-transfer-encoding":te=ve[2].trim();break}}switch(++Ee,te.toLowerCase()){case"base64":xe=Os(Ya(ee.slice(Ee).join("")));break;case"quoted-printable":xe=zR(ee.slice(Ee));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+te)}var ye=$p(V,Z.slice(J.length),xe,{unsafe:!0});ne&&(ye.ctype=ne)}function WR(V,ee){if(H(V.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var J=ee&&ee.root||"",Z=(Et&&Buffer.isBuffer(V)?V.toString("binary"):H(V)).split(`\r
`),te=0,ne="";for(te=0;te<Z.length;++te)if(ne=Z[te],!!/^Content-Location:/i.test(ne)&&(ne=ne.slice(ne.indexOf("file")),J||(J=ne.slice(0,ne.lastIndexOf("/")+1)),ne.slice(0,J.length)!=J))for(;J.length>0&&(J=J.slice(0,J.length-1),J=J.slice(0,J.lastIndexOf("/")+1),ne.slice(0,J.length)!=J););var xe=(Z[1]||"").match(/boundary="(.*?)"/);if(!xe)throw new Error("MAD cannot find boundary");var Ee="--"+(xe[1]||""),ge=[],ve=[],ye={FileIndex:ge,FullPaths:ve};E(ye);var Ae,$e=0;for(te=0;te<Z.length;++te){var Ve=Z[te];Ve!==Ee&&Ve!==Ee+"--"||($e++&&VR(ye,Z.slice(Ae,te),J),Ae=te)}return ye}function HR(V,ee){var J=ee||{},Z=J.boundary||"SheetJS";Z="------="+Z;for(var te=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Z.slice(2)+'"',"","",""],ne=V.FullPaths[0],xe=ne,Ee=V.FileIndex[0],ge=1;ge<V.FullPaths.length;++ge)if(xe=V.FullPaths[ge].slice(ne.length),Ee=V.FileIndex[ge],!(!Ee.size||!Ee.content||xe=="Sh33tJ5")){xe=xe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Ze){return"_x"+Ze.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Ze){return"_u"+Ze.charCodeAt(0).toString(16)+"_"});for(var ve=Ee.content,ye=Et&&Buffer.isBuffer(ve)?ve.toString("binary"):H(ve),Ae=0,$e=Math.min(1024,ye.length),Ve=0,Re=0;Re<=$e;++Re)(Ve=ye.charCodeAt(Re))>=32&&Ve<128&&++Ae;var Ue=Ae>=$e*4/5;te.push(Z),te.push("Content-Location: "+(J.root||"file:///C:/SheetJS/")+xe),te.push("Content-Transfer-Encoding: "+(Ue?"quoted-printable":"base64")),te.push("Content-Type: "+Lp(Ee,xe)),te.push(""),te.push(Ue?UR(ye):BR(ye))}return te.push(Z+`--\r
`),te.join(`\r
`)}function GR(V){var ee={};return E(ee,V),ee}function $p(V,ee,J,Z){var te=Z&&Z.unsafe;te||E(V);var ne=!te&&Dt.find(V,ee);if(!ne){var xe=V.FullPaths[0];ee.slice(0,xe.length)==xe?xe=ee:(xe.slice(-1)!="/"&&(xe+="/"),xe=(xe+ee).replace("//","/")),ne={name:s(ee),type:2},V.FileIndex.push(ne),V.FullPaths.push(xe),te||Dt.utils.cfb_gc(V)}return ne.content=J,ne.size=J?J.length:0,Z&&(Z.CLSID&&(ne.clsid=Z.CLSID),Z.mt&&(ne.mt=Z.mt),Z.ct&&(ne.ct=Z.ct)),ne}function KR(V,ee){E(V);var J=Dt.find(V,ee);if(J){for(var Z=0;Z<V.FileIndex.length;++Z)if(V.FileIndex[Z]==J)return V.FileIndex.splice(Z,1),V.FullPaths.splice(Z,1),!0}return!1}function YR(V,ee,J){E(V);var Z=Dt.find(V,ee);if(Z){for(var te=0;te<V.FileIndex.length;++te)if(V.FileIndex[te]==Z)return V.FileIndex[te].name=s(J),V.FullPaths[te]=J,!0}return!1}function qR(V){T(V,!0)}return t.find=F,t.read=N,t.parse=d,t.write=G,t.writeFile=O,t.utils={cfb_new:GR,cfb_add:$p,cfb_del:KR,cfb_mov:YR,cfb_gc:qR,ReadShift:id,CheckField:PD,prep_blob:Wn,bconcat:zr,use_zlib:k,_deflateRaw:Kt,_inflateRaw:Xe,consts:q},t}();function lX(e){return typeof e=="string"?Ap(e):Array.isArray(e)?Mq(e):e}function zf(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=Ap(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Jd(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var s=new Blob([lX(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=a,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=Uf(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function Kr(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function IS(e,t){for(var r=[],n=Kr(e),s=0;s!==n.length;++s)r[e[n[s]][t]]==null&&(r[e[n[s]][t]]=n[s]);return r}function qw(e){for(var t=[],r=Kr(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function Rp(e){for(var t=[],r=Kr(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function cX(e){for(var t=[],r=Kr(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var l0=new Date(1899,11,30,0,0,0);function Fn(e,t){var r=e.getTime(),n=l0.getTime()+(e.getTimezoneOffset()-l0.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var mD=new Date,uX=l0.getTime()+(mD.getTimezoneOffset()-l0.getTimezoneOffset())*6e4,LS=mD.getTimezoneOffset();function pD(e){var t=new Date;return t.setTime(e*24*60*60*1e3+uX),t.getTimezoneOffset()!==LS&&t.setTime(t.getTime()+(t.getTimezoneOffset()-LS)*6e4),t}var $S=new Date("2017-02-19T19:06:09.000Z"),gD=isNaN($S.getFullYear())?new Date("2/19/17"):$S,dX=gD.getFullYear()==2017;function xn(e,t){var r=new Date(e);if(dX)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(gD.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function Mp(e,t){if(Et&&Buffer.isBuffer(e))return e.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(a){return r[a]||a})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function In(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=In(e[r]));return t}function rr(e,t){for(var r="";r.length<t;)r+=e;return r}function La(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,a){return r=-r,a}),!isNaN(t=Number(n)))?t/r:t}var fX=["january","february","march","april","may","june","july","august","september","october","november","december"];function Qd(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),a=t.getDate();if(isNaN(a))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&fX.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||a>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}function it(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return Et?n=ti(r):n=Oq(r),Dt.utils.cfb_add(e,t,n)}Dt.utils.cfb_add(e,t,r)}else e.file(t,r)}function Xw(){return Dt.utils.cfb_new()}var xr=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,hX={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Qw=qw(hX),Jw=/[&<>'"]/g,mX=/[\u0000-\u0008\u000b-\u001f]/g;function Tt(e){var t=e+"";return t.replace(Jw,function(r){return Qw[r]}).replace(mX,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function BS(e){return Tt(e).replace(/ /g,"_x0020_")}var xD=/[\u0000-\u001f]/g;function pX(e){var t=e+"";return t.replace(Jw,function(r){return Qw[r]}).replace(/\n/g,"<br/>").replace(xD,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function gX(e){var t=e+"";return t.replace(Jw,function(r){return Qw[r]}).replace(xD,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function xX(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function vX(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function lx(e){for(var t="",r=0,n=0,s=0,a=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(a=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|a&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function US(e){var t=Zo(2*e.length),r,n,s=1,a=0,o=0,l;for(n=0;n<e.length;n+=s)s=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[a++]=o&255,t[a++]=o>>>8,o=0),t[a++]=r%256,t[a++]=r>>>8;return t.slice(0,a).toString("ucs2")}function zS(e){return ti(e,"binary").toString("utf8")}var Mh="foo bar baz",ad=Et&&(zS(Mh)==lx(Mh)&&zS||US(Mh)==lx(Mh)&&US)||lx,Jd=Et?function(e){return ti(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},yX=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}}(),vD=/(^\s|\s$|\n)/;function Vr(e,t){return"<"+e+(t.match(vD)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Zd(e){return Kr(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Me(e,t,r){return"<"+e+(r!=null?Zd(r):"")+(t!=null?(t.match(vD)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function l1(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function wX(e,t){switch(typeof e){case"string":var r=Me("vt:lpwstr",Tt(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Me((e|0)==e?"vt:i4":"vt:r8",Tt(String(e)));case"boolean":return Me("vt:bool",e?"true":"false")}if(e instanceof Date)return Me("vt:filetime",l1(e));throw new Error("Unable to serialize "+e)}var Cr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},ru=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Gn={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function _X(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,a=5;a>=0;--a)s=s*256+e[t+a];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function bX(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,a=0,o=n?-t:t;isFinite(o)?o==0?s=a=0:(s=Math.floor(Math.log(o)/Math.LN2),a=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(t)?26985:0);for(var l=0;l<=5;++l,a/=256)e[r+l]=a&255;e[r+6]=(s&15)<<4|a&15,e[r+7]=s>>4|n}var VS=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,a=e[0][n].length;s<a;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},WS=Et?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:ti(t)})):VS(e)}:VS,HS=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode(Lu(e,s)));return n.join("").replace(sd,"")},Zw=Et?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(sd,""):HS(e,t,r)}:HS,GS=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},yD=Et?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):GS(e,t,r)}:GS,KS=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(Ll(e,s)));return n.join("")},Vf=Et?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):KS(t,r,n)}:KS,wD=function(e,t){var r=Kn(e,t);return r>0?Vf(e,t+4,t+4+r-1):""},_D=wD,bD=function(e,t){var r=Kn(e,t);return r>0?Vf(e,t+4,t+4+r-1):""},SD=bD,ED=function(e,t){var r=2*Kn(e,t);return r>0?Vf(e,t+4,t+4+r-1):""},ND=ED,jD=function(t,r){var n=Kn(t,r);return n>0?Zw(t,r+4,r+4+n):""},kD=jD,CD=function(e,t){var r=Kn(e,t);return r>0?Vf(e,t+4,t+4+r):""},TD=CD,AD=function(e,t){return _X(e,t)},c0=AD,e_=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Et&&(_D=function(t,r){if(!Buffer.isBuffer(t))return wD(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},SD=function(t,r){if(!Buffer.isBuffer(t))return bD(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},ND=function(t,r){if(!Buffer.isBuffer(t))return ED(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},kD=function(t,r){if(!Buffer.isBuffer(t))return jD(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},TD=function(t,r){if(!Buffer.isBuffer(t))return CD(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},c0=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):AD(t,r)},e_=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Ll=function(e,t){return e[t]},Lu=function(e,t){return e[t+1]*256+e[t]},SX=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Kn=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Eo=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},EX=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function id(e,t){var r="",n,s,a=[],o,l,c,u;switch(t){case"dbcs":if(u=this.l,Et&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(Lu(this,u)),u+=2;e*=2;break;case"utf8":r=Vf(this,this.l,this.l+e);break;case"utf16le":e*=2,r=Zw(this,this.l,this.l+e);break;case"wstr":return id.call(this,e,"dbcs");case"lpstr-ansi":r=_D(this,this.l),e=4+Kn(this,this.l);break;case"lpstr-cp":r=SD(this,this.l),e=4+Kn(this,this.l);break;case"lpwstr":r=ND(this,this.l),e=4+2*Kn(this,this.l);break;case"lpp4":e=4+Kn(this,this.l),r=kD(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Kn(this,this.l),r=TD(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=Ll(this,this.l+e++))!==0;)a.push(Ph(o));r=a.join("");break;case"_wstr":for(e=0,r="";(o=Lu(this,this.l+e))!==0;)a.push(Ph(o)),e+=2;e+=2,r=a.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Ll(this,u),this.l=u+1,l=id.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),a.join("")+l;a.push(Ph(Lu(this,u))),u+=2}r=a.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Ll(this,u),this.l=u+1,l=id.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),a.join("")+l;a.push(Ph(Ll(this,u))),u+=1}r=a.join("");break;default:switch(e){case 1:return n=Ll(this,this.l),this.l++,n;case 2:return n=(t==="i"?SX:Lu)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(n=(e>0?Eo:EX)(this,this.l),this.l+=4,n):(s=Kn(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=c0(this,this.l):s=c0([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=yD(this,this.l,e);break}}return this.l+=e,r}var NX=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},jX=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},kX=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function CX(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)kX(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,NX(this,t,this.l);break;case 8:if(n=8,r==="f"){bX(this,t,this.l);break}case 16:break;case-4:n=4,jX(this,t,this.l);break}return this.l+=n,this}function PD(e,t){var r=yD(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Wn(e,t){e.l=t,e.read_shift=id,e.chk=PD,e.write_shift=CX}function ga(e,t){e.l+=t}function be(e){var t=Zo(e);return Wn(t,0),t}function Mn(){var e=[],t=Et?256:2048,r=function(u){var d=be(u);return Wn(d,0),d},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},a=function(u){return n&&u<n.length-n.l?n:(s(),n=r(Math.max(u+1,t)))},o=function(){return s(),zr(e)},l=function(u){s(),n=u,n.l==null&&(n.l=n.length),a(t)};return{next:a,push:l,end:o,_bufs:e}}function Ne(e,t,r,n){var s=+t,a;if(!isNaN(s)){n||(n=_re[s].p||(r||[]).length||0),a=1+(s>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var o=e.next(a);s<=127?o.write_shift(1,s):(o.write_shift(1,(s&127)+128),o.write_shift(1,s>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&e_(r)&&e.push(r)}}function od(e,t,r){var n=In(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function YS(e,t,r){var n=In(e);return n.s=od(n.s,t.s,r),n.e=od(n.e,t.s,r),n}function ld(e,t){if(e.cRel&&e.c<0)for(e=In(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=In(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Pt(e);return!e.cRel&&e.cRel!=null&&(r=PX(r)),!e.rRel&&e.rRel!=null&&(r=TX(r)),r}function cx(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+an(e.s.c)+":"+(e.e.cRel?"":"$")+an(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Hr(e.s.r)+":"+(e.e.rRel?"":"$")+Hr(e.e.r):ld(e.s,t.biff)+":"+ld(e.e,t.biff)}function t_(e){return parseInt(AX(e),10)-1}function Hr(e){return""+(e+1)}function TX(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function AX(e){return e.replace(/\$(\d+)$/,"$1")}function r_(e){for(var t=DX(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function an(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function PX(e){return e.replace(/^([A-Z])/,"$$$1")}function DX(e){return e.replace(/^\$([A-Z])/,"$1")}function RX(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ar(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function Pt(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function es(e){var t=e.indexOf(":");return t==-1?{s:Ar(e),e:Ar(e)}:{s:Ar(e.slice(0,t)),e:Ar(e.slice(t+1))}}function gr(e,t){return typeof t>"u"||typeof t=="number"?gr(e.s,e.e):(typeof e!="string"&&(e=Pt(e)),typeof t!="string"&&(t=Pt(t)),e==t?e:e+":"+t)}function Vt(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,a=e.length;for(r=0;n<a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===a||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function qS(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Zi(e.z,r?Fn(t):t)}catch{}try{return e.w=Zi((e.XF||{}).numFmtId||(r?14:0),r?Fn(t):t)}catch{return""+t}}function qa(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Wf[e.v]||e.v:t==null?qS(e,e.v):qS(e,t))}function pl(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function DD(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,a=e||(s?[]:{}),o=0,l=0;if(a&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Ar(n.origin):n.origin;o=c.r,l=c.c}a["!ref"]||(a["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=Vt(a["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var p={v:t[f][h]},g=o+f,m=l+h;if(u.s.r>g&&(u.s.r=g),u.s.c>m&&(u.s.c=m),u.e.r<g&&(u.e.r=g),u.e.c<m&&(u.e.c=m),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))p=t[f][h];else if(Array.isArray(p.v)&&(p.f=t[f][h][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||ar[14],n.cellDates?(p.t="d",p.w=Zi(p.z,Fn(p.v))):(p.t="n",p.v=Fn(p.v),p.w=Zi(p.z,p.v))):p.t="s";if(s)a[g]||(a[g]=[]),a[g][m]&&a[g][m].z&&(p.z=a[g][m].z),a[g][m]=p;else{var v=Pt({c:m,r:g});a[v]&&a[v].z&&(p.z=a[v].z),a[v]=p}}}return u.s.c<1e7&&(a["!ref"]=gr(u)),a}function nu(e,t){return DD(null,e,t)}function MX(e){return e.read_shift(4,"i")}function zs(e,t){return t||(t=be(4)),t.write_shift(4,e),t}function on(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Pr(e,t){var r=!1;return t==null&&(r=!0,t=be(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function OX(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function FX(e,t){return t||(t=be(4)),t.write_shift(2,0),t.write_shift(2,0),t}function n_(e,t){var r=e.l,n=e.read_shift(1),s=on(e),a=[],o={t:s,h:s};if(n&1){for(var l=e.read_shift(4),c=0;c!=l;++c)a.push(OX(e));o.r=a}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function IX(e,t){var r=!1;return t==null&&(r=!0,t=be(15+4*e.t.length)),t.write_shift(1,0),Pr(e.t,t),r?t.slice(0,t.l):t}var LX=n_;function $X(e,t){var r=!1;return t==null&&(r=!0,t=be(23+4*e.t.length)),t.write_shift(1,1),Pr(e.t,t),t.write_shift(4,1),FX({ich:0,ifnt:0},t),r?t.slice(0,t.l):t}function _s(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function gl(e,t){return t==null&&(t=be(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function xl(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function vl(e,t){return t==null&&(t=be(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var BX=on,RD=Pr;function s_(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function u0(e,t){var r=!1;return t==null&&(r=!0,t=be(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var UX=on,c1=s_,a_=u0;function MD(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?c0([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Eo(t,0)>>2;return r?s/100:s}function OD(e,t){t==null&&(t=be(4));var r=0,n=0,s=e*100;if(e==(e|0)&&e>=-(1<<29)&&e<1<<29?n=1:s==(s|0)&&s>=-(1<<29)&&s<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function FD(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function zX(e,t){return t||(t=be(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var yl=FD,su=zX;function au(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function el(e,t){return(t||be(8)).write_shift(8,e,"f")}function VX(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),a=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var u=JX[s];u&&(t.rgb=iE(u));break;case 2:t.rgb=iE([o,l,c]);break;case 3:t.theme=s;break}return a!=0&&(t.tint=a>0?a/32767:a/32768),t}function d0(e,t){if(t||(t=be(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function WX(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function HX(e,t){t||(t=be(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}var ID=2,zn=3,Oh=11,f0=19,Fh=64,GX=65,KX=71,YX=4108,qX=4126,Lr=80,XS={1:{n:"CodePage",t:ID},2:{n:"Category",t:Lr},3:{n:"PresentationFormat",t:Lr},4:{n:"ByteCount",t:zn},5:{n:"LineCount",t:zn},6:{n:"ParagraphCount",t:zn},7:{n:"SlideCount",t:zn},8:{n:"NoteCount",t:zn},9:{n:"HiddenCount",t:zn},10:{n:"MultimediaClipCount",t:zn},11:{n:"ScaleCrop",t:Oh},12:{n:"HeadingPairs",t:YX},13:{n:"TitlesOfParts",t:qX},14:{n:"Manager",t:Lr},15:{n:"Company",t:Lr},16:{n:"LinksUpToDate",t:Oh},17:{n:"CharacterCount",t:zn},19:{n:"SharedDoc",t:Oh},22:{n:"HyperlinksChanged",t:Oh},23:{n:"AppVersion",t:zn,p:"version"},24:{n:"DigSig",t:GX},26:{n:"ContentType",t:Lr},27:{n:"ContentStatus",t:Lr},28:{n:"Language",t:Lr},29:{n:"Version",t:Lr},255:{},2147483648:{n:"Locale",t:f0},2147483651:{n:"Behavior",t:f0},1919054434:{}},QS={1:{n:"CodePage",t:ID},2:{n:"Title",t:Lr},3:{n:"Subject",t:Lr},4:{n:"Author",t:Lr},5:{n:"Keywords",t:Lr},6:{n:"Comments",t:Lr},7:{n:"Template",t:Lr},8:{n:"LastAuthor",t:Lr},9:{n:"RevNumber",t:Lr},10:{n:"EditTime",t:Fh},11:{n:"LastPrinted",t:Fh},12:{n:"CreatedDate",t:Fh},13:{n:"ModifiedDate",t:Fh},14:{n:"PageCount",t:zn},15:{n:"WordCount",t:zn},16:{n:"CharCount",t:zn},17:{n:"Thumbnail",t:KX},18:{n:"Application",t:Lr},19:{n:"DocSecurity",t:zn},255:{},2147483648:{n:"Locale",t:f0},2147483651:{n:"Behavior",t:f0},1919054434:{}};function XX(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var QX=XX([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),JX=In(QX),Wf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},ZX={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Ih={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function LD(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function $D(e,t){var r=cX(ZX),n=[],s;n[n.length]=xr,n[n.length]=Me("Types",null,{xmlns:Cr.CT,"xmlns:xsd":Cr.xsd,"xmlns:xsi":Cr.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Me("Default",null,{Extension:c[0],ContentType:c[1]})}));var a=function(c){e[c]&&e[c].length>0&&(s=e[c][0],n[n.length]=Me("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:Ih[c][t.bookType]||Ih[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Me("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:Ih[c][t.bookType]||Ih[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Me("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return a("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var _t={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function BD(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function dc(e){var t=[xr,Me("Relationships",null,{xmlns:Cr.RELS})];return Kr(e["!id"]).forEach(function(r){t[t.length]=Me("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Ct(e,t,r,n,s,a){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=n,s.Target=r,[_t.HLINK,_t.XPATH,_t.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}function eQ(e){var t=[xr];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function JS(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function tQ(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function rQ(e){var t=[xr];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(JS(e[r][0],e[r][1])),t.push(tQ("",e[r][0]));return t.push(JS("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function UD(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+s0.version+"</meta:generator></office:meta></office:document-meta>"}var Io=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function ux(e,t,r,n,s){s[e]!=null||t==null||t===""||(s[e]=t,t=Tt(t),n[n.length]=r?Me(e,t,r):Vr(e,t))}function zD(e,t){var r=t||{},n=[xr,Me("cp:coreProperties",null,{"xmlns:cp":Cr.CORE_PROPS,"xmlns:dc":Cr.dc,"xmlns:dcterms":Cr.dcterms,"xmlns:dcmitype":Cr.dcmitype,"xmlns:xsi":Cr.xsi})],s={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&ux("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:l1(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),e.ModifiedDate!=null&&ux("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:l1(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var a=0;a!=Io.length;++a){var o=Io[a],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&ux(o[0],l,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var fc=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],VD=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function WD(e){var t=[],r=Me;return e||(e={}),e.Application="SheetJS",t[t.length]=xr,t[t.length]=Me("Properties",null,{xmlns:Cr.EXT_PROPS,"xmlns:vt":Cr.vt}),fc.forEach(function(n){if(e[n[1]]!==void 0){var s;switch(n[2]){case"string":s=Tt(String(e[n[1]]));break;case"bool":s=e[n[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(n[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+Tt(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function HD(e){var t=[xr,Me("Properties",null,{xmlns:Cr.CUST_PROPS,"xmlns:vt":Cr.vt})];if(!e)return t.join("");var r=1;return Kr(e).forEach(function(s){++r,t[t.length]=Me("property",wX(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Tt(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var ZS={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function nQ(e,t){var r=[];return Kr(ZS).map(function(n){for(var s=0;s<Io.length;++s)if(Io[s][1]==n)return Io[s];for(s=0;s<fc.length;++s)if(fc[s][1]==n)return fc[s];throw n}).forEach(function(n){if(e[n[1]]!=null){var s=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(Vr(ZS[n[1]]||n[1],s))}}),Me("DocumentProperties",r.join(""),{xmlns:Gn.o})}function sQ(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return e&&Kr(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)){for(var o=0;o<Io.length;++o)if(a==Io[o][1])return;for(o=0;o<fc.length;++o)if(a==fc[o][1])return;for(o=0;o<r.length;++o)if(a==r[o])return;var l=e[a],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),s.push(Me(BS(a),l,{"dt:dt":c}))}}),t&&Kr(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)&&!(e&&Object.prototype.hasOwnProperty.call(e,a))){var o=t[a],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),s.push(Me(BS(a),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+Gn.o+'">'+s.join("")+"</"+n+">"}function aQ(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var a=n/Math.pow(2,32)|0;a>0&&(n=n%Math.pow(2,32),s+=a);var o=be(8);return o.write_shift(4,n),o.write_shift(4,s),o}function eE(e,t){var r=be(4),n=be(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=be(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=aQ(t);break;case 31:case 80:for(n=be(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return zr([r,n])}var GD=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function iQ(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function tE(e,t,r){var n=be(8),s=[],a=[],o=8,l=0,c=be(8),u=be(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),a.push(c),s.push(u),o+=8+c.length,!t){u=be(8),u.write_shift(4,0),s.unshift(u);var d=[be(4)];for(d[0].write_shift(4,e.length),l=0;l<e.length;++l){var f=e[l][0];for(c=be(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=zr(d),a.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(GD.indexOf(e[l][0])>-1||VD.indexOf(e[l][0])>-1)&&e[l][1]!=null){var h=e[l][1],p=0;if(t){p=+t[e[l][0]];var g=r[p];if(g.p=="version"&&typeof h=="string"){var m=h.split(".");h=(+m[0]<<16)+(+m[1]||0)}c=eE(g.t,h)}else{var v=iQ(h);v==-1&&(v=31,h=String(h)),c=eE(v,h)}a.push(c),u=be(8),u.write_shift(4,t?p:2+l),s.push(u),o+=8+c.length}var _=8*(a.length+1);for(l=0;l<a.length;++l)s[l].write_shift(4,_),_+=a[l].length;return n.write_shift(4,o),n.write_shift(4,a.length),zr([n].concat(s).concat(a))}function rE(e,t,r,n,s,a){var o=be(s?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Dt.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,s?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,s?68:48);var c=tE(e,r,n);if(l.push(c),s){var u=tE(s,null,null);o.write_shift(16,a,"hex"),o.write_shift(4,68+c.length),l.push(u)}return zr(l)}function oQ(e,t){t||(t=be(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function lQ(e,t){return e.read_shift(t)===1}function pn(e,t){return t||(t=be(2)),t.write_shift(2,+!!e),t}function KD(e){return e.read_shift(2,"u")}function os(e,t){return t||(t=be(2)),t.write_shift(2,e),t}function YD(e,t,r){return r||(r=be(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function qD(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=e.read_shift(1);a&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=n?e.read_shift(n,s):"";return o}function cQ(e){var t=e.t||"",r=be(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=be(2*t.length);n.write_shift(2*t.length,t,"utf16le");var s=[r,n];return zr(s)}function uQ(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function dQ(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):uQ(e,n,r)}function fQ(e,t,r){if(r.biff>5)return dQ(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function XD(e,t,r){return r||(r=be(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function nE(e,t){t||(t=be(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function hQ(e){var t=be(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),a=s>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3;break}t.write_shift(4,2),t.write_shift(4,a);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(a==28)n=n.slice(1),nE(n,t);else if(a&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=s>-1?n.slice(0,s):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),a&8&&nE(s>-1?n.slice(s+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function tl(e,t,r,n){return n||(n=be(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function mQ(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),a=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[s,a,o]}function pQ(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function QD(e,t){return t||(t=be(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function i_(e,t,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=be(s);return a.write_shift(2,n),a.write_shift(2,t),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function gQ(e,t){var r=!t||t.biff==8,n=be(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function xQ(e,t){var r=!t||t.biff>=8?2:1,n=be(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function vQ(e,t){var r=be(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],s=0;s<e.length;++s)n[s]=cQ(e[s]);var a=zr([r].concat(n));return a.parts=[r.length].concat(n.map(function(o){return o.length})),a}function yQ(){var e=be(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function wQ(e){var t=be(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function _Q(e,t){var r=e.name||"Arial",n=t&&t.biff==5,s=n?15+r.length:16+2*r.length,a=be(s);return a.write_shift(2,(e.sz||12)*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}function bQ(e,t,r,n){var s=be(10);return tl(e,t,n,s),s.write_shift(4,r),s}function SQ(e,t,r,n,s){var a=!s||s.biff==8,o=be(8+ +a+(1+a)*r.length);return tl(e,t,n,o),o.write_shift(2,r.length),a&&o.write_shift(1,1),o.write_shift((1+a)*r.length,r,a?"utf16le":"sbcs"),o}function EQ(e,t,r,n){var s=r&&r.biff==5;n||(n=be(s?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(s?1:2,t.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return a.l==null&&(a.l=a.length),a}function NQ(e,t){var r=t.biff==8||!t.biff?4:2,n=be(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function sE(e,t,r,n){var s=r&&r.biff==5;n||(n=be(s?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var a=0;return e.numFmtId>0&&s&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function jQ(e){var t=be(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function kQ(e,t,r,n,s,a){var o=be(8);return tl(e,t,n,o),YD(r,a,o),o}function CQ(e,t,r,n){var s=be(14);return tl(e,t,n,s),el(r,s),s}function TQ(e,t,r){if(r.biff<8)return AQ(e,t,r);for(var n=[],s=e.l+t,a=e.read_shift(r.biff>8?4:2);a--!==0;)n.push(mQ(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function AQ(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=qD(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function PQ(e){var t=be(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)QD(e[r],t);return t}function DQ(e){var t=be(24),r=Ar(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(n[s],16));return zr([t,hQ(e[1])])}function RQ(e){var t=e[1].Tooltip,r=be(10+2*(t.length+1));r.write_shift(2,2048);var n=Ar(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function MQ(e){return e||(e=be(4)),e.write_shift(2,1),e.write_shift(2,1),e}function OQ(e,t,r){if(!r.cellStyles)return ga(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),a=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s,e:a,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function FQ(e,t){var r=be(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function IQ(e){for(var t=be(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}function LQ(e,t,r){var n=be(15);return Gf(n,e,t),n.write_shift(8,r,"f"),n}function $Q(e,t,r){var n=be(9);return Gf(n,e,t),n.write_shift(2,r),n}var BQ=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=qw({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=Zo(1);switch(c.type){case"base64":d=Os(Ya(l));break;case"binary":d=Os(l);break;case"buffer":case"array":d=l;break}Wn(d,0);var f=d.read_shift(1),h=!!(f&136),p=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,h=!0;break;case 49:p=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var m=0,v=521;f==2&&(m=d.read_shift(2)),d.l+=3,f!=2&&(m=d.read_shift(4)),m>1048576&&(m=1e6),f!=2&&(v=d.read_shift(2));var _=d.read_shift(2),y=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(y=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var w=[],b={},S=Math.min(d.length,f==2?521:v-10-(p?264:0)),N=g?32:11;d.l<S&&d[d.l]!=13;)switch(b={},b.name=So.utils.decode(y,d.slice(d.l,d.l+N)).replace(/[\u0000\r\n].*$/g,""),d.l+=N,b.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(b.offset=d.read_shift(4)),b.len=d.read_shift(1),f==2&&(b.offset=d.read_shift(2)),b.dec=d.read_shift(1),b.name.length&&w.push(b),f!=2&&(d.l+=g?13:14),b.type){case"B":(!p||b.len!=8)&&c.WTF&&console.log("Skipping "+b.name+":"+b.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+b.name+":"+b.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+b.type)}if(d[d.l]!==13&&(d.l=v-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=v;var E=0,C=0;for(u[0]=[],C=0;C!=w.length;++C)u[0][C]=w[C].name;for(;m-- >0;){if(d[d.l]===42){d.l+=_;continue}for(++d.l,u[++E]=[],C=0,C=0;C!=w.length;++C){var T=d.slice(d.l,d.l+w[C].len);d.l+=w[C].len,Wn(T,0);var D=So.utils.decode(y,T);switch(w[C].type){case"C":D.trim().length&&(u[E][C]=D.replace(/\s+$/,""));break;case"D":D.length===8?u[E][C]=new Date(+D.slice(0,4),+D.slice(4,6)-1,+D.slice(6,8)):u[E][C]=D;break;case"F":u[E][C]=parseFloat(D.trim());break;case"+":case"I":u[E][C]=g?T.read_shift(-4,"i")^2147483648:T.read_shift(4,"i");break;case"L":switch(D.trim().toUpperCase()){case"Y":case"T":u[E][C]=!0;break;case"N":case"F":u[E][C]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+D+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[E][C]="##MEMO##"+(g?parseInt(D.trim(),10):T.read_shift(4));break;case"N":D=D.replace(/\u0000/g,"").trim(),D&&D!="."&&(u[E][C]=+D||0);break;case"@":u[E][C]=new Date(T.read_shift(-8,"f")-621356832e5);break;case"T":u[E][C]=new Date((T.read_shift(4)-2440588)*864e5+T.read_shift(4));break;case"Y":u[E][C]=T.read_shift(4,"i")/1e4+T.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[E][C]=-T.read_shift(-8,"f");break;case"B":if(p&&w[C].len==8){u[E][C]=T.read_shift(8,"f");break}case"G":case"P":T.l+=w[C].len;break;case"0":if(w[C].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+w[C].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=w,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=nu(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function s(l,c){try{return pl(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&qd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Mn(),f=x0(l,{header:1,raw:!0,cellDates:!0}),h=f[0],p=f.slice(1),g=l["!cols"]||[],m=0,v=0,_=0,y=1;for(m=0;m<h.length;++m){if(((g[m]||{}).DBF||{}).name){h[m]=g[m].DBF.name,++_;continue}if(h[m]!=null){if(++_,typeof h[m]=="number"&&(h[m]=h[m].toString(10)),typeof h[m]!="string")throw new Error("DBF Invalid column name "+h[m]+" |"+typeof h[m]+"|");if(h.indexOf(h[m])!==m){for(v=0;v<1024;++v)if(h.indexOf(h[m]+"_"+v)==-1){h[m]+="_"+v;break}}}}var w=Vt(l["!ref"]),b=[],S=[],N=[];for(m=0;m<=w.e.c-w.s.c;++m){var E="",C="",T=0,D=[];for(v=0;v<p.length;++v)p[v][m]!=null&&D.push(p[v][m]);if(D.length==0||h[m]==null){b[m]="?";continue}for(v=0;v<D.length;++v){switch(typeof D[v]){case"number":C="B";break;case"string":C="C";break;case"boolean":C="L";break;case"object":C=D[v]instanceof Date?"D":"C";break;default:C="C"}T=Math.max(T,String(D[v]).length),E=E&&E!=C?"C":C}T>250&&(T=250),C=((g[m]||{}).DBF||{}).type,C=="C"&&g[m].DBF.len>T&&(T=g[m].DBF.len),E=="B"&&C=="N"&&(E="N",N[m]=g[m].DBF.dec,T=g[m].DBF.len),S[m]=E=="C"||C=="N"?T:a[E]||0,y+=S[m],b[m]=E}var F=d.next(32);for(F.write_shift(4,318902576),F.write_shift(4,p.length),F.write_shift(2,296+32*_),F.write_shift(2,y),m=0;m<4;++m)F.write_shift(4,0);for(F.write_shift(4,0|(+t[Z3]||3)<<8),m=0,v=0;m<h.length;++m)if(h[m]!=null){var P=d.next(32),L=(h[m].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);P.write_shift(1,L,"sbcs"),P.write_shift(1,b[m]=="?"?"C":b[m],"sbcs"),P.write_shift(4,v),P.write_shift(1,S[m]||a[b[m]]||0),P.write_shift(1,N[m]||0),P.write_shift(1,2),P.write_shift(4,0),P.write_shift(1,0),P.write_shift(4,0),P.write_shift(4,0),v+=S[m]||a[b[m]]||0}var A=d.next(264);for(A.write_shift(4,13),m=0;m<65;++m)A.write_shift(4,0);for(m=0;m<p.length;++m){var I=d.next(y);for(I.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(b[v]){case"L":I.write_shift(1,p[m][v]==null?63:p[m][v]?84:70);break;case"B":I.write_shift(8,p[m][v]||0,"f");break;case"N":var Q="0";for(typeof p[m][v]=="number"&&(Q=p[m][v].toFixed(N[v]||0)),_=0;_<S[v]-Q.length;++_)I.write_shift(1,32);I.write_shift(1,Q,"sbcs");break;case"D":p[m][v]?(I.write_shift(4,("0000"+p[m][v].getFullYear()).slice(-4),"sbcs"),I.write_shift(2,("00"+(p[m][v].getMonth()+1)).slice(-2),"sbcs"),I.write_shift(2,("00"+p[m][v].getDate()).slice(-2),"sbcs")):I.write_shift(8,"00000000","sbcs");break;case"C":var q=String(p[m][v]!=null?p[m][v]:"").slice(0,S[v]);for(I.write_shift(1,q,"sbcs"),_=0;_<S[v]-q.length;++_)I.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:n,from_sheet:o}}(),UQ=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Kr(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,p){var g=e[p];return typeof g=="number"?CS(g):g},n=function(h,p,g){var m=p.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return m==59?h:CS(m)};e["|"]=254;function s(h,p){switch(p.type){case"base64":return a(Ya(h),p);case"binary":return a(h,p);case"buffer":return a(Et&&Buffer.isBuffer(h)?h.toString("binary"):Uf(h),p);case"array":return a(Mp(h),p)}throw new Error("Unrecognized type "+p.type)}function a(h,p){var g=h.split(/[\n\r]+/),m=-1,v=-1,_=0,y=0,w=[],b=[],S=null,N={},E=[],C=[],T=[],D=0,F;for(+p.codepage>=0&&qd(+p.codepage);_!==g.length;++_){D=0;var P=g[_].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),L=P.replace(/;;/g,"\0").split(";").map(function(M){return M.replace(/\u0000/g,";")}),A=L[0],I;if(P.length>0)switch(A){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":L[1].charAt(0)=="P"&&b.push(P.slice(3).replace(/;;/g,";"));break;case"C":var Q=!1,q=!1,O=!1,H=!1,G=-1,K=-1;for(y=1;y<L.length;++y)switch(L[y].charAt(0)){case"A":break;case"X":v=parseInt(L[y].slice(1))-1,q=!0;break;case"Y":for(m=parseInt(L[y].slice(1))-1,q||(v=0),F=w.length;F<=m;++F)w[F]=[];break;case"K":I=L[y].slice(1),I.charAt(0)==='"'?I=I.slice(1,I.length-1):I==="TRUE"?I=!0:I==="FALSE"?I=!1:isNaN(La(I))?isNaN(Qd(I).getDate())||(I=xn(I)):(I=La(I),S!==null&&dD(S)&&(I=pD(I))),Q=!0;break;case"E":H=!0;var k=$J(L[y].slice(1),{r:m,c:v});w[m][v]=[w[m][v],k];break;case"S":O=!0,w[m][v]=[w[m][v],"S5S"];break;case"G":break;case"R":G=parseInt(L[y].slice(1))-1;break;case"C":K=parseInt(L[y].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+P)}if(Q&&(w[m][v]&&w[m][v].length==2?w[m][v][0]=I:w[m][v]=I,S=null),O){if(H)throw new Error("SYLK shared formula cannot have own formula");var W=G>-1&&w[G][K];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");w[m][v][1]=BJ(W[1],{r:m-G,c:v-K})}break;case"F":var R=0;for(y=1;y<L.length;++y)switch(L[y].charAt(0)){case"X":v=parseInt(L[y].slice(1))-1,++R;break;case"Y":for(m=parseInt(L[y].slice(1))-1,F=w.length;F<=m;++F)w[F]=[];break;case"M":D=parseInt(L[y].slice(1))/20;break;case"F":break;case"G":break;case"P":S=b[parseInt(L[y].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(T=L[y].slice(1).split(" "),F=parseInt(T[0],10);F<=parseInt(T[1],10);++F)D=parseInt(T[2],10),C[F-1]=D===0?{hidden:!0}:{wch:D},o_(C[F-1]);break;case"C":v=parseInt(L[y].slice(1))-1,C[v]||(C[v]={});break;case"R":m=parseInt(L[y].slice(1))-1,E[m]||(E[m]={}),D>0?(E[m].hpt=D,E[m].hpx=rR(D)):D===0&&(E[m].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+P)}R<1&&(S=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+P)}}return E.length>0&&(N["!rows"]=E),C.length>0&&(N["!cols"]=C),p&&p.sheetRows&&(w=w.slice(0,p.sheetRows)),[w,N]}function o(h,p){var g=s(h,p),m=g[0],v=g[1],_=nu(m,p);return Kr(v).forEach(function(y){_[y]=v[y]}),_}function l(h,p){return pl(o(h,p),p)}function c(h,p,g,m){var v="C;Y"+(g+1)+";X"+(m+1)+";K";switch(h.t){case"n":v+=h.v||0,h.f&&!h.F&&(v+=";E"+c_(h.f,{r:g,c:m}));break;case"b":v+=h.v?"TRUE":"FALSE";break;case"e":v+=h.w||h.v;break;case"d":v+='"'+(h.w||h.v)+'"';break;case"s":v+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(h,p){p.forEach(function(g,m){var v="F;W"+(m+1)+" "+(m+1)+" ";g.hidden?v+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=h0(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=m0(g.wpx)),typeof g.wch=="number"&&(v+=Math.round(g.wch))),v.charAt(v.length-1)!=" "&&h.push(v)})}function d(h,p){p.forEach(function(g,m){var v="F;";g.hidden?v+="M0;":g.hpt?v+="M"+20*g.hpt+";":g.hpx&&(v+="M"+20*p0(g.hpx)+";"),v.length>2&&h.push(v+"R"+(m+1))})}function f(h,p){var g=["ID;PWXL;N;E"],m=[],v=Vt(h["!ref"]),_,y=Array.isArray(h),w=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),h["!cols"]&&u(g,h["!cols"]),h["!rows"]&&d(g,h["!rows"]),g.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var b=v.s.r;b<=v.e.r;++b)for(var S=v.s.c;S<=v.e.c;++S){var N=Pt({r:b,c:S});_=y?(h[b]||[])[S]:h[N],!(!_||_.v==null&&(!_.f||_.F))&&m.push(c(_,h,b,S))}return g.join(w)+w+m.join(w)+w+"E"+w}return{to_workbook:l,to_sheet:o,from_sheet:f}}(),zQ=function(){function e(a,o){switch(o.type){case"base64":return t(Ya(a),o);case"binary":return t(a,o);case"buffer":return t(Et&&Buffer.isBuffer(a)?a.toString("binary"):Uf(a),o);case"array":return t(Mp(a),o)}throw new Error("Unrecognized type "+o.type)}function t(a,o){for(var l=a.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=l[d].trim().split(","),p=h[0],g=h[1];++d;for(var m=l[d]||"";(m.match(/["]/g)||[]).length&1&&d<l.length-1;)m+=`
`+l[++d];switch(m=m.trim(),+p){case-1:if(m==="BOT"){f[++c]=[],u=0;continue}else if(m!=="EOD")throw new Error("Unrecognized DIF special command "+m);break;case 0:m==="TRUE"?f[c][u]=!0:m==="FALSE"?f[c][u]=!1:isNaN(La(g))?isNaN(Qd(g).getDate())?f[c][u]=g:f[c][u]=xn(g):f[c][u]=La(g),++u;break;case 1:m=m.slice(1,m.length-1),m=m.replace(/""/g,'"'),m&&m.match(/^=".*"$/)&&(m=m.slice(2,-1)),f[c][u++]=m!==""?m:null;break}if(m==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(a,o){return nu(e(a,o),o)}function n(a,o){return pl(r(a,o),o)}var s=function(){var a=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},o=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Vt(c["!ref"]),f,h=Array.isArray(c);a(u,"TABLE",0,1,"sheetjs"),a(u,"VECTORS",0,d.e.r-d.s.r+1,""),a(u,"TUPLES",0,d.e.c-d.s.c+1,""),a(u,"DATA",0,0,"");for(var p=d.s.r;p<=d.e.r;++p){o(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var m=Pt({r:p,c:g});if(f=h?(c[p]||[])[g]:c[m],!f){o(u,1,0,"");continue}switch(f.t){case"n":var v=f.w;!v&&f.v!=null&&(v=f.v),v==null?f.f&&!f.F?o(u,1,0,"="+f.f):o(u,1,0,""):o(u,0,v,"V");break;case"b":o(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Zi(f.z||ar[14],Fn(xn(f.v)))),o(u,0,f.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var _=`\r
`,y=u.join(_);return y}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),JD=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var p=f.split(`
`),g=-1,m=-1,v=0,_=[];v!==p.length;++v){var y=p[v].trim().split(":");if(y[0]==="cell"){var w=Ar(y[1]);if(_.length<=w.r)for(g=_.length;g<=w.r;++g)_[g]||(_[g]=[]);switch(g=w.r,m=w.c,y[2]){case"t":_[g][m]=e(y[3]);break;case"v":_[g][m]=+y[3];break;case"vtf":var b=y[y.length-1];case"vtc":switch(y[3]){case"nl":_[g][m]=!!+y[4];break;default:_[g][m]=+y[4];break}y[2]=="vtf"&&(_[g][m]=[_[g][m],b])}}}return h&&h.sheetRows&&(_=_.slice(0,h.sheetRows)),_}function n(f,h){return nu(r(f,h),h)}function s(f,h){return pl(n(f,h),h)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],p=[],g,m="",v=es(f["!ref"]),_=Array.isArray(f),y=v.s.r;y<=v.e.r;++y)for(var w=v.s.c;w<=v.e.c;++w)if(m=Pt({r:y,c:w}),g=_?(f[y]||[])[w]:f[m],!(!g||g.v==null||g.t==="z")){switch(p=["cell",m,"t"],g.t){case"s":case"str":p.push(t(g.v));break;case"n":g.f?(p[2]="vtf",p[3]="n",p[4]=g.v,p[5]=t(g.f)):(p[2]="v",p[3]=g.v);break;case"b":p[2]="vt"+(g.f?"f":"c"),p[3]="nl",p[4]=g.v?"1":"0",p[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var b=Fn(xn(g.v));p[2]="vtc",p[3]="nd",p[4]=""+b,p[5]=g.w||Zi(g.z||ar[14],b);break;case"e":continue}h.push(p.join(":"))}return h.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[a,o,l,o,u(f),c].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:d}}(),VQ=function(){function e(d,f,h,p,g){g.raw?f[h][p]=d:d===""||(d==="TRUE"?f[h][p]=!0:d==="FALSE"?f[h][p]=!1:isNaN(La(d))?isNaN(Qd(d).getDate())?f[h][p]=d:f[h][p]=xn(d):f[h][p]=La(d))}function t(d,f){var h=f||{},p=[];if(!d||d.length===0)return p;for(var g=d.split(/[\r\n]/),m=g.length-1;m>=0&&g[m].length===0;)--m;for(var v=10,_=0,y=0;y<=m;++y)_=g[y].indexOf(" "),_==-1?_=g[y].length:_++,v=Math.max(v,_);for(y=0;y<=m;++y){p[y]=[];var w=0;for(e(g[y].slice(0,v).trim(),p,y,w,h),w=1;w<=(g[y].length-v)/10+1;++w)e(g[y].slice(v+(w-1)*10,v+w*10).trim(),p,y,w,h)}return h.sheetRows&&(p=p.slice(0,h.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(d){for(var f={},h=!1,p=0,g=0;p<d.length;++p)(g=d.charCodeAt(p))==34?h=!h:!h&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p]);if(!g.length){f=n;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p])}return g.sort(function(m,v){return m[0]-v[0]||n[m[1]]-n[v[1]]}),r[g.pop()[1]]||44}function a(d,f){var h=f||{},p="",g=h.dense?[]:{},m={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(p=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(p=d.charAt(4),d=d.slice(6)):p=s(d.slice(0,1024)):h&&h.FS?p=h.FS:p=s(d.slice(0,1024));var v=0,_=0,y=0,w=0,b=0,S=p.charCodeAt(0),N=!1,E=0,C=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var T=h.dateNF!=null?aX(h.dateNF):null;function D(){var F=d.slice(w,b),P={};if(F.charAt(0)=='"'&&F.charAt(F.length-1)=='"'&&(F=F.slice(1,-1).replace(/""/g,'"')),F.length===0)P.t="z";else if(h.raw)P.t="s",P.v=F;else if(F.trim().length===0)P.t="s",P.v=F;else if(F.charCodeAt(0)==61)F.charCodeAt(1)==34&&F.charCodeAt(F.length-1)==34?(P.t="s",P.v=F.slice(2,-1).replace(/""/g,'"')):UJ(F)?(P.t="n",P.f=F.slice(1)):(P.t="s",P.v=F);else if(F=="TRUE")P.t="b",P.v=!0;else if(F=="FALSE")P.t="b",P.v=!1;else if(!isNaN(y=La(F)))P.t="n",h.cellText!==!1&&(P.w=F),P.v=y;else if(!isNaN(Qd(F).getDate())||T&&F.match(T)){P.z=h.dateNF||ar[14];var L=0;T&&F.match(T)&&(F=iX(F,h.dateNF,F.match(T)||[]),L=1),h.cellDates?(P.t="d",P.v=xn(F,L)):(P.t="n",P.v=Fn(xn(F,L))),h.cellText!==!1&&(P.w=Zi(P.z,P.v instanceof Date?Fn(P.v):P.v)),h.cellNF||delete P.z}else P.t="s",P.v=F;if(P.t=="z"||(h.dense?(g[v]||(g[v]=[]),g[v][_]=P):g[Pt({c:_,r:v})]=P),w=b+1,C=d.charCodeAt(w),m.e.c<_&&(m.e.c=_),m.e.r<v&&(m.e.r=v),E==S)++_;else if(_=0,++v,h.sheetRows&&h.sheetRows<=v)return!0}e:for(;b<d.length;++b)switch(E=d.charCodeAt(b)){case 34:C===34&&(N=!N);break;case S:case 10:case 13:if(!N&&D())break e;break}return b-w>0&&D(),g["!ref"]=gr(m),g}function o(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,f):nu(t(d,f),f)}function l(d,f){var h="",p=f.type=="string"?[0,0,0,0]:tne(d,f);switch(f.type){case"base64":h=Ya(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof So<"u"?h=So.utils.decode(f.codepage,d):h=Et&&Buffer.isBuffer(d)?d.toString("binary"):Uf(d);break;case"array":h=Mp(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?h=ad(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=ad(h):f.type=="binary"&&typeof So<"u"&&f.codepage&&(h=So.utils.decode(f.codepage,So.utils.encode(28591,h))),h.slice(0,19)=="socialcalc:version:"?JD.to_sheet(f.type=="string"?h:ad(h),f):o(h,f)}function c(d,f){return pl(l(d,f),f)}function u(d){for(var f=[],h=Vt(d["!ref"]),p,g=Array.isArray(d),m=h.s.r;m<=h.e.r;++m){for(var v=[],_=h.s.c;_<=h.e.c;++_){var y=Pt({r:m,c:_});if(p=g?(d[m]||[])[_]:d[y],!p||p.v==null){v.push("          ");continue}for(var w=(p.w||(qa(p),p.w)||"").slice(0,10);w.length<10;)w+=" ";v.push(w+(_===0?" ":""))}f.push(v.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}(),aE=function(){function e(k,W,R){if(k){Wn(k,k.l||0);for(var M=R.Enum||G;k.l<k.length;){var re=k.read_shift(2),oe=M[re]||M[65535],ce=k.read_shift(2),me=k.l+ce,pe=oe.f&&oe.f(k,ce,R);if(k.l=me,W(pe,oe,re))return}}}function t(k,W){switch(W.type){case"base64":return r(Os(Ya(k)),W);case"binary":return r(Os(k),W);case"buffer":case"array":return r(k,W)}throw"Unsupported type "+W.type}function r(k,W){if(!k)return k;var R=W||{},M=R.dense?[]:{},re="Sheet1",oe="",ce=0,me={},pe=[],je=[],we={s:{r:0,c:0},e:{r:0,c:0}},Ce=R.sheetRows||0;if(k[2]==0&&(k[3]==8||k[3]==9)&&k.length>=16&&k[14]==5&&k[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(k[2]==2)R.Enum=G,e(k,function(z,X,ie){switch(ie){case 0:R.vers=z,z>=4096&&(R.qpro=!0);break;case 6:we=z;break;case 204:z&&(oe=z);break;case 222:oe=z;break;case 15:case 51:R.qpro||(z[1].v=z[1].v.slice(1));case 13:case 14:case 16:ie==14&&(z[2]&112)==112&&(z[2]&15)>1&&(z[2]&15)<15&&(z[1].z=R.dateNF||ar[14],R.cellDates&&(z[1].t="d",z[1].v=pD(z[1].v))),R.qpro&&z[3]>ce&&(M["!ref"]=gr(we),me[re]=M,pe.push(re),M=R.dense?[]:{},we={s:{r:0,c:0},e:{r:0,c:0}},ce=z[3],re=oe||"Sheet"+(ce+1),oe="");var U=R.dense?(M[z[0].r]||[])[z[0].c]:M[Pt(z[0])];if(U){U.t=z[1].t,U.v=z[1].v,z[1].z!=null&&(U.z=z[1].z),z[1].f!=null&&(U.f=z[1].f);break}R.dense?(M[z[0].r]||(M[z[0].r]=[]),M[z[0].r][z[0].c]=z[1]):M[Pt(z[0])]=z[1];break}},R);else if(k[2]==26||k[2]==14)R.Enum=K,k[2]==14&&(R.qpro=!0,k.l=0),e(k,function(z,X,ie){switch(ie){case 204:re=z;break;case 22:z[1].v=z[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(z[3]>ce&&(M["!ref"]=gr(we),me[re]=M,pe.push(re),M=R.dense?[]:{},we={s:{r:0,c:0},e:{r:0,c:0}},ce=z[3],re="Sheet"+(ce+1)),Ce>0&&z[0].r>=Ce)break;R.dense?(M[z[0].r]||(M[z[0].r]=[]),M[z[0].r][z[0].c]=z[1]):M[Pt(z[0])]=z[1],we.e.c<z[0].c&&(we.e.c=z[0].c),we.e.r<z[0].r&&(we.e.r=z[0].r);break;case 27:z[14e3]&&(je[z[14e3][0]]=z[14e3][1]);break;case 1537:je[z[0]]=z[1],z[0]==ce&&(re=z[1]);break}},R);else throw new Error("Unrecognized LOTUS BOF "+k[2]);if(M["!ref"]=gr(we),me[oe||re]=M,pe.push(oe||re),!je.length)return{SheetNames:pe,Sheets:me};for(var j={},se=[],ae=0;ae<je.length;++ae)me[pe[ae]]?(se.push(je[ae]||pe[ae]),j[je[ae]]=me[je[ae]]||me[pe[ae]]):(se.push(je[ae]),j[je[ae]]={"!ref":"A1"});return{SheetNames:se,Sheets:j}}function n(k,W){var R=W||{};if(+R.codepage>=0&&qd(+R.codepage),R.type=="string")throw new Error("Cannot write WK1 to JS string");var M=Mn(),re=Vt(k["!ref"]),oe=Array.isArray(k),ce=[];Oe(M,0,a(1030)),Oe(M,6,c(re));for(var me=Math.min(re.e.r,8191),pe=re.s.r;pe<=me;++pe)for(var je=Hr(pe),we=re.s.c;we<=re.e.c;++we){pe===re.s.r&&(ce[we]=an(we));var Ce=ce[we]+je,j=oe?(k[pe]||[])[we]:k[Ce];if(!(!j||j.t=="z"))if(j.t=="n")(j.v|0)==j.v&&j.v>=-32768&&j.v<=32767?Oe(M,13,p(pe,we,j.v)):Oe(M,14,m(pe,we,j.v));else{var se=qa(j);Oe(M,15,f(pe,we,se.slice(0,239)))}}return Oe(M,1),M.end()}function s(k,W){var R=W||{};if(+R.codepage>=0&&qd(+R.codepage),R.type=="string")throw new Error("Cannot write WK3 to JS string");var M=Mn();Oe(M,0,o(k));for(var re=0,oe=0;re<k.SheetNames.length;++re)(k.Sheets[k.SheetNames[re]]||{})["!ref"]&&Oe(M,27,H(k.SheetNames[re],oe++));var ce=0;for(re=0;re<k.SheetNames.length;++re){var me=k.Sheets[k.SheetNames[re]];if(!(!me||!me["!ref"])){for(var pe=Vt(me["!ref"]),je=Array.isArray(me),we=[],Ce=Math.min(pe.e.r,8191),j=pe.s.r;j<=Ce;++j)for(var se=Hr(j),ae=pe.s.c;ae<=pe.e.c;++ae){j===pe.s.r&&(we[ae]=an(ae));var z=we[ae]+se,X=je?(me[j]||[])[ae]:me[z];if(!(!X||X.t=="z"))if(X.t=="n")Oe(M,23,D(j,ae,ce,X.v));else{var ie=qa(X);Oe(M,22,E(j,ae,ce,ie.slice(0,239)))}}++ce}}return Oe(M,1),M.end()}function a(k){var W=be(2);return W.write_shift(2,k),W}function o(k){var W=be(26);W.write_shift(2,4096),W.write_shift(2,4),W.write_shift(4,0);for(var R=0,M=0,re=0,oe=0;oe<k.SheetNames.length;++oe){var ce=k.SheetNames[oe],me=k.Sheets[ce];if(!(!me||!me["!ref"])){++re;var pe=es(me["!ref"]);R<pe.e.r&&(R=pe.e.r),M<pe.e.c&&(M=pe.e.c)}}return R>8191&&(R=8191),W.write_shift(2,R),W.write_shift(1,re),W.write_shift(1,M),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(1,1),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(4,0),W}function l(k,W,R){var M={s:{c:0,r:0},e:{c:0,r:0}};return W==8&&R.qpro?(M.s.c=k.read_shift(1),k.l++,M.s.r=k.read_shift(2),M.e.c=k.read_shift(1),k.l++,M.e.r=k.read_shift(2),M):(M.s.c=k.read_shift(2),M.s.r=k.read_shift(2),W==12&&R.qpro&&(k.l+=2),M.e.c=k.read_shift(2),M.e.r=k.read_shift(2),W==12&&R.qpro&&(k.l+=2),M.s.c==65535&&(M.s.c=M.e.c=M.s.r=M.e.r=0),M)}function c(k){var W=be(8);return W.write_shift(2,k.s.c),W.write_shift(2,k.s.r),W.write_shift(2,k.e.c),W.write_shift(2,k.e.r),W}function u(k,W,R){var M=[{c:0,r:0},{t:"n",v:0},0,0];return R.qpro&&R.vers!=20768?(M[0].c=k.read_shift(1),M[3]=k.read_shift(1),M[0].r=k.read_shift(2),k.l+=2):(M[2]=k.read_shift(1),M[0].c=k.read_shift(2),M[0].r=k.read_shift(2)),M}function d(k,W,R){var M=k.l+W,re=u(k,W,R);if(re[1].t="s",R.vers==20768){k.l++;var oe=k.read_shift(1);return re[1].v=k.read_shift(oe,"utf8"),re}return R.qpro&&k.l++,re[1].v=k.read_shift(M-k.l,"cstr"),re}function f(k,W,R){var M=be(7+R.length);M.write_shift(1,255),M.write_shift(2,W),M.write_shift(2,k),M.write_shift(1,39);for(var re=0;re<M.length;++re){var oe=R.charCodeAt(re);M.write_shift(1,oe>=128?95:oe)}return M.write_shift(1,0),M}function h(k,W,R){var M=u(k,W,R);return M[1].v=k.read_shift(2,"i"),M}function p(k,W,R){var M=be(7);return M.write_shift(1,255),M.write_shift(2,W),M.write_shift(2,k),M.write_shift(2,R,"i"),M}function g(k,W,R){var M=u(k,W,R);return M[1].v=k.read_shift(8,"f"),M}function m(k,W,R){var M=be(13);return M.write_shift(1,255),M.write_shift(2,W),M.write_shift(2,k),M.write_shift(8,R,"f"),M}function v(k,W,R){var M=k.l+W,re=u(k,W,R);if(re[1].v=k.read_shift(8,"f"),R.qpro)k.l=M;else{var oe=k.read_shift(2);b(k.slice(k.l,k.l+oe),re),k.l+=oe}return re}function _(k,W,R){var M=W&32768;return W&=-32769,W=(M?k:0)+(W>=8192?W-16384:W),(M?"":"$")+(R?an(W):Hr(W))}var y={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},w=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function b(k,W){Wn(k,0);for(var R=[],M=0,re="",oe="",ce="",me="";k.l<k.length;){var pe=k[k.l++];switch(pe){case 0:R.push(k.read_shift(8,"f"));break;case 1:oe=_(W[0].c,k.read_shift(2),!0),re=_(W[0].r,k.read_shift(2),!1),R.push(oe+re);break;case 2:{var je=_(W[0].c,k.read_shift(2),!0),we=_(W[0].r,k.read_shift(2),!1);oe=_(W[0].c,k.read_shift(2),!0),re=_(W[0].r,k.read_shift(2),!1),R.push(je+we+":"+oe+re)}break;case 3:if(k.l<k.length){console.error("WK1 premature formula end");return}break;case 4:R.push("("+R.pop()+")");break;case 5:R.push(k.read_shift(2));break;case 6:{for(var Ce="";pe=k[k.l++];)Ce+=String.fromCharCode(pe);R.push('"'+Ce.replace(/"/g,'""')+'"')}break;case 8:R.push("-"+R.pop());break;case 23:R.push("+"+R.pop());break;case 22:R.push("NOT("+R.pop()+")");break;case 20:case 21:me=R.pop(),ce=R.pop(),R.push(["AND","OR"][pe-20]+"("+ce+","+me+")");break;default:if(pe<32&&w[pe])me=R.pop(),ce=R.pop(),R.push(ce+w[pe]+me);else if(y[pe]){if(M=y[pe][1],M==69&&(M=k[k.l++]),M>R.length){console.error("WK1 bad formula parse 0x"+pe.toString(16)+":|"+R.join("|")+"|");return}var j=R.slice(-M);R.length-=M,R.push(y[pe][0]+"("+j.join(",")+")")}else return pe<=7?console.error("WK1 invalid opcode "+pe.toString(16)):pe<=24?console.error("WK1 unsupported op "+pe.toString(16)):pe<=30?console.error("WK1 invalid opcode "+pe.toString(16)):pe<=115?console.error("WK1 unsupported function opcode "+pe.toString(16)):console.error("WK1 unrecognized opcode "+pe.toString(16))}}R.length==1?W[1].f=""+R[0]:console.error("WK1 bad formula parse |"+R.join("|")+"|")}function S(k){var W=[{c:0,r:0},{t:"n",v:0},0];return W[0].r=k.read_shift(2),W[3]=k[k.l++],W[0].c=k[k.l++],W}function N(k,W){var R=S(k);return R[1].t="s",R[1].v=k.read_shift(W-4,"cstr"),R}function E(k,W,R,M){var re=be(6+M.length);re.write_shift(2,k),re.write_shift(1,R),re.write_shift(1,W),re.write_shift(1,39);for(var oe=0;oe<M.length;++oe){var ce=M.charCodeAt(oe);re.write_shift(1,ce>=128?95:ce)}return re.write_shift(1,0),re}function C(k,W){var R=S(k);R[1].v=k.read_shift(2);var M=R[1].v>>1;if(R[1].v&1)switch(M&7){case 0:M=(M>>3)*5e3;break;case 1:M=(M>>3)*500;break;case 2:M=(M>>3)/20;break;case 3:M=(M>>3)/200;break;case 4:M=(M>>3)/2e3;break;case 5:M=(M>>3)/2e4;break;case 6:M=(M>>3)/16;break;case 7:M=(M>>3)/64;break}return R[1].v=M,R}function T(k,W){var R=S(k),M=k.read_shift(4),re=k.read_shift(4),oe=k.read_shift(2);if(oe==65535)return M===0&&re===3221225472?(R[1].t="e",R[1].v=15):M===0&&re===3489660928?(R[1].t="e",R[1].v=42):R[1].v=0,R;var ce=oe&32768;return oe=(oe&32767)-16446,R[1].v=(1-ce*2)*(re*Math.pow(2,oe+32)+M*Math.pow(2,oe)),R}function D(k,W,R,M){var re=be(14);if(re.write_shift(2,k),re.write_shift(1,R),re.write_shift(1,W),M==0)return re.write_shift(4,0),re.write_shift(4,0),re.write_shift(2,65535),re;var oe=0,ce=0,me=0,pe=0;return M<0&&(oe=1,M=-M),ce=Math.log2(M)|0,M/=Math.pow(2,ce-31),pe=M>>>0,pe&2147483648||(M/=2,++ce,pe=M>>>0),M-=pe,pe|=2147483648,pe>>>=0,M*=Math.pow(2,32),me=M>>>0,re.write_shift(4,me),re.write_shift(4,pe),ce+=16383+(oe?32768:0),re.write_shift(2,ce),re}function F(k,W){var R=T(k);return k.l+=W-14,R}function P(k,W){var R=S(k),M=k.read_shift(4);return R[1].v=M>>6,R}function L(k,W){var R=S(k),M=k.read_shift(8,"f");return R[1].v=M,R}function A(k,W){var R=L(k);return k.l+=W-10,R}function I(k,W){return k[k.l+W-1]==0?k.read_shift(W,"cstr"):""}function Q(k,W){var R=k[k.l++];R>W-1&&(R=W-1);for(var M="";M.length<R;)M+=String.fromCharCode(k[k.l++]);return M}function q(k,W,R){if(!(!R.qpro||W<21)){var M=k.read_shift(1);k.l+=17,k.l+=1,k.l+=2;var re=k.read_shift(W-21,"cstr");return[M,re]}}function O(k,W){for(var R={},M=k.l+W;k.l<M;){var re=k.read_shift(2);if(re==14e3){for(R[re]=[0,""],R[re][0]=k.read_shift(2);k[k.l];)R[re][1]+=String.fromCharCode(k[k.l]),k.l++;k.l++}}return R}function H(k,W){var R=be(5+k.length);R.write_shift(2,14e3),R.write_shift(2,W);for(var M=0;M<k.length;++M){var re=k.charCodeAt(M);R[R.l++]=re>127?95:re}return R[R.l++]=0,R}var G={0:{n:"BOF",f:KD},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:I},222:{n:"SHEETNAMELP",f:Q},65535:{n:""}},K={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:N},23:{n:"NUMBER17",f:T},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:F},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:O},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:P},38:{n:"??"},39:{n:"NUMBER27",f:L},40:{n:"FORMULA28",f:A},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:I},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:q},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}}(),WQ=/^\s|\s$|[\t\n\r]/;function ZD(e,t){if(!t.bookSST)return"";var r=[xr];r[r.length]=Me("sst",null,{xmlns:ru[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var s=e[n],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(WQ)&&(a+=' xml:space="preserve"'),a+=">"+Tt(s.t)+"</t>"),a+="</si>",r[r.length]=a}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function HQ(e){return[e.read_shift(4),e.read_shift(4)]}function GQ(e,t){return t||(t=be(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var KQ=IX;function YQ(e){var t=Mn();Ne(t,159,GQ(e));for(var r=0;r<e.length;++r)Ne(t,19,KQ(e[r]));return Ne(t,160),t.end()}function qQ(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function eR(e){var t=0,r,n=qQ(e),s=n.length+1,a,o,l,c,u;for(r=Zo(s),r[0]=n.length,a=1;a!=s;++a)r[a]=n[a-1];for(a=s-1;a>=0;--a)o=r[a],l=t&16384?1:0,c=t<<1&32767,u=l|c,t=u^o;return t^52811}var XQ=function(){function e(s,a){switch(a.type){case"base64":return t(Ya(s),a);case"binary":return t(s,a);case"buffer":return t(Et&&Buffer.isBuffer(s)?s.toString("binary"):Uf(s),a);case"array":return t(Mp(s),a)}throw new Error("Unrecognized type "+a.type)}function t(s,a){var o=a||{},l=o.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var h=/\\\w+\b/g,p=0,g,m=-1;g=h.exec(d);){switch(g[0]){case"\\cell":var v=d.slice(p,h.lastIndex-g[0].length);if(v[0]==" "&&(v=v.slice(1)),++m,v.length){var _={v,t:"s"};Array.isArray(l)?l[f][m]=_:l[Pt({r:f,c:m})]=_}break}p=h.lastIndex}m>u.e.c&&(u.e.c=m)}),l["!ref"]=gr(u),l}function r(s,a){return pl(e(s,a),a)}function n(s){for(var a=["{\\rtf1\\ansi"],o=Vt(s["!ref"]),l,c=Array.isArray(s),u=o.s.r;u<=o.e.r;++u){a.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var f=Pt({r:u,c:d});l=c?(s[u]||[])[d]:s[f],!(!l||l.v==null&&(!l.f||l.F))&&(a.push(" "+(l.w||(qa(l),l.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function iE(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}var QQ=6,$a=QQ;function h0(e){return Math.floor((e+Math.round(128/$a)/256)*$a)}function m0(e){return Math.floor((e-5)/$a*100+.5)/100}function u1(e){return Math.round((e*$a+5)/$a*256)/256}function o_(e){e.width?(e.wpx=h0(e.width),e.wch=m0(e.wpx),e.MDW=$a):e.wpx?(e.wch=m0(e.wpx),e.width=u1(e.wch),e.MDW=$a):typeof e.wch=="number"&&(e.width=u1(e.wch),e.wpx=h0(e.width),e.MDW=$a),e.customWidth&&delete e.customWidth}var JQ=96,tR=JQ;function p0(e){return e*96/tR}function rR(e){return e*tR/96}function ZQ(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Me("numFmt",null,{numFmtId:n,formatCode:Tt(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Me("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function eJ(e){var t=[];return t[t.length]=Me("cellXfs",null),e.forEach(function(r){t[t.length]=Me("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Me("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function nR(e,t){var r=[xr,Me("styleSheet",null,{xmlns:ru[0],"xmlns:vt":Cr.vt})],n;return e.SSF&&(n=ZQ(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=eJ(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function tJ(e,t){var r=e.read_shift(2),n=on(e);return[r,n]}function rJ(e,t,r){r||(r=be(6+4*t.length)),r.write_shift(2,e),Pr(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function nJ(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=WX(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var a=e.read_shift(2);switch(a===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=VX(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=on(e),n}function sJ(e,t){t||(t=be(25+4*32)),t.write_shift(2,e.sz*20),HX(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),d0(e.color,t);var n=0;return e.scheme=="major"&&(n=1),e.scheme=="minor"&&(n=2),t.write_shift(1,n),Pr(e.name,t),t.length>t.l?t.slice(0,t.l):t}var aJ=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],dx,iJ=ga;function oE(e,t){t||(t=be(4*3+8*7+16*1)),dx||(dx=qw(aJ));var r=dx[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(d0({auto:1},t),d0({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function oJ(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}function sR(e,t,r){r||(r=be(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function ku(e,t){return t||(t=be(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var lJ=ga;function cJ(e,t){return t||(t=be(51)),t.write_shift(1,0),ku(null,t),ku(null,t),ku(null,t),ku(null,t),ku(null,t),t.length>t.l?t.slice(0,t.l):t}function uJ(e,t){return t||(t=be(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,+e.builtinId),t.write_shift(1,0),u0(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function dJ(e,t,r){var n=be(2052);return n.write_shift(4,e),u0(t,n),u0(r,n),n.length>n.l?n.slice(0,n.l):n}function fJ(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&++r}),r!=0&&(Ne(e,615,zs(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&Ne(e,44,rJ(s,t[s]))}),Ne(e,616))}}function hJ(e){var t=1;Ne(e,611,zs(t)),Ne(e,43,sJ({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),Ne(e,612)}function mJ(e){var t=2;Ne(e,603,zs(t)),Ne(e,45,oE({patternType:"none"})),Ne(e,45,oE({patternType:"gray125"})),Ne(e,604)}function pJ(e){var t=1;Ne(e,613,zs(t)),Ne(e,46,cJ()),Ne(e,614)}function gJ(e){var t=1;Ne(e,626,zs(t)),Ne(e,47,sR({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),Ne(e,627)}function xJ(e,t){Ne(e,617,zs(t.length)),t.forEach(function(r){Ne(e,47,sR(r,0))}),Ne(e,618)}function vJ(e){var t=1;Ne(e,619,zs(t)),Ne(e,48,uJ({xfId:0,builtinId:0,name:"Normal"})),Ne(e,620)}function yJ(e){var t=0;Ne(e,505,zs(t)),Ne(e,506)}function wJ(e){var t=0;Ne(e,508,dJ(t,"TableStyleMedium9","PivotStyleMedium4")),Ne(e,509)}function _J(e,t){var r=Mn();return Ne(r,278),fJ(r,e.SSF),hJ(r),mJ(r),pJ(r),gJ(r),xJ(r,t.cellXfs),vJ(r),yJ(r),wJ(r),Ne(r,279),r.end()}function aR(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[xr];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function bJ(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:on(e)}}function SJ(e){var t=be(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Pr(e.name,t),t.slice(0,t.l)}function EJ(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function NJ(e){var t=be(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function jJ(e,t){var r=be(8+2*t.length);return r.write_shift(4,e),Pr(t,r),r.slice(0,r.l)}function kJ(e){return e.l+=4,e.read_shift(4)!=0}function CJ(e,t){var r=be(8);return r.write_shift(4,e),r.write_shift(4,1),r}function TJ(){var e=Mn();return Ne(e,332),Ne(e,334,zs(1)),Ne(e,335,SJ({name:"XLDAPR",version:12e4,flags:3496657072})),Ne(e,336),Ne(e,339,jJ(1,"XLDAPR")),Ne(e,52),Ne(e,35,zs(514)),Ne(e,4096,zs(0)),Ne(e,4097,os(1)),Ne(e,36),Ne(e,53),Ne(e,340),Ne(e,337,CJ(1)),Ne(e,51,NJ([[1,0]])),Ne(e,338),Ne(e,333),e.end()}function iR(){var e=[xr];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function AJ(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Pt(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}var Ql=1024;function oR(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[Me("xml",null,{"xmlns:v":Gn.v,"xmlns:o":Gn.o,"xmlns:x":Gn.x,"xmlns:mv":Gn.mv}).replace(/\/>/,">"),Me("o:shapelayout",Me("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Me("v:shapetype",[Me("v:stroke",null,{joinstyle:"miter"}),Me("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Ql<e*1e3;)Ql+=1e3;return t.forEach(function(a){var o=Ar(a[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?Me("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Me("v:fill",c,l),d={on:"t",obscured:"t"};++Ql,s=s.concat(["<v:shape"+Zd({id:"_x0000_s"+Ql,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Me("v:shadow",null,d),Me("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Vr("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Vr("x:AutoFill","False"),Vr("x:Row",String(o.r)),Vr("x:Column",String(o.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function lR(e){var t=[xr,Me("comments",null,{xmlns:ru[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(s){var a=Tt(s.a);r.indexOf(a)==-1&&(r.push(a),t.push("<author>"+a+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var s=0,a=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(s=r.indexOf(Tt(c.a))),a.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),a.length<=1)t.push(Vr("t",Tt(a[0]||"")));else{for(var o=`Comment:
    `+a[0]+`
`,l=1;l<a.length;++l)o+=`Reply:
    `+a[l]+`
`;t.push(Vr("t",Tt(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function PJ(e,t,r){var n=[xr,Me("ThreadedComments",null,{xmlns:Cr.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var a="";(s[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?a=c.id:c.parentId=a,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),n.push(Me("threadedComment",Vr("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function DJ(e){var t=[xr,Me("personList",null,{xmlns:Cr.TCMNT,"xmlns:x":ru[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Me("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function RJ(e){var t={};t.iauthor=e.read_shift(4);var r=yl(e);return t.rfx=r.s,t.ref=Pt(r.s),e.l+=16,t}function MJ(e,t){return t==null&&(t=be(36)),t.write_shift(4,e[1].iauthor),su(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var OJ=on;function FJ(e){return Pr(e.slice(0,54))}function IJ(e){var t=Mn(),r=[];return Ne(t,628),Ne(t,630),e.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Ne(t,632,FJ(s.a)))})}),Ne(t,631),Ne(t,633),e.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var a={s:Ar(n[0]),e:Ar(n[0])};Ne(t,635,MJ([a,s])),s.t&&s.t.length>0&&Ne(t,637,$X(s)),Ne(t,636),delete s.iauthor})}),Ne(t,634),Ne(t,629),t.end()}function LJ(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Dt.utils.cfb_add(e,s,t.FileIndex[n].content)}})}var cR=["xlsb","xlsm","xlam","biff8","xla"],$J=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,a,o){var l=!1,c=!1;a.length==0?c=!0:a.charAt(0)=="["&&(c=!0,a=a.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=a.length>0?parseInt(a,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=t.c:--d,c?u+=t.r:--u,s+(l?"":"$")+an(d)+(c?"":"$")+Hr(u)}return function(s,a){return t=a,s.replace(e,r)}}(),l_=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,c_=function(){return function(t,r){return t.replace(l_,function(n,s,a,o,l,c){var u=r_(o)-(a?0:r.c),d=t_(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",h=u==0?"":a?u+1:"["+u+"]";return s+"R"+f+"C"+h})}}();function BJ(e,t){return e.replace(l_,function(r,n,s,a,o,l){return n+(s=="$"?s+a:an(r_(a)+t.c))+(o=="$"?o+l:Hr(t_(l)+t.r))})}function UJ(e){return e.length!=1}function ur(e){e.l+=1}function eo(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function uR(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return dR(e);r.biff==12&&(n=4)}var s=e.read_shift(n),a=e.read_shift(n),o=eo(e),l=eo(e);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:a,c:l[0],cRel:l[1],rRel:l[2]}}}function dR(e){var t=eo(e),r=eo(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function zJ(e,t,r){if(r.biff<8)return dR(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),a=eo(e),o=eo(e);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function fR(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return VJ(e);var n=e.read_shift(r&&r.biff==12?4:2),s=eo(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function VJ(e){var t=eo(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function WJ(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function HJ(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return GJ(e);var s=e.read_shift(n>=12?4:2),a=e.read_shift(2),o=(a&16384)>>14,l=(a&32768)>>15;if(a&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:o,rRel:l}}function GJ(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function KJ(e,t,r){var n=(e[e.l++]&96)>>5,s=uR(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function YJ(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}var o=uR(e,a,r);return[n,s,o]}function qJ(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function XJ(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}return e.l+=a,[n,s]}function QJ(e,t,r){var n=(e[e.l++]&96)>>5,s=zJ(e,t-1,r);return[n,s]}function JJ(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function lE(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function ZJ(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],a=0;a<=n;++a)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function eZ(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function tZ(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function rZ(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function nZ(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function hR(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function sZ(e){return e.read_shift(2),hR(e)}function aZ(e){return e.read_shift(2),hR(e)}function iZ(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=fR(e,0,r);return[n,s]}function oZ(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=HJ(e,0,r);return[n,s]}function lZ(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var a=fR(e,0,r);return[n,s,a]}function cZ(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[cee[s],gR[s],n]}function uZ(e,t,r){var n=e[e.l++],s=e.read_shift(1),a=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:dZ(e);return[s,(a[0]===0?gR:lee)[a[1]]]}function dZ(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function fZ(e,t,r){e.l+=r&&r.biff==2?3:4}function hZ(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function mZ(e){return e.l++,Wf[e.read_shift(1)]}function pZ(e){return e.l++,e.read_shift(2)}function gZ(e){return e.l++,e.read_shift(1)!==0}function xZ(e){return e.l++,au(e)}function vZ(e,t,r){return e.l++,qD(e,t-1,r)}function yZ(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=lQ(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Wf[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=au(e);break;case 2:r[1]=fQ(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function wZ(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],a=0;a!=n;++a)s.push((r.biff==12?yl:pQ)(e));return s}function _Z(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var a=0,o=[];a!=n&&(o[a]=[]);++a)for(var l=0;l!=s;++l)o[a][l]=yZ(e,r.biff);return o}function bZ(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,a=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,a]}function SZ(e,t,r){if(r.biff==5)return EZ(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),a=e.read_shift(4);return[n,s,a]}function EZ(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function NZ(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function jZ(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function kZ(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function CZ(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return e.l+=a,[n,s]}var TZ=ga,AZ=ga,PZ=ga;function Hf(e,t,r){return e.l+=2,[WJ(e)]}function u_(e){return e.l+=6,[]}var DZ=Hf,RZ=u_,MZ=u_,OZ=Hf;function mR(e){return e.l+=2,[KD(e),e.read_shift(2)&1]}var FZ=Hf,IZ=mR,LZ=u_,$Z=Hf,BZ=Hf,UZ=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function zZ(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),a=e.read_shift(2),o=UZ[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:s,C:a}}function VZ(e){return e.l+=2,[e.read_shift(4)]}function WZ(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function HZ(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function GZ(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function KZ(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function YZ(e){return e.l+=4,[0,0]}var cE={1:{n:"PtgExp",f:hZ},2:{n:"PtgTbl",f:PZ},3:{n:"PtgAdd",f:ur},4:{n:"PtgSub",f:ur},5:{n:"PtgMul",f:ur},6:{n:"PtgDiv",f:ur},7:{n:"PtgPower",f:ur},8:{n:"PtgConcat",f:ur},9:{n:"PtgLt",f:ur},10:{n:"PtgLe",f:ur},11:{n:"PtgEq",f:ur},12:{n:"PtgGe",f:ur},13:{n:"PtgGt",f:ur},14:{n:"PtgNe",f:ur},15:{n:"PtgIsect",f:ur},16:{n:"PtgUnion",f:ur},17:{n:"PtgRange",f:ur},18:{n:"PtgUplus",f:ur},19:{n:"PtgUminus",f:ur},20:{n:"PtgPercent",f:ur},21:{n:"PtgParen",f:ur},22:{n:"PtgMissArg",f:ur},23:{n:"PtgStr",f:vZ},26:{n:"PtgSheet",f:WZ},27:{n:"PtgEndSheet",f:HZ},28:{n:"PtgErr",f:mZ},29:{n:"PtgBool",f:gZ},30:{n:"PtgInt",f:pZ},31:{n:"PtgNum",f:xZ},32:{n:"PtgArray",f:JJ},33:{n:"PtgFunc",f:cZ},34:{n:"PtgFuncVar",f:uZ},35:{n:"PtgName",f:bZ},36:{n:"PtgRef",f:iZ},37:{n:"PtgArea",f:KJ},38:{n:"PtgMemArea",f:NZ},39:{n:"PtgMemErr",f:TZ},40:{n:"PtgMemNoMem",f:AZ},41:{n:"PtgMemFunc",f:jZ},42:{n:"PtgRefErr",f:kZ},43:{n:"PtgAreaErr",f:qJ},44:{n:"PtgRefN",f:oZ},45:{n:"PtgAreaN",f:QJ},46:{n:"PtgMemAreaN",f:GZ},47:{n:"PtgMemNoMemN",f:KZ},57:{n:"PtgNameX",f:SZ},58:{n:"PtgRef3d",f:lZ},59:{n:"PtgArea3d",f:YJ},60:{n:"PtgRefErr3d",f:CZ},61:{n:"PtgAreaErr3d",f:XJ},255:{}},qZ={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},XZ={1:{n:"PtgElfLel",f:mR},2:{n:"PtgElfRw",f:$Z},3:{n:"PtgElfCol",f:DZ},6:{n:"PtgElfRwV",f:BZ},7:{n:"PtgElfColV",f:OZ},10:{n:"PtgElfRadical",f:FZ},11:{n:"PtgElfRadicalS",f:LZ},13:{n:"PtgElfColS",f:RZ},15:{n:"PtgElfColSV",f:MZ},16:{n:"PtgElfRadicalLel",f:IZ},25:{n:"PtgList",f:zZ},29:{n:"PtgSxName",f:VZ},255:{}},QZ={0:{n:"PtgAttrNoop",f:YZ},1:{n:"PtgAttrSemi",f:nZ},2:{n:"PtgAttrIf",f:tZ},4:{n:"PtgAttrChoose",f:ZJ},8:{n:"PtgAttrGoto",f:eZ},16:{n:"PtgAttrSum",f:fZ},32:{n:"PtgAttrBaxcel",f:lE},33:{n:"PtgAttrBaxcel",f:lE},64:{n:"PtgAttrSpace",f:sZ},65:{n:"PtgAttrSpaceSemi",f:aZ},128:{n:"PtgAttrIfError",f:rZ},255:{}};function JZ(e,t,r,n){if(n.biff<8)return ga(e,t);for(var s=e.l+t,a=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=_Z(e,0,n),a.push(r[o][1]);break;case"PtgMemArea":r[o][2]=wZ(e,r[o][1],n),a.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),a.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&a.push(ga(e,t)),a}function ZZ(e,t,r){for(var n=e.l+t,s,a,o=[];n!=e.l;)t=n-e.l,a=e[e.l],s=cE[a]||cE[qZ[a]],(a===24||a===25)&&(s=(a===24?XZ:QZ)[e[e.l+1]]),!s||!s.f?ga(e,t):o.push([s.n,s.f(e,t,r)]);return o}function eee(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],a=0;a<n.length;++a){var o=n[a];if(o)switch(o[0]){case 2:s.push('"'+o[1].replace(/"/g,'""')+'"');break;default:s.push(o[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var tee={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function ree(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function pR(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function uE(e,t,r){var n=pR(e,t,r);return n=="#REF"?n:ree(n,r)}function zc(e,t,r,n,s){var a=s&&s.biff||8,o={s:{c:0,r:0},e:{c:0,r:0}},l=[],c,u,d,f=0,h=0,p,g="";if(!e[0]||!e[0][0])return"";for(var m=-1,v="",_=0,y=e[0].length;_<y;++_){var w=e[0][_];switch(w[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),m>=0){switch(e[0][m][1][0]){case 0:v=rr(" ",e[0][m][1][1]);break;case 1:v=rr("\r",e[0][m][1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}u=u+v,m=-1}l.push(u+tee[w[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=od(w[1][1],o,s),l.push(ld(d,a));break;case"PtgRefN":d=r?od(w[1][1],r,s):w[1][1],l.push(ld(d,a));break;case"PtgRef3d":f=w[1][1],d=od(w[1][2],o,s),g=uE(n,f,s),l.push(g+"!"+ld(d,a));break;case"PtgFunc":case"PtgFuncVar":var b=w[1][0],S=w[1][1];b||(b=0),b&=127;var N=b==0?[]:l.slice(-b);l.length-=b,S==="User"&&(S=N.shift()),l.push(S+"("+N.join(",")+")");break;case"PtgBool":l.push(w[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(w[1]);break;case"PtgNum":l.push(String(w[1]));break;case"PtgStr":l.push('"'+w[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(w[1]);break;case"PtgAreaN":p=YS(w[1][1],r?{s:r}:o,s),l.push(cx(p,s));break;case"PtgArea":p=YS(w[1][1],o,s),l.push(cx(p,s));break;case"PtgArea3d":f=w[1][1],p=w[1][2],g=uE(n,f,s),l.push(g+"!"+cx(p,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=w[1][2];var E=(n.names||[])[h-1]||(n[0]||[])[h],C=E?E.Name:"SH33TJSNAME"+String(h);C&&C.slice(0,6)=="_xlfn."&&!s.xlfn&&(C=C.slice(6)),l.push(C);break;case"PtgNameX":var T=w[1][1];h=w[1][2];var D;if(s.biff<=5)T<0&&(T=-T),n[T]&&(D=n[T][h]);else{var F="";if(((n[T]||[])[0]||[])[0]==14849||(((n[T]||[])[0]||[])[0]==1025?n[T][h]&&n[T][h].itab>0&&(F=n.SheetNames[n[T][h].itab-1]+"!"):F=n.SheetNames[h-1]+"!"),n[T]&&n[T][h])F+=n[T][h].Name;else if(n[0]&&n[0][h])F+=n[0][h].Name;else{var P=(pR(n,T,s)||"").split(";;");P[h-1]?F=P[h-1]:F+="SH33TJSERRX"}l.push(F);break}D||(D={Name:"SH33TJSERRY"}),l.push(D.Name);break;case"PtgParen":var L="(",A=")";if(m>=0){switch(v="",e[0][m][1][0]){case 2:L=rr(" ",e[0][m][1][1])+L;break;case 3:L=rr("\r",e[0][m][1][1])+L;break;case 4:A=rr(" ",e[0][m][1][1])+A;break;case 5:A=rr("\r",e[0][m][1][1])+A;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}m=-1}l.push(L+l.pop()+A);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:w[1][1],r:w[1][0]};var I={c:r.c,r:r.r};if(n.sharedf[Pt(d)]){var Q=n.sharedf[Pt(d)];l.push(zc(Q,o,I,n,s))}else{var q=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(zc(u[1],o,I,n,s)),q=!0;break}q||l.push(w[1])}break;case"PtgArray":l.push("{"+eee(w[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":m=_;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+w[1].idx+"[#"+w[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(w));default:throw new Error("Unrecognized Formula Token: "+String(w))}var O=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&m>=0&&O.indexOf(e[0][_][0])==-1){w=e[0][m];var H=!0;switch(w[1][0]){case 4:H=!1;case 0:v=rr(" ",w[1][1]);break;case 5:H=!1;case 1:v=rr("\r",w[1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+w[1][0])}l.push((H?v:"")+l.pop()+(H?"":v)),m=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function nee(e){if(e==null){var t=be(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return el(e);return el(0)}function see(e,t,r,n,s){var a=tl(t,r,s),o=nee(e.v),l=be(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=be(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=zr([a,o,l,u]);return f}function Op(e,t,r){var n=e.read_shift(4),s=ZZ(e,n,r),a=e.read_shift(4),o=a>0?JZ(e,a,s,r):null;return[s,o]}var aee=Op,Fp=Op,iee=Op,oee=Op,lee={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},gR={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},cee={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function uee(e){var t="of:="+e.replace(l_,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function dee(e){return e.replace(/\./,"!")}var cd=typeof Map<"u";function d_(e,t,r){var n=0,s=e.length;if(r){if(cd?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var a=cd?r.get(t):r[t];n<a.length;++n)if(e[a[n]].t===t)return e.Count++,a[n]}}else for(;n<s;++n)if(e[n].t===t)return e.Count++,n;return e[s]={t},e.Count++,e.Unique++,r&&(cd?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function Ip(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&($a=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=m0(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=u1(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function xR(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function ho(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],s=60,a=e.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){fD(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=n=s;break}}for(s=0;s!=a;++s)if(e[s].numFmtId===n)return s;return e[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function fee(e,t,r){if(e&&e["!ref"]){var n=Vt(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function hee(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+gr(e[r])+'"/>';return t+"</mergeCells>"}function mee(e,t,r,n,s){var a=!1,o={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}a=!0,o.codeName=Jd(Tt(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),l=(l||"")+Me("outlinePr",null,u)}!a&&!l||(s[s.length]=Me("sheetPr",l,o))}var pee=["objects","scenarios","selectLockedCells","selectUnlockedCells"],gee=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function xee(e){var t={sheet:1};return pee.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),gee.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=eR(e.password).toString(16).toUpperCase()),Me("sheetProtection",null,t)}function vee(e){return xR(e),Me("pageMargins",null,e)}function yee(e,t){for(var r=["<cols>"],n,s=0;s!=t.length;++s)(n=t[s])&&(r[r.length]=Me("col",null,Ip(s,n)));return r[r.length]="</cols>",r.join("")}function wee(e,t,r,n){var s=typeof e.ref=="string"?e.ref:gr(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,o=es(s);o.s.r==o.e.r&&(o.e.r=es(t["!ref"]).e.r,s=gr(o));for(var l=0;l<a.length;++l){var c=a[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Me("autoFilter",null,{ref:s})}function _ee(e,t,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Me("sheetViews",Me("sheetView",null,s),{})}function bee(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",a=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=Wf[e.v];break;case"d":n&&n.cellDates?s=xn(e.v,-1).toISOString():(e=In(e),e.t="n",s=""+(e.v=Fn(xn(e.v)))),typeof e.z>"u"&&(e.z=ar[14]);break;default:s=e.v;break}var l=Vr("v",Tt(s)),c={r:t},u=ho(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Vr("v",""+d_(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=a&&(e.t=a,e.v=o),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=Me("f",Tt(e.f),d)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),Me("c",l,c)}function See(e,t,r,n){var s=[],a=[],o=Vt(e["!ref"]),l="",c,u="",d=[],f=0,h=0,p=e["!rows"],g=Array.isArray(e),m={r:u},v,_=-1;for(h=o.s.c;h<=o.e.c;++h)d[h]=an(h);for(f=o.s.r;f<=o.e.r;++f){for(a=[],u=Hr(f),h=o.s.c;h<=o.e.c;++h){c=d[h]+u;var y=g?(e[f]||[])[h]:e[c];y!==void 0&&(l=bee(y,c,e,t))!=null&&a.push(l)}(a.length>0||p&&p[f])&&(m={r:u},p&&p[f]&&(v=p[f],v.hidden&&(m.hidden=1),_=-1,v.hpx?_=p0(v.hpx):v.hpt&&(_=v.hpt),_>-1&&(m.ht=_,m.customHeight=1),v.level&&(m.outlineLevel=v.level)),s[s.length]=Me("row",a.join(""),m))}if(p)for(;f<p.length;++f)p&&p[f]&&(m={r:f+1},v=p[f],v.hidden&&(m.hidden=1),_=-1,v.hpx?_=p0(v.hpx):v.hpt&&(_=v.hpt),_>-1&&(m.ht=_,m.customHeight=1),v.level&&(m.outlineLevel=v.level),s[s.length]=Me("row","",m));return s.join("")}function vR(e,t,r,n){var s=[xr,Me("worksheet",null,{xmlns:ru[0],"xmlns:r":Cr.r})],a=r.SheetNames[e],o=0,l="",c=r.Sheets[a];c==null&&(c={});var u=c["!ref"]||"A1",d=Vt(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=gr(d)}n||(n={}),c["!comments"]=[];var f=[];mee(c,r,e,t,s),s[s.length]=Me("dimension",null,{ref:u}),s[s.length]=_ee(c,t,e,r),t.sheetFormat&&(s[s.length]=Me("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=yee(c,c["!cols"])),s[o=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=See(c,t),l.length>0&&(s[s.length]=l)),s.length>o+1&&(s[s.length]="</sheetData>",s[o]=s[o].replace("/>",">")),c["!protect"]&&(s[s.length]=xee(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=wee(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=hee(c["!merges"]));var h=-1,p,g=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(m){m[1].Target&&(p={ref:m[0]},m[1].Target.charAt(0)!="#"&&(g=Ct(n,-1,Tt(m[1].Target).replace(/#.*$/,""),_t.HLINK),p["r:id"]="rId"+g),(h=m[1].Target.indexOf("#"))>-1&&(p.location=Tt(m[1].Target.slice(h+1))),m[1].Tooltip&&(p.tooltip=Tt(m[1].Tooltip)),s[s.length]=Me("hyperlink",null,p))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=vee(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=Vr("ignoredErrors",Me("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=Ct(n,-1,"../drawings/drawing"+(e+1)+".xml",_t.DRAW),s[s.length]=Me("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=f),c["!comments"].length>0&&(g=Ct(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",_t.VML),s[s.length]=Me("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Eee(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=n,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=s/20),r}function Nee(e,t,r){var n=be(145),s=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var a=320;s.hpx?a=p0(s.hpx)*20:s.hpt&&(a=s.hpt*20),n.write_shift(2,a),n.write_shift(1,0);var o=0;s.level&&(o|=s.level),s.hidden&&(o|=16),(s.hpx||s.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,p=d<<10;p<d+1<<10;++p){u.c=p;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Pt(u)];g&&(f<0&&(f=p),h=p)}f<0||(++l,n.write_shift(4,f),n.write_shift(4,h))}var m=n.l;return n.l=c,n.write_shift(4,l),n.l=m,n.length>n.l?n.slice(0,n.l):n}function jee(e,t,r,n){var s=Nee(n,r,t);(s.length>17||(t["!rows"]||[])[n])&&Ne(e,0,s)}var kee=yl,Cee=su;function Tee(){}function Aee(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=BX(e),r}function Pee(e,t,r){r==null&&(r=be(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return d0({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),RD(e,r),r.slice(0,r.l)}function Dee(e){var t=_s(e);return[t]}function Ree(e,t,r){return r==null&&(r=be(8)),gl(t,r)}function Mee(e){var t=xl(e);return[t]}function Oee(e,t,r){return r==null&&(r=be(4)),vl(t,r)}function Fee(e){var t=_s(e),r=e.read_shift(1);return[t,r,"b"]}function Iee(e,t,r){return r==null&&(r=be(9)),gl(t,r),r.write_shift(1,e.v?1:0),r}function Lee(e){var t=xl(e),r=e.read_shift(1);return[t,r,"b"]}function $ee(e,t,r){return r==null&&(r=be(5)),vl(t,r),r.write_shift(1,e.v?1:0),r}function Bee(e){var t=_s(e),r=e.read_shift(1);return[t,r,"e"]}function Uee(e,t,r){return r==null&&(r=be(9)),gl(t,r),r.write_shift(1,e.v),r}function zee(e){var t=xl(e),r=e.read_shift(1);return[t,r,"e"]}function Vee(e,t,r){return r==null&&(r=be(8)),vl(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function Wee(e){var t=_s(e),r=e.read_shift(4);return[t,r,"s"]}function Hee(e,t,r){return r==null&&(r=be(12)),gl(t,r),r.write_shift(4,t.v),r}function Gee(e){var t=xl(e),r=e.read_shift(4);return[t,r,"s"]}function Kee(e,t,r){return r==null&&(r=be(8)),vl(t,r),r.write_shift(4,t.v),r}function Yee(e){var t=_s(e),r=au(e);return[t,r,"n"]}function qee(e,t,r){return r==null&&(r=be(16)),gl(t,r),el(e.v,r),r}function Xee(e){var t=xl(e),r=au(e);return[t,r,"n"]}function Qee(e,t,r){return r==null&&(r=be(12)),vl(t,r),el(e.v,r),r}function Jee(e){var t=_s(e),r=MD(e);return[t,r,"n"]}function Zee(e,t,r){return r==null&&(r=be(12)),gl(t,r),OD(e.v,r),r}function ete(e){var t=xl(e),r=MD(e);return[t,r,"n"]}function tte(e,t,r){return r==null&&(r=be(8)),vl(t,r),OD(e.v,r),r}function rte(e){var t=_s(e),r=n_(e);return[t,r,"is"]}function nte(e){var t=_s(e),r=on(e);return[t,r,"str"]}function ste(e,t,r){return r==null&&(r=be(12+4*e.v.length)),gl(t,r),Pr(e.v,r),r.length>r.l?r.slice(0,r.l):r}function ate(e){var t=xl(e),r=on(e);return[t,r,"str"]}function ite(e,t,r){return r==null&&(r=be(8+4*e.v.length)),vl(t,r),Pr(e.v,r),r.length>r.l?r.slice(0,r.l):r}function ote(e,t,r){var n=e.l+t,s=_s(e);s.r=r["!row"];var a=e.read_shift(1),o=[s,a,"b"];if(r.cellFormula){e.l+=2;var l=Fp(e,n-e.l,r);o[3]=zc(l,null,s,r.supbooks,r)}else e.l=n;return o}function lte(e,t,r){var n=e.l+t,s=_s(e);s.r=r["!row"];var a=e.read_shift(1),o=[s,a,"e"];if(r.cellFormula){e.l+=2;var l=Fp(e,n-e.l,r);o[3]=zc(l,null,s,r.supbooks,r)}else e.l=n;return o}function cte(e,t,r){var n=e.l+t,s=_s(e);s.r=r["!row"];var a=au(e),o=[s,a,"n"];if(r.cellFormula){e.l+=2;var l=Fp(e,n-e.l,r);o[3]=zc(l,null,s,r.supbooks,r)}else e.l=n;return o}function ute(e,t,r){var n=e.l+t,s=_s(e);s.r=r["!row"];var a=on(e),o=[s,a,"str"];if(r.cellFormula){e.l+=2;var l=Fp(e,n-e.l,r);o[3]=zc(l,null,s,r.supbooks,r)}else e.l=n;return o}var dte=yl,fte=su;function hte(e,t){return t==null&&(t=be(4)),t.write_shift(4,e),t}function mte(e,t){var r=e.l+t,n=yl(e),s=s_(e),a=on(e),o=on(e),l=on(e);e.l=r;var c={rfx:n,relId:s,loc:a,display:l};return o&&(c.Tooltip=o),c}function pte(e,t){var r=be(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));su({s:Ar(e[0]),e:Ar(e[0])},r),a_("rId"+t,r);var n=e[1].Target.indexOf("#"),s=n==-1?"":e[1].Target.slice(n+1);return Pr(s||"",r),Pr(e[1].Tooltip||"",r),Pr("",r),r.slice(0,r.l)}function gte(){}function xte(e,t,r){var n=e.l+t,s=FD(e),a=e.read_shift(1),o=[s];if(o[2]=a,r.cellFormula){var l=aee(e,n-e.l,r);o[1]=l}else e.l=n;return o}function vte(e,t,r){var n=e.l+t,s=yl(e),a=[s];if(r.cellFormula){var o=oee(e,n-e.l,r);a[1]=o,e.l=n}else e.l=n;return a}function yte(e,t,r){r==null&&(r=be(18));var n=Ip(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var yR=["left","right","top","bottom","header","footer"];function wte(e){var t={};return yR.forEach(function(r){t[r]=au(e)}),t}function _te(e,t){return t==null&&(t=be(6*8)),xR(e),yR.forEach(function(r){el(e[r],t)}),t}function bte(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function Ste(e,t,r){r==null&&(r=be(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Ete(e){var t=be(24);return t.write_shift(4,4),t.write_shift(4,1),su(e,t),t}function Nte(e,t){return t==null&&(t=be(16*4+2)),t.write_shift(2,e.password?eR(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function jte(){}function kte(){}function Cte(e,t,r,n,s,a,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=In(t),t.z=t.z||ar[14],t.v=Fn(xn(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:n};switch(c.s=ho(s.cellXfs,t,s),t.l&&a["!links"].push([Pt(c),t.l]),t.c&&a["!comments"].push([Pt(c),t.c]),t.t){case"s":case"str":return s.bookSST?(l=d_(s.Strings,t.v,s.revStrings),c.t="s",c.v=l,o?Ne(e,18,Kee(t,c)):Ne(e,7,Hee(t,c))):(c.t="str",o?Ne(e,17,ite(t,c)):Ne(e,6,ste(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?Ne(e,13,tte(t,c)):Ne(e,2,Zee(t,c)):o?Ne(e,16,Qee(t,c)):Ne(e,5,qee(t,c)),!0;case"b":return c.t="b",o?Ne(e,15,$ee(t,c)):Ne(e,4,Iee(t,c)),!0;case"e":return c.t="e",o?Ne(e,14,Vee(t,c)):Ne(e,3,Uee(t,c)),!0}return o?Ne(e,12,Oee(t,c)):Ne(e,1,Ree(t,c)),!0}function Tte(e,t,r,n){var s=Vt(t["!ref"]||"A1"),a,o="",l=[];Ne(e,145);var c=Array.isArray(t),u=s.e.r;t["!rows"]&&(u=Math.max(s.e.r,t["!rows"].length-1));for(var d=s.s.r;d<=u;++d){o=Hr(d),jee(e,t,s,d);var f=!1;if(d<=s.e.r)for(var h=s.s.c;h<=s.e.c;++h){d===s.s.r&&(l[h]=an(h)),a=l[h]+o;var p=c?(t[d]||[])[h]:t[a];if(!p){f=!1;continue}f=Cte(e,p,d,h,n,t,f)}}Ne(e,146)}function Ate(e,t){!t||!t["!merges"]||(Ne(e,177,hte(t["!merges"].length)),t["!merges"].forEach(function(r){Ne(e,176,fte(r))}),Ne(e,178))}function Pte(e,t){!t||!t["!cols"]||(Ne(e,390),t["!cols"].forEach(function(r,n){r&&Ne(e,60,yte(n,r))}),Ne(e,391))}function Dte(e,t){!t||!t["!ref"]||(Ne(e,648),Ne(e,649,Ete(Vt(t["!ref"]))),Ne(e,650))}function Rte(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var s=Ct(r,-1,n[1].Target.replace(/#.*$/,""),_t.HLINK);Ne(e,494,pte(n,s))}}),delete t["!links"]}function Mte(e,t,r,n){if(t["!comments"].length>0){var s=Ct(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",_t.VML);Ne(e,551,a_("rId"+s)),t["!legacy"]=s}}function Ote(e,t,r,n){if(t["!autofilter"]){var s=t["!autofilter"],a=typeof s.ref=="string"?s.ref:gr(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=es(a);l.s.r==l.e.r&&(l.e.r=es(t["!ref"]).e.r,a=gr(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+a;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Ne(e,161,su(Vt(a))),Ne(e,162)}}function Fte(e,t,r){Ne(e,133),Ne(e,137,Ste(t,r)),Ne(e,138),Ne(e,134)}function Ite(e,t){t["!protect"]&&Ne(e,535,Nte(t["!protect"]))}function Lte(e,t,r,n){var s=Mn(),a=r.SheetNames[e],o=r.Sheets[a]||{},l=a;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=Vt(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Ne(s,129),(r.vbaraw||o["!outline"])&&Ne(s,147,Pee(l,o["!outline"])),Ne(s,148,Cee(c)),Fte(s,o,r.Workbook),Pte(s,o),Tte(s,o,e,t),Ite(s,o),Ote(s,o,r,e),Ate(s,o),Rte(s,o,n),o["!margins"]&&Ne(s,476,_te(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&Dte(s,o),Mte(s,o,e,n),Ne(s,130),s.end()}function $te(e,t){e.l+=10;var r=on(e);return{name:r}}var Bte=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function Ute(e){return!e.Workbook||!e.Workbook.WBProps?"false":vX(e.Workbook.WBProps.date1904)?"true":"false"}var zte="][*?/\\".split("");function wR(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return zte.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Vte(e,t,r){e.forEach(function(n,s){wR(n);for(var a=0;a<s;++a)if(n==e[a])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=t&&t[s]&&t[s].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function Wte(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];Vte(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)fee(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}function _R(e){var t=[xr];t[t.length]=Me("workbook",null,{xmlns:ru[0],"xmlns:r":Cr.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(Bte.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Me("workbookPr",null,n);var s=e.Workbook&&e.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",a=0;a!=e.SheetNames.length&&!(!s[a]||!s[a].Hidden);++a);a==e.SheetNames.length&&(a=0),t[t.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",a=0;a!=e.SheetNames.length;++a){var o={name:Tt(e.SheetNames[a].slice(0,31))};if(o.sheetId=""+(a+1),o["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=Me("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=Me("definedName",Tt(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function Hte(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=c1(e),r.name=on(e),r}function Gte(e,t){return t||(t=be(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),a_(e.strRelID,t),Pr(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function Kte(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?on(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Yte(e,t){t||(t=be(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),RD(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function qte(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),a=UX(e),o=iee(e,0,r),l=s_(e);e.l=n;var c={Name:a,Ptg:o};return s<268435455&&(c.Sheet=s),l&&(c.Comment=l),c}function Xte(e,t){Ne(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Ne(e,156,Gte(s))}Ne(e,144)}function Qte(e,t){t||(t=be(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Pr("SheetJS",t),Pr(s0.version,t),Pr(s0.version,t),Pr("7262",t),t.length>t.l?t.slice(0,t.l):t}function Jte(e,t){t||(t=be(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function Zte(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,s=-1,a=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&a==-1&&(a=n);a>s||(Ne(e,135),Ne(e,158,Jte(s)),Ne(e,136))}}function ere(e,t){var r=Mn();return Ne(r,131),Ne(r,128,Qte()),Ne(r,153,Yte(e.Workbook&&e.Workbook.WBProps||null)),Zte(r,e),Xte(r,e),Ne(r,132),r.end()}function tre(e,t,r){return(t.slice(-4)===".bin"?ere:_R)(e)}function rre(e,t,r,n,s){return(t.slice(-4)===".bin"?Lte:vR)(e,r,n,s)}function nre(e,t,r){return(t.slice(-4)===".bin"?_J:nR)(e,r)}function sre(e,t,r){return(t.slice(-4)===".bin"?YQ:ZD)(e,r)}function are(e,t,r){return(t.slice(-4)===".bin"?IJ:lR)(e)}function ire(e){return(e.slice(-4)===".bin"?TJ:iR)()}function ore(e,t){var r=[];return e.Props&&r.push(nQ(e.Props,t)),e.Custprops&&r.push(sQ(e.Props,e.Custprops)),r.join("")}function lre(){return""}function cre(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,s){var a=[];a.push(Me("NumberFormat",null,{"ss:Format":Tt(ar[n.numFmtId])}));var o={"ss:ID":"s"+(21+s)};r.push(Me("Style",a.join(""),o))}),Me("Styles",r.join(""))}function bR(e){return Me("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+c_(e.Ref,{r:0,c:0})})}function ure(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var s=t[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(bR(s)))}return Me("Names",r.join(""))}function dre(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,a=[],o=0;o<s.length;++o){var l=s[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||a.push(bR(l)))}return a.join("")}function fre(e,t,r,n){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(Me("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(Me("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(Me("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(Me("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<r&&!(n.Workbook.Sheets[a]&&!n.Workbook.Sheets[a].Hidden);++a);a==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(Vr("ProtectContents","True")),e["!protect"].objects&&s.push(Vr("ProtectObjects","True")),e["!protect"].scenarios&&s.push(Vr("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(Vr("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(Vr("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&s.push("<"+o[1]+"/>")})),s.length==0?"":Me("WorksheetOptions",s.join(""),{xmlns:Gn.x})}function hre(e){return e.map(function(t){var r=xX(t.t||""),n=Me("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Me("Comment",n,{"ss:Author":t.a})}).join("")}function mre(e,t,r,n,s,a,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+Tt(c_(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=Ar(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=Tt(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=Tt(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=o.c||u[d].s.r!=o.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=Wf[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||ar[14]);break;case"s":f="String",h=gX(e.v||"");break}var p=ho(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+p),l["ss:Index"]=o.c+1;var g=e.v!=null?h:"",m=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(m+=hre(e.c)),Me("Cell",m,l)}function pre(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=rR(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function gre(e,t,r,n){if(!e["!ref"])return"";var s=Vt(e["!ref"]),a=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(v,_){o_(v);var y=!!v.width,w=Ip(_,v),b={"ss:Index":_+1};y&&(b["ss:Width"]=h0(w.width)),v.hidden&&(b["ss:Hidden"]="1"),l.push(Me("Column",null,b))});for(var c=Array.isArray(e),u=s.s.r;u<=s.e.r;++u){for(var d=[pre(u,(e["!rows"]||[])[u])],f=s.s.c;f<=s.e.c;++f){var h=!1;for(o=0;o!=a.length;++o)if(!(a[o].s.c>f)&&!(a[o].s.r>u)&&!(a[o].e.c<f)&&!(a[o].e.r<u)){(a[o].s.c!=f||a[o].s.r!=u)&&(h=!0);break}if(!h){var p={r:u,c:f},g=Pt(p),m=c?(e[u]||[])[f]:e[g];d.push(mre(m,g,e,t,r,n,p))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function xre(e,t,r){var n=[],s=r.SheetNames[e],a=r.Sheets[s],o=a?dre(a,t,e,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=a?gre(a,t,e,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(fre(a,t,e,r)),n.join("")}function vre(e,t){t||(t={}),e.SSF||(e.SSF=In(ar)),e.SSF&&(Dp(),Pp(e.SSF),t.revssf=Rp(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],ho(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(ore(e,t)),r.push(lre()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Me("Worksheet",xre(n,t,e),{"ss:Name":Tt(e.SheetNames[n])}));return r[2]=cre(e,t),r[3]=ure(e),xr+Me("Workbook",r.join(""),{xmlns:Gn.ss,"xmlns:o":Gn.o,"xmlns:x":Gn.x,"xmlns:ss":Gn.ss,"xmlns:dt":Gn.dt,"xmlns:html":Gn.html})}var fx={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function yre(e,t){var r=[],n=[],s=[],a=0,o,l=IS(XS,"n"),c=IS(QS,"n");if(e.Props)for(o=Kr(e.Props),a=0;a<o.length;++a)(Object.prototype.hasOwnProperty.call(l,o[a])?r:Object.prototype.hasOwnProperty.call(c,o[a])?n:s).push([o[a],e.Props[o[a]]]);if(e.Custprops)for(o=Kr(e.Custprops),a=0;a<o.length;++a)Object.prototype.hasOwnProperty.call(e.Props||{},o[a])||(Object.prototype.hasOwnProperty.call(l,o[a])?r:Object.prototype.hasOwnProperty.call(c,o[a])?n:s).push([o[a],e.Custprops[o[a]]]);var u=[];for(a=0;a<s.length;++a)GD.indexOf(s[a][0])>-1||VD.indexOf(s[a][0])>-1||s[a][1]!=null&&u.push(s[a]);n.length&&Dt.utils.cfb_add(t,"/SummaryInformation",rE(n,fx.SI,c,QS)),(r.length||u.length)&&Dt.utils.cfb_add(t,"/DocumentSummaryInformation",rE(r,fx.DSI,l,XS,u.length?u:null,fx.UDI))}function wre(e,t){var r=t||{},n=Dt.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Dt.utils.cfb_add(n,s,SR(e,r)),r.biff==8&&(e.Props||e.Custprops)&&yre(e,n),r.biff==8&&e.vbaraw&&LJ(n,Dt.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var _re={0:{f:Eee},1:{f:Dee},2:{f:Jee},3:{f:Bee},4:{f:Fee},5:{f:Yee},6:{f:nte},7:{f:Wee},8:{f:ute},9:{f:cte},10:{f:ote},11:{f:lte},12:{f:Mee},13:{f:ete},14:{f:zee},15:{f:Lee},16:{f:Xee},17:{f:ate},18:{f:Gee},19:{f:n_},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:qte},40:{},42:{},43:{f:nJ},44:{f:tJ},45:{f:iJ},46:{f:lJ},47:{f:oJ},48:{},49:{f:MX},50:{},51:{f:EJ},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:OQ},62:{f:rte},63:{f:AJ},64:{f:jte},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ga,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:bte},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Aee},148:{f:kee,p:16},151:{f:gte},152:{},153:{f:Kte},154:{},155:{},156:{f:Hte},157:{},158:{},159:{T:1,f:HQ},160:{T:-1},161:{T:1,f:yl},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:dte},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:bJ},336:{T:-1},337:{f:kJ,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:c1},357:{},358:{},359:{},360:{T:1},361:{},362:{f:TQ},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:xte},427:{f:vte},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:wte},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Tee},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:mte},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:c1},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:OJ},633:{T:1},634:{T:-1},635:{T:1,f:RJ},636:{T:-1},637:{f:LX},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:$te},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:kte},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Oe(e,t,r,n){var s=t;if(!isNaN(s)){var a=n||(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,a),a>0&&e_(r)&&e.push(r)}}function bre(e,t,r,n){var s=(r||[]).length||0;if(s<=8224)return Oe(e,t,r,s);var a=t;if(!isNaN(a)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var d=e.next(4);for(d.write_shift(2,a),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<s;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function Gf(e,t,r){return e||(e=be(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function Sre(e,t,r,n){var s=be(9);return Gf(s,e,t),YD(r,n||"b",s),s}function Ere(e,t,r){var n=be(8+2*r.length);return Gf(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function Nre(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?Fn(xn(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?Oe(e,2,$Q(r,n,s)):Oe(e,3,LQ(r,n,s));return;case"b":case"e":Oe(e,5,Sre(r,n,t.v,t.t));return;case"s":case"str":Oe(e,4,Ere(r,n,(t.v||"").slice(0,255)));return}Oe(e,1,Gf(null,r,n))}function jre(e,t,r,n){var s=Array.isArray(t),a=Vt(t["!ref"]||"A1"),o,l="",c=[];if(a.e.c>255||a.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),o=gr(a)}for(var u=a.s.r;u<=a.e.r;++u){l=Hr(u);for(var d=a.s.c;d<=a.e.c;++d){u===a.s.r&&(c[d]=an(d)),o=c[d]+l;var f=s?(t[u]||[])[d]:t[o];f&&Nre(e,f,u,d)}}}function kre(e,t){for(var r=t||{},n=Mn(),s=0,a=0;a<e.SheetNames.length;++a)e.SheetNames[a]==r.sheet&&(s=a);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Oe(n,r.biff==4?1033:r.biff==3?521:9,i_(e,16,r)),jre(n,e.Sheets[e.SheetNames[s]],s,r),Oe(n,10),n.end()}function Cre(e,t,r){Oe(e,49,_Q({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},r))}function Tre(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&Oe(e,1054,EQ(s,t[s],r))})}function Are(e,t){var r=be(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Oe(e,2151,r),r=be(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),QD(Vt(t["!ref"]||"A1"),r),r.write_shift(4,4),Oe(e,2152,r)}function Pre(e,t){for(var r=0;r<16;++r)Oe(e,224,sE({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){Oe(e,224,sE(n,0,t))})}function Dre(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];Oe(e,440,DQ(n)),n[1].Tooltip&&Oe(e,2048,RQ(n))}delete t["!links"]}function Rre(e,t){if(t){var r=0;t.forEach(function(n,s){++r<=256&&n&&Oe(e,125,FQ(Ip(s,n),s))})}}function Mre(e,t,r,n,s){var a=16+ho(s.cellXfs,t,s);if(t.v==null&&!t.bf){Oe(e,513,tl(r,n,a));return}if(t.bf)Oe(e,6,see(t,r,n,s,a));else switch(t.t){case"d":case"n":var o=t.t=="d"?Fn(xn(t.v)):t.v;Oe(e,515,CQ(r,n,o,a));break;case"b":case"e":Oe(e,517,kQ(r,n,t.v,a,s,t.t));break;case"s":case"str":if(s.bookSST){var l=d_(s.Strings,t.v,s.revStrings);Oe(e,253,bQ(r,n,l,a))}else Oe(e,516,SQ(r,n,(t.v||"").slice(0,255),a,s));break;default:Oe(e,513,tl(r,n,a))}}function Ore(e,t,r){var n=Mn(),s=r.SheetNames[e],a=r.Sheets[s]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(a),u=t.biff==8,d,f="",h=[],p=Vt(a["!ref"]||"A1"),g=u?65536:16384;if(p.e.c>255||p.e.r>=g){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,g-1)}Oe(n,2057,i_(r,16,t)),Oe(n,13,os(1)),Oe(n,12,os(100)),Oe(n,15,pn(!0)),Oe(n,17,pn(!1)),Oe(n,16,el(.001)),Oe(n,95,pn(!0)),Oe(n,42,pn(!1)),Oe(n,43,pn(!1)),Oe(n,130,os(1)),Oe(n,128,jQ()),Oe(n,131,pn(!1)),Oe(n,132,pn(!1)),u&&Rre(n,a["!cols"]),Oe(n,512,NQ(p,t)),u&&(a["!links"]=[]);for(var m=p.s.r;m<=p.e.r;++m){f=Hr(m);for(var v=p.s.c;v<=p.e.c;++v){m===p.s.r&&(h[v]=an(v)),d=h[v]+f;var _=c?(a[m]||[])[v]:a[d];_&&(Mre(n,_,m,v,t),u&&_.l&&a["!links"].push([d,_.l]))}}var y=l.CodeName||l.name||s;return u&&Oe(n,574,wQ((o.Views||[])[0])),u&&(a["!merges"]||[]).length&&Oe(n,229,PQ(a["!merges"])),u&&Dre(n,a),Oe(n,442,XD(y)),u&&Are(n,a),Oe(n,10),n.end()}function Fre(e,t,r){var n=Mn(),s=(e||{}).Workbook||{},a=s.Sheets||[],o=s.WBProps||{},l=r.biff==8,c=r.biff==5;if(Oe(n,2057,i_(e,5,r)),r.bookType=="xla"&&Oe(n,135),Oe(n,225,l?os(1200):null),Oe(n,193,oQ(2)),c&&Oe(n,191),c&&Oe(n,192),Oe(n,226),Oe(n,92,gQ("SheetJS",r)),Oe(n,66,os(l?1200:1252)),l&&Oe(n,353,os(0)),l&&Oe(n,448),Oe(n,317,IQ(e.SheetNames.length)),l&&e.vbaraw&&Oe(n,211),l&&e.vbaraw){var u=o.CodeName||"ThisWorkbook";Oe(n,442,XD(u))}Oe(n,156,os(17)),Oe(n,25,pn(!1)),Oe(n,18,pn(!1)),Oe(n,19,os(0)),l&&Oe(n,431,pn(!1)),l&&Oe(n,444,os(0)),Oe(n,61,yQ()),Oe(n,64,pn(!1)),Oe(n,141,os(0)),Oe(n,34,pn(Ute(e)=="true")),Oe(n,14,pn(!0)),l&&Oe(n,439,pn(!1)),Oe(n,218,os(0)),Cre(n,e,r),Tre(n,e.SSF,r),Pre(n,r),l&&Oe(n,352,pn(!1));var d=n.end(),f=Mn();l&&Oe(f,140,MQ()),l&&r.Strings&&bre(f,252,vQ(r.Strings)),Oe(f,10);var h=f.end(),p=Mn(),g=0,m=0;for(m=0;m<e.SheetNames.length;++m)g+=(l?12:11)+(l?2:1)*e.SheetNames[m].length;var v=d.length+g+h.length;for(m=0;m<e.SheetNames.length;++m){var _=a[m]||{};Oe(p,133,xQ({pos:v,hs:_.Hidden||0,dt:0,name:e.SheetNames[m]},r)),v+=t[m].length}var y=p.end();if(g!=y.length)throw new Error("BS8 "+g+" != "+y.length);var w=[];return d.length&&w.push(d),y.length&&w.push(y),h.length&&w.push(h),zr(w)}function Ire(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=In(ar)),e&&e.SSF&&(Dp(),Pp(e.SSF),r.revssf=Rp(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,f_(r),r.cellXfs=[],ho(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)n[n.length]=Ore(s,r,e);return n.unshift(Fre(e,n,r)),zr(n)}function SR(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var s=es(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var a=t||{};switch(a.biff||2){case 8:case 5:return Ire(e,t);case 4:case 3:case 2:return kre(e,t)}throw new Error("invalid type "+a.bookType+" for BIFF")}function Lre(e,t,r,n){for(var s=e["!merges"]||[],a=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>o)&&!(s[u].e.r<r||s[u].e.c<o)){if(s[u].s.r<r||s[u].s.c<o){l=-1;break}l=s[u].e.r-s[u].s.r+1,c=s[u].e.c-s[u].s.c+1;break}if(!(l<0)){var d=Pt({r,c:o}),f=n.dense?(e[r]||[])[o]:e[d],h=f&&f.v!=null&&(f.h||pX(f.w||(qa(f),f.w)||""))||"",p={};l>1&&(p.rowspan=l),c>1&&(p.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),p.id=(n.id||"sjs")+"-"+d,a.push(Me("td",h,p))}}var g="<tr>";return g+a.join("")+"</tr>"}var $re='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Bre="</body></html>";function Ure(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function ER(e,t){var r=t||{},n=r.header!=null?r.header:$re,s=r.footer!=null?r.footer:Bre,a=[n],o=es(e["!ref"]);r.dense=Array.isArray(e),a.push(Ure(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)a.push(Lre(e,o,l,r));return a.push("</table>"+s),a.join("")}function NR(e,t,r){var n=r||{},s=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var o=typeof n.origin=="string"?Ar(n.origin):n.origin;s=o.r,a=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:s,c:a}};if(e["!ref"]){var d=es(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),s==-1&&(u.e.r=s=d.e.r+1)}var f=[],h=0,p=e["!rows"]||(e["!rows"]=[]),g=0,m=0,v=0,_=0,y=0,w=0;for(e["!cols"]||(e["!cols"]=[]);g<l.length&&m<c;++g){var b=l[g];if(dE(b)){if(n.display)continue;p[m]={hidden:!0}}var S=b.children;for(v=_=0;v<S.length;++v){var N=S[v];if(!(n.display&&dE(N))){var E=N.hasAttribute("data-v")?N.getAttribute("data-v"):N.hasAttribute("v")?N.getAttribute("v"):yX(N.innerHTML),C=N.getAttribute("data-z")||N.getAttribute("z");for(h=0;h<f.length;++h){var T=f[h];T.s.c==_+a&&T.s.r<m+s&&m+s<=T.e.r&&(_=T.e.c+1-a,h=-1)}w=+N.getAttribute("colspan")||1,((y=+N.getAttribute("rowspan")||1)>1||w>1)&&f.push({s:{r:m+s,c:_+a},e:{r:m+s+(y||1)-1,c:_+a+(w||1)-1}});var D={t:"s",v:E},F=N.getAttribute("data-t")||N.getAttribute("t")||"";E!=null&&(E.length==0?D.t=F||"z":n.raw||E.trim().length==0||F=="s"||(E==="TRUE"?D={t:"b",v:!0}:E==="FALSE"?D={t:"b",v:!1}:isNaN(La(E))?isNaN(Qd(E).getDate())||(D={t:"d",v:xn(E)},n.cellDates||(D={t:"n",v:Fn(D.v)}),D.z=n.dateNF||ar[14]):D={t:"n",v:La(E)})),D.z===void 0&&C!=null&&(D.z=C);var P="",L=N.getElementsByTagName("A");if(L&&L.length)for(var A=0;A<L.length&&!(L[A].hasAttribute("href")&&(P=L[A].getAttribute("href"),P.charAt(0)!="#"));++A);P&&P.charAt(0)!="#"&&(D.l={Target:P}),n.dense?(e[m+s]||(e[m+s]=[]),e[m+s][_+a]=D):e[Pt({c:_+a,r:m+s})]=D,u.e.c<_+a&&(u.e.c=_+a),_+=w}}++m}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,m-1+s),e["!ref"]=gr(u),m>=c&&(e["!fullref"]=gr((u.e.r=l.length-g+m-1+s,u))),e}function jR(e,t){var r=t||{},n=r.dense?[]:{};return NR(n,e,t)}function zre(e,t){return pl(jR(e,t),t)}function dE(e){var t="",r=Vre(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Vre(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var Wre=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Zd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return xr+t}}(),fE=function(){var e=function(a){return Tt(a).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(a,o,l){var c=[];c.push('      <table:table table:name="'+Tt(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=es(a["!ref"]||"A1"),h=a["!merges"]||[],p=0,g=Array.isArray(a);if(a["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var m="",v=a["!rows"]||[];for(u=0;u<f.s.r;++u)m=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+m+`></table:table-row>
`);for(;u<=f.e.r;++u){for(m=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+m+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var _=!1,y={},w="";for(p=0;p!=h.length;++p)if(!(h[p].s.c>d)&&!(h[p].s.r>u)&&!(h[p].e.c<d)&&!(h[p].e.r<u)){(h[p].s.c!=d||h[p].s.r!=u)&&(_=!0),y["table:number-columns-spanned"]=h[p].e.c-h[p].s.c+1,y["table:number-rows-spanned"]=h[p].e.r-h[p].s.r+1;break}if(_){c.push(r);continue}var b=Pt({r:u,c:d}),S=g?(a[u]||[])[d]:a[b];if(S&&S.f&&(y["table:formula"]=Tt(uee(S.f)),S.F&&S.F.slice(0,b.length)==b)){var N=es(S.F);y["table:number-matrix-columns-spanned"]=N.e.c-N.s.c+1,y["table:number-matrix-rows-spanned"]=N.e.r-N.s.r+1}if(!S){c.push(t);continue}switch(S.t){case"b":w=S.v?"TRUE":"FALSE",y["office:value-type"]="boolean",y["office:boolean-value"]=S.v?"true":"false";break;case"n":w=S.w||String(S.v||0),y["office:value-type"]="float",y["office:value"]=S.v||0;break;case"s":case"str":w=S.v==null?"":S.v,y["office:value-type"]="string";break;case"d":w=S.w||xn(S.v).toISOString(),y["office:value-type"]="date",y["office:date-value"]=xn(S.v).toISOString(),y["table:style-name"]="ce1";break;default:c.push(t);continue}var E=e(w);if(S.l&&S.l.Target){var C=S.l.Target;C=C.charAt(0)=="#"?"#"+dee(C.slice(1)):C,C.charAt(0)!="#"&&!C.match(/^\w+:/)&&(C="../"+C),E=Me("text:a",E,{"xlink:href":C.replace(/&/g,"&amp;")})}c.push("          "+Me("table:table-cell",Me("text:p",E,{}),y)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(a,o){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;o_(f),f.ods=l;var h=u["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),a.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),a.push(`  </style:style>
`),++c}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(o,l){var c=[xr],u=Zd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Zd({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(UD().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),s(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)c.push(n(o.Sheets[o.SheetNames[f]],o,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function kR(e,t){if(t.bookType=="fods")return fE(e,t);var r=Xw(),n="",s=[],a=[];return n="mimetype",it(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",it(r,n,fE(e,t)),s.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",it(r,n,Wre(e,t)),s.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",it(r,n,xr+UD()),s.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",it(r,n,rQ(a)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",it(r,n,eQ(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function g0(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Hre(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Os(Jd(e))}function Gre(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function to(e){var t=e.reduce(function(s,a){return s+a.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function Kre(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var a=0;s>=1;++a,s/=256)e[t+a]=s&255;e[t+15]|=r>=0?0:128}function ef(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function jt(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function hc(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function yr(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=ef(e,r),a=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(a){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=ef(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(n))}var u={data:l,type:a};t[s]==null?t[s]=[u]:t[s].push(u)}return t}function Fr(e){var t=[];return e.forEach(function(r,n){r.forEach(function(s){s.data&&(t.push(jt(n*8+s.type)),s.type==2&&t.push(jt(s.data.length)),t.push(s.data))})}),to(t)}function Ss(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=ef(e,n),a=yr(e.slice(n[0],n[0]+s));n[0]+=s;var o={id:hc(a[1][0].data),messages:[]};a[2].forEach(function(l){var c=yr(l.data),u=hc(c[3][0].data);o.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=a[3])!=null&&t[0]&&(o.merge=hc(a[3][0].data)>>>0>0),r.push(o)}return r}function Ml(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:jt(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:jt(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(o){s.push(o.data),o.meta[3]=[{type:0,data:jt(o.data.length)}],n[2].push({data:Fr(o.meta),type:2})});var a=Fr(n);t.push(jt(a.length)),t.push(a),s.forEach(function(o){return t.push(o)})}),to(t)}function Yre(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=ef(t,r),s=[];r[0]<t.length;){var a=t[r[0]]&3;if(a==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(a==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,a==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[to(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(s.push(s[0].slice(-c)),u-=c;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-c,-c+u))}}var d=to(s);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Es(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Yre(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return to(t)}function Ol(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var a=jt(n),o=a.length;t.push(a),n<=60?(o++,t.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),o+=n,s[0]=0,s[1]=o&255,s[2]=o>>8&255,s[3]=o>>16&255,r+=n}return to(t)}function hx(e,t){var r=new Uint8Array(32),n=g0(r),s=12,a=0;switch(r[0]=5,e.t){case"n":r[1]=2,Kre(r,s,e.v),a|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,e.v?1:0,!0),a|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(s,t.indexOf(e.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,a,!0),r.slice(0,s)}function mx(e,t){var r=new Uint8Array(32),n=g0(r),s=12,a=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(s,e.v,!0),a|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,e.v?1:0,!0),a|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(s,t.indexOf(e.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,a,!0),r.slice(0,s)}function oi(e){var t=yr(e);return ef(t[1][0].data)}function qre(e,t,r){var n,s,a,o;if(!((n=e[6])!=null&&n[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(a=e[8])==null?void 0:a[0])==null?void 0:o.data)&&hc(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=g0(e[7][0].data),d=0,f=[],h=g0(e[4][0].data),p=0,g=[],m=0;m<t.length;++m){if(t[m]==null){u.setUint16(m*2,65535,!0),h.setUint16(m*2,65535);continue}u.setUint16(m*2,d,!0),h.setUint16(m*2,p,!0);var v,_;switch(typeof t[m]){case"string":v=hx({t:"s",v:t[m]},r),_=mx({t:"s",v:t[m]},r);break;case"number":v=hx({t:"n",v:t[m]},r),_=mx({t:"n",v:t[m]},r);break;case"boolean":v=hx({t:"b",v:t[m]},r),_=mx({t:"b",v:t[m]},r);break;default:throw new Error("Unsupported value "+t[m])}f.push(v),d+=v.length,g.push(_),p+=_.length,++c}for(e[2][0].data=jt(c);m<e[7][0].data.length/2;++m)u.setUint16(m*2,65535,!0),h.setUint16(m*2,65535,!0);return e[6][0].data=to(f),e[3][0].data=to(g),c}function Xre(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=es(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(gr(n)));var a=x0(r,{range:n,header:1}),o=["~Sh33tJ5~"];a.forEach(function(W){return W.forEach(function(R){typeof R=="string"&&o.push(R)})});var l={},c=[],u=Dt.read(t.numbers,{type:"base64"});u.FileIndex.map(function(W,R){return[W,u.FullPaths[R]]}).forEach(function(W){var R=W[0],M=W[1];if(R.type==2&&R.name.match(/\.iwa/)){var re=R.content,oe=Es(re),ce=Ss(oe);ce.forEach(function(me){c.push(me.id),l[me.id]={deps:[],location:M,type:hc(me.messages[0].meta[1][0].data)}})}}),c.sort(function(W,R){return W-R});var d=c.filter(function(W){return W>1}).map(function(W){return[W,jt(W)]});u.FileIndex.map(function(W,R){return[W,u.FullPaths[R]]}).forEach(function(W){var R=W[0];if(W[1],!!R.name.match(/\.iwa/)){var M=Ss(Es(R.content));M.forEach(function(re){re.messages.forEach(function(oe){d.forEach(function(ce){re.messages.some(function(me){return hc(me.meta[1][0].data)!=11006&&Gre(me.data,ce[1])})&&l[ce[0]].deps.push(re.id)})})})}});for(var f=Dt.find(u,l[1].location),h=Ss(Es(f.content)),p,g=0;g<h.length;++g){var m=h[g];m.id==1&&(p=m)}var v=oi(yr(p.messages[0].data)[1][0].data);for(f=Dt.find(u,l[v].location),h=Ss(Es(f.content)),g=0;g<h.length;++g)m=h[g],m.id==v&&(p=m);for(v=oi(yr(p.messages[0].data)[2][0].data),f=Dt.find(u,l[v].location),h=Ss(Es(f.content)),g=0;g<h.length;++g)m=h[g],m.id==v&&(p=m);for(v=oi(yr(p.messages[0].data)[2][0].data),f=Dt.find(u,l[v].location),h=Ss(Es(f.content)),g=0;g<h.length;++g)m=h[g],m.id==v&&(p=m);var _=yr(p.messages[0].data);{_[6][0].data=jt(n.e.r+1),_[7][0].data=jt(n.e.c+1);var y=oi(_[46][0].data),w=Dt.find(u,l[y].location),b=Ss(Es(w.content));{for(var S=0;S<b.length&&b[S].id!=y;++S);if(b[S].id!=y)throw"Bad ColumnRowUIDMapArchive";var N=yr(b[S].messages[0].data);N[1]=[],N[2]=[],N[3]=[];for(var E=0;E<=n.e.c;++E){var C=[];C[1]=C[2]=[{type:0,data:jt(E+420690)}],N[1].push({type:2,data:Fr(C)}),N[2].push({type:0,data:jt(E)}),N[3].push({type:0,data:jt(E)})}N[4]=[],N[5]=[],N[6]=[];for(var T=0;T<=n.e.r;++T)C=[],C[1]=C[2]=[{type:0,data:jt(T+726270)}],N[4].push({type:2,data:Fr(C)}),N[5].push({type:0,data:jt(T)}),N[6].push({type:0,data:jt(T)});b[S].messages[0].data=Fr(N)}w.content=Ol(Ml(b)),w.size=w.content.length,delete _[46];var D=yr(_[4][0].data);{D[7][0].data=jt(n.e.r+1);var F=yr(D[1][0].data),P=oi(F[2][0].data);w=Dt.find(u,l[P].location),b=Ss(Es(w.content));{if(b[0].id!=P)throw"Bad HeaderStorageBucket";var L=yr(b[0].messages[0].data);for(T=0;T<a.length;++T){var A=yr(L[2][0].data);A[1][0].data=jt(T),A[4][0].data=jt(a[T].length),L[2][T]={type:L[2][0].type,data:Fr(A)}}b[0].messages[0].data=Fr(L)}w.content=Ol(Ml(b)),w.size=w.content.length;var I=oi(D[2][0].data);w=Dt.find(u,l[I].location),b=Ss(Es(w.content));{if(b[0].id!=I)throw"Bad HeaderStorageBucket";for(L=yr(b[0].messages[0].data),E=0;E<=n.e.c;++E)A=yr(L[2][0].data),A[1][0].data=jt(E),A[4][0].data=jt(n.e.r+1),L[2][E]={type:L[2][0].type,data:Fr(A)};b[0].messages[0].data=Fr(L)}w.content=Ol(Ml(b)),w.size=w.content.length;var Q=oi(D[4][0].data);(function(){for(var W=Dt.find(u,l[Q].location),R=Ss(Es(W.content)),M,re=0;re<R.length;++re){var oe=R[re];oe.id==Q&&(M=oe)}var ce=yr(M.messages[0].data);{ce[3]=[];var me=[];o.forEach(function(we,Ce){me[1]=[{type:0,data:jt(Ce)}],me[2]=[{type:0,data:jt(1)}],me[3]=[{type:2,data:Hre(we)}],ce[3].push({type:2,data:Fr(me)})})}M.messages[0].data=Fr(ce);var pe=Ml(R),je=Ol(pe);W.content=je,W.size=W.content.length})();var q=yr(D[3][0].data);{var O=q[1][0];delete q[2];var H=yr(O.data);{var G=oi(H[2][0].data);(function(){for(var W=Dt.find(u,l[G].location),R=Ss(Es(W.content)),M,re=0;re<R.length;++re){var oe=R[re];oe.id==G&&(M=oe)}var ce=yr(M.messages[0].data);{delete ce[6],delete q[7];var me=new Uint8Array(ce[5][0].data);ce[5]=[];for(var pe=0,je=0;je<=n.e.r;++je){var we=yr(me);pe+=qre(we,a[je],o),we[1][0].data=jt(je),ce[5].push({data:Fr(we),type:2})}ce[1]=[{type:0,data:jt(n.e.c+1)}],ce[2]=[{type:0,data:jt(n.e.r+1)}],ce[3]=[{type:0,data:jt(pe)}],ce[4]=[{type:0,data:jt(n.e.r+1)}]}M.messages[0].data=Fr(ce);var Ce=Ml(R),j=Ol(Ce);W.content=j,W.size=W.content.length})()}O.data=Fr(H)}D[3][0].data=Fr(q)}_[4][0].data=Fr(D)}p.messages[0].data=Fr(_);var K=Ml(h),k=Ol(K);return f.content=k,f.size=f.content.length,u}function Qre(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function f_(e){Qre([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function Jre(e,t){return t.bookType=="ods"?kR(e,t):t.bookType=="numbers"?Xre(e,t):t.bookType=="xlsb"?Zre(e,t):ene(e,t)}function Zre(e,t){Ql=1024,e&&!e.SSF&&(e.SSF=In(ar)),e&&e.SSF&&(Dp(),Pp(e.SSF),t.revssf=Rp(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,cd?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=cR.indexOf(t.bookType)>-1,s=LD();f_(t=t||{});var a=Xw(),o="",l=0;if(t.cellXfs=[],ho(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",it(a,o,zD(e.Props,t)),s.coreprops.push(o),Ct(t.rels,2,o,_t.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,it(a,o,WD(e.Props)),s.extprops.push(o),Ct(t.rels,3,o,_t.EXT_PROPS),e.Custprops!==e.Props&&Kr(e.Custprops||{}).length>0&&(o="docProps/custom.xml",it(a,o,HD(e.Custprops)),s.custprops.push(o),Ct(t.rels,4,o,_t.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var d={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,it(a,o,rre(l-1,o,t,e,d)),s.sheets.push(o),Ct(t.wbrels,-1,"worksheets/sheet"+l+"."+r,_t.WS[0])}if(f){var p=f["!comments"],g=!1,m="";p&&p.length>0&&(m="xl/comments"+l+"."+r,it(a,m,are(p,m)),s.comments.push(m),Ct(d,-1,"../comments"+l+"."+r,_t.CMNT),g=!0),f["!legacy"]&&g&&it(a,"xl/drawings/vmlDrawing"+l+".vml",oR(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&it(a,BD(o),dc(d))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,it(a,o,sre(t.Strings,o,t)),s.strs.push(o),Ct(t.wbrels,-1,"sharedStrings."+r,_t.SST)),o="xl/workbook."+r,it(a,o,tre(e,o)),s.workbooks.push(o),Ct(t.rels,1,o,_t.WB),o="xl/theme/theme1.xml",it(a,o,aR(e.Themes,t)),s.themes.push(o),Ct(t.wbrels,-1,"theme/theme1.xml",_t.THEME),o="xl/styles."+r,it(a,o,nre(e,o,t)),s.styles.push(o),Ct(t.wbrels,-1,"styles."+r,_t.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",it(a,o,e.vbaraw),s.vba.push(o),Ct(t.wbrels,-1,"vbaProject.bin",_t.VBA)),o="xl/metadata."+r,it(a,o,ire(o)),s.metadata.push(o),Ct(t.wbrels,-1,"metadata."+r,_t.XLMETA),it(a,"[Content_Types].xml",$D(s,t)),it(a,"_rels/.rels",dc(t.rels)),it(a,"xl/_rels/workbook."+r+".rels",dc(t.wbrels)),delete t.revssf,delete t.ssf,a}function ene(e,t){Ql=1024,e&&!e.SSF&&(e.SSF=In(ar)),e&&e.SSF&&(Dp(),Pp(e.SSF),t.revssf=Rp(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,cd?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=cR.indexOf(t.bookType)>-1,s=LD();f_(t=t||{});var a=Xw(),o="",l=0;if(t.cellXfs=[],ho(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",it(a,o,zD(e.Props,t)),s.coreprops.push(o),Ct(t.rels,2,o,_t.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,it(a,o,WD(e.Props)),s.extprops.push(o),Ct(t.rels,3,o,_t.EXT_PROPS),e.Custprops!==e.Props&&Kr(e.Custprops||{}).length>0&&(o="docProps/custom.xml",it(a,o,HD(e.Custprops)),s.custprops.push(o),Ct(t.rels,4,o,_t.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},h=e.Sheets[e.SheetNames[l-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,it(a,o,vR(l-1,t,e,f)),s.sheets.push(o),Ct(t.wbrels,-1,"worksheets/sheet"+l+"."+r,_t.WS[0])}if(h){var g=h["!comments"],m=!1,v="";if(g&&g.length>0){var _=!1;g.forEach(function(y){y[1].forEach(function(w){w.T==!0&&(_=!0)})}),_&&(v="xl/threadedComments/threadedComment"+l+"."+r,it(a,v,PJ(g,d,t)),s.threadedcomments.push(v),Ct(f,-1,"../threadedComments/threadedComment"+l+"."+r,_t.TCMNT)),v="xl/comments"+l+"."+r,it(a,v,lR(g)),s.comments.push(v),Ct(f,-1,"../comments"+l+"."+r,_t.CMNT),m=!0}h["!legacy"]&&m&&it(a,"xl/drawings/vmlDrawing"+l+".vml",oR(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&it(a,BD(o),dc(f))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,it(a,o,ZD(t.Strings,t)),s.strs.push(o),Ct(t.wbrels,-1,"sharedStrings."+r,_t.SST)),o="xl/workbook."+r,it(a,o,_R(e)),s.workbooks.push(o),Ct(t.rels,1,o,_t.WB),o="xl/theme/theme1.xml",it(a,o,aR(e.Themes,t)),s.themes.push(o),Ct(t.wbrels,-1,"theme/theme1.xml",_t.THEME),o="xl/styles."+r,it(a,o,nR(e,t)),s.styles.push(o),Ct(t.wbrels,-1,"styles."+r,_t.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",it(a,o,e.vbaraw),s.vba.push(o),Ct(t.wbrels,-1,"vbaProject.bin",_t.VBA)),o="xl/metadata."+r,it(a,o,iR()),s.metadata.push(o),Ct(t.wbrels,-1,"metadata."+r,_t.XLMETA),d.length>1&&(o="xl/persons/person.xml",it(a,o,DJ(d)),s.people.push(o),Ct(t.wbrels,-1,"persons/person.xml",_t.PEOPLE)),it(a,"[Content_Types].xml",$D(s,t)),it(a,"_rels/.rels",dc(t.rels)),it(a,"xl/_rels/workbook."+r+".rels",dc(t.wbrels)),delete t.revssf,delete t.ssf,a}function tne(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Ya(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function CR(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return zf(t.file,Dt.write(e,{type:Et?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Dt.write(e,t)}function rne(e,t){var r=In(t||{}),n=Jre(e,r);return nne(n,r)}function nne(e,t){var r={},n=Et?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?Dt.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(Ap(s))}return t.password&&typeof encrypt_agile<"u"?CR(encrypt_agile(s,t.password),t):t.type==="file"?zf(t.file,s):t.type=="string"?ad(s):s}function sne(e,t){var r=t||{},n=wre(e,r);return CR(n,r)}function ea(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Xd(Jd(n));case"binary":return Jd(n);case"string":return e;case"file":return zf(t.file,n,"utf8");case"buffer":return Et?ti(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):ea(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function ane(e,t){switch(t.type){case"base64":return Xd(e);case"binary":return e;case"string":return e;case"file":return zf(t.file,e,"binary");case"buffer":return Et?ti(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Lh(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?Xd(r):t.type=="string"?ad(r):r;case"file":return zf(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function TR(e,t){Rq(),Wte(e);var r=In(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=TR(e,r);return r.type="array",Ap(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return ea(vre(e,r),r);case"slk":case"sylk":return ea(UQ.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return ea(ER(e.Sheets[e.SheetNames[s]],r),r);case"txt":return ane(AR(e.Sheets[e.SheetNames[s]],r),r);case"csv":return ea(h_(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return ea(zQ.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return Lh(BQ.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return ea(VQ.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return ea(XQ.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return ea(JD.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return ea(kR(e,r),r);case"wk1":return Lh(aE.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return Lh(aE.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Lh(SR(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),sne(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return rne(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function ine(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function one(e,t,r){var n={};return n.type="file",n.file=t,ine(n),TR(e,n)}function lne(e,t,r,n,s,a,o,l){var c=Hr(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,h=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!o||e[r])for(var p=t.s.c;p<=t.e.c;++p){var g=o?e[r][p]:e[n[p]+c];if(g===void 0||g.t===void 0){if(u===void 0)continue;a[p]!=null&&(h[a[p]]=u);continue}var m=g.v;switch(g.t){case"z":if(m==null)break;continue;case"e":m=m==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(a[p]!=null){if(m==null)if(g.t=="e"&&m===null)h[a[p]]=null;else if(u!==void 0)h[a[p]]=u;else if(d&&m===null)h[a[p]]=null;else continue;else h[a[p]]=d&&(g.t!=="n"||g.t==="n"&&l.rawNumbers!==!1)?m:qa(g,m,l);m!=null&&(f=!1)}}return{row:h,isempty:f}}function x0(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,a=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Vt(d);break;case"number":c=Vt(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(s=0);var f=Hr(c.s.r),h=[],p=[],g=0,m=0,v=Array.isArray(e),_=c.s.r,y=0,w={};v&&!e[_]&&(e[_]=[]);var b=u.skipHidden&&e["!cols"]||[],S=u.skipHidden&&e["!rows"]||[];for(y=c.s.c;y<=c.e.c;++y)if(!(b[y]||{}).hidden)switch(h[y]=an(y),r=v?e[_][y]:e[h[y]+f],n){case 1:a[y]=y-c.s.c;break;case 2:a[y]=h[y];break;case 3:a[y]=u.header[y-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=qa(r,null,u),m=w[o]||0,!m)w[o]=1;else{do l=o+"_"+m++;while(w[l]);w[o]=m,w[l]=1}a[y]=l}for(_=c.s.r+s;_<=c.e.r;++_)if(!(S[_]||{}).hidden){var N=lne(e,c,_,h,n,a,v,u);(N.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(p[g++]=N.row)}return p.length=g,p}var hE=/"/g;function cne(e,t,r,n,s,a,o,l){for(var c=!0,u=[],d="",f=Hr(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var p=l.dense?(e[r]||[])[h]:e[n[h]+f];if(p==null)d="";else if(p.v!=null){c=!1,d=""+(l.rawNumbers&&p.t=="n"?p.v:qa(p,null,l));for(var g=0,m=0;g!==d.length;++g)if((m=d.charCodeAt(g))===s||m===a||m===34||l.forceQuotes){d='"'+d.replace(hE,'""')+'"';break}d=="ID"&&(d='"ID"')}else p.f!=null&&!p.F?(c=!1,d="="+p.f,d.indexOf(",")>=0&&(d='"'+d.replace(hE,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(o)}function h_(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=Vt(e["!ref"]),a=n.FS!==void 0?n.FS:",",o=a.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((a=="|"?"\\|":a)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],g=s.s.c;g<=s.e.c;++g)(h[g]||{}).hidden||(f[g]=an(g));for(var m=0,v=s.s.r;v<=s.e.r;++v)(p[v]||{}).hidden||(d=cne(e,s,v,f,o,c,a,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((m++?l:"")+d)));return delete n.dense,r.join("")}function AR(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=h_(e,t);return r}function une(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=Vt(e["!ref"]),a="",o=[],l,c=[],u=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=an(l);for(var d=s.s.r;d<=s.e.r;++d)for(a=Hr(d),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+a,r=u?(e[d]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function PR(e,t,r){var n=r||{},s=+!n.skipHeader,a=e||{},o=0,l=0;if(a&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Ar(n.origin):n.origin;o=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(a["!ref"]){var f=Vt(a["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(o=f.e.r+1,d.e.r=o+t.length-1+s)}else o==-1&&(o=0,d.e.r=t.length-1+s);var h=n.header||[],p=0;t.forEach(function(m,v){Kr(m).forEach(function(_){(p=h.indexOf(_))==-1&&(h[p=h.length]=_);var y=m[_],w="z",b="",S=Pt({c:l+p,r:o+v+s});u=tf(a,S),y&&typeof y=="object"&&!(y instanceof Date)?a[S]=y:(typeof y=="number"?w="n":typeof y=="boolean"?w="b":typeof y=="string"?w="s":y instanceof Date?(w="d",n.cellDates||(w="n",y=Fn(y)),b=n.dateNF||ar[14]):y===null&&n.nullError&&(w="e",y=0),u?(u.t=w,u.v=y,delete u.w,delete u.R,b&&(u.z=b)):a[S]=u={t:w,v:y},b&&(u.z=b))})}),d.e.c=Math.max(d.e.c,l+h.length-1);var g=Hr(o);if(s)for(p=0;p<h.length;++p)a[an(p+l)+g]={t:"s",v:h[p]};return a["!ref"]=gr(d),a}function dne(e,t){return PR(null,e,t)}function tf(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Ar(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?tf(e,Pt(t)):tf(e,Pt({r:t,c:r||0}))}function fne(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function hne(){return{SheetNames:[],Sheets:{}}}function mne(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var o=a&&a[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(wR(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function pne(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=fne(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function gne(e,t){return e.z=t,e}function DR(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function xne(e,t,r){return DR(e,"#"+t,r)}function vne(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function yne(e,t,r,n){for(var s=typeof t!="string"?t:Vt(t),a=typeof t=="string"?t:gr(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var c=tf(e,o,l);c.t="n",c.F=a,delete c.v,o==s.s.r&&l==s.s.c&&(c.f=r,n&&(c.D=!0))}return e}var px={encode_col:an,encode_row:Hr,encode_cell:Pt,encode_range:gr,decode_col:r_,decode_row:t_,split_cell:RX,decode_cell:Ar,decode_range:es,format_cell:qa,sheet_add_aoa:DD,sheet_add_json:PR,sheet_add_dom:NR,aoa_to_sheet:nu,json_to_sheet:dne,table_to_sheet:jR,table_to_book:zre,sheet_to_csv:h_,sheet_to_txt:AR,sheet_to_json:x0,sheet_to_html:ER,sheet_to_formulae:une,sheet_to_row_object_array:x0,sheet_get_cell:tf,book_new:hne,book_append_sheet:mne,book_set_sheet_visibility:pne,cell_set_number_format:gne,cell_set_hyperlink:DR,cell_set_internal_link:xne,cell_add_comment:vne,sheet_set_array_formula:yne,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const wne=()=>{const[e,t]=x.useState(!1);x.useState(!1);const[r,n]=x.useState(!1);x.useState(!1);const[s,a]=x.useState(null),[o,l]=x.useState(null),[c,u]=x.useState(null),[d,f]=x.useState(null),[h,p]=x.useState(!1);x.useState(null);const[g,m]=ke.useState(null),[v,_]=x.useState(!1),[y,w]=x.useState(null),[b,S]=x.useState(null),[N,E]=x.useState(!1),[C,T]=x.useState(!1),[D,F]=x.useState([]),[P,L]=x.useState(null),{meetings:A=[],loading:I,fetchMeetings:Q}=cl(),{attendanceRecords:q=[],loading:O,markAttendance:H,fetchAttendance:G}=Lf(),{user:K}=mt(),k=oo();dt();const{members:W}=Gw();ke.useEffect(()=>{!I&&A.length===0&&Q()},[I,A.length,Q]),x.useEffect(()=>{typeof G=="function"&&G()},[]),x.useEffect(()=>{if(!K)return;const j=new Date,se=new Date(j.getTime()-24*60*60*1e3),ae=A.filter(z=>{if(!z.start_time)return!1;const X=new Date(z.start_time);return X<se||X>j?!1:!q.some(U=>U.meeting_id===z.id&&U.user_id===K.id)});ae.length>0&&(F(ae),L(ae[0]),T(!0))},[A,q,K]),x.useMemo(()=>{let j=!1;if(!K||I||O)return{thisMonthAttended:0,attendanceRate:0,pendingCheckIns:0};const se=new Date,ae=Sr(se),z=Ra(se),X=A.filter(he=>{if(!he.start_time)return j=!0,!1;try{const le=Ut(he.start_time);return le>=ae&&le<=z&&le<=se}catch{return j=!0,!1}}),ie=q.filter(he=>he.user_id===K.id&&he.attendance_status==="present"&&X.some(le=>le.id===he.meeting_id)),U=X.length,B=ie.length,Y=U>0?Math.round(B/U*100):0,ue=A.filter(he=>{if(!he.start_time||!he.end_time)return j=!0,!1;try{const le=Ut(he.start_time),Se=Ut(he.end_time),Fe=new Date(le.getTime()-60*60*1e3),Ie=se>=Fe&&se<=Se,at=q.some(Kt=>Kt.meeting_id===he.id&&Kt.user_id===K.id);return Ie&&!at}catch{return j=!0,!1}}).length;return m(j?"Some meetings have invalid or missing date data and were skipped.":null),{thisMonthAttended:B,attendanceRate:Y,pendingCheckIns:ue}},[A,q,K,I,O]);const R=(j,se,ae)=>`${j||""} ${se||""}`.trim()||ae||"Unknown",M=j=>j||"Untitled",re=j=>j?new Date(j).toLocaleDateString():"-",ce=[...W.map(j=>{var U;const se=q.filter(B=>B.user_id===j.id&&B.attendance_status==="present"),ae=A.length,z=se.length,X=ae>0?Math.round(z/ae*100):0,ie=se.length>0?(U=A.find(B=>B.id===se[se.length-1].meeting_id))==null?void 0:U.start_time:null;return{id:j.id,name:R(j.first_name,j.last_name,j.email),email:j.email,totalMeetings:ae,attendedCount:z,attendancePercent:X,lastAttended:ie}})].sort((j,se)=>j.name.localeCompare(se.name)),me=A.map(j=>{const se=Array.isArray(j.meeting_attendees)?j.meeting_attendees.map(U=>{var B,Y,ue,he;return{user_id:U.user_id,email:((B=W.find(le=>le.id===U.user_id))==null?void 0:B.email)||U.user_id,full_name:W.find(le=>le.id===U.user_id)?R((Y=W.find(le=>le.id===U.user_id))==null?void 0:Y.first_name,(ue=W.find(le=>le.id===U.user_id))==null?void 0:ue.last_name,(he=W.find(le=>le.id===U.user_id))==null?void 0:he.email):U.user_id,isManual:!1}}):[],ae=Array.isArray(j.manual_attendees)?j.manual_attendees.map(U=>({user_id:typeof U=="string"?U:U.email,email:typeof U=="string"?U:U.email,full_name:typeof U=="string"?U:U.email,isManual:!0})):[],z=[...se,...ae],X=z.map(U=>{const B=q.find(Y=>Y.meeting_id===j.id&&(Y.user_id===U.user_id||Y.user_id===U.email));return{...U,attendance_status:B?B.attendance_status:null,attendance_type:B?B.attendance_type:null,notes:B?B.notes:""}}),ie=X.filter(U=>U.attendance_status==="present");return{id:j.id||"",name:M(j.title||""),date:j.start_time,totalInvited:z.length,totalPresent:ie.length,attendees:X,meeting:j}}),pe=k.isAdmin||k.isSuperAdmin,je=pe?ce:ce.filter(j=>j.id===(K==null?void 0:K.id)),we=async(j,se)=>{if(!P||!K)return;await H({meetingId:P.id,userId:K.id,status:j,type:"physical",notes:se});const ae=D.filter(z=>z.id!==P.id);F(ae),ae.length>0?L(ae[0]):T(!1)};if(I||O)return i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 gap-4",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),i.jsx("div",{className:"text-muted-foreground",children:"Loading attendance data..."})]});if(A.length===0)return i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 gap-4",children:[i.jsx(Ti,{className:"w-10 h-10 text-muted-foreground"}),i.jsx("div",{className:"text-lg font-semibold",children:"No meetings found"}),i.jsx("div",{className:"text-muted-foreground",children:"Meetings will appear here once scheduled."})]});const Ce=()=>{if(!d)return;const j=A.map(z=>{const X=q.find(ie=>ie.user_id===d.id&&ie.meeting_id===z.id);return{Meeting:M(z.title),Date:re(z.start_time),Status:X?X.attendance_status:"absent",Type:X?X.attendance_type:"",Notes:X?X.notes:""}}),se=px.json_to_sheet(j),ae=px.book_new();px.book_append_sheet(ae,se,"Attendance"),one(ae,`${d.first_name||""}_${d.last_name||""}_attendance.xlsx`)};return i.jsxs("div",{className:"w-full max-w-5xl mx-auto p-4",children:[g&&i.jsx("div",{className:"mb-4 text-sm text-yellow-700 bg-yellow-100 rounded px-3 py-2",children:g}),i.jsxs(dl,{defaultValue:"members",className:"w-full",children:[i.jsxs(lo,{className:"mb-4",children:[i.jsx(Br,{value:"members",children:"Member Attendance"}),i.jsx(Br,{value:"meetings",children:"Meeting Attendance"})]}),i.jsx(Ur,{value:"members",children:i.jsx("div",{className:"grid gap-4",children:je.length===0?i.jsx(He,{className:"flex flex-col items-center justify-center py-8",children:i.jsx("div",{className:"text-muted-foreground",children:"No members found."})}):je.map(j=>i.jsxs(He,{className:"hover:shadow-lg transition-shadow",children:[i.jsxs(rt,{className:"flex flex-row items-center justify-between gap-2",children:[i.jsxs("div",{children:[i.jsx(st,{className:"text-lg",children:j.name}),i.jsx(sn,{children:j.email})]}),i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsxs(Be,{variant:"outline",children:[j.attendancePercent,"%"]}),i.jsx(de,{size:"icon",variant:"ghost","aria-label":"Expand Member",onClick:()=>u(c===j.id?null:j.id),children:c===j.id?i.jsx(my,{}):i.jsx(ff,{})})]})]}),c===j.id&&i.jsx(Ye,{children:i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Meetings:"})," ",j.totalMeetings]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Attended:"})," ",j.attendedCount]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Last Attended:"})," ",re(j.lastAttended)]})]}),i.jsx(de,{size:"sm",variant:"outline","aria-label":"View Attendance History",onClick:()=>{const se=W.find(ae=>ae.id===j.id);f(se||null),p(!0)},children:"View Attendance History"})]})})]},j.id))})}),i.jsx(Ur,{value:"meetings",children:i.jsx("div",{className:"grid gap-4",children:me.length===0?i.jsx(He,{className:"flex flex-col items-center justify-center py-8",children:i.jsx("div",{className:"text-muted-foreground",children:"No meetings found."})}):me.map(j=>i.jsxs(He,{className:"hover:shadow-lg transition-shadow",children:[i.jsxs(rt,{className:"flex flex-row items-center justify-between gap-2",children:[i.jsxs("div",{children:[i.jsx(st,{className:"text-lg",children:j.name}),i.jsxs(sn,{children:["Date: ",re(j.date)]})]}),i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsxs(Be,{variant:"outline",children:[j.totalPresent,"/",j.totalInvited," Present"]}),i.jsx(de,{size:"icon",variant:"ghost","aria-label":"Details",onClick:()=>{w(j.meeting),_(!0)},children:i.jsx(Mc,{children:i.jsxs(Pd,{children:[i.jsx(Dd,{asChild:!0,children:i.jsx(Rr,{})}),i.jsx(Oc,{children:"Details"})]})})})]})]}),o===j.id&&i.jsx(Ye,{children:i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("div",{className:"flex gap-4 flex-wrap",children:k.canMarkAttendanceOnly&&i.jsx(de,{size:"sm",variant:"outline",onClick:()=>{a(j.meeting),t(!0)},children:"Mark Attendance"})}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"font-semibold mb-1",children:"Attendees"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-2 py-1 text-left",children:"Name"}),i.jsx("th",{scope:"col",className:"px-2 py-1 text-left",children:"Email"}),i.jsx("th",{scope:"col",className:"px-2 py-1",children:"Status"})]})}),i.jsx("tbody",{children:j.attendees.map((se,ae)=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-2 py-1",children:se.full_name}),i.jsx("td",{className:"px-2 py-1",children:se.email}),i.jsxs("td",{className:"px-2 py-1 text-center",children:[se.attendance_status==="present"?i.jsx("span",{className:"inline-block px-2 py-1 bg-green-100 text-green-800 rounded-full",children:"Present"}):i.jsx("span",{className:"inline-block px-2 py-1 bg-red-100 text-red-800 rounded-full",children:"Absent"}),pe&&i.jsx(de,{size:"sm",variant:"ghost",className:"ml-2 px-2 py-0.5 text-xs",onClick:()=>{S({...se,meetingId:j.id,attendance_status:se.attendance_status||"present",attendance_type:se.attendance_type||"physical",notes:se.notes||""}),E(!0)},children:"Edit"})]})]},ae))})]})})]})]})})]},j.id))})})]}),i.jsx(Tq,{open:e,onOpenChange:t}),i.jsx(Aq,{open:r,onOpenChange:n}),i.jsx(bt,{open:v,onOpenChange:_,children:i.jsxs(xt,{className:"max-w-xl min-w-[350px] w-full max-h-[70vh] flex flex-col",children:[i.jsx(vt,{children:i.jsxs(yt,{children:["Meeting Details: ",y?M(y.title):""]})}),y&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-2 text-sm text-muted-foreground",children:["Date: ",re(y.start_time)]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"font-semibold mb-1",children:"Attendees"}),(()=>{const j=me.find(se=>se.id===y.id);return!j||j.attendees.length===0?i.jsx("div",{className:"text-muted-foreground",children:"No attendees found."}):i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-2 py-1 text-left",children:"Name"}),i.jsx("th",{scope:"col",className:"px-2 py-1 text-left",children:"Email"}),i.jsx("th",{scope:"col",className:"px-2 py-1",children:"Status"})]})}),i.jsx("tbody",{children:j.attendees.map((se,ae)=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-2 py-1",children:se.full_name}),i.jsx("td",{className:"px-2 py-1",children:se.email}),i.jsxs("td",{className:"px-2 py-1 text-center",children:[se.attendance_status==="present"?i.jsx("span",{className:"inline-block px-2 py-1 bg-green-100 text-green-800 rounded-full",children:"Present"}):se.attendance_status==="late"?i.jsx("span",{className:"inline-block px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full",children:"Late"}):se.attendance_status==="absent"?i.jsx("span",{className:"inline-block px-2 py-1 bg-red-100 text-red-800 rounded-full",children:"Absent"}):i.jsx("span",{className:"inline-block px-2 py-1 bg-gray-100 text-gray-800 rounded-full",children:"Not Marked"}),pe&&i.jsx(de,{size:"sm",variant:"ghost",className:"ml-2 px-2 py-0.5 text-xs",onClick:()=>{S({...se,meetingId:y.id,attendance_status:se.attendance_status||"present",attendance_type:se.attendance_type||"physical",notes:se.notes||""}),E(!0)},children:"Edit"})]})]},ae))})]})})()]})]}),i.jsx(M2,{asChild:!0,children:i.jsx(de,{size:"sm",variant:"ghost",className:"mt-4 ml-auto",children:"Close"})})]})}),i.jsx(bt,{open:h,onOpenChange:p,children:i.jsxs(xt,{className:"max-w-xl min-w-[350px] w-full max-h-[70vh] flex flex-col",children:[i.jsxs(vt,{children:[i.jsxs(yt,{children:["Attendance History for ",d?R(d.first_name,d.last_name,d.email):""]}),d&&i.jsx(de,{size:"sm",variant:"outline",className:"ml-2",onClick:Ce,children:"Download Excel"})]}),i.jsx("div",{className:"overflow-y-auto max-h-[50vh] px-2",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left",children:"Meeting"}),i.jsx("th",{className:"px-4 py-2",children:"Date"}),i.jsx("th",{className:"px-4 py-2",children:"Status"})]})}),i.jsx("tbody",{children:d&&A.map((j,se)=>{const ae=q.find(z=>z.user_id===d.id&&z.meeting_id===j.id);return i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-2",children:M(j.title)}),i.jsx("td",{className:"px-4 py-2 text-center",children:re(j.start_time)}),i.jsxs("td",{className:"px-4 py-2 text-center",children:[ae&&ae.attendance_status==="present"?i.jsx("span",{className:"inline-block px-2 py-1 bg-green-100 text-green-800 rounded-full",children:"Present"}):ae&&ae.attendance_status==="late"?i.jsx("span",{className:"inline-block px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full",children:"Late"}):i.jsx("span",{className:"inline-block px-2 py-1 bg-red-100 text-red-800 rounded-full",children:"Absent"}),pe&&i.jsx(de,{size:"sm",variant:"ghost",className:"ml-2 px-2 py-0.5 text-xs",onClick:()=>{S(ae?{...ae,meetingId:j.id}:{meetingId:j.id,user_id:d.id,attendance_status:"absent",attendance_type:"physical",notes:""}),E(!0)},children:"Edit"})]})]},se)})})]})}),i.jsx(M2,{asChild:!0,children:i.jsx(de,{size:"sm",variant:"ghost",className:"mt-4 ml-auto",children:"Close"})})]})}),N&&b&&i.jsx(bt,{open:N,onOpenChange:E,children:i.jsxs(xt,{className:"max-w-md",children:[i.jsx(vt,{children:i.jsx(yt,{children:"Edit Attendance"})}),i.jsxs("form",{onSubmit:async j=>{j.preventDefault(),await H({meetingId:b.meetingId,userId:b.user_id,status:b.attendance_status,type:b.attendance_type||"physical",notes:b.notes||""}),E(!1)},className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block mb-1 font-medium",children:"Status"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:b.attendance_status,onChange:j=>S(se=>({...se,attendance_status:j.target.value})),children:[i.jsx("option",{value:"present",children:"Present"}),i.jsx("option",{value:"late",children:"Late"}),i.jsx("option",{value:"absent",children:"Absent"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block mb-1 font-medium",children:"Type"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:b.attendance_type||"physical",onChange:j=>S(se=>({...se,attendance_type:j.target.value})),children:[i.jsx("option",{value:"physical",children:"Physical"}),i.jsx("option",{value:"online",children:"Online"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block mb-1 font-medium",children:"Notes"}),i.jsx("textarea",{className:"w-full border rounded px-2 py-1",value:b.notes||"",onChange:j=>S(se=>({...se,notes:j.target.value}))})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(de,{type:"button",variant:"outline",onClick:()=>E(!1),children:"Cancel"}),i.jsx(de,{type:"submit",children:"Save"})]})]})]})}),C&&P&&i.jsx(bt,{open:C,onOpenChange:()=>{},children:i.jsxs(xt,{className:"max-w-md",children:[i.jsxs(vt,{children:[i.jsx(yt,{children:"Mark Your Attendance"}),i.jsxs(Mt,{children:["Please mark your attendance for the meeting: ",i.jsx("b",{children:M(P.title)})," on ",re(P.start_time)," before proceeding."]})]}),i.jsxs("form",{onSubmit:async j=>{j.preventDefault();const se=j.target,ae=se.elements.namedItem("status").value,z=se.elements.namedItem("notes").value;await we(ae,z)},className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block mb-1 font-medium",children:"Status"}),i.jsxs("select",{name:"status",className:"w-full border rounded px-2 py-1",children:[i.jsx("option",{value:"present",children:"Present"}),i.jsx("option",{value:"late",children:"Late"}),i.jsx("option",{value:"absent",children:"Absent"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block mb-1 font-medium",children:"Notes"}),i.jsx("textarea",{name:"notes",className:"w-full border rounded px-2 py-1"})]}),i.jsx("div",{className:"flex justify-end gap-2",children:i.jsx(de,{type:"submit",children:"Save"})})]})]})})]})},_ne=()=>{const[e,t]=x.useState(!1);mt();const{toast:r}=dt(),n=async(u,d)=>{t(!0);try{let f={};switch(u){case"meetings":const{data:h}=await fe.from("meetings").select(`
              *,
              meeting_attendees(user_id, status),
              profiles!meetings_created_by_fkey(first_name, last_name)
            `).order("start_time",{ascending:!1});f=h||[];break;case"documents":const{data:p}=await fe.from("documents").select(`
              *,
              profiles!documents_uploaded_by_fkey(first_name, last_name),
              document_views(view_started_at, time_spent_seconds)
            `).order("created_at",{ascending:!1});f=p||[];break;case"document_analytics":const{data:g}=await fe.from("document_views").select(`
              *,
              documents(name, folder),
              profiles!document_views_user_id_fkey(first_name, last_name, email)
            `).order("view_started_at",{ascending:!1});f=g||[];break;case"voting":const{data:m}=await fe.from("polls").select(`
              *,
              poll_votes(vote, voted_at),
              profiles!polls_created_by_fkey(first_name, last_name)
            `).order("created_at",{ascending:!1});f=m||[];break;case"comprehensive":const[v,_,y,w]=await Promise.all([fe.from("meetings").select("*").order("start_time",{ascending:!1}),fe.from("documents").select("*").order("created_at",{ascending:!1}),fe.from("polls").select("*").order("created_at",{ascending:!1}),fe.from("document_views").select(`
              *,
              documents(name, folder),
              profiles!document_views_user_id_fkey(first_name, last_name, email)
            `).order("view_started_at",{ascending:!1})]);f={meetings:v.data||[],documents:_.data||[],polls:y.data||[],document_analytics:w.data||[]};break}return f}catch(f){return console.error("Error generating report:",f),r({title:"Report Generation Failed",description:f.message||"Failed to generate report",variant:"destructive"}),null}finally{t(!1)}},s=(u,d)=>{if(!u.length){r({title:"No Data",description:"No data available to download",variant:"destructive"});return}const f=Object.keys(u[0]),h=[f.join(","),...u.map(v=>f.map(_=>{const y=v[_];return typeof y=="object"&&y!==null?`"${JSON.stringify(y).replace(/"/g,'""')}"`:`"${String(y||"").replace(/"/g,'""')}"`}).join(","))].join(`
`),p=new Blob([h],{type:"text/csv;charset=utf-8;"}),g=document.createElement("a"),m=URL.createObjectURL(p);g.setAttribute("href",m),g.setAttribute("download",`${d}.csv`),g.style.visibility="hidden",document.body.appendChild(g),g.click(),document.body.removeChild(g),r({title:"Success",description:`${d}.csv downloaded successfully`})},a=async(u,d)=>{const f=o(u,d),h=window.open("","_blank");h&&(h.document.write(f),h.document.close(),h.focus(),setTimeout(()=>{h.print()},500)),r({title:"PDF Report",description:"Print dialog opened. Choose 'Save as PDF' in print options."})},o=(u,d)=>{const f=new Date().toLocaleDateString();return`
      <!DOCTYPE html>
      <html>
        <head>
          <title>ISKCON Bureau Report - ${d}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            .header { text-align: center; margin-bottom: 30px; }
            .logo { max-width: 100px; margin: 0 auto 20px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #f2f2f2; }
            .summary { background-color: #f9f9f9; padding: 15px; margin-bottom: 20px; }
          </style>
        </head>
        <body>
          <div class="header">
            <img src="/lovable-uploads/7ccf6269-31c1-46b9-bc5c-60b58a22c03e.png" alt="ISKCON Logo" class="logo">
            <h1>ISKCON Bureau Management</h1>
            <h2>${d.charAt(0).toUpperCase()+d.slice(1)} Report</h2>
            <p>Generated on: ${f}</p>
          </div>
          
          <div class="summary">
            <h3>Summary</h3>
            <p>Total Records: ${Array.isArray(u)?u.length:Object.values(u).reduce((h,p)=>h+(Array.isArray(p)?p.length:0),0)}</p>
          </div>
          
          ${l(u,d)}
        </body>
      </html>
    `},l=(u,d)=>d==="comprehensive"?Object.entries(u).map(([f,h])=>`
        <h3>${f.charAt(0).toUpperCase()+f.slice(1)}</h3>
        ${c(h)}
      `).join(""):c(u),c=u=>{if(!u.length)return"<p>No data available</p>";const d=Object.keys(u[0]);return`
      <table>
        <thead>
          <tr>
            ${d.map(f=>`<th>${f.replace(/_/g," ").toUpperCase()}</th>`).join("")}
          </tr>
        </thead>
        <tbody>
          ${u.map(f=>`
            <tr>
              ${d.map(h=>{const p=f[h];return typeof p=="object"&&p!==null?`<td>${JSON.stringify(p)}</td>`:`<td>${p||""}</td>`}).join("")}
            </tr>
          `).join("")}
        </tbody>
      </table>
    `};return{loading:e,generateReport:n,downloadCSV:s,downloadPDF:a}},bne=()=>{const[e,t]=x.useState(""),[r,n]=x.useState({}),[s,a]=x.useState(!1),[o,l]=x.useState(!1),{loading:c,generateReport:u,downloadCSV:d,downloadPDF:f}=_ne(),h=[{value:"meetings",label:"Meetings Report",icon:Tr},{value:"documents",label:"Documents Report",icon:Gt},{value:"document_analytics",label:"Document Analytics Report",icon:Rr},{value:"voting",label:"Voting Report",icon:Ti},{value:"members",label:"Members Report",icon:lr},{value:"comprehensive",label:"Comprehensive Report",icon:Gt}],p=async g=>{if(!e){alert("Please select a report type");return}const m=await u(e,r.start&&r.end?r:void 0);if(m)if(g==="csv"){const v=`${e}_report_${new Date().toISOString().split("T")[0]}`;Array.isArray(m)?d(m,v):Object.entries(m).forEach(([_,y])=>{d(y,`${_}_${v}`)})}else f(m,e)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reports & Analytics"}),i.jsx("p",{className:"text-gray-600",children:"Generate and download comprehensive reports"})]}),i.jsxs(He,{children:[i.jsxs(rt,{children:[i.jsx(st,{children:"Generate Report"}),i.jsx(sn,{children:"Select the type of report you want to generate and download"})]}),i.jsxs(Ye,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Report Type"}),i.jsxs(ma,{value:e,onValueChange:t,children:[i.jsx(Ys,{children:i.jsx(pa,{placeholder:"Select report type"})}),i.jsx(qs,{children:h.map(g=>i.jsx(Rt,{value:g.value,children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(g.icon,{className:"h-4 w-4"}),i.jsx("span",{children:g.label})]})},g.value))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Start Date (Optional)"}),i.jsxs(Xm,{open:s,onOpenChange:a,children:[i.jsx(Qm,{asChild:!0,children:i.jsxs(de,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[i.jsx(Tr,{className:"mr-2 h-4 w-4"}),r.start?ht(r.start,"PPP"):"Pick start date"]})}),i.jsx(zd,{className:"w-auto p-0",children:i.jsx(qm,{mode:"single",selected:r.start,onSelect:g=>{n(m=>({...m,start:g})),a(!1)},initialFocus:!0})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"End Date (Optional)"}),i.jsxs(Xm,{open:o,onOpenChange:l,children:[i.jsx(Qm,{asChild:!0,children:i.jsxs(de,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[i.jsx(Tr,{className:"mr-2 h-4 w-4"}),r.end?ht(r.end,"PPP"):"Pick end date"]})}),i.jsx(zd,{className:"w-auto p-0",children:i.jsx(qm,{mode:"single",selected:r.end,onSelect:g=>{n(m=>({...m,end:g})),l(!1)},initialFocus:!0})})]})]})]}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsxs(de,{onClick:()=>p("csv"),disabled:!e||c,className:"flex items-center space-x-2",children:[i.jsx(hs,{className:"h-4 w-4"}),i.jsx("span",{children:"Download CSV"})]}),i.jsxs(de,{onClick:()=>p("pdf"),disabled:!e||c,variant:"outline",className:"flex items-center space-x-2",children:[i.jsx(Gt,{className:"h-4 w-4"}),i.jsx("span",{children:"Download PDF"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[i.jsx(He,{children:i.jsx(Ye,{className:"p-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Tr,{className:"h-8 w-8 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Meetings"}),i.jsx("p",{className:"text-2xl font-bold",children:"24"})]})]})})}),i.jsx(He,{children:i.jsx(Ye,{className:"p-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Gt,{className:"h-8 w-8 text-green-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Documents"}),i.jsx("p",{className:"text-2xl font-bold",children:"156"})]})]})})}),i.jsx(He,{children:i.jsx(Ye,{className:"p-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Rr,{className:"h-8 w-8 text-purple-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Document Views"}),i.jsx("p",{className:"text-2xl font-bold",children:"1,024"})]})]})})}),i.jsx(He,{children:i.jsx(Ye,{className:"p-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(lr,{className:"h-8 w-8 text-orange-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Members"}),i.jsx("p",{className:"text-2xl font-bold",children:"42"})]})]})})})]})]})},Sne=()=>{const[e,t]=x.useState(!1),[r,n]=x.useState(null),[s,a]=x.useState("prompt"),[o,l]=x.useState(!1),[c,u]=x.useState(!1),{user:d}=mt(),f=()=>{const y=typeof window<"u"&&window.Capacitor&&window.Capacitor.isNative===!0,w=typeof navigator<"u"&&/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),b=y||w;return l(b),console.log("Platform detected:",b?"Native/Mobile":"Web"),b},h=()=>(console.log("Checking web push support..."),typeof window>"u"||typeof navigator>"u"?(console.log("Window or navigator not available"),!1):"serviceWorker"in navigator?"PushManager"in window?"Notification"in window?(console.log("Web push is supported"),!0):(console.log("Notification API not supported"),!1):(console.log("Push Manager not supported"),!1):(console.log("Service Worker not supported"),!1)),p=async()=>{if(o)try{const{PushNotifications:y}=await zi(async()=>{const{PushNotifications:b}=await import("./index-cAwRCpH1.js");return{PushNotifications:b}},[]),w=await y.checkPermissions();return console.log("Native permission status:",w.receive),w.receive}catch(y){return console.log("Error checking native permissions:",y),"prompt"}else{if(typeof window>"u"||!("Notification"in window))return"denied";const y=Notification.permission;return console.log("Web notification permission:",y),y}},g=async()=>{try{console.log("Initializing native push notifications...");const{PushNotifications:y}=await zi(async()=>{const{PushNotifications:b}=await import("./index-cAwRCpH1.js");return{PushNotifications:b}},[]);t(!0);const w=await p();a(w),w==="granted"&&(await y.register(),y.addListener("registration",async b=>{console.log("Native push registration success:",b.value),n(b.value),d&&b.value&&await v(b.value)}),y.addListener("registrationError",b=>{console.error("Native push registration error:",b),t(!1)}),y.addListener("pushNotificationReceived",b=>{console.log("Push received:",b),ot.success(b.title||"New notification",{description:b.body})}),y.addListener("pushNotificationActionPerformed",b=>{console.log("Push action performed:",b);const S=b.notification.data;S!=null&&S.module&&(window.location.hash=`#/${S.module}${S.id?`/${S.id}`:""}`)}))}catch(y){console.log("Native push notifications not available:",y),h()?await m():t(!1)}},m=async()=>{try{console.log("Initializing web push notifications...");const y=h();if(t(y),!y)return;const w=await p();if(a(w),!o)try{const b=await navigator.serviceWorker.register("/sw.js");if(console.log("Service Worker registered for web"),w==="granted"){const S=`web-${Date.now()}`;n(S),d&&await v(S)}}catch(b){console.log("Service Worker registration failed:",b)}}catch(y){console.error("Web push initialization error:",y),t(!1)}},v=async y=>{try{const{error:w}=await fe.from("profiles").update({push_token:y,updated_at:new Date().toISOString()}).eq("id",d==null?void 0:d.id);if(w)throw w;console.log("Push token saved successfully")}catch(w){console.error("Error saving push token:",w)}},_=async()=>{u(!0);try{if(console.log("Requesting notification permission..."),o){const{PushNotifications:y}=await zi(async()=>{const{PushNotifications:b}=await import("./index-cAwRCpH1.js");return{PushNotifications:b}},[]),w=await y.requestPermissions();console.log("Native permission result:",w),a(w.receive),w.receive==="granted"?(await y.register(),ot.success("Push notifications enabled!"),await g()):ot.error("Push notifications permission denied")}else if("Notification"in window){const y=await Notification.requestPermission();console.log("Web permission result:",y),a(y),y==="granted"?(ot.success("Push notifications enabled!"),await m()):ot.error("Push notifications permission denied")}else ot.error("Notifications not supported in this browser")}catch(y){console.error("Permission request error:",y),ot.error("Failed to request notification permission")}finally{u(!1)}};return x.useEffect(()=>{if(d){const y=setTimeout(async()=>{const w=f(),b=await p();a(b),w?await g():await m()},1e3);return()=>clearTimeout(y)}},[d]),{isSupported:e,token:r,permissionStatus:s,requestPermission:_,isNative:o,isLoading:c}},Ene=()=>{const{isSupported:e,permissionStatus:t,requestPermission:r,isNative:n,isLoading:s}=Sne(),a=()=>{if(s)return i.jsx(vg,{className:"h-4 w-4 animate-spin text-gray-400"});switch(t){case"granted":return i.jsx(Ci,{className:"h-4 w-4 text-green-500"});case"denied":return i.jsx(Bs,{className:"h-4 w-4 text-red-500"});case"prompt-with-rationale":return i.jsx(Bs,{className:"h-4 w-4 text-yellow-500"});default:return i.jsx(Ci,{className:"h-4 w-4 text-gray-400"})}},o=()=>{if(s)return i.jsx(Be,{variant:"secondary",children:"Checking..."});switch(t){case"granted":return i.jsx(Be,{className:"bg-green-100 text-green-800",children:"Enabled"});case"denied":return i.jsx(Be,{variant:"destructive",children:"Disabled"});case"prompt-with-rationale":return i.jsx(Be,{variant:"secondary",children:"Needs Permission"});default:return i.jsx(Be,{variant:"secondary",children:"Not Set"})}},l=()=>n?i.jsx(M6,{className:"h-4 w-4"}):i.jsx(P6,{className:"h-4 w-4"}),c=()=>i.jsx(Be,{variant:"outline",className:"ml-2",children:n?"Mobile App":"Web Browser"}),u=t==="granted",d=t!=="granted"&&e&&!s,f=()=>e?t==="denied"?n?"Notifications are blocked. Please enable them in your device Settings > Apps > ISKCON Management Portal > Notifications.":"Please enable notifications in your browser settings to receive important updates.":t==="prompt-with-rationale"?"This app needs permission to send you important notifications about meetings, votes, and documents.":null:n?"Push notifications are not available on this device. Please check your device settings.":"Your browser does not support web push notifications. Try using Chrome, Firefox, or Edge.",h=()=>{alert(n?"Please go to your device Settings > Apps > ISKCON Management Portal > Notifications and enable them manually.":"Please click on the lock icon in your browser address bar and enable notifications.")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Notification Settings"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Configure how you want to receive notifications from the ISKCON Bureau Management Portal"})]}),i.jsxs(He,{children:[i.jsxs(rt,{children:[i.jsxs(st,{className:"flex items-center space-x-2",children:[l(),i.jsx("span",{children:"Push Notifications"}),o(),c()]}),i.jsxs(sn,{children:["Receive instant notifications for meetings, voting, documents, and other important updates",!e&&i.jsx("span",{className:"block mt-2 text-red-600 font-medium",children:"Push notifications are not supported on this platform"})]})]}),i.jsxs(Ye,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[a(),i.jsx(ze,{children:"Push Notifications"}),e&&i.jsx(Be,{variant:"outline",className:"text-xs",children:n?"Native":"Web Push"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[d&&i.jsx(de,{onClick:r,size:"sm",className:"bg-primary hover:bg-primary/90",disabled:s,children:s?i.jsxs(i.Fragment,{children:[i.jsx(vg,{className:"h-4 w-4 mr-2 animate-spin"}),"Requesting..."]}):"Enable Notifications"}),!e&&i.jsx(Be,{variant:"outline",className:"text-red-600",children:"Not Supported"})]})]}),!e&&i.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(U6,{className:"h-5 w-5 text-yellow-500 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Platform Not Supported"}),i.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:f()})]})]})}),u&&i.jsxs("div",{className:"space-y-3 pl-6 border-l-2 border-green-200",children:[i.jsx("p",{className:"text-sm text-green-600 font-medium",children:" Notifications are enabled and working!"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ze,{htmlFor:"meeting-notifications",children:"Meeting Notifications"}),i.jsx(ls,{id:"meeting-notifications",defaultChecked:!0})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ze,{htmlFor:"voting-notifications",children:"Voting & Poll Notifications"}),i.jsx(ls,{id:"voting-notifications",defaultChecked:!0})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ze,{htmlFor:"document-notifications",children:"Document Notifications"}),i.jsx(ls,{id:"document-notifications",defaultChecked:!0})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ze,{htmlFor:"email-notifications",children:"Email Notifications"}),i.jsx(ls,{id:"email-notifications",defaultChecked:!0})]})]}),(t==="denied"||t==="prompt-with-rationale")&&e&&i.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(Bs,{className:"h-5 w-5 text-red-500 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-red-800",children:t==="denied"?"Notifications Blocked":"Permission Required"}),i.jsx("p",{className:"text-sm text-red-600 mt-1",children:f()}),i.jsxs("div",{className:"flex gap-2 mt-2",children:[i.jsx(de,{onClick:r,size:"sm",variant:"outline",className:"border-red-300 text-red-700 hover:bg-red-50",disabled:s,children:s?i.jsxs(i.Fragment,{children:[i.jsx(vg,{className:"h-4 w-4 mr-2 animate-spin"}),"Trying..."]}):t==="denied"?"Try Again":"Grant Permission"}),t==="denied"&&n&&i.jsxs(de,{onClick:h,size:"sm",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:[i.jsx(mf,{className:"h-4 w-4 mr-2"}),"Device Settings"]})]})]})]})})]})]}),i.jsxs(He,{children:[i.jsxs(rt,{children:[i.jsxs(st,{className:"flex items-center space-x-2",children:[i.jsx(E6,{className:"h-5 w-5"}),i.jsx("span",{children:"In-App Notifications"}),i.jsx(Be,{className:"bg-blue-100 text-blue-800",children:"Always On"})]}),i.jsx(sn,{children:"Notifications that appear within the application interface"})]}),i.jsxs(Ye,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ze,{children:"Toast Notifications"}),i.jsx(ls,{defaultChecked:!0,disabled:!0})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ze,{children:"Notification Bell"}),i.jsx(ls,{defaultChecked:!0,disabled:!0})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ze,{children:"Sound Alerts"}),i.jsx(ls,{defaultChecked:!0})]})]})]})]})},Nne=({currentImageUrl:e,onImageUpdate:t})=>{const{user:r}=mt(),{toast:n}=dt(),[s,a]=x.useState(!1),[o,l]=x.useState(0),c=e,u=async d=>{var p;const f=(p=d.target.files)==null?void 0:p[0];if(!f||!r)return;if(!["image/png","image/jpeg","image/jpg"].includes(f.type)){n({title:"Invalid File Type",description:"Only PNG and JPEG images are supported.",variant:"destructive"});return}if(f.size>5*1024*1024){n({title:"File Too Large",description:"Please select an image smaller than 5MB.",variant:"destructive"});return}a(!0);try{const g=f.name.split(".").pop(),m=`${r.id}/profile.${g}`,{error:v}=await fe.storage.from("profile-images").upload(m,f,{upsert:!0});if(v)throw v;const{data:{publicUrl:_}}=fe.storage.from("profile-images").getPublicUrl(m),y=`${_}?t=${Date.now()}`,{error:w}=await fe.from("profiles").upsert({id:r.id,avatar_url:y,updated_at:new Date().toISOString()});if(w)throw w;l(b=>b+1),t(y),setTimeout(()=>{const b={profile:{avatar_url:y},userId:r.id};console.log("Dispatching profile update event:",b),window.dispatchEvent(new CustomEvent("profileUpdated",{detail:b})),window.dispatchEvent(new CustomEvent("avatarUpdated",{detail:{avatarUrl:y,userId:r.id}}))},200),n({title:"Profile Image Updated",description:"Your profile image has been updated successfully."})}catch(g){console.error("Image upload error:",g),n({title:"Upload Failed",description:g.message||"Failed to upload profile image",variant:"destructive"})}finally{a(!1)}};return i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"flex items-center space-x-6",children:[i.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center overflow-hidden",children:c?i.jsx("img",{src:`${c}${c.includes("?")?"&":"?"}v=${o}`,alt:"Profile",className:"w-full h-full object-cover"},o):i.jsx(Ki,{className:"h-12 w-12 text-gray-400"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:u,className:"hidden",id:"profile-image-upload"}),i.jsx("label",{htmlFor:"profile-image-upload",children:i.jsx(de,{variant:"outline",disabled:s,asChild:!0,children:i.jsxs("span",{className:"cursor-pointer",children:[i.jsx(xy,{className:"h-4 w-4 mr-2"}),s?"Uploading...":"Upload Image"]})})}),i.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Recommended: Square image, at least 200x200 pixels (PNG, JPEG only, max 5MB)"})]})]})})},mE=()=>{const{isConnected:e,isExpired:t,loading:r,disconnectMicrosoft:n,forceRefresh:s,lastError:a}=ul(),{toast:o}=dt(),l=()=>r?{icon:Rn,color:"bg-blue-100 text-blue-800 border-blue-200",text:"Checking...",description:"Verifying Microsoft 365 connection"}:e&&!t?{icon:qn,color:"bg-green-100 text-green-800 border-green-200",text:"Microsoft 365 Connected",description:"Microsoft 365 services are available and tokens are automatically refreshed"}:t||a&&(a.includes("invalid_grant")||a.includes("AADSTS50173")||a.includes("expired"))?{icon:Bs,color:"bg-red-100 text-red-800 border-red-200",text:"Authentication Expired",description:"Microsoft account authentication has expired. This usually happens after a password change, security policy update, or when tokens are revoked. Please disconnect and reconnect your account."}:a?{icon:Ui,color:"bg-red-100 text-red-800 border-red-200",text:"Connection Error",description:a}:{icon:Ui,color:"bg-gray-100 text-gray-800 border-gray-200",text:"Not Connected",description:"Connect your Microsoft account in Settings to access Outlook, Teams, and SharePoint"},c=()=>{s(),o({title:"Refreshing Connection",description:"Checking and refreshing Microsoft 365 connection..."})},u=async()=>{await n(),o({title:"Microsoft Account Disconnected",description:"You can now reconnect with fresh authentication credentials.",variant:"default"})},d=()=>{const g=new CustomEvent("navigate-to-module",{detail:{module:"settings"}});window.dispatchEvent(g),o({title:"Go to Settings",description:"Navigate to Settings  Integrations to reconnect your Microsoft account."})},f=l(),h=f.icon,p=t||a&&(a.includes("invalid_grant")||a.includes("AADSTS50173")||a.includes("expired"));return i.jsx(Mc,{children:i.jsxs(Pd,{children:[i.jsx(Dd,{asChild:!0,children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(Be,{variant:"outline",className:`${f.color} border flex items-center space-x-1 px-2 py-1`,children:[i.jsx(h,{className:`h-3 w-3 ${r?"animate-spin":""}`}),i.jsx("span",{className:"text-xs font-medium",children:f.text})]}),!r&&i.jsx("div",{className:"flex items-center space-x-1",children:p?i.jsxs(i.Fragment,{children:[i.jsxs(de,{variant:"ghost",size:"sm",onClick:u,className:"h-6 px-2 text-red-600 hover:text-red-700 hover:bg-red-50",children:[i.jsx(Db,{className:"h-3 w-3 mr-1"}),i.jsx("span",{className:"text-xs",children:"Disconnect"})]}),i.jsxs(de,{variant:"ghost",size:"sm",onClick:d,className:"h-6 px-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:[i.jsx(ua,{className:"h-3 w-3 mr-1"}),i.jsx("span",{className:"text-xs",children:"Reconnect"})]})]}):i.jsxs(i.Fragment,{children:[!p&&i.jsx(de,{variant:"ghost",size:"sm",onClick:c,className:"h-6 w-6 p-0",children:i.jsx(Rn,{className:"h-3 w-3"})}),(e||a)&&i.jsx(de,{variant:"ghost",size:"sm",onClick:u,className:"h-6 w-6 p-0 text-red-600 hover:text-red-700",children:i.jsx(Db,{className:"h-3 w-3"})})]})})]})}),i.jsx(Oc,{children:i.jsxs("div",{className:"max-w-xs",children:[i.jsx("p",{className:"text-sm mb-2",children:f.description}),!e&&!p&&i.jsx("p",{className:"text-xs text-muted-foreground",children:"Go to Settings  Integrations to connect"}),p&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"p-2 bg-red-50 rounded border border-red-200",children:[i.jsx("p",{className:"text-xs text-red-800 font-medium mb-1",children:" Action Required: Reconnect Microsoft Account"}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-xs text-red-700",children:i.jsx("strong",{children:"Quick Fix:"})}),i.jsxs("p",{className:"text-xs text-red-600",children:['1. Click "Disconnect" button above',i.jsx("br",{}),'2. Click "Reconnect" to go to Settings',i.jsx("br",{}),'3. Click "Connect Microsoft 365" again',i.jsx("br",{}),"4. Sign in with admin@iskconbureau.in"]})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"This happens when passwords change or tokens are revoked by Microsoft security policies."})]})]})})]})})},jne=({onSuccess:e})=>{const[t,r]=x.useState(!1),{toast:n}=dt(),{user:s}=mt(),{isConnected:a,disconnectMicrosoft:o,canAttemptConnection:l}=ul(),c=async()=>{try{return(await fetch(window.location.origin+"/favicon.ico",{method:"HEAD",cache:"no-cache"})).ok}catch{return!1}},u=x.useCallback(async()=>{if(!s){n({title:"Authentication Required",description:"Please sign in first before connecting your Microsoft account.",variant:"destructive"});return}if(!l){n({title:"Rate Limited",description:"Too many connection attempts. Please wait before trying again.",variant:"destructive"});return}r(!0);try{if(!await c()){n({title:"Network Connection Error",description:"Unable to connect to the internet. Please check your network connection and try again.",variant:"destructive"}),r(!1);return}try{localStorage.removeItem("microsoft_auth_error"),localStorage.removeItem("microsoft_auth_last_error"),sessionStorage.removeItem("microsoft_auth_user_id"),sessionStorage.removeItem("microsoft_auth_nonce"),sessionStorage.removeItem("microsoft_auth_timestamp")}catch(C){console.warn("Storage cleanup warning:",C)}const f="44391516-babe-4072-8422-a4fc8a79fbde",h="b2333ef6-3378-4d02-b9b9-d8e66d9dfa3d",p=window.location.origin,g=`${p}/microsoft/callback`,m=s.id,v=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);console.log("Microsoft OAuth Configuration:",{clientId:f,tenantId:h,baseUrl:p,redirectUri:g,userId:m,timestamp:new Date().toISOString()});try{const C=await fetch(g,{method:"HEAD",cache:"no-cache"});if(!C.ok&&C.status!==404){n({title:"Configuration Error",description:"The redirect URL is not accessible. This may be a temporary network issue.",variant:"destructive"}),r(!1);return}}catch{n({title:"Network Error",description:"Unable to verify redirect URL. Please check your internet connection.",variant:"destructive"}),r(!1);return}try{sessionStorage.setItem("microsoft_auth_user_id",m),sessionStorage.setItem("microsoft_auth_nonce",v),sessionStorage.setItem("microsoft_auth_timestamp",Date.now().toString())}catch(C){console.error("Session storage error:",C),n({title:"Storage Error",description:"Unable to store session data. Please enable cookies and try again.",variant:"destructive"}),r(!1);return}const _=["openid","profile","email","offline_access","https://graph.microsoft.com/User.Read","https://graph.microsoft.com/Mail.ReadWrite","https://graph.microsoft.com/Calendars.ReadWrite","https://graph.microsoft.com/Files.ReadWrite.All"].join(" "),y=new URLSearchParams({client_id:f,response_type:"code",redirect_uri:g,scope:_,response_mode:"query",state:m,nonce:v,prompt:"consent",access_type:"offline"}),w=`https://login.microsoftonline.com/${h}/oauth2/v2.0/authorize?${y.toString()}`;console.log("Opening Microsoft OAuth in new window with tenant-specific endpoint...");const b=window.open(w,"microsoft-auth","width=500,height=600,scrollbars=yes,resizable=yes");if(!b){n({title:"Popup Blocked",description:"Please allow popups for this site and try again. You may need to disable ad blockers.",variant:"destructive"}),r(!1);return}let S,N;const E=()=>{S&&clearInterval(S),N&&clearInterval(N)};S=setInterval(()=>{try{b.closed&&(E(),r(!1),setTimeout(()=>{window.location.reload()},1e3))}catch(C){console.warn("Popup monitoring error:",C)}},1e3),N=setInterval(async()=>{await c()||(b.closed||b.close(),E(),r(!1),n({title:"Network Connection Lost",description:"Network connection was lost during authentication. Please check your connection and try again.",variant:"destructive"}))},5e3),setTimeout(()=>{b.closed||(b.close(),E(),r(!1),n({title:"Authentication Timeout",description:"Microsoft authentication took too long. This may be due to network issues. Please try again.",variant:"destructive"}))},5*60*1e3)}catch(d){console.error("Microsoft OAuth initialization error:",d),r(!1);let f=`Failed to initialize Microsoft connection: ${d.message}`;d.message.includes("NetworkError")||d.message.includes("ERR_NAME_NOT_RESOLVED")?f="Network connection error. Please check your internet connection and try again.":d.message.includes("popup")&&(f="Popup was blocked. Please allow popups for this site and try again."),n({title:"Connection Failed",description:f,variant:"destructive"})}},[s,n,l]);return x.useEffect(()=>{a&&e&&(console.log("Microsoft connected, calling onSuccess"),e())},[a,e]),x.useEffect(()=>{(a||!l)&&r(!1)},[a,l]),a?i.jsxs("div",{className:"space-y-4",children:[i.jsx(mE,{}),i.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[i.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Microsoft 365 Connected"}),i.jsx("p",{className:"text-sm text-green-700 mb-3",children:"Your Microsoft account is connected. You can now access Outlook, Teams, and SharePoint features."}),i.jsx(de,{onClick:o,variant:"outline",className:"text-red-600 border-red-200 hover:bg-red-50",children:"Disconnect Microsoft Account"})]})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsx(mE,{}),!l&&i.jsx("div",{className:"p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:i.jsx("p",{className:"text-sm text-yellow-800",children:"Connection rate limited. Please wait before trying again."})}),i.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[i.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Connection Tips:"}),i.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[i.jsx("li",{children:" Ensure you have a stable internet connection"}),i.jsx("li",{children:" Make sure popups are allowed for this site"}),i.jsx("li",{children:" Use admin@iskconbureau.in when prompted"}),i.jsx("li",{children:" Try disabling ad blockers if issues persist"}),i.jsx("li",{children:" Clear browser cache if connection fails"})]})]}),i.jsx(de,{onClick:u,disabled:t||!l,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:t?i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),i.jsx("span",{children:"Connecting to Microsoft..."})]}):i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M11.4 24H0V12.6h11.4V24zM24 24H12.6V12.6H24V24zM11.4 11.4H0V0h11.4v11.4zM24 11.4H12.6V0H24v11.4z"})}),i.jsx("span",{children:"Connect Microsoft 365"})]})})]})};var pE={};const kne=()=>{const{user:e,session:t}=mt(),{profile:r,updateProfile:n,refreshProfile:s}=Iy(),{toast:a}=dt(),[o,l]=x.useState(!1),[c,u]=x.useState(""),[d,f]=x.useState({first_name:"",last_name:"",phone:""}),[h,p]=x.useState({pollsEnabled:!0,pollsInterval:5,outlookSyncEnabled:!0,outlookSyncInterval:10,transcriptEnabled:!0,transcriptInterval:15}),g=x.useCallback(()=>{r&&(f({first_name:r.first_name||"",last_name:r.last_name||"",phone:r.phone||""}),u(r.avatar_url||""))},[r]);x.useEffect(()=>{g()},[g]);const m=async()=>{try{await n(d),l(!1)}catch(w){console.error("Error saving profile:",w)}},v=()=>{g(),l(!1)},_=x.useCallback(w=>{console.log("Image updated in settings:",w),u(w);const b=setTimeout(()=>{s()},500);return()=>clearTimeout(b)},[s]),y=async()=>{if(!e||!t){a({title:"Error",description:"You must be logged in to download a backup.",variant:"destructive"}),console.error("No user or session:",{user:e,session:t});return}try{const w=t.access_token;if(console.log("Session:",t),console.log("Access Token:",w),!w){a({title:"Error",description:"No access token found.",variant:"destructive"}),console.error("No access token in session:",t);return}const b=await fetch(`${pE.NEXT_PUBLIC_SUPABASE_URL}/functions/v1/export-backup`,{method:"POST",headers:{Authorization:`Bearer ${w}`,apikey:pE.NEXT_PUBLIC_SUPABASE_ANON_KEY||"","Content-Type":"application/json"}});if(!b.ok){a({title:"Error",description:"Failed to download backup.",variant:"destructive"}),console.error("Backup fetch failed:",b.status,await b.text());return}const S=await b.blob(),N=window.URL.createObjectURL(S),E=document.createElement("a");E.href=N,E.download="iskcon-portal-backup.json",document.body.appendChild(E),E.click(),E.remove(),window.URL.revokeObjectURL(N),a({title:"Backup Downloaded",description:"Backup file has been downloaded.",variant:"default"})}catch(w){a({title:"Error",description:"An error occurred while downloading backup.",variant:"destructive"}),console.error("Backup error:",w)}};return i.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),i.jsx("p",{className:"text-gray-600",children:"Manage your account and application preferences"})]}),i.jsxs(dl,{defaultValue:"profile",className:"space-y-6",children:[i.jsxs(lo,{className:"grid w-full grid-cols-5",children:[i.jsxs(Br,{value:"profile",className:"flex items-center space-x-2",children:[i.jsx(Ki,{className:"h-4 w-4"}),i.jsx("span",{children:"Profile"})]}),i.jsxs(Br,{value:"integrations",className:"flex items-center space-x-2",children:[i.jsx(Pb,{className:"h-4 w-4"}),i.jsx("span",{children:"Integrations"})]}),i.jsxs(Br,{value:"notifications",className:"flex items-center space-x-2",children:[i.jsx(Ci,{className:"h-4 w-4"}),i.jsx("span",{children:"Notifications"})]}),i.jsxs(Br,{value:"autorefresh",className:"flex items-center space-x-2",children:[i.jsx(Rn,{className:"h-4 w-4"}),i.jsx("span",{children:"Auto-Refresh"})]}),i.jsxs(Br,{value:"backup",className:"flex items-center space-x-2",children:[i.jsx(Gi,{className:"h-4 w-4"}),i.jsx("span",{children:"Backup & Restore"})]})]}),i.jsx(Ur,{value:"profile",children:i.jsxs(He,{children:[i.jsxs(rt,{children:[i.jsxs(st,{className:"flex items-center space-x-2",children:[i.jsx(Ki,{className:"h-5 w-5"}),i.jsx("span",{children:"Profile Information"})]}),i.jsx(sn,{children:"Update your personal information and profile details"})]}),i.jsxs(Ye,{className:"space-y-6",children:[i.jsx(Nne,{currentImageUrl:c,onImageUpdate:_}),i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("h3",{className:"text-lg font-semibold",children:[r==null?void 0:r.first_name," ",r==null?void 0:r.last_name]}),i.jsx("p",{className:"text-gray-600",children:"Member"}),i.jsx(Be,{variant:"secondary",className:"mt-1",children:"Member"})]})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"first_name",children:"First Name"}),i.jsx(lt,{id:"first_name",value:d.first_name,onChange:w=>f(b=>({...b,first_name:w.target.value})),disabled:!o})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"last_name",children:"Last Name"}),i.jsx(lt,{id:"last_name",value:d.last_name,onChange:w=>f(b=>({...b,last_name:w.target.value})),disabled:!o})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"phone",children:"Phone"}),i.jsx(lt,{id:"phone",value:d.phone,onChange:w=>f(b=>({...b,phone:w.target.value})),disabled:!o})]})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"email",children:"Email"}),i.jsx(lt,{id:"email",value:(e==null?void 0:e.email)||"",disabled:!0,className:"bg-gray-50"}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Email cannot be changed from this interface"})]}),i.jsx("div",{className:"flex space-x-2",children:o?i.jsxs(i.Fragment,{children:[i.jsx(de,{onClick:m,children:"Save Changes"}),i.jsx(de,{variant:"outline",onClick:v,children:"Cancel"})]}):i.jsxs(de,{onClick:()=>l(!0),children:[i.jsx(mf,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})})]})]})}),i.jsx(Ur,{value:"integrations",children:i.jsxs(He,{children:[i.jsxs(rt,{children:[i.jsxs(st,{className:"flex items-center space-x-2",children:[i.jsx(Pb,{className:"h-5 w-5"}),i.jsx("span",{children:"Microsoft 365 Integration"})]}),i.jsx(sn,{children:"Connect your Microsoft 365 account to access Outlook, Teams, and SharePoint features"})]}),i.jsx(Ye,{children:i.jsx(jne,{})})]})}),i.jsx(Ur,{value:"notifications",children:i.jsx(Ene,{})}),i.jsx(Ur,{value:"autorefresh",children:i.jsxs(He,{children:[i.jsxs(rt,{children:[i.jsxs(st,{className:"flex items-center space-x-2",children:[i.jsx(Rn,{className:"h-5 w-5"}),i.jsx("span",{children:"Auto-Refresh Settings"})]}),i.jsx(sn,{children:"Control how often the portal automatically refreshes data. Reducing frequency can improve performance."})]}),i.jsxs(Ye,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:"Polls Refresh"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Check for expired polls and updates"})]}),i.jsx(ls,{checked:h.pollsEnabled,onCheckedChange:w=>p(b=>({...b,pollsEnabled:w}))})]}),h.pollsEnabled&&i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ze,{htmlFor:"polls-interval",children:"Interval (minutes):"}),i.jsx(lt,{id:"polls-interval",type:"number",min:"1",max:"60",value:h.pollsInterval,onChange:w=>p(b=>({...b,pollsInterval:parseInt(w.target.value)||5})),className:"w-20"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:"Outlook Sync"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Sync meetings from Microsoft Outlook"})]}),i.jsx(ls,{checked:h.outlookSyncEnabled,onCheckedChange:w=>p(b=>({...b,outlookSyncEnabled:w}))})]}),h.outlookSyncEnabled&&i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ze,{htmlFor:"outlook-interval",children:"Interval (minutes):"}),i.jsx(lt,{id:"outlook-interval",type:"number",min:"5",max:"60",value:h.outlookSyncInterval,onChange:w=>p(b=>({...b,outlookSyncInterval:parseInt(w.target.value)||10})),className:"w-20"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:"Transcript Processing"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Process meeting transcripts automatically"})]}),i.jsx(ls,{checked:h.transcriptEnabled,onCheckedChange:w=>p(b=>({...b,transcriptEnabled:w}))})]}),h.transcriptEnabled&&i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ze,{htmlFor:"transcript-interval",children:"Interval (minutes):"}),i.jsx(lt,{id:"transcript-interval",type:"number",min:"5",max:"60",value:h.transcriptInterval,onChange:w=>p(b=>({...b,transcriptInterval:parseInt(w.target.value)||15})),className:"w-20"})]})]}),i.jsx("div",{className:"pt-4 border-t",children:i.jsxs("p",{className:"text-sm text-gray-500",children:[i.jsx("strong",{children:"Note:"})," These settings will take effect after you refresh the page. Reducing refresh frequency can improve performance but may result in slightly delayed data updates."]})})]})]})}),i.jsx(Ur,{value:"backup",children:i.jsxs(He,{children:[i.jsxs(rt,{children:[i.jsxs(st,{className:"flex items-center space-x-2",children:[i.jsx(Gi,{className:"h-5 w-5"}),i.jsx("span",{children:"Backup & Restore"})]}),i.jsx(sn,{children:"Download a backup of all critical portal data. Use this to safeguard against data loss."})]}),i.jsxs(Ye,{className:"space-y-6",children:[i.jsx(de,{variant:"default",onClick:y,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Download Backup"}),i.jsx("p",{className:"text-sm text-gray-500",children:"This will export all users, meetings, documents, folders, and other essential data as a backup file."})]})]})})]})]})};var Cne=Object.defineProperty,Tne=Object.defineProperties,Ane=Object.getOwnPropertyDescriptors,v0=Object.getOwnPropertySymbols,RR=Object.prototype.hasOwnProperty,MR=Object.prototype.propertyIsEnumerable,gE=(e,t,r)=>t in e?Cne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Pne=(e,t)=>{for(var r in t||(t={}))RR.call(t,r)&&gE(e,r,t[r]);if(v0)for(var r of v0(t))MR.call(t,r)&&gE(e,r,t[r]);return e},Dne=(e,t)=>Tne(e,Ane(t)),Rne=(e,t)=>{var r={};for(var n in e)RR.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&v0)for(var n of v0(e))t.indexOf(n)<0&&MR.call(e,n)&&(r[n]=e[n]);return r},Mne="^\\d+$";function One(e){let t=setTimeout(e,0),r=setTimeout(e,10),n=setTimeout(e,50);return[t,r,n]}function Fne(e){let t=x.useRef();return x.useEffect(()=>{t.current=e}),t.current}var Ine=18,OR=40,Lne=`${OR}px`,$ne=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function Bne({containerRef:e,inputRef:t,pushPasswordManagerStrategy:r,isFocused:n}){let s=x.useRef({done:!1,refocused:!1}),[a,o]=x.useState(!1),[l,c]=x.useState(!1),[u,d]=x.useState(!1),f=x.useMemo(()=>r==="none"?!1:(r==="increase-width"||r==="experimental-no-flickering")&&a&&l,[a,l,r]),h=x.useCallback(()=>{let p=e.current,g=t.current;if(!p||!g||u||r==="none")return;let m=p,v=m.getBoundingClientRect().left+m.offsetWidth,_=m.getBoundingClientRect().top+m.offsetHeight/2,y=v-Ine,w=_;if(!(document.querySelectorAll($ne).length===0&&document.elementFromPoint(y,w)===p)&&(o(!0),d(!0),!s.current.refocused&&document.activeElement===g)){let b=[g.selectionStart,g.selectionEnd];g.blur(),g.focus(),g.setSelectionRange(b[0],b[1]),s.current.refocused=!0}},[e,t,u,r]);return x.useEffect(()=>{let p=e.current;if(!p||r==="none")return;function g(){let v=window.innerWidth-p.getBoundingClientRect().right;c(v>=OR)}g();let m=setInterval(g,1e3);return()=>{clearInterval(m)}},[e,r]),x.useEffect(()=>{let p=n||document.activeElement===t.current;if(r==="none"||!p)return;let g=setTimeout(h,0),m=setTimeout(h,2e3),v=setTimeout(h,5e3),_=setTimeout(()=>{d(!0)},6e3);return()=>{clearTimeout(g),clearTimeout(m),clearTimeout(v),clearTimeout(_)}},[t,n,r,h]),{hasPWMBadge:a,willPushPWMBadge:f,PWM_BADGE_SPACE_WIDTH:Lne}}var FR=x.createContext({}),IR=x.forwardRef((e,t)=>{var r=e,{value:n,onChange:s,maxLength:a,textAlign:o="left",pattern:l=Mne,inputMode:c="numeric",onComplete:u,pushPasswordManagerStrategy:d="increase-width",containerClassName:f,noScriptCSSFallback:h=Une,render:p,children:g}=r,m=Rne(r,["value","onChange","maxLength","textAlign","pattern","inputMode","onComplete","pushPasswordManagerStrategy","containerClassName","noScriptCSSFallback","render","children"]),v,_,y,w,b;let[S,N]=x.useState(typeof m.defaultValue=="string"?m.defaultValue:""),E=n??S,C=Fne(E),T=x.useCallback(we=>{s==null||s(we),N(we)},[s]),D=x.useMemo(()=>l?typeof l=="string"?new RegExp(l):l:null,[l]),F=x.useRef(null),P=x.useRef(null),L=x.useRef({value:E,onChange:T,isIOS:typeof window<"u"&&((_=(v=window==null?void 0:window.CSS)==null?void 0:v.supports)==null?void 0:_.call(v,"-webkit-touch-callout","none"))}),A=x.useRef({prev:[(y=F.current)==null?void 0:y.selectionStart,(w=F.current)==null?void 0:w.selectionEnd,(b=F.current)==null?void 0:b.selectionDirection]});x.useImperativeHandle(t,()=>F.current,[]),x.useEffect(()=>{let we=F.current,Ce=P.current;if(!we||!Ce)return;L.current.value!==we.value&&L.current.onChange(we.value),A.current.prev=[we.selectionStart,we.selectionEnd,we.selectionDirection];function j(){if(document.activeElement!==we){G(null),k(null);return}let z=we.selectionStart,X=we.selectionEnd,ie=we.selectionDirection,U=we.maxLength,B=we.value,Y=A.current.prev,ue=-1,he=-1,le;if(B.length!==0&&z!==null&&X!==null){let at=z===X,Kt=z===B.length&&B.length<U;if(at&&!Kt){let wt=z;if(wt===0)ue=0,he=1,le="forward";else if(wt===U)ue=wt-1,he=wt,le="backward";else if(U>1&&B.length>1){let Or=0;if(Y[0]!==null&&Y[1]!==null){le=wt<Y[1]?"backward":"forward";let pt=Y[0]===Y[1]&&Y[0]<U;le==="backward"&&!pt&&(Or=-1)}ue=Or+wt,he=Or+wt+1}}ue!==-1&&he!==-1&&ue!==he&&F.current.setSelectionRange(ue,he,le)}let Se=ue!==-1?ue:z,Fe=he!==-1?he:X,Ie=le??ie;G(Se),k(Fe),A.current.prev=[Se,Fe,Ie]}if(document.addEventListener("selectionchange",j,{capture:!0}),j(),document.activeElement===we&&O(!0),!document.getElementById("input-otp-style")){let z=document.createElement("style");if(z.id="input-otp-style",document.head.appendChild(z),z.sheet){let X="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";Cu(z.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),Cu(z.sheet,`[data-input-otp]:autofill { ${X} }`),Cu(z.sheet,`[data-input-otp]:-webkit-autofill { ${X} }`),Cu(z.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),Cu(z.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let se=()=>{Ce&&Ce.style.setProperty("--root-height",`${we.clientHeight}px`)};se();let ae=new ResizeObserver(se);return ae.observe(we),()=>{document.removeEventListener("selectionchange",j,{capture:!0}),ae.disconnect()}},[]);let[I,Q]=x.useState(!1),[q,O]=x.useState(!1),[H,G]=x.useState(null),[K,k]=x.useState(null);x.useEffect(()=>{One(()=>{var we,Ce,j,se;(we=F.current)==null||we.dispatchEvent(new Event("input"));let ae=(Ce=F.current)==null?void 0:Ce.selectionStart,z=(j=F.current)==null?void 0:j.selectionEnd,X=(se=F.current)==null?void 0:se.selectionDirection;ae!==null&&z!==null&&(G(ae),k(z),A.current.prev=[ae,z,X])})},[E,q]),x.useEffect(()=>{C!==void 0&&E!==C&&C.length<a&&E.length===a&&(u==null||u(E))},[a,u,C,E]);let W=Bne({containerRef:P,inputRef:F,pushPasswordManagerStrategy:d,isFocused:q}),R=x.useCallback(we=>{let Ce=we.currentTarget.value.slice(0,a);if(Ce.length>0&&D&&!D.test(Ce)){we.preventDefault();return}typeof C=="string"&&Ce.length<C.length&&document.dispatchEvent(new Event("selectionchange")),T(Ce)},[a,T,C,D]),M=x.useCallback(()=>{var we;if(F.current){let Ce=Math.min(F.current.value.length,a-1),j=F.current.value.length;(we=F.current)==null||we.setSelectionRange(Ce,j),G(Ce),k(j)}O(!0)},[a]),re=x.useCallback(we=>{var Ce,j;let se=F.current;if(!L.current.isIOS||!we.clipboardData||!se)return;let ae=we.clipboardData.getData("text/plain");we.preventDefault();let z=(Ce=F.current)==null?void 0:Ce.selectionStart,X=(j=F.current)==null?void 0:j.selectionEnd,ie=(z!==X?E.slice(0,z)+ae+E.slice(X):E.slice(0,z)+ae+E.slice(z)).slice(0,a);if(ie.length>0&&D&&!D.test(ie))return;se.value=ie,T(ie);let U=Math.min(ie.length,a-1),B=ie.length;se.setSelectionRange(U,B),G(U),k(B)},[a,T,D,E]),oe=x.useMemo(()=>({position:"relative",cursor:m.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[m.disabled]),ce=x.useMemo(()=>({position:"absolute",inset:0,width:W.willPushPWMBadge?`calc(100% + ${W.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:W.willPushPWMBadge?`inset(0 ${W.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:o,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[W.PWM_BADGE_SPACE_WIDTH,W.willPushPWMBadge,o]),me=x.useMemo(()=>x.createElement("input",Dne(Pne({autoComplete:m.autoComplete||"one-time-code"},m),{"data-input-otp":!0,"data-input-otp-mss":H,"data-input-otp-mse":K,inputMode:c,pattern:D==null?void 0:D.source,style:ce,maxLength:a,value:E,ref:F,onPaste:we=>{var Ce;re(we),(Ce=m.onPaste)==null||Ce.call(m,we)},onChange:R,onMouseOver:we=>{var Ce;Q(!0),(Ce=m.onMouseOver)==null||Ce.call(m,we)},onMouseLeave:we=>{var Ce;Q(!1),(Ce=m.onMouseLeave)==null||Ce.call(m,we)},onFocus:we=>{var Ce;M(),(Ce=m.onFocus)==null||Ce.call(m,we)},onBlur:we=>{var Ce;O(!1),(Ce=m.onBlur)==null||Ce.call(m,we)}})),[R,M,re,c,ce,a,K,H,m,D==null?void 0:D.source,E]),pe=x.useMemo(()=>({slots:Array.from({length:a}).map((we,Ce)=>{let j=q&&H!==null&&K!==null&&(H===K&&Ce===H||Ce>=H&&Ce<K),se=E[Ce]!==void 0?E[Ce]:null;return{char:se,isActive:j,hasFakeCaret:j&&se===null}}),isFocused:q,isHovering:!m.disabled&&I}),[q,I,a,K,H,m.disabled,E]),je=x.useMemo(()=>p?p(pe):x.createElement(FR.Provider,{value:pe},g),[g,pe,p]);return x.createElement(x.Fragment,null,h!==null&&x.createElement("noscript",null,x.createElement("style",null,h)),x.createElement("div",{ref:P,"data-input-otp-container":!0,style:oe,className:f},je,x.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},me)))});IR.displayName="Input";function Cu(e,t){try{e.insertRule(t)}catch{console.error("input-otp could not insert CSS rule:",t)}}var Une=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const LR=x.forwardRef(({className:e,containerClassName:t,...r},n)=>i.jsx(IR,{ref:n,containerClassName:Te("flex items-center gap-2 has-[:disabled]:opacity-50",t),className:Te("disabled:cursor-not-allowed",e),...r}));LR.displayName="InputOTP";const $R=x.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Te("flex items-center",e),...t}));$R.displayName="InputOTPGroup";const wo=x.forwardRef(({index:e,className:t,...r},n)=>{const s=x.useContext(FR),{char:a,hasFakeCaret:o,isActive:l}=s.slots[e];return i.jsxs("div",{ref:n,className:Te("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",l&&"z-10 ring-2 ring-ring ring-offset-background",t),...r,children:[a,o&&i.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});wo.displayName="InputOTPSlot";const zne=x.forwardRef(({...e},t)=>i.jsx("div",{ref:t,role:"separator",...e,children:i.jsx(S6,{})}));zne.displayName="InputOTPSeparator";const Vne=()=>{const{signIn:e,sendOTP:t,resetPasswordWithOTP:r,loading:n,user:s}=mt(),a=il(),[o,l]=x.useState("login"),[c,u]=x.useState({email:"",password:"",rememberMe:!1,phoneNumber:"",otp:"",newPassword:"",confirmPassword:""}),[d,f]=x.useState(!1),[h,p]=x.useState(""),[g,m]=x.useState(""),[v,_]=x.useState(!1),[y,w]=x.useState(!1),[b,S]=x.useState(!1);x.useEffect(()=>{s&&(console.log("User authenticated, redirecting to dashboard..."),a("/",{replace:!0}))},[s,a]);const N=async L=>{L.preventDefault(),d?(m(c.email),l("forgot-phone")):await e(c.email,c.password,c.rememberMe)},E=async L=>{L.preventDefault();const{error:A,otp:I}=await t(c.phoneNumber);!A&&I&&(p(I),l("forgot-otp"))},C=async L=>{L.preventDefault(),c.otp===h?l("forgot-newPassword"):alert("Invalid OTP. Please try again.")},T=async L=>{if(L.preventDefault(),c.newPassword!==c.confirmPassword){alert("Passwords do not match");return}const{error:A}=await r(g,c.otp,c.newPassword);A||(l("login"),f(!1),u(I=>({...I,password:"",newPassword:"",confirmPassword:"",otp:"",phoneNumber:""})),m(""))},D=(L,A)=>{u(I=>({...I,[L]:A}))},F=()=>{l("login"),f(!1),u(L=>({...L,otp:"",phoneNumber:"",newPassword:"",confirmPassword:""})),m("")},P=async()=>{if(o==="forgot-otp"){const{error:L,otp:A}=await t(c.phoneNumber);!L&&A&&p(A)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-secondary via-white to-secondary/50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"w-full max-w-md",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-20 h-20 flex items-center justify-center mx-auto mb-4 shadow-lg",children:i.jsx("img",{src:"/icons/icon-512.png",alt:"ISKCON Logo",className:"w-full h-full object-contain"})}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"ISKCON BUREAU"}),i.jsx("p",{className:"text-gray-600",children:"Management Portal"})]}),i.jsxs(He,{className:"shadow-xl border-0",children:[i.jsxs(rt,{className:"text-center",children:[i.jsxs(st,{className:"flex items-center justify-center space-x-2",children:[i.jsx(Gi,{className:"h-5 w-5 text-primary"}),i.jsx("span",{children:o.startsWith("forgot-")?"Reset Password":"Secure Login"})]}),i.jsxs(sn,{children:[o==="login"&&!d&&"Enter your credentials to sign in",o==="login"&&d&&"Enter your email to reset password",o==="forgot-phone"&&"Enter your registered mobile number",o==="forgot-otp"&&"Enter the OTP sent to your mobile",o==="forgot-newPassword"&&"Set your new password"]})]}),i.jsx(Ye,{children:o==="login"?i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"email",children:"Email Address"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ja,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(lt,{id:"email",type:"email",placeholder:"your.email@iskconbureau.in",value:c.email,onChange:L=>D("email",L.target.value),className:"pl-10",required:!0})]})]}),!d&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"password",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(sc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(lt,{id:"password",type:v?"text":"password",placeholder:"Enter your password",value:c.password,onChange:L=>D("password",L.target.value),className:"pl-10 pr-10",required:!0}),i.jsx("button",{type:"button",onClick:()=>_(!v),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:v?i.jsx(Zh,{className:"h-4 w-4"}):i.jsx(Rr,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ma,{id:"remember",checked:c.rememberMe,onCheckedChange:L=>D("rememberMe",L)}),i.jsx(ze,{htmlFor:"remember",className:"text-sm",children:"Remember me"})]})]}),i.jsx(de,{type:"submit",disabled:n,className:"w-full bg-primary hover:bg-primary/90",children:n?"Processing...":d?"Continue":"Sign In"}),i.jsx("div",{className:"text-center",children:i.jsx("button",{type:"button",onClick:()=>f(!d),className:"text-sm text-primary hover:underline",children:d?"Back to Login":"Forgot Password?"})})]}):o==="forgot-phone"?i.jsxs("form",{onSubmit:E,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"phone",children:"Phone Number"}),i.jsxs("div",{className:"relative",children:[i.jsx(Pc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(lt,{id:"phone",type:"tel",placeholder:"+1234567890",value:c.phoneNumber,onChange:L=>D("phoneNumber",L.target.value),className:"pl-10",required:!0})]}),i.jsx("p",{className:"text-xs text-gray-500",children:"Enter your registered phone number to receive OTP"})]}),i.jsx(de,{type:"submit",disabled:n,className:"w-full bg-primary hover:bg-primary/90",children:n?"Sending...":"Send OTP"}),i.jsx("div",{className:"text-center",children:i.jsx("button",{type:"button",onClick:F,className:"text-sm text-gray-600 hover:text-primary",children:"Back to Login"})})]}):o==="forgot-otp"?i.jsxs("form",{onSubmit:C,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx(Pc,{className:"h-8 w-8 text-primary mx-auto mb-2"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Enter the 6-digit code sent to ",c.phoneNumber]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"otp",className:"text-center block",children:"Verification Code"}),i.jsx("div",{className:"flex justify-center",children:i.jsx(LR,{maxLength:6,value:c.otp,onChange:L=>D("otp",L),children:i.jsxs($R,{children:[i.jsx(wo,{index:0}),i.jsx(wo,{index:1}),i.jsx(wo,{index:2}),i.jsx(wo,{index:3}),i.jsx(wo,{index:4}),i.jsx(wo,{index:5})]})})})]})]}),i.jsx(de,{type:"submit",disabled:n||c.otp.length!==6,className:"w-full bg-primary hover:bg-primary/90",children:n?"Verifying...":"Verify OTP"}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("button",{type:"button",onClick:()=>l("forgot-phone"),className:"flex items-center text-gray-600 hover:text-primary",children:[i.jsx($0,{className:"h-4 w-4 mr-1"}),"Back"]}),i.jsx("button",{type:"button",onClick:P,className:"text-primary hover:underline",children:"Resend OTP"})]})]}):i.jsxs("form",{onSubmit:T,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"newPassword",children:"New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(sc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(lt,{id:"newPassword",type:y?"text":"password",placeholder:"Enter new password",value:c.newPassword,onChange:L=>D("newPassword",L.target.value),className:"pl-10 pr-10",required:!0}),i.jsx("button",{type:"button",onClick:()=>w(!y),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:y?i.jsx(Zh,{className:"h-4 w-4"}):i.jsx(Rr,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"confirmPassword",children:"Confirm Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(sc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(lt,{id:"confirmPassword",type:b?"text":"password",placeholder:"Confirm new password",value:c.confirmPassword,onChange:L=>D("confirmPassword",L.target.value),className:"pl-10 pr-10",required:!0}),i.jsx("button",{type:"button",onClick:()=>S(!b),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:b?i.jsx(Zh,{className:"h-4 w-4"}):i.jsx(Rr,{className:"h-4 w-4"})})]})]}),i.jsx(de,{type:"submit",disabled:n,className:"w-full bg-primary hover:bg-primary/90",children:n?"Updating...":"Update Password"})]})})]}),i.jsxs("div",{className:"text-center mt-6 text-xs text-gray-500",children:[i.jsx("p",{children:" 2025 ISKCON BUREAU Management Portal"}),i.jsx("p",{children:"Secure  Reliable  Confidential"})]})]})})},Wne=()=>{const[e]=HL(),t=il(),{toast:r}=dt(),[n,s]=x.useState(!0),[a,o]=x.useState("Initializing...");return x.useEffect(()=>{(async()=>{var c,u;try{o("Processing Microsoft callback...");const d=e.get("code"),f=e.get("state"),h=e.get("error"),p=e.get("error_description");if(console.log("Microsoft callback received:",{hasCode:!!d,hasState:!!f,error:h,errorDescription:p,timestamp:new Date().toISOString()}),h){console.error("Microsoft OAuth error:",h,p);const w={access_denied:"You cancelled the Microsoft authentication process.",invalid_request:"Invalid authentication request. Please try again.",invalid_client:"Microsoft application configuration error. Please contact support.",invalid_grant:"Authentication expired. Please try again.",unauthorized_client:"Application not authorized. Please contact support.",server_error:"Microsoft server error. Please try again later.",temporarily_unavailable:"Microsoft services temporarily unavailable. Please try again later."}[h]||p||`Authentication failed: ${h}`;r({title:"Microsoft Authentication Failed",description:w,variant:"destructive"}),t("/",{replace:!0});return}if(!d){console.error("Missing authorization code from Microsoft"),r({title:"Authentication Failed",description:"No authorization code received from Microsoft. Please try connecting again.",variant:"destructive"}),t("/",{replace:!0});return}if(!f){console.error("Missing state parameter from Microsoft"),r({title:"Authentication Failed",description:"Security validation failed. Please try connecting again.",variant:"destructive"}),t("/",{replace:!0});return}o("Validating session...");let g=null,m=null;try{g=sessionStorage.getItem("microsoft_auth_user_id"),m=sessionStorage.getItem("microsoft_auth_timestamp")}catch(y){console.error("Session storage access error:",y)}if(!g||g!==f){console.error("Session validation failed",{storedUserId:g,state:f}),r({title:"Session Error",description:"Authentication session is invalid. Please try connecting again.",variant:"destructive"}),t("/",{replace:!0});return}if(m){const y=Date.now()-parseInt(m),w=30*60*1e3;if(y>w){console.error("Authentication session expired"),r({title:"Session Expired",description:"Authentication session has expired. Please try connecting again.",variant:"destructive"}),t("/",{replace:!0});return}}o("Exchanging code for tokens...");let v,_;for(let y=1;y<=3;y++)try{console.log(`Microsoft auth attempt ${y}/3`),o(`Authenticating with Microsoft (attempt ${y}/3)...`);const{data:w,error:b}=await fe.functions.invoke("microsoft-auth",{body:{code:d,user_id:f}});if(b)throw new Error(`Edge function error: ${b.message}`);if(w!=null&&w.error)throw new Error(w.error);if(!(w!=null&&w.success))throw new Error("Authentication failed - no success response");v=w,console.log("Microsoft authentication successful");break}catch(w){console.error(`Microsoft auth attempt ${y} failed:`,w),_=w,y<3&&await new Promise(b=>setTimeout(b,1e3*y))}if(!v)throw new Error(`Authentication failed after 3 attempts: ${(_==null?void 0:_.message)||"Unknown error"}`);o("Finalizing connection...");try{sessionStorage.removeItem("microsoft_auth_user_id"),sessionStorage.removeItem("microsoft_auth_nonce"),sessionStorage.removeItem("microsoft_auth_timestamp")}catch(y){console.warn("Session cleanup warning:",y)}try{localStorage.setItem("microsoft_auth_success","true"),localStorage.setItem("microsoft_auth_timestamp",Date.now().toString())}catch(y){console.warn("Local storage warning:",y)}r({title:"Microsoft Account Connected!",description:`Successfully connected to ${((c=v.user)==null?void 0:c.displayName)||((u=v.user)==null?void 0:u.mail)||"Microsoft 365"}`}),t("/?microsoft_connected=true",{replace:!0})}catch(d){console.error("Microsoft callback processing error:",d),o("Error occurred...");try{sessionStorage.removeItem("microsoft_auth_user_id"),sessionStorage.removeItem("microsoft_auth_nonce"),sessionStorage.removeItem("microsoft_auth_timestamp"),localStorage.setItem("microsoft_auth_last_error",JSON.stringify({message:d.message,timestamp:new Date().toISOString()}))}catch(f){console.warn("Error cleanup warning:",f)}r({title:"Connection Failed",description:d.message||"Failed to complete Microsoft authentication. Please try again.",variant:"destructive"}),t("/",{replace:!0})}finally{s(!1)}})()},[e,t,r]),n?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Connecting Microsoft Account"}),i.jsx("p",{className:"text-gray-600 mb-4",children:a}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-600 h-2 rounded-full animate-pulse transition-all duration-300",style:{width:"70%"}})}),i.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Please wait while we complete the connection..."})]})}):null},Hne=()=>{const e=il();return console.log("NotFound - Page rendered for path:",window.location.pathname),i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-secondary via-white to-secondary/50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center max-w-md",children:[i.jsx("div",{className:"w-20 h-20 bg-primary rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:i.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-4 h-4 bg-white rounded-full"})})})}),i.jsx("h1",{className:"text-6xl font-bold text-primary mb-4",children:"404"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Page Not Found"}),i.jsx("p",{className:"text-gray-600 mb-8",children:"The page you're looking for doesn't exist or has been moved."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[i.jsxs(de,{onClick:()=>e(-1),variant:"outline",className:"flex items-center space-x-2",children:[i.jsx($0,{className:"h-4 w-4"}),i.jsx("span",{children:"Go Back"})]}),i.jsxs(de,{onClick:()=>e("/"),className:"flex items-center space-x-2 bg-primary hover:bg-primary/90",children:[i.jsx(hf,{className:"h-4 w-4"}),i.jsx("span",{children:"Go Home"})]})]}),i.jsx("div",{className:"mt-8 text-xs text-gray-500",children:i.jsx("p",{children:" 2024 ISKCON BUREAU Management Portal"})})]})})},Gne=()=>{const{sendPushNotification:e}=Qy();return cl(),tu(),Jy(),x.useEffect(()=>{},[e]),x.useEffect(()=>{},[e]),x.useEffect(()=>{},[e]),{}},Kne=new q8({defaultOptions:{queries:{retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4),staleTime:5*60*1e3}}}),Sa=({children:e})=>{const{user:t,loading:r}=mt();return Gne(),r?i.jsx(_C,{}):t?i.jsx(CB,{children:e}):i.jsx(wC,{to:"/auth",replace:!0})},Yne=()=>{const e=x.useRef(!1);return x.useEffect(()=>{var t;e.current||(e.current=!0,(t=window.Capacitor)!=null&&t.isNative&&window.location.hash&&!window.location.pathname.includes(window.location.hash.substring(1))&&window.location.hash.substring(1))},[]),i.jsx(GL,{children:i.jsx(c9,{children:i.jsx(Q8,{client:Kne,children:i.jsxs(Mc,{children:[i.jsx(NF,{}),i.jsx(eI,{}),i.jsx(WL,{children:i.jsx(x.Suspense,{fallback:i.jsx(_C,{}),children:i.jsxs(BL,{children:[i.jsx(En,{path:"/auth",element:i.jsx(Vne,{})}),i.jsx(En,{path:"/microsoft/callback",element:i.jsx(Wne,{})}),i.jsx(En,{path:"/",element:i.jsx(Sa,{children:i.jsx(Pz,{})})}),i.jsx(En,{path:"/dashboard",element:i.jsx(wC,{to:"/",replace:!0})}),i.jsx(En,{path:"/meetings",element:i.jsx(Sa,{children:i.jsx(SK,{})})}),i.jsx(En,{path:"/voting",element:i.jsx(Sa,{children:i.jsx(GK,{})})}),i.jsx(En,{path:"/members",element:i.jsx(Sa,{children:i.jsx(vq,{})})}),i.jsx(En,{path:"/documents",element:i.jsx(Sa,{children:i.jsx(jq,{})})}),i.jsx(En,{path:"/email",element:i.jsx(Sa,{children:i.jsx(Cq,{})})}),i.jsx(En,{path:"/attendance",element:i.jsx(Sa,{children:i.jsx(wne,{})})}),i.jsx(En,{path:"/reports",element:i.jsx(Sa,{children:i.jsx(bne,{})})}),i.jsx(En,{path:"/settings",element:i.jsx(Sa,{children:i.jsx(kne,{})})}),i.jsx(En,{path:"*",element:i.jsx(Hne,{})})]})})})]})})})})};console.log("Main - Application starting...");var jE;console.log("Main - Environment:",{mode:"production",dev:!1,prod:!0,url:window.location.href,pathname:window.location.pathname,hash:window.location.hash,userAgent:navigator.userAgent,timestamp:new Date().toISOString(),isCapacitor:!!window.Capacitor,isNative:((jE=window.Capacitor)==null?void 0:jE.isNative)||!1});window.addEventListener("error",e=>{var t;console.error("Main - Global error caught:",{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,error:e.error,stack:(t=e.error)==null?void 0:t.stack,timestamp:new Date().toISOString()})});window.addEventListener("unhandledrejection",e=>{var t;console.error("Main - Unhandled promise rejection:",{reason:e.reason,promise:e.promise,stack:(t=e.reason)==null?void 0:t.stack,timestamp:new Date().toISOString()})});const Ca=document.getElementById("root");console.log("Main - Root element check:",{found:!!Ca,id:Ca==null?void 0:Ca.id,tagName:Ca==null?void 0:Ca.tagName});if(!Ca){console.error("Main - Root element not found! Creating fallback...");const e=document.createElement("div");e.id="root",e.style.width="100%",e.style.height="100vh",document.body.appendChild(e),console.log("Main - Created fallback root element")}console.log("Main - Creating React root...");const qne=$j(Ca||document.getElementById("root"));try{console.log("Main - Rendering React application..."),qne.render(i.jsx(x.StrictMode,{children:i.jsx(Yne,{})})),console.log("Main - React application rendered successfully")}catch(e){console.error("Main - Critical error rendering React application:",e);const t=document.createElement("div");t.innerHTML=`
    <div style="
      padding: 20px; 
      text-align: center; 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: #f8f9fa;
    ">
      <div style="
        max-width: 500px;
        background: white;
        padding: 40px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      ">
        <h1 style="color: #dc3545; margin-bottom: 20px;">Application Error</h1>
        <p style="margin-bottom: 20px; color: #6c757d;">
          The ISKCON BUREAU Management Portal encountered an error and cannot load properly.
        </p>
        <button 
          onclick="window.location.reload()" 
          style="
            padding: 12px 24px; 
            background: #007bff; 
            color: white; 
            border: none; 
            border-radius: 6px; 
            cursor: pointer;
            font-size: 16px;
            margin-bottom: 20px;
          "
        >
          Refresh Page
        </button>
        <div style="
          margin-top: 20px; 
          padding: 15px; 
          background: #f8f9fa; 
          border: 1px solid #dee2e6; 
          border-radius: 6px;
          text-align: left;
        ">
          <p style="margin: 0; font-size: 14px; color: #6c757d; font-family: monospace;">
            Error: ${(e==null?void 0:e.toString())||"Unknown error"}
          </p>
          <p style="margin: 10px 0 0 0; font-size: 12px; color: #adb5bd;">
            Time: ${new Date().toISOString()}
          </p>
        </div>
      </div>
    </div>
  `,document.body.innerHTML="",document.body.appendChild(t)}
